<!DOCTYPE html>

<html>
<head>
<style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
<script type="text/javascript">
    // vega-embed.js bundle with Vega-Lite version v5.20.1
    var Q=function(){var e=function(r,t){return e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,f){n.__proto__=f;}||function(n,f){for(var i in f)f.hasOwnProperty(i)&&(n[i]=f[i]);},e(r,t);};return function(r,t){e(r,t);function n(){this.constructor=r;}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n);};}(),z=Object.prototype.hasOwnProperty;function P(e,r){return z.call(e,r);}function R(e){if(Array.isArray(e)){for(var r=new Array(e.length),t=0;t<r.length;t++)r[t]=""+t;return r;}if(Object.keys)return Object.keys(e);var n=[];for(var f in e)P(e,f)&&n.push(f);return n;}function h(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e;}}function I(e){for(var r=0,t=e.length,n;r<t;){if(n=e.charCodeAt(r),n>=48&&n<=57){r++;continue;}return!1;}return!0;}function w(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1");}function D(e){return e.replace(/~1/g,"/").replace(/~0/g,"~");}function L(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var r=0,t=e.length;r<t;r++)if(L(e[r]))return!0;}else if(typeof e=="object"){for(var n=R(e),f=n.length,i=0;i<f;i++)if(L(e[n[i]]))return!0;}}return!1;}function J(e,r){var t=[e];for(var n in r){var f=typeof r[n]=="object"?JSON.stringify(r[n],null,2):r[n];typeof f!="undefined"&&t.push(n+": "+f);}return t.join(`
`);}var m=function(e){Q(r,e);function r(t,n,f,i,s){var o=this.constructor,v=e.call(this,J(t,{name:n,index:f,operation:i,tree:s}))||this;return v.name=n,v.index=f,v.operation=i,v.tree=s,Object.setPrototypeOf(v,o.prototype),v.message=J(t,{name:n,index:f,operation:i,tree:s}),v;}return r;}(Error),u=m,Y=h,O={add:function(e,r,t){return e[r]=this.value,{newDocument:t};},remove:function(e,r,t){var n=e[r];return delete e[r],{newDocument:t,removed:n};},replace:function(e,r,t){var n=e[r];return e[r]=this.value,{newDocument:t,removed:n};},move:function(e,r,t){var n=E(t,this.path);n&&(n=h(n));var f=_(t,{op:"remove",path:this.from}).removed;return _(t,{op:"add",path:this.path,value:f}),{newDocument:t,removed:n};},copy:function(e,r,t){var n=E(t,this.from);return _(t,{op:"add",path:this.path,value:h(n)}),{newDocument:t};},test:function(e,r,t){return{newDocument:t,test:A(e[r],this.value)};},_get:function(e,r,t){return this.value=e[r],{newDocument:t};}},K={add:function(e,r,t){return I(r)?e.splice(r,0,this.value):e[r]=this.value,{newDocument:t,index:r};},remove:function(e,r,t){var n=e.splice(r,1);return{newDocument:t,removed:n[0]};},replace:function(e,r,t){var n=e[r];return e[r]=this.value,{newDocument:t,removed:n};},move:O.move,copy:O.copy,test:O.test,_get:O._get};function E(e,r){if(r=="")return e;var t={op:"_get",path:r};return _(e,t),t.value;}function _(e,r,t,n,f,i){if(t===void 0&&(t=!1),n===void 0&&(n=!0),f===void 0&&(f=!0),i===void 0&&(i=0),t&&(typeof t=="function"?t(r,0,e,r.path):y(r,0)),r.path===""){var s={newDocument:e};if(r.op==="add")return s.newDocument=r.value,s;if(r.op==="replace")return s.newDocument=r.value,s.removed=e,s;if(r.op==="move"||r.op==="copy")return s.newDocument=E(e,r.from),r.op==="move"&&(s.removed=e),s;if(r.op==="test"){if(s.test=A(e,r.value),s.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",i,r,e);return s.newDocument=e,s;}else{if(r.op==="remove")return s.removed=e,s.newDocument=null,s;if(r.op==="_get")return r.value=e,s;if(t)throw new u("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,r,e);return s;}}else{n||(e=h(e));var o=r.path||"",v=o.split("/"),a=e,p=1,c=v.length,d=void 0,l=void 0,g=void 0;for(typeof t=="function"?g=t:g=y;;){if(l=v[p],l&&l.indexOf("~")!=-1&&(l=D(l)),f&&(l=="__proto__"||l=="prototype"&&p>0&&v[p-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&d===void 0&&(a[l]===void 0?d=v.slice(0,p).join("/"):p==c-1&&(d=r.path),d!==void 0&&g(r,0,e,d)),p++,Array.isArray(a)){if(l==="-")l=a.length;else{if(t&&!I(l))throw new u("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,r,e);I(l)&&(l=~~l);}if(p>=c){if(t&&r.op==="add"&&l>a.length)throw new u("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,r,e);var s=K[r.op].call(r,a,l,e);if(s.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",i,r,e);return s;}}else if(p>=c){var s=O[r.op].call(r,a,l,e);if(s.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",i,r,e);return s;}if(a=a[l],t&&p<c&&(!a||typeof a!="object"))throw new u("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,r,e);}}}function T(e,r,t,n,f){if(n===void 0&&(n=!0),f===void 0&&(f=!0),t&&!Array.isArray(r))throw new u("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=h(e));for(var i=new Array(r.length),s=0,o=r.length;s<o;s++)i[s]=_(e,r[s],t,!0,f,s),e=i[s].newDocument;return i.newDocument=e,i;}function M(e,r,t){var n=_(e,r);if(n.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",t,r,e);return n.newDocument;}function y(e,r,t,n){if(typeof e!="object"||e===null||Array.isArray(e))throw new u("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,t);if(O[e.op]){if(typeof e.path!="string")throw new u("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,t);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new u('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,t);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new u("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,t);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new u("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,t);if((e.op==="add"||e.op==="replace"||e.op==="test")&&L(e.value))throw new u("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,t);if(t){if(e.op=="add"){var f=e.path.split("/").length,i=n.split("/").length;if(f!==i+1&&f!==i)throw new u("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,t);}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==n)throw new u("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,t);}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=S([s],t);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new u("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,t);}}}else throw new u("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,t);}function S(e,r,t){try{if(!Array.isArray(e))throw new u("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)T(h(r),h(e),t||!0);else{t=t||y;for(var n=0;n<e.length;n++)t(e[n],n,r,void 0);}}catch(f){if(f instanceof u)return f;throw f;}}function A(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){var t=Array.isArray(e),n=Array.isArray(r),f,i,s;if(t&&n){if(i=e.length,i!=r.length)return!1;for(f=i;f--!==0;)if(!A(e[f],r[f]))return!1;return!0;}if(t!=n)return!1;var o=Object.keys(e);if(i=o.length,i!==Object.keys(r).length)return!1;for(f=i;f--!==0;)if(!r.hasOwnProperty(o[f]))return!1;for(f=i;f--!==0;)if(s=o[f],!A(e[s],r[s]))return!1;return!0;}return e!==e&&r!==r;}var q=Object.freeze({__proto__:null,JsonPatchError:u,deepClone:Y,getValueByPointer:E,applyOperation:_,applyPatch:T,applyReducer:M,validator:y,validate:S,_areEquals:A});var U=new WeakMap,G=function(){function e(r){this.observers=new Map,this.obj=r;}return e;}(),W=function(){function e(r,t){this.callback=r,this.observer=t;}return e;}();function X(e){return U.get(e);}function Z(e,r){return e.observers.get(r);}function $(e,r){e.observers.delete(r.callback);}function B(e,r){r.unobserve();}function H(e,r){var t=[],n,f=X(e);if(!f)f=new G(e),U.set(e,f);else{var i=Z(f,r);n=i&&i.observer;}if(n)return n;if(n={},f.value=h(e),r){n.callback=r,n.next=null;var s=function(){N(n);},o=function(){clearTimeout(n.next),n.next=setTimeout(s);};typeof window!="undefined"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o));}return n.patches=t,n.object=e,n.unobserve=function(){N(n),clearTimeout(n.next),$(f,n),typeof window!="undefined"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o));},f.observers.set(r,new W(r,n)),n;}function N(e,r){r===void 0&&(r=!1);var t=U.get(e.object);C(t.value,e.object,e.patches,"",r),e.patches.length&&T(t.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n;}function C(e,r,t,n,f){if(r===e)return;typeof r.toJSON=="function"&&(r=r.toJSON());for(var i=R(r),s=R(e),o=!1,v=s.length-1;v>=0;v--){var a=s[v],p=e[a];if(P(r,a)&&!(r[a]===void 0&&p!==void 0&&Array.isArray(r)===!1)){var c=r[a];typeof p=="object"&&p!=null&&typeof c=="object"&&c!=null&&Array.isArray(p)===Array.isArray(c)?C(p,c,t,n+"/"+w(a),f):p!==c&&(f&&t.push({op:"test",path:n+"/"+w(a),value:h(p)}),t.push({op:"replace",path:n+"/"+w(a),value:h(c)}));}else Array.isArray(e)===Array.isArray(r)?(f&&t.push({op:"test",path:n+"/"+w(a),value:h(p)}),t.push({op:"remove",path:n+"/"+w(a)}),o=!0):(f&&t.push({op:"test",path:n,value:e}),t.push({op:"replace",path:n,value:r}));}if(!o&&i.length==s.length)return;for(var v=0;v<i.length;v++){var a=i[v];!P(e,a)&&r[a]!==void 0&&t.push({op:"add",path:n+"/"+w(a),value:h(r[a])});}}function F(e,r,t){t===void 0&&(t=!1);var n=[];return C(e,r,n,"",t),n;}var x=Object.freeze({__proto__:null,unobserve:B,observe:H,generate:N,compare:F}),j=Object.assign({},q,x,{JsonPatchError:m,deepClone:h,escapePathComponent:w,unescapePathComponent:D});var k=/("(?:[^\\"]|\\.)*")|[:,]/g,L1=function(N,i){var l,x,u;return i=i||{},l=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),x=l===""?Infinity:i.maxLength===void 0?80:i.maxLength,u=i.replacer,function J(e,a,m){var d,n,f,y,h,s,t,g,c,O,r,S;if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),r=JSON.stringify(e,u),r===void 0)return r;if(t=x-a.length-m,r.length<=t&&(c=r.replace(k,function(p,v){return v||p+" ";}),c.length<=t))return c;if(u!=null&&(e=JSON.parse(r),u=void 0),typeof e=="object"&&e!==null){if(g=a+l,f=[],n=0,Array.isArray(e))for(O="[",d="]",t=e.length;n<t;n++)f.push(J(e[n],g,n===t-1?0:1)||"null");else for(O="{",d="}",s=Object.keys(e),t=s.length;n<t;n++)y=s[n],h=JSON.stringify(y)+": ",S=J(e[y],g,h.length+(n===t-1?0:1)),S!==void 0&&f.push(h+S);if(f.length>0)return[O,l+f.join(`,
`+g),d].join(`
`+a);}return r;}(N,"",0);};function f(n,t,e){return n.fields=t||[],n.fname=e,n;}function H1(n){return n==null?null:n.fname;}function R1(n){return n==null?null:n.fields;}function I1(n){return n.length===1?Q1(n[0]):Y1(n);}const Q1=n=>function(t){return t[n];},Y1=n=>{const t=n.length;return function(e){for(let r=0;r<t;++r)e=e[n[r]];return e;};};function b(n){throw Error(n);}function N1(n){const t=[],e=n.length;let r=null,o=0,u="",i,c,s;n=n+"";function l(){t.push(u+n.substring(i,c)),u="",i=c+1;}for(i=c=0;c<e;++c)if(s=n[c],s==="\\")u+=n.substring(i,c++),i=c;else if(s===r)l(),r=null,o=-1;else{if(r)continue;i===o&&s==='"'||i===o&&s==="'"?(i=c+1,r=s):s==="."&&!o?c>i?l():i=c+1:s==="["?(c>i&&l(),o=i=c+1):s==="]"&&(o||b("Access path missing open bracket: "+n),o>0&&l(),o=0,i=c+1);}return o&&b("Access path missing closing bracket: "+n),r&&b("Access path missing closing quote: "+n),c>i&&(c++,l()),t;}function z1(n,t,e){const r=N1(n);return n=r.length===1?r[0]:n,f((e&&e.get||I1)(r),[n],t||n);}const k1=z1("id"),A1=f(n=>n,[],"identity"),y1=f(()=>0,[],"zero"),v=f(()=>1,[],"one"),_1=f(()=>!0,[],"true"),nn=f(()=>!1,[],"false");function tn(n,t,e){const r=[t].concat([].slice.call(e));console[n].apply(console,r);}function en(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tn,r=n||0;return{level(o){return arguments.length?(r=+o,this):r;},error(){return r>=1&&e(t||"error","ERROR",arguments),this;},warn(){return r>=2&&e(t||"warn","WARN",arguments),this;},info(){return r>=3&&e(t||"log","INFO",arguments),this;},debug(){return r>=4&&e(t||"log","DEBUG",arguments),this;}};}var w1=Array.isArray;function M1(n){return n===Object(n);}const U1=n=>n!=="__proto__";function rn(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.reduce((r,o)=>{for(const u in o)if(u==="signals")r.signals=on(r.signals,o.signals);else{const i=u==="legend"?{layout:1}:u==="style"?!0:null;S1(r,u,o[u],i);}return r;},{});}function S1(n,t,e,r){if(!U1(t))return;let o,u;if(M1(e)&&!w1(e)){u=M1(n[t])?n[t]:n[t]={};for(o in e)r&&(r===!0||r[o])?S1(u,o,e[o]):U1(o)&&(u[o]=e[o]);}else n[t]=e;}function on(n,t){if(n==null)return t;const e={},r=[];function o(u){e[u.name]||(e[u.name]=1,r.push(u));}return t.forEach(o),n.forEach(o),r;}function a(n){return n[n.length-1];}function L2(n){return n==null||n===""?null:+n;}const B1=n=>t=>n*Math.exp(t),G1=n=>t=>Math.log(n*t),W1=n=>t=>Math.sign(t)*Math.log1p(Math.abs(t/n)),x1=n=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*n,E1=n=>t=>t<0?-Math.pow(-t,n):Math.pow(t,n);function d(n,t,e,r){const o=e(n[0]),u=e(a(n)),i=(u-o)*t;return[r(o-i),r(u-i)];}function un(n,t){return d(n,t,L2,A1);}function cn(n,t){var e=Math.sign(n[0]);return d(n,t,G1(e),B1(e));}function sn(n,t,e){return d(n,t,E1(e),E1(1/e));}function ln(n,t,e){return d(n,t,W1(e),x1(e));}function j1(n,t,e,r,o){const u=r(n[0]),i=r(a(n)),c=t!=null?r(t):(u+i)/2;return[o(c+(u-c)*e),o(c+(i-c)*e)];}function fn(n,t,e){return j1(n,t,e,L2,A1);}function gn(n,t,e){const r=Math.sign(n[0]);return j1(n,t,e,G1(r),B1(r));}function an(n,t,e,r){return j1(n,t,e,E1(r),E1(1/r));}function hn(n,t,e,r){return j1(n,t,e,W1(r),x1(r));}function pn(n){return 1+~~(new Date(n).getMonth()/3);}function mn(n){return 1+~~(new Date(n).getUTCMonth()/3);}function p(n){return n!=null?w1(n)?n:[n]:[];}function bn(n,t,e){let r=n[0],o=n[1],u;return o<r&&(u=o,o=r,r=u),u=o-r,u>=e-t?[t,e]:[r=Math.min(Math.max(r,t),e-u),r+u];}function O1(n){return typeof n=="function";}const wn="descending";function Mn(n,t,e){e=e||{},t=p(t)||[];const r=[],o=[],u={},i=e.comparator||En;return p(n).forEach((c,s)=>{if(c==null)return;r.push(t[s]===wn?-1:1),o.push(c=O1(c)?c:z1(c,null,e)),(R1(c)||[]).forEach(l=>u[l]=1);}),o.length===0?null:f(i(o,r),Object.keys(u));}const P1=(n,t)=>(n<t||n==null)&&t!=null?-1:(n>t||t==null)&&n!=null?1:(t=t instanceof Date?+t:t,n=n instanceof Date?+n:n)!==n&&t===t?-1:t!==t&&n===n?1:0,En=(n,t)=>n.length===1?dn(n[0],t[0]):jn(n,t,n.length),dn=(n,t)=>function(e,r){return P1(n(e),n(r))*t;},jn=(n,t,e)=>(t.push(0),function(r,o){let u,i=0,c=-1;for(;i===0&&++c<e;)u=n[c],i=P1(u(r),u(o));return i*t[c];});function On(n){return O1(n)?n:()=>n;}function Dn(n,t){let e;return r=>{e&&clearTimeout(e),e=setTimeout(()=>(t(r),e=null),n);};}function J1(n){for(let t,e,r=1,o=arguments.length;r<o;++r){t=arguments[r];for(e in t)n[e]=t[e];}return n;}function Nn(n,t){let e=0,r,o,u,i;if(n&&(r=n.length))if(t==null){for(o=n[e];e<r&&(o==null||o!==o);o=n[++e]);for(u=i=o;e<r;++e)o=n[e],o!=null&&(o<u&&(u=o),o>i&&(i=o));}else{for(o=t(n[e]);e<r&&(o==null||o!==o);o=t(n[++e]));for(u=i=o;e<r;++e)o=t(n[e]),o!=null&&(o<u&&(u=o),o>i&&(i=o));}return[u,i];}function zn(n,t){const e=n.length;let r=-1,o,u,i,c,s;if(t==null){for(;++r<e;)if(u=n[r],u!=null&&u>=u){o=i=u;break;}if(r===e)return[-1,-1];for(c=s=r;++r<e;)u=n[r],u!=null&&(o>u&&(o=u,c=r),i<u&&(i=u,s=r));}else{for(;++r<e;)if(u=t(n[r],r,n),u!=null&&u>=u){o=i=u;break;}if(r===e)return[-1,-1];for(c=s=r;++r<e;)u=t(n[r],r,n),u!=null&&(o>u&&(o=u,c=r),i<u&&(i=u,s=r));}return[c,s];}const An=Object.prototype.hasOwnProperty;function g(n,t){return An.call(n,t);}const D1={};function Sn(n){let t={},e;function r(u){return g(t,u)&&t[u]!==D1;}const o={size:0,empty:0,object:t,has:r,get(u){return r(u)?t[u]:void 0;},set(u,i){return r(u)||(++o.size,t[u]===D1&&--o.empty),t[u]=i,this;},delete(u){return r(u)&&(--o.size,++o.empty,t[u]=D1),this;},clear(){o.size=o.empty=0,o.object=t={};},test(u){return arguments.length?(e=u,o):e;},clean(){const u={};let i=0;for(const c in t){const s=t[c];s!==D1&&(!e||!e(s))&&(u[c]=s,++i);}o.size=i,o.empty=0,o.object=t=u;}};return n&&Object.keys(n).forEach(u=>{o.set(u,n[u]);}),o;}function Ln(n,t,e,r,o,u){if(!e&&e!==0)return u;const i=+e;let c=n[0],s=a(n),l;s<c&&(l=c,c=s,s=l),l=Math.abs(t-c);const h=Math.abs(s-t);return l<h&&l<=i?r:h<=i?o:u;}function Pn(n,t,e){const r=n.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:n,writable:!0,enumerable:!0,configurable:!0}),J1(r,e);}function Rn(n,t,e,r){let o=t[0],u=t[t.length-1],i;return o>u&&(i=o,o=u,u=i),e=e===void 0||e,r=r===void 0||r,(e?o<=n:o<n)&&(r?n<=u:n<u);}function In(n){return typeof n=="boolean";}function K1(n){return Object.prototype.toString.call(n)==="[object Date]";}function Cn(n){return n&&O1(n[Symbol.iterator]);}function V(n){return typeof n=="number";}function $n(n){return Object.prototype.toString.call(n)==="[object RegExp]";}function X1(n){return typeof n=="string";}function qn(n,t,e){n&&(n=t?p(n).map(c=>c.replace(/\\(.)/g,"$1")):p(n));const r=n&&n.length,o=e&&e.get||I1,u=c=>o(t?[c]:N1(c));let i;if(!r)i=function(){return"";};else if(r===1){const c=u(n[0]);i=function(s){return""+c(s);};}else{const c=n.map(u);i=function(s){let l=""+c[0](s),h=0;for(;++h<r;)l+="|"+c[h](s);return l;};}return f(i,n,"key");}function Fn(n,t){const e=n[0],r=a(n),o=+t;return o?o===1?r:e+o*(r-e):e;}const Tn=1e4;function Un(n){n=+n||Tn;let t,e,r;const o=()=>{t={},e={},r=0;},u=(i,c)=>(++r>n&&(e=t,t={},r=1),t[i]=c);return o(),{clear:o,has:i=>g(t,i)||g(e,i),get:i=>g(t,i)?t[i]:g(e,i)?u(i,e[i]):void 0,set:(i,c)=>g(t,i)?t[i]=c:u(i,c)};}function Bn(n,t,e,r){const o=t.length,u=e.length;if(!u)return t;if(!o)return e;const i=r||new t.constructor(o+u);let c=0,s=0,l=0;for(;c<o&&s<u;++l)i[l]=n(t[c],e[s])>0?e[s++]:t[c++];for(;c<o;++c,++l)i[l]=t[c];for(;s<u;++s,++l)i[l]=e[s];return i;}function m1(n,t){let e="";for(;--t>=0;)e+=n;return e;}function Gn(n,t,e,r){const o=e||" ",u=n+"",i=t-u.length;return i<=0?u:r==="left"?m1(o,i)+u:r==="center"?m1(o,~~(i/2))+u+m1(o,Math.ceil(i/2)):u+m1(o,i);}function Wn(n){return n&&a(n)-n[0]||0;}function Z1(n){return w1(n)?"["+n.map(Z1)+"]":M1(n)||X1(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n;}function xn(n){return n==null||n===""?null:!n||n==="false"||n==="0"?!1:!!n;}const Jn=n=>V(n)||K1(n)?n:Date.parse(n);function Kn(n,t){return t=t||Jn,n==null||n===""?null:t(n);}function Vn(n){return n==null||n===""?null:n+"";}function Xn(n){const t={},e=n.length;for(let r=0;r<e;++r)t[n[r]]=!0;return t;}function Zn(n,t,e,r){const o=r??"…",u=n+"",i=u.length,c=Math.max(0,t-o.length);return i<=t?u:e==="left"?o+u.slice(i-c):e==="center"?u.slice(0,Math.ceil(c/2))+o+u.slice(i-~~(c/2)):u.slice(0,c)+o;}function Hn(n,t,e){if(n)if(t){const r=n.length;for(let o=0;o<r;++o){const u=t(n[o]);u&&e(u,o,n);}}else n.forEach(e);}var V1={},N2={},A2=34,R2=10,E2=13;function y2(r){return new Function("d","return {"+r.map(function(o,n){return JSON.stringify(o)+": d["+n+'] || ""';}).join(",")+"}");}function Z2(r,o){var n=y2(r);return function(a,f){return o(n(a),f,r);};}function I2(r){var o=Object.create(null),n=[];return r.forEach(function(a){for(var f in a)f in o||n.push(o[f]=f);}),n;}function u1(r,o){var n=r+"",a=n.length;return a<o?new Array(o-a+1).join(0)+n:n;}function H2(r){return r<0?"-"+u1(-r,6):r>9999?"+"+u1(r,6):u1(r,4);}function L3(r){var o=r.getUTCHours(),n=r.getUTCMinutes(),a=r.getUTCSeconds(),f=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":H2(r.getUTCFullYear())+"-"+u1(r.getUTCMonth()+1,2)+"-"+u1(r.getUTCDate(),2)+(f?"T"+u1(o,2)+":"+u1(n,2)+":"+u1(a,2)+"."+u1(f,3)+"Z":a?"T"+u1(o,2)+":"+u1(n,2)+":"+u1(a,2)+"Z":n||o?"T"+u1(o,2)+":"+u1(n,2)+"Z":"");}function j2(r){var o=new RegExp('["'+r+`
\r]`),n=r.charCodeAt(0);function a(t,e){var c,i,s=f(t,function(p,m){if(c)return c(p,m-1);i=p,c=e?Z2(p,e):y2(p);});return s.columns=i||[],s;}function f(t,e){var c=[],i=t.length,s=0,p=0,m,F=i<=0,d=!1;t.charCodeAt(i-1)===R2&&--i,t.charCodeAt(i-1)===E2&&--i;function B(){if(F)return N2;if(d)return d=!1,V1;var T,g=s,h;if(t.charCodeAt(g)===A2){for(;s++<i&&t.charCodeAt(s)!==A2||t.charCodeAt(++s)===A2;);return(T=s)>=i?F=!0:(h=t.charCodeAt(s++))===R2?d=!0:h===E2&&(d=!0,t.charCodeAt(s)===R2&&++s),t.slice(g+1,T-1).replace(/""/g,'"');}for(;s<i;){if((h=t.charCodeAt(T=s++))===R2)d=!0;else if(h===E2)d=!0,t.charCodeAt(s)===R2&&++s;else if(h!==n)continue;return t.slice(g,T);}return F=!0,t.slice(g,i);}for(;(m=B())!==N2;){for(var C=[];m!==V1&&m!==N2;)C.push(m),m=B();if(e&&(C=e(C,p++))==null)continue;c.push(C);}return c;}function U(t,e){return t.map(function(c){return e.map(function(i){return w(c[i]);}).join(r);});}function O(t,e){return e==null&&(e=I2(t)),[e.map(w).join(r)].concat(U(t,e)).join(`
`);}function M(t,e){return e==null&&(e=I2(t)),U(t,e).join(`
`);}function P(t){return t.map(D).join(`
`);}function D(t){return t.map(w).join(r);}function w(t){return t==null?"":t instanceof Date?L3(t):o.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;}return{parse:a,parseRows:f,format:O,formatBody:M,formatRows:P,formatRow:D,formatValue:w};}var v1=j2(","),S2=v1.parse,Y2=v1.parseRows,z2=v1.format,J2=v1.formatBody,Q2=v1.formatRows,W2=v1.formatRow,$1=v1.formatValue,l=j2("	"),k2=l.parse,q1=l.parseRows,G2=l.format,K2=l.formatBody,X2=l.formatRows,_2=l.formatRow,b1=l.formatValue;new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function P2(n){return n;}function w2(n){if(n==null)return P2;var u,s,c=n.scale[0],i=n.scale[1],l=n.translate[0],y=n.translate[1];return function(b,f){f||(u=s=0);var t=2,r=b.length,e=new Array(r);for(e[0]=(u+=b[0])*c+l,e[1]=(s+=b[1])*i+y;t<r;)e[t]=b[t],++t;return e;};}function q2(n,u){for(var s,c=n.length,i=c-u;i<--c;)s=n[i],n[i++]=n[c],n[c]=s;}function z3(n,u){return typeof u=="string"&&(u=n.objects[u]),u.type==="GeometryCollection"?{type:"FeatureCollection",features:u.geometries.map(function(s){return k3(n,s);})}:k3(n,u);}function k3(n,u){var s=u.id,c=u.bbox,i=u.properties==null?{}:u.properties,l=E3(n,u);return s==null&&c==null?{type:"Feature",properties:i,geometry:l}:c==null?{type:"Feature",id:s,properties:i,geometry:l}:{type:"Feature",id:s,bbox:c,properties:i,geometry:l};}function E3(n,u){var s=w2(n.transform),c=n.arcs;function i(r,e){e.length&&e.pop();for(var a=c[r<0?~r:r],o=0,p=a.length;o<p;++o)e.push(s(a[o],o));r<0&&q2(e,p);}function l(r){return s(r);}function y(r){for(var e=[],a=0,o=r.length;a<o;++a)i(r[a],e);return e.length<2&&e.push(e[0]),e;}function b(r){for(var e=y(r);e.length<4;)e.push(e[0]);return e;}function f(r){return r.map(b);}function t(r){var e=r.type,a;switch(e){case"GeometryCollection":return{type:e,geometries:r.geometries.map(t)};case"Point":a=l(r.coordinates);break;case"MultiPoint":a=r.coordinates.map(l);break;case"LineString":a=y(r.arcs);break;case"MultiLineString":a=r.arcs.map(y);break;case"Polygon":a=f(r.arcs);break;case"MultiPolygon":a=r.arcs.map(f);break;default:return null;}return{type:e,coordinates:a};}return t(u);}function A3(n,u){var s={},c={},i={},l=[],y=-1;u.forEach(function(t,r){var e=n.arcs[t<0?~t:t],a;e.length<3&&!e[1][0]&&!e[1][1]&&(a=u[++y],u[y]=t,u[r]=a);}),u.forEach(function(t){var r=b(t),e=r[0],a=r[1],o,p;if(o=i[e])if(delete i[o.end],o.push(t),o.end=a,p=c[a]){delete c[p.start];var h=p===o?o:o.concat(p);c[h.start=o.start]=i[h.end=p.end]=h;}else c[o.start]=i[o.end]=o;else if(o=c[a])if(delete c[o.start],o.unshift(t),o.start=e,p=i[e]){delete i[p.end];var d=p===o?o:p.concat(o);c[d.start=p.start]=i[d.end=o.end]=d;}else c[o.start]=i[o.end]=o;else o=[t],c[o.start=e]=i[o.end=a]=o;});function b(t){var r=n.arcs[t<0?~t:t],e=r[0],a;return n.transform?(a=[0,0],r.forEach(function(o){a[0]+=o[0],a[1]+=o[1];})):a=r[r.length-1],t<0?[a,e]:[e,a];}function f(t,r){for(var e in t){var a=t[e];delete r[a.start],delete a.start,delete a.end,a.forEach(function(o){s[o<0?~o:o]=1;}),l.push(a);}}return f(i,c),f(c,i),u.forEach(function(t){s[t<0?~t:t]||l.push([t]);}),l;}function _3(n){return E3(n,G3.apply(this,arguments));}function G3(n,u,s){var c,i,l;if(arguments.length>1)c=j3(n,u,s);else for(i=0,c=new Array(l=n.arcs.length);i<l;++i)c[i]=i;return{type:"MultiLineString",arcs:A3(n,c)};}function j3(n,u,s){var c=[],i=[],l;function y(e){var a=e<0?~e:e;(i[a]||(i[a]=[])).push({i:e,g:l});}function b(e){e.forEach(y);}function f(e){e.forEach(b);}function t(e){e.forEach(f);}function r(e){switch(l=e,e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"LineString":b(e.arcs);break;case"MultiLineString":case"Polygon":f(e.arcs);break;case"MultiPolygon":t(e.arcs);break;}}return r(u),i.forEach(s==null?function(e){c.push(e[0].i);}:function(e){s(e[0].g,e[e.length-1].g)&&c.push(e[0].i);}),c;}class f1 extends Map{constructor(e,r=i){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[s,c]of e)this.set(s,c);}get(e){return super.get(n(this,e));}has(e){return super.has(n(this,e));}set(e,r){return super.set(u2(this,e),r);}delete(e){return super.delete(o(this,e));}}class h1 extends Set{constructor(e,r=i){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const s of e)this.add(s);}has(e){return super.has(n(this,e));}add(e){return super.add(u2(this,e));}delete(e){return super.delete(o(this,e));}}function n({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):r;}function u2({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):(t.set(s,r),r);}function o({_intern:t,_key:e},r){const s=e(r);return t.has(s)&&(r=t.get(s),t.delete(s)),r;}function i(t){return t!==null&&typeof t=="object"?t.valueOf():t;}function a1(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN;}function K3(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN;}function G4(n){let e,t,i;n.length!==2?(e=a1,t=(u,c)=>a1(n(u),c),i=(u,c)=>n(u)-c):(e=n===a1||n===K3?n:xn1,t=n,i=n);function r(u,c,l=0,s=u.length){if(l<s){if(e(c,c)!==0)return s;do{const d=l+s>>>1;t(u[d],c)<0?l=d+1:s=d;}while(l<s)}return l;}function f(u,c,l=0,s=u.length){if(l<s){if(e(c,c)!==0)return s;do{const d=l+s>>>1;t(u[d],c)<=0?l=d+1:s=d;}while(l<s)}return l;}function o(u,c,l=0,s=u.length){const d=r(u,c,l,s-1);return d>l&&i(u[d-1],c)>-i(u[d],c)?d-1:d;}return{left:r,center:o,right:f};}function xn1(){return 0;}function z4(n){return n===null?NaN:+n;}function*bn1(n,e){if(e===void 0)for(let t of n)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let i of n)(i=e(i,++t,n))!=null&&(i=+i)>=i&&(yield i);}}const P3=G4(a1),U2=P3.right,An1=P3.left,pn1=G4(z4).center;X3(B2),X3(Rn1);function X3(n){return function(e,t,i=t){if(!((t=+t)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:f,height:o}=e;if(!((f=Math.floor(f))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/f))>=0))throw new RangeError("invalid height");if(!f||!o||!t&&!i)return e;const u=t&&n(t),c=i&&n(i),l=r.slice();return u&&c?(y3(u,l,r,f,o),y3(u,r,l,f,o),y3(u,l,r,f,o),x2(c,r,l,f,o),x2(c,l,r,f,o),x2(c,r,l,f,o)):u?(y3(u,r,l,f,o),y3(u,l,r,f,o),y3(u,r,l,f,o)):c&&(x2(c,r,l,f,o),x2(c,l,r,f,o),x2(c,r,l,f,o)),e;};}function y3(n,e,t,i,r){for(let f=0,o=i*r;f<o;)n(e,t,f,f+=i,1);}function x2(n,e,t,i,r){for(let f=0,o=i*r;f<i;++f)n(e,t,f,f+o,i);}function Rn1(n){const e=B2(n);return(t,i,r,f,o)=>{r<<=2,f<<=2,o<<=2,e(t,i,r+0,f+0,o),e(t,i,r+1,f+1,o),e(t,i,r+2,f+2,o),e(t,i,r+3,f+3,o);};}function B2(n){const e=Math.floor(n);if(e===n)return qn1(n);const t=n-e,i=2*n+1;return(r,f,o,u,c)=>{if(!((u-=c)>=o))return;let l=e*f[o];const s=c*e,d=s+c;for(let h=o,m=o+s;h<m;h+=c)l+=f[Math.min(u,h)];for(let h=o,m=u;h<=m;h+=c)l+=f[Math.min(u,h+s)],r[h]=(l+t*(f[Math.max(o,h-d)]+f[Math.min(u,h+d)]))/i,l-=f[Math.max(o,h-s)];};}function qn1(n){const e=2*n+1;return(t,i,r,f,o)=>{if(!((f-=o)>=r))return;let u=n*i[r];const c=o*n;for(let l=r,s=r+c;l<s;l+=o)u+=i[Math.min(f,l)];for(let l=r,s=f;l<=s;l+=o)u+=i[Math.min(f,l+c)],t[l]=u/e,u-=i[Math.max(r,l-c)];};}function Y3(n,e){let t=0,i,r=0,f=0;if(e===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++t,f+=i*(o-r));else{let o=-1;for(let u of n)(u=e(u,++o,n))!=null&&(u=+u)>=u&&(i=u-r,r+=i/++t,f+=i*(u-r));}if(t>1)return f/(t-1);}function v2(n,e){const t=Y3(n,e);return t&&Math.sqrt(t);}class C1{constructor(){this._partials=new Float64Array(32),this._n=0;}add(e){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const f=t[r],o=e+f,u=Math.abs(e)<Math.abs(f)?e-(o-f):f-(o-e);u&&(t[i++]=u),e=o;}return t[i]=e,this._n=i+1,this;}valueOf(){const e=this._partials;let t=this._n,i,r,f,o=0;if(t>0){for(o=e[--t];t>0&&!(i=o,r=e[--t],o=i+r,f=r-(o-i),f););t>0&&(f<0&&e[t-1]<0||f>0&&e[t-1]>0)&&(r=f*2,i=o+r,r==i-o&&(o=i));}return o;}}function un1(n,e){return Array.from(e,t=>n[t]);}function W3(n=a1){if(n===a1)return p1;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=n(e,t);return i||i===0?i:(n(t,t)===0)-(n(e,e)===0);};}function p1(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0);}var Cn1=Array.prototype,Qn=Cn1.slice;const Wn1=Math.sqrt(50),$n1=Math.sqrt(10),_n=Math.sqrt(2);function D2(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),f=i/Math.pow(10,r),o=f>=Wn1?10:f>=$n1?5:f>=_n?2:1;let u,c,l;return r<0?(l=Math.pow(10,-r)/o,u=Math.round(n*l),c=Math.round(e*l),u/l<n&&++u,c/l>e&&--c,l=-l):(l=Math.pow(10,r)*o,u=Math.round(n/l),c=Math.round(e/l),u*l<n&&++u,c*l>e&&--c),c<u&&.5<=t&&t<2?D2(n,e,t*2):[u,c,l];}function ln1(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,f,o]=i?D2(e,n,t):D2(n,e,t);if(!(f>=r))return[];const u=f-r+1,c=new Array(u);if(i)if(o<0)for(let l=0;l<u;++l)c[l]=(f-l)/-o;else for(let l=0;l<u;++l)c[l]=(f-l)*o;else if(o<0)for(let l=0;l<u;++l)c[l]=(r+l)/-o;else for(let l=0;l<u;++l)c[l]=(r+l)*o;return c;}function E4(n,e,t){return e=+e,n=+n,t=+t,D2(n,e,t)[2];}function kn(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?E4(e,n,t):E4(n,e,t);return(i?-1:1)*(r<0?1/-r:r);}function _4(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(t<r||t===void 0&&r>=r)&&(t=r);}return t;}function L4(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(t>r||t===void 0&&r>=r)&&(t=r);}return t;}function S3(n,e,t=0,i=Infinity,r){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(n.length-1,i)),!(t<=e&&e<=i))return n;for(r=r===void 0?p1:W3(r);i>t;){if(i-t>600){const c=i-t+1,l=e-t+1,s=Math.log(c),d=.5*Math.exp(2*s/3),h=.5*Math.sqrt(s*d*(c-d)/c)*(l-c/2<0?-1:1),m=Math.max(t,Math.floor(e-l*d/c+h)),w=Math.min(i,Math.floor(e+(c-l)*d/c+h));S3(n,e,m,w,r);}const f=n[e];let o=t,u=i;for(q3(n,t,e),r(n[i],f)>0&&q3(n,t,i);o<u;){for(q3(n,o,u),++o,--u;r(n[o],f)<0;)++o;for(;r(n[u],f)>0;)--u;}r(n[t],f)===0?q3(n,t,u):(++u,q3(n,u,i)),u<=e&&(t=u+1),e<=u&&(i=u-1);}return n;}function q3(n,e,t){const i=n[e];n[e]=n[t],n[t]=i;}function O2(n,e,t){if(n=Float64Array.from(bn1(n,t)),!(i=n.length)||isNaN(e=+e))return;if(e<=0||i<2)return L4(n);if(e>=1)return _4(n);var i,r=(i-1)*e,f=Math.floor(r),o=_4(S3(n,f).subarray(0,f+1)),u=L4(n.subarray(f+1));return o+(u-o)*(r-f);}function Hn1(n,e,t=z4){if(!(i=n.length)||isNaN(e=+e))return;if(e<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,r=(i-1)*e,f=Math.floor(r),o=+t(n[f],f,n),u=+t(n[f+1],f+1,n);return o+(u-o)*(r-f);}function Pn1(n,e){let t=0,i=0;if(e===void 0)for(let r of n)r!=null&&(r=+r)>=r&&(++t,i+=r);else{let r=-1;for(let f of n)(f=e(f,++r,n))!=null&&(f=+f)>=f&&(++t,i+=f);}if(t)return i/t;}function Xn1(n,e){return O2(n,.5,e);}function*vn(n){for(const e of n)yield*e;}function ne(n){return Array.from(vn(n));}function ie(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,f=new Array(r);++i<r;)f[i]=n+i*t;return f;}wn1(Math.random);function wn1(n){return function(t,i=0,r=t.length){let f=r-(i=+i);for(;f;){const o=n()*f--|0,u=t[f+i];t[f+i]=t[o+i],t[o+i]=u;}return t;};}function de(n,e){let t=0;if(e===void 0)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r);}return t;}function Ae(n,...e){n=new h1(n),e=e.map(pe);n:for(const t of n)for(const i of e)if(!i.has(t)){n.delete(t);continue n;}return n;}function pe(n){return n instanceof h1?n:new h1(n);}function Ne(...n){const e=new h1;for(const t of n)for(const i of t)e.add(i);return e;}function W4(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10);}function j4(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,i=n.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+n.slice(e+1)];}function b2(n){return n=j4(Math.abs(n)),n?n[1]:NaN;}function _5(n,t){return function(e,i){for(var o=e.length,f=[],c=0,m=n[0],x=0;o>0&&m>0&&!(x+m+1>i&&(m=Math.max(1,i-x)),f.push(e.substring(o-=m,o+m)),(x+=m+1)>i);)m=n[c=(c+1)%n.length];return f.reverse().join(t);};}function v3(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e];});};}var nn1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E5(n){if(!(t=nn1.exec(n)))throw new Error("invalid format: "+n);var t;return new F1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]});}E5.prototype=F1.prototype;function F1(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+"";}F1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type;};function tn1(n){n:for(var t=n.length,e=1,i=-1,o;e<t;++e)switch(n[e]){case".":i=o=e;break;case"0":i===0&&(i=e),o=e;break;default:if(!+n[e])break n;i>0&&(i=0);break;}return i>0?n.slice(0,i)+n.slice(o+1):n;}var I3;function rn1(n,t){var e=j4(n,t);if(!e)return n+"";var i=e[0],o=e[1],f=o-(I3=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,c=i.length;return f===c?i:f>c?i+new Array(f-c+1).join("0"):f>0?i.slice(0,f)+"."+i.slice(f):"0."+new Array(1-f).join("0")+j4(n,Math.max(0,t+f-1))[0];}function R3(n,t){var e=j4(n,t);if(!e)return n+"";var i=e[0],o=e[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0");}var X4={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:W4,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>R3(n*100,t),r:R3,s:rn1,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function O3(n){return n;}var U3=Array.prototype.map,Y4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Z3(n){var t=n.grouping===void 0||n.thousands===void 0?O3:_5(U3.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",f=n.numerals===void 0?O3:v3(U3.call(n.numerals,String)),c=n.percent===void 0?"%":n.percent+"",m=n.minus===void 0?"−":n.minus+"",x=n.nan===void 0?"NaN":n.nan+"";function $(a){a=E5(a);var p=a.fill,w=a.align,d=a.sign,S=a.symbol,l=a.zero,k=a.width,N=a.comma,g=a.precision,T=a.trim,h=a.type;h==="n"?(N=!0,h="g"):X4[h]||(g===void 0&&(g=12),T=!0,h="g"),(l||p==="0"&&w==="=")&&(l=!0,p="0",w="=");var K=S==="$"?e:S==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",Q=S==="$"?i:/[%p]/.test(h)?c:"",C=X4[h],V=/[defgprs%]/.test(h);g=g===void 0?6:/[gprs]/.test(h)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function D(r){var y=K,u=Q,M,G,P;if(h==="c")u=C(r)+u,r="";else{r=+r;var z=r<0||1/r<0;if(r=isNaN(r)?x:C(Math.abs(r),g),T&&(r=tn1(r)),z&&+r===0&&d!=="+"&&(z=!1),y=(z?d==="("?d:m:d==="-"||d==="("?"":d)+y,u=(h==="s"?Y4[8+I3/3]:"")+u+(z&&d==="("?")":""),V){for(M=-1,G=r.length;++M<G;)if(P=r.charCodeAt(M),48>P||P>57){u=(P===46?o+r.slice(M+1):r.slice(M))+u,r=r.slice(0,M);break;}}}N&&!l&&(r=t(r,Infinity));var A=y.length+r.length+u.length,s=A<k?new Array(k-A+1).join(p):"";N&&l&&(r=t(s+r,s.length?k-u.length:Infinity),s="");switch(w){case"<":r=y+r+u+s;break;case"=":r=y+s+r+u;break;case"^":r=s.slice(0,A=s.length>>1)+y+r+u+s.slice(A);break;default:r=s+y+r+u;break;}return f(r);}return D.toString=function(){return a+"";},D;}function J(a,p){var w=$((a=E5(a),a.type="f",a)),d=Math.max(-8,Math.min(8,Math.floor(b2(p)/3)))*3,S=Math.pow(10,-d),l=Y4[8+d/3];return function(k){return w(S*k)+l;};}return{format:$,formatPrefix:J};}var L5,q4,B3;H3({thousands:",",grouping:[3],currency:["$",""]});function H3(n){return L5=Z3(n),q4=L5.format,B3=L5.formatPrefix,L5;}function en1(n){return Math.max(0,-b2(Math.abs(n)));}function on1(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(b2(t)/3)))*3-b2(Math.abs(n)));}function an1(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,b2(t)-b2(n))+1;}const z5=new Date,x3=new Date;function o1(e,t,s,Y){function u(n){return e(n=arguments.length===0?new Date:new Date(+n)),n;}return u.floor=n=>(e(n=new Date(+n)),n),u.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),u.round=n=>{const r=u(n),c=u.ceil(n);return n-r<c-n?r:c;},u.offset=(n,r)=>(t(n=new Date(+n),r==null?1:Math.floor(r)),n),u.range=(n,r,c)=>{const D=[];if(n=u.ceil(n),c=c==null?1:Math.floor(c),!(n<r)||!(c>0))return D;let i;do D.push(i=new Date(+n)),t(n,c),e(n);while(i<n&&n<r)return D;},u.filter=n=>o1(r=>{if(r>=r)for(;e(r),!n(r);)r.setTime(r-1);},(r,c)=>{if(r>=r)if(c<0)for(;++c<=0;)for(;t(r,-1),!n(r););else for(;--c>=0;)for(;t(r,1),!n(r););}),s&&(u.count=(n,r)=>(z5.setTime(+n),x3.setTime(+r),e(z5),e(x3),Math.floor(s(z5,x3))),u.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?u.filter(Y?r=>Y(r)%n===0:r=>u.count(0,r)%n===0):u)),u;}const F2=o1(()=>{},(e,t)=>{e.setTime(+e+t);},(e,t)=>t-e);F2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?o1(t=>{t.setTime(Math.floor(t/e)*e);},(t,s)=>{t.setTime(+t+s*e);},(t,s)=>(s-t)/e):F2);const G5=F2.range,T1=1e3,l1=T1*60,m2=l1*60,M2=m2*24,I4=M2*7,J3=M2*30,O4=M2*365,h2=o1(e=>{e.setTime(e-e.getMilliseconds());},(e,t)=>{e.setTime(+e+t*T1);},(e,t)=>(t-e)/T1,e=>e.getUTCSeconds()),K4=h2.range,b3=o1(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*T1);},(e,t)=>{e.setTime(+e+t*l1);},(e,t)=>(t-e)/l1,e=>e.getMinutes()),le=b3.range,Q3=o1(e=>{e.setUTCSeconds(0,0);},(e,t)=>{e.setTime(+e+t*l1);},(e,t)=>(t-e)/l1,e=>e.getUTCMinutes()),ae=Q3.range,j5=o1(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*T1-e.getMinutes()*l1);},(e,t)=>{e.setTime(+e+t*m2);},(e,t)=>(t-e)/m2,e=>e.getHours()),ge=j5.range,k4=o1(e=>{e.setUTCMinutes(0,0,0);},(e,t)=>{e.setTime(+e+t*m2);},(e,t)=>(t-e)/m2,e=>e.getUTCHours()),Te=k4.range,Z4=o1(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*l1)/M2,e=>e.getDate()-1),me=Z4.range,L6=o1(e=>{e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCDate(e.getUTCDate()+t);},(e,t)=>(t-e)/M2,e=>e.getUTCDate()-1),Me=L6.range,q5=o1(e=>{e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCDate(e.getUTCDate()+t);},(e,t)=>(t-e)/M2,e=>Math.floor(e/M2)),ye=q5.range;function C2(e){return o1(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0);},(t,s)=>{t.setDate(t.getDate()+s*7);},(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*l1)/I4);}const v4=C2(0),N3=C2(1),P4=C2(2),R4=C2(3),V2=C2(4),X5=C2(5),_6=C2(6),$2=v4.range,he=N3.range,Ce=P4.range,Ue=R4.range,De=V2.range,fe=X5.range,Fe=_6.range;function U4(e){return o1(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0);},(t,s)=>{t.setUTCDate(t.getUTCDate()+s*7);},(t,s)=>(s-t)/I4);}const S4=U4(0),d1=U4(1),p2=U4(2),ee=U4(3),te=U4(4),ne1=U4(5),re=U4(6),se=S4.range,Ye=d1.range,He=p2.range,ve=ee.range,Se=te.range,we=ne1.range,We=re.range,A4=o1(e=>{e.setDate(1),e.setHours(0,0,0,0);},(e,t)=>{e.setMonth(e.getMonth()+t);},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),ze=A4.range,B4=o1(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t);},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),xe=B4.range,w3=o1(e=>{e.setMonth(0,1),e.setHours(0,0,0,0);},(e,t)=>{e.setFullYear(e.getFullYear()+t);},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());w3.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:o1(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0);},(t,s)=>{t.setFullYear(t.getFullYear()+s*e);});const Ie=w3.range,W5=o1(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t);},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());W5.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:o1(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s*e);});W5.range;function ue(e,t,s,Y,u,n){const r=[[h2,1,1e3],[h2,5,5*1e3],[h2,15,15*1e3],[h2,30,30*1e3],[n,1,l1],[n,5,5*l1],[n,15,15*l1],[n,30,30*l1],[u,1,m2],[u,3,3*m2],[u,6,6*m2],[u,12,12*m2],[Y,1,M2],[Y,2,2*M2],[s,1,I4],[t,1,J3],[t,3,3*J3],[e,1,O4]];function c(i,a,y){const f=a<i;f&&([i,a]=[a,i]);const g=y&&typeof y.range=="function"?y:D(i,a,y),H=g?g.range(i,+a+1):[];return f?H.reverse():H;}function D(i,a,y){const f=Math.abs(a-i)/y,g=G4(([,,ce])=>ce).right(r,f);if(g===r.length)return e.every(kn(i/O4,a/O4,y));if(g===0)return F2.every(Math.max(kn(i,a,y),1));const[H,oe]=r[f/r[g-1][2]<r[g][2]/f?g-1:g];return H.every(oe);}return[c,D];}const[be,Qe]=ue(W5,B4,S4,q5,k4,Q3),[je,ke]=ue(w3,A4,v4,Z4,j5,b3);const a2="year",D3="quarter",f2="month",s="week",g1="date",l2="day",U5="dayofyear",M3="hours",T2="minutes",y4="seconds",h3="milliseconds",V3=[a2,D3,f2,s,g1,l2,U5,M3,T2,y4,h3],j6=V3.reduce((t,e,n)=>(t[e]=1+n,t),{});function Z5(t){const e=p(t).slice(),n={};e.length||b("Missing time unit."),e.forEach(o=>{g(j6,o)?n[o]=1:b(`Invalid time unit: ${o}.`);});const r=(n[s]||n[l2]?1:0)+(n[D3]||n[f2]||n[g1]?1:0)+(n[U5]?1:0);return r>1&&b(`Incompatible time units: ${t}`),e.sort((o,c)=>j6[o]-j6[c]),e;}const Wt={[a2]:"%Y ",[D3]:"Q%q ",[f2]:"%b ",[g1]:"%d ",[s]:"W%U ",[l2]:"%a ",[U5]:"%j ",[M3]:"%H:00",[T2]:"00:%M",[y4]:":%S",[h3]:".%L",[`${a2}-${f2}`]:"%Y-%m ",[`${a2}-${f2}-${g1}`]:"%Y-%m-%d ",[`${M3}-${T2}`]:"%H:%M"};function $t(t,e){const n=J1({},Wt,e),r=Z5(t),o=r.length;let c="",i=0,u,d;for(i=0;i<o;)for(u=r.length;u>i;--u)if(d=r.slice(i,u).join("-"),n[d]!=null){c+=n[d],i=u;break;}return c.trim();}const Y5=new Date;function q6(t){return Y5.setFullYear(t),Y5.setMonth(0),Y5.setDate(1),Y5.setHours(0,0,0,0),Y5;}function xt(t){return tt(new Date(t));}function jt(t){return A5(new Date(t));}function tt(t){return Z4.count(q6(t.getFullYear())-1,t);}function A5(t){return v4.count(q6(t.getFullYear())-1,t);}function R5(t){return q6(t).getDay();}function qt(t,e,n,r,o,c,i){if(0<=t&&t<100){const u=new Date(-1,e,n,r,o,c,i);return u.setFullYear(t),u;}return new Date(t,e,n,r,o,c,i);}function At(t){return et(new Date(t));}function Rt(t){return z6(new Date(t));}function et(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return L6.count(e-1,t);}function z6(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return S4.count(e-1,t);}function L7(t){return Y5.setTime(Date.UTC(t,0,1)),Y5.getUTCDay();}function zt(t,e,n,r,o,c,i){if(0<=t&&t<100){const u=new Date(Date.UTC(-1,e,n,r,o,c,i));return u.setUTCFullYear(n.y),u;}return new Date(Date.UTC(t,e,n,r,o,c,i));}function nt(t,e,n,r,o){const c=e||1,i=a(t),u=(H,O,b)=>(b=b||H,Lt(n[b],r[b],H===i&&c,O)),d=new Date,m=Xn(t),at=m[a2]?u(a2):On(2012),lt=m[f2]?u(f2):m[D3]?u(D3):y1,ft=m[s]&&m[l2]?u(l2,1,s+l2):m[s]?u(s,1):m[l2]?u(l2,1):m[g1]?u(g1,1):m[U5]?u(U5,1):v,mt=m[M3]?u(M3):y1,dt=m[T2]?u(T2):y1,Dt=m[y4]?u(y4):y1,gt=m[h3]?u(h3):y1;return function(H){d.setTime(+H);const O=at(d);return o(O,lt(d),ft(d,O),mt(d),dt(d),Dt(d),gt(d));};}function Lt(t,e,n,r){const o=n<=1?t:r?(c,i)=>r+n*Math.floor((t(c,i)-r)/n):(c,i)=>n*Math.floor(t(c,i)/n);return e?(c,i)=>e(o(c,i),i):o;}function C3(t,e,n){return e+t*7-(n+6)%7;}const Gt={[a2]:t=>t.getFullYear(),[D3]:t=>Math.floor(t.getMonth()/3),[f2]:t=>t.getMonth(),[g1]:t=>t.getDate(),[M3]:t=>t.getHours(),[T2]:t=>t.getMinutes(),[y4]:t=>t.getSeconds(),[h3]:t=>t.getMilliseconds(),[U5]:t=>tt(t),[s]:t=>A5(t),[s+l2]:(t,e)=>C3(A5(t),t.getDay(),R5(e)),[l2]:(t,e)=>C3(1,t.getDay(),R5(e))},Qt={[D3]:t=>3*t,[s]:(t,e)=>C3(t,0,R5(e))};function Pt(t,e){return nt(t,e||1,Gt,Qt,qt);}const _t={[a2]:t=>t.getUTCFullYear(),[D3]:t=>Math.floor(t.getUTCMonth()/3),[f2]:t=>t.getUTCMonth(),[g1]:t=>t.getUTCDate(),[M3]:t=>t.getUTCHours(),[T2]:t=>t.getUTCMinutes(),[y4]:t=>t.getUTCSeconds(),[h3]:t=>t.getUTCMilliseconds(),[U5]:t=>et(t),[s]:t=>z6(t),[l2]:(t,e)=>C3(1,t.getUTCDay(),L7(e)),[s+l2]:(t,e)=>C3(z6(t),t.getUTCDay(),L7(e))},Bt={[D3]:t=>3*t,[s]:(t,e)=>C3(t,0,L7(e))};function Kt(t,e){return nt(t,e||1,_t,Bt,zt);}const Xt={[a2]:w3,[D3]:A4.every(3),[f2]:A4,[s]:v4,[g1]:Z4,[l2]:Z4,[U5]:Z4,[M3]:j5,[T2]:b3,[y4]:h2,[h3]:F2},Jt={[a2]:W5,[D3]:B4.every(3),[f2]:B4,[s]:S4,[g1]:L6,[l2]:L6,[U5]:L6,[M3]:k4,[T2]:Q3,[y4]:h2,[h3]:F2};function G6(t){return Xt[t];}function Q4(t){return Jt[t];}function ot(t,e,n){return t?t.offset(e,n):void 0;}function Vt(t,e,n){return ot(G6(t),e,n);}function Zt(t,e,n){return ot(Q4(t),e,n);}function rt(t,e,n,r){return t?t.range(e,n,r):void 0;}function te1(t,e,n,r){return rt(G6(t),e,n,r);}function ee1(t,e,n,r){return rt(Q4(t),e,n,r);}const p3=1e3,w4=p3*60,F3=w4*60,$3=F3*24,ne2=$3*7,ut=$3*30,P5=$3*365,it=[a2,f2,g1,M3,T2,y4,h3],I5=it.slice(0,-1),k5=I5.slice(0,-1),v5=k5.slice(0,-1),oe=v5.slice(0,-1),re1=[a2,s],ct=[a2,f2],st=[a2],E6=[[I5,1,p3],[I5,5,5*p3],[I5,15,15*p3],[I5,30,30*p3],[k5,1,w4],[k5,5,5*w4],[k5,15,15*w4],[k5,30,30*w4],[v5,1,F3],[v5,3,3*F3],[v5,6,6*F3],[v5,12,12*F3],[oe,1,$3],[re1,1,ne2],[ct,1,ut],[ct,3,3*ut],[st,1,P5]];function ue1(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(Wn(e))/n;let o=G4(u=>u[2]).right(E6,r),c,i;return o===E6.length?(c=st,i=kn(e[0]/P5,e[1]/P5,n)):o?(o=E6[r/E6[o-1][2]<E6[o][2]/r?o-1:o],c=o[0],i=o[1]):(c=it,i=Math.max(kn(e[0],e[1],n),1)),{units:c,step:i};}function N4(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t;}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L);}function O5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t;}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L));}function w5(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0};}function V4(e){var t=e.dateTime,n=e.date,a=e.time,g=e.periods,T=e.days,W=e.shortDays,L=e.months,Y=e.shortMonths,ce=x4(g),fe=k6(g),ie=x4(T),se=k6(T),le=x4(W),me=k6(W),ye=x4(L),ge=k6(L),he=x4(Y),Te=k6(Y),p={a:xe,A:ke,b:We,B:Le,c:null,d:B5,e:B5,f:ft,g:Mt,G:Ct,H:ot1,I:ut1,j:ct1,L:z7,m:it1,M:st1,p:Ye,q:Fe,Q:te2,s:ne3,S:lt,u:mt,U:yt,V:gt,w:ht,W:Tt,x:null,X:null,y:pt,Y:Ut,Z:vt,"%":ee2},M={a:be,A:He,b:Ne,B:Oe,c:null,d:E7,e:E7,f:wt,g:Ot,G:At1,H:dt,I:St,j:Dt,L:$4,m:xt1,M:kt,p:Ie,q:Ae,Q:te2,s:ne3,S:Wt1,u:Lt1,U:Yt,V:Ft,w:bt,W:Ht,x:null,X:null,y:Nt,Y:It,Z:Zt1,"%":ee2},pe={a:Ue,A:Ce,b:ve,B:de,c:Se,d:X6,e:X6,f:tt1,g:J4,G:q7,H:j7,I:j7,j:Ee,L:et1,m:Ge,M:$e,p:Me,q:ze1,Q:rt1,s:at,S:Ke,u:qe,U:Je,V:Xe,w:_e,W:je1,x:De,X:we,y:J4,Y:q7,Z:Be,"%":nt1};p.x=h(n,p),p.X=h(a,p),p.c=h(t,p),M.x=h(n,M),M.X=h(a,M),M.c=h(t,M);function h(o,u){return function(c){var r=[],l=-1,i=0,m=o.length,y,U,P;for(c instanceof Date||(c=new Date(+c));++l<m;)o.charCodeAt(l)===37&&(r.push(o.slice(i,l)),(U=_7[y=o.charAt(++l)])!=null?y=o.charAt(++l):U=y==="e"?" ":"0",(P=u[y])&&(y=P(c,U)),r.push(y),i=l+1);return r.push(o.slice(i,l)),r.join("");};}function Z(o,u){return function(c){var r=w5(1900,void 0,1),l=F(r,o,c+="",0),i,m;if(l!=c.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(u&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+r.p*12),r.m===void 0&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(i=O5(w5(r.y,0,1)),m=i.getUTCDay(),i=m>4||m===0?d1.ceil(i):d1(i),i=L6.offset(i,(r.V-1)*7),r.y=i.getUTCFullYear(),r.m=i.getUTCMonth(),r.d=i.getUTCDate()+(r.w+6)%7):(i=N4(w5(r.y,0,1)),m=i.getDay(),i=m>4||m===0?N3.ceil(i):N3(i),i=Z4.offset(i,(r.V-1)*7),r.y=i.getFullYear(),r.m=i.getMonth(),r.d=i.getDate()+(r.w+6)%7);}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),m="Z"in r?O5(w5(r.y,0,1)).getUTCDay():N4(w5(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+r.W*7-(m+5)%7:r.w+r.U*7-(m+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,O5(r)):N4(r);};}function F(o,u,c,r){for(var l=0,i=u.length,m=c.length,y,U;l<i;){if(r>=m)return-1;if(y=u.charCodeAt(l++),y===37){if(y=u.charAt(l++),U=pe[y in _7?u.charAt(l++):y],!U||(r=U(o,c,r))<0)return-1;}else if(y!=c.charCodeAt(r++))return-1;}return r;}function Me(o,u,c){var r=ce.exec(u.slice(c));return r?(o.p=fe.get(r[0].toLowerCase()),c+r[0].length):-1;}function Ue(o,u,c){var r=le.exec(u.slice(c));return r?(o.w=me.get(r[0].toLowerCase()),c+r[0].length):-1;}function Ce(o,u,c){var r=ie.exec(u.slice(c));return r?(o.w=se.get(r[0].toLowerCase()),c+r[0].length):-1;}function ve(o,u,c){var r=he.exec(u.slice(c));return r?(o.m=Te.get(r[0].toLowerCase()),c+r[0].length):-1;}function de(o,u,c){var r=ye.exec(u.slice(c));return r?(o.m=ge.get(r[0].toLowerCase()),c+r[0].length):-1;}function Se(o,u,c){return F(o,t,u,c);}function De(o,u,c){return F(o,n,u,c);}function we(o,u,c){return F(o,a,u,c);}function xe(o){return W[o.getDay()];}function ke(o){return T[o.getDay()];}function We(o){return Y[o.getMonth()];}function Le(o){return L[o.getMonth()];}function Ye(o){return g[+(o.getHours()>=12)];}function Fe(o){return 1+~~(o.getMonth()/3);}function be(o){return W[o.getUTCDay()];}function He(o){return T[o.getUTCDay()];}function Ne(o){return Y[o.getUTCMonth()];}function Oe(o){return L[o.getUTCMonth()];}function Ie(o){return g[+(o.getUTCHours()>=12)];}function Ae(o){return 1+~~(o.getUTCMonth()/3);}return{format:function(o){var u=h(o+="",p);return u.toString=function(){return o;},u;},parse:function(o){var u=Z(o+="",!1);return u.toString=function(){return o;},u;},utcFormat:function(o){var u=h(o+="",M);return u.toString=function(){return o;},u;},utcParse:function(o){var u=Z(o+="",!0);return u.toString=function(){return o;},u;}};}var _7={"-":"",_:" ","0":"0"},s1=/^\s*\d+/,Qe1=/^%/,Re=/[\\^$*+?|[\]().{}]/g;function f3(e,t,n){var a=e<0?"-":"",g=(a?-e:e)+"",T=g.length;return a+(T<n?new Array(n-T+1).join(t)+g:g);}function Ve(e){return e.replace(Re,"\\$&");}function x4(e){return new RegExp("^(?:"+e.map(Ve).join("|")+")","i");}function k6(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]));}function _e(e,t,n){var a=s1.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1;}function qe(e,t,n){var a=s1.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1;}function Je(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1;}function Xe(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1;}function je1(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1;}function q7(e,t,n){var a=s1.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1;}function J4(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1;}function Be(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1;}function ze1(e,t,n){var a=s1.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1;}function Ge(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1;}function X6(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1;}function Ee(e,t,n){var a=s1.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1;}function j7(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1;}function $e(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1;}function Ke(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1;}function et1(e,t,n){var a=s1.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1;}function tt1(e,t,n){var a=s1.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1;}function nt1(e,t,n){var a=Qe1.exec(t.slice(n,n+1));return a?n+a[0].length:-1;}function rt1(e,t,n){var a=s1.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1;}function at(e,t,n){var a=s1.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1;}function B5(e,t){return f3(e.getDate(),t,2);}function ot1(e,t){return f3(e.getHours(),t,2);}function ut1(e,t){return f3(e.getHours()%12||12,t,2);}function ct1(e,t){return f3(1+Z4.count(w3(e),e),t,3);}function z7(e,t){return f3(e.getMilliseconds(),t,3);}function ft(e,t){return z7(e,t)+"000";}function it1(e,t){return f3(e.getMonth()+1,t,2);}function st1(e,t){return f3(e.getMinutes(),t,2);}function lt(e,t){return f3(e.getSeconds(),t,2);}function mt(e){var t=e.getDay();return t===0?7:t;}function yt(e,t){return f3(v4.count(w3(e)-1,e),t,2);}function G7(e){var t=e.getDay();return t>=4||t===0?V2(e):V2.ceil(e);}function gt(e,t){return e=G7(e),f3(V2.count(w3(e),e)+(w3(e).getDay()===4),t,2);}function ht(e){return e.getDay();}function Tt(e,t){return f3(N3.count(w3(e)-1,e),t,2);}function pt(e,t){return f3(e.getFullYear()%100,t,2);}function Mt(e,t){return e=G7(e),f3(e.getFullYear()%100,t,2);}function Ut(e,t){return f3(e.getFullYear()%1e4,t,4);}function Ct(e,t){var n=e.getDay();return e=n>=4||n===0?V2(e):V2.ceil(e),f3(e.getFullYear()%1e4,t,4);}function vt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f3(t/60|0,"0",2)+f3(t%60,"0",2);}function E7(e,t){return f3(e.getUTCDate(),t,2);}function dt(e,t){return f3(e.getUTCHours(),t,2);}function St(e,t){return f3(e.getUTCHours()%12||12,t,2);}function Dt(e,t){return f3(1+L6.count(W5(e),e),t,3);}function $4(e,t){return f3(e.getUTCMilliseconds(),t,3);}function wt(e,t){return $4(e,t)+"000";}function xt1(e,t){return f3(e.getUTCMonth()+1,t,2);}function kt(e,t){return f3(e.getUTCMinutes(),t,2);}function Wt1(e,t){return f3(e.getUTCSeconds(),t,2);}function Lt1(e){var t=e.getUTCDay();return t===0?7:t;}function Yt(e,t){return f3(S4.count(W5(e)-1,e),t,2);}function K5(e){var t=e.getUTCDay();return t>=4||t===0?te(e):te.ceil(e);}function Ft(e,t){return e=K5(e),f3(te.count(W5(e),e)+(W5(e).getUTCDay()===4),t,2);}function bt(e){return e.getUTCDay();}function Ht(e,t){return f3(d1.count(W5(e)-1,e),t,2);}function Nt(e,t){return f3(e.getUTCFullYear()%100,t,2);}function Ot(e,t){return e=K5(e),f3(e.getUTCFullYear()%100,t,2);}function It(e,t){return f3(e.getUTCFullYear()%1e4,t,4);}function At1(e,t){var n=e.getUTCDay();return e=n>=4||n===0?te(e):te.ceil(e),f3(e.getUTCFullYear()%1e4,t,4);}function Zt1(){return"+0000";}function ee2(){return"%";}function te2(e){return+e;}function ne3(e){return Math.floor(+e/1e3);}var C4,re2,ae1,I6,A6;oe1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oe1(e){return C4=V4(e),re2=C4.format,ae1=C4.parse,I6=C4.utcFormat,A6=C4.utcParse,C4;}var ue2="%Y-%m-%dT%H:%M:%S.%LZ";function Pt1(e){return e.toISOString();}Date.prototype.toISOString?Pt1:I6(ue2);function Rt1(e){var t=new Date(e);return isNaN(t)?null:t;}+new Date("2000-01-01T00:00:00.000Z")?Rt1:A6(ue2);function f4(t){const e={};return r=>e[r]||(e[r]=t(r));}function ct2(t,e){return r=>{const o=t(r),n=o.indexOf(e);if(n<0)return o;let a=ft1(o,n);const m=a<o.length?o.slice(a):"";for(;--a>n;)if(o[a]!=="0"){++a;break;}return o.slice(0,a)+m;};}function ft1(t,e){let r=t.lastIndexOf("e"),o;if(r>0)return r;for(r=t.length;--r>e;)if(o=t.charCodeAt(r),o>=48&&o<=57)return r+1;}function O6(t){const e=f4(t.format),r=t.formatPrefix;return{format:e,formatPrefix:r,formatFloat(o){const n=E5(o||",");if(n.precision==null){n.precision=12;switch(n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break;}return ct2(e(n),e(".1f")(1)[1]);}else return e(n);},formatSpan(o,n,a,m){m=E5(m??",f");const s=kn(o,n,a),c=Math.max(Math.abs(o),Math.abs(n));let u;if(m.precision==null)switch(m.type){case"s":return isNaN(u=on1(s,c))||(m.precision=u),r(m,c);case"":case"e":case"g":case"p":case"r":{isNaN(u=an1(s,c))||(m.precision=u-(m.type==="e"));break;}case"f":case"%":{isNaN(u=en1(s))||(m.precision=u-(m.type==="%")*2);break;}}return e(m);}};}let L8;F4();function F4(){return L8=O6({format:q4,formatPrefix:B3});}function h4(t){return O6(Z3(t));}function l3(t){return arguments.length?L8=h4(t):L8;}function T3(t,e,r){r=r||{},M1(r)||b(`Invalid time multi-format specifier: ${r}`);const o=e(y4),n=e(T2),a=e(M3),m=e(g1),s1=e(s),c=e(f2),u=e(D3),A=e(a2),R=t(r[h3]||".%L"),U=t(r[y4]||":%S"),Y=t(r[T2]||"%I:%M"),B=t(r[M3]||"%I %p"),C=t(r[g1]||r[l2]||"%a %d"),K=t(r[s]||"%b %d"),q=t(r[f2]||"%B"),G=t(r[D3]||"%B"),H=t(r[a2]||"%Y");return i=>(o(i)<i?R:n(i)<i?U:a(i)<i?Y:m(i)<i?B:c(i)<i?s1(i)<i?C:K:A(i)<i?u(i)<i?q:G:H)(i);}function j8(t){const e=f4(t.format),r=f4(t.utcFormat);return{timeFormat:o=>X1(o)?e(o):T3(e,G6,o),utcFormat:o=>X1(o)?r(o):T3(r,Q4,o),timeParse:f4(t.parse),utcParse:f4(t.utcParse)};}let g2;x5();function x5(){return g2=j8({format:re2,parse:ae1,utcFormat:I6,utcParse:A6});}function b4(t){return j8(V4(t));}function d2(t){return arguments.length?g2=b4(t):g2;}const N5=(t,e)=>J1({},t,e);function lt1(t,e){const r=t?h4(t):l3(),o=e?b4(e):d2();return N5(r,o);}function w6(t,e){const r=arguments.length;return r&&r!==2&&b("defaultLocale expects either zero or two arguments."),r?N5(l3(t),d2(e)):N5(l3(),d2());}function dt1(){return F4(),x5(),w6();}var H4=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},g3=[],F5=[],Dr=typeof Uint8Array!="undefined"?Uint8Array:Array,C5=!1;function Z6(){C5=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,n=i.length;r<n;++r)g3[r]=i[r],F5[i.charCodeAt(r)]=r;F5["-".charCodeAt(0)]=62,F5["_".charCodeAt(0)]=63;}function Sr(i){C5||Z6();var r,n,e,t,o,u,h=i.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=i[h-2]==="="?2:i[h-1]==="="?1:0,u=new Dr(h*3/4-o),e=o>0?h-4:h;var s=0;for(r=0,n=0;r<e;r+=4,n+=3)t=F5[i.charCodeAt(r)]<<18|F5[i.charCodeAt(r+1)]<<12|F5[i.charCodeAt(r+2)]<<6|F5[i.charCodeAt(r+3)],u[s++]=t>>16&255,u[s++]=t>>8&255,u[s++]=t&255;return o===2?(t=F5[i.charCodeAt(r)]<<2|F5[i.charCodeAt(r+1)]>>4,u[s++]=t&255):o===1&&(t=F5[i.charCodeAt(r)]<<10|F5[i.charCodeAt(r+1)]<<4|F5[i.charCodeAt(r+2)]>>2,u[s++]=t>>8&255,u[s++]=t&255),u;}function Pr(i){return g3[i>>18&63]+g3[i>>12&63]+g3[i>>6&63]+g3[i&63];}function Yr(i,r,n){for(var e,t=[],o=r;o<n;o+=3)e=(i[o]<<16)+(i[o+1]<<8)+i[o+2],t.push(Pr(e));return t.join("");}function X7(i){C5||Z6();for(var r,n=i.length,e=n%3,t="",o=[],u=16383,h=0,s=n-e;h<s;h+=u)o.push(Yr(i,h,h+u>s?s:h+u));return e===1?(r=i[n-1],t+=g3[r>>2],t+=g3[r<<4&63],t+="=="):e===2&&(r=(i[n-2]<<8)+i[n-1],t+=g3[r>>10],t+=g3[r>>4&63],t+=g3[r<<2&63],t+="="),o.push(t),o.join("");}function U6(i,r,n,e,t){var o,u,h=t*8-e-1,s=(1<<h)-1,a=s>>1,l=-7,c=n?t-1:0,y=n?-1:1,x=i[r+c];for(c+=y,o=x&(1<<-l)-1,x>>=-l,l+=h;l>0;o=o*256+i[r+c],c+=y,l-=8);for(u=o&(1<<-l)-1,o>>=-l,l+=e;l>0;u=u*256+i[r+c],c+=y,l-=8);if(o===0)o=1-a;else{if(o===s)return u?NaN:(x?-1:1)*Infinity;u=u+Math.pow(2,e),o=o-a;}return(x?-1:1)*u*Math.pow(2,o-e);}function K6(i,r,n,e,t,o){var u,h,s,a=o*8-t-1,l=(1<<a)-1,c=l>>1,y=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=e?0:o-1,w=e?1:-1,B=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===Infinity?(h=isNaN(r)?1:0,u=l):(u=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-u))<1&&(u--,s*=2),u+c>=1?r+=y/s:r+=y*Math.pow(2,1-c),r*s>=2&&(u++,s/=2),u+c>=l?(h=0,u=l):u+c>=1?(h=(r*s-1)*Math.pow(2,t),u=u+c):(h=r*Math.pow(2,c-1)*Math.pow(2,t),u=0));t>=8;i[n+x]=h&255,x+=w,h/=256,t-=8);for(u=u<<t|h,a+=t;a>0;i[n+x]=u&255,x+=w,u/=256,a-=8);i[n+x-w]|=B*128;}var Cr={}.toString,Q5=Array.isArray||function(i){return Cr.call(i)=="[object Array]";};var Mr=50;f5.TYPED_ARRAY_SUPPORT=H4.TYPED_ARRAY_SUPPORT!==void 0?H4.TYPED_ARRAY_SUPPORT:!0;function M4(){return f5.TYPED_ARRAY_SUPPORT?2147483647:1073741823;}function R6(i,r){if(M4()<r)throw new RangeError("Invalid typed array length");return f5.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(r),i.__proto__=f5.prototype):(i===null&&(i=new f5(r)),i.length=r),i;}function f5(i,r,n){if(!f5.TYPED_ARRAY_SUPPORT&&!(this instanceof f5))return new f5(i,r,n);if(typeof i=="number"){if(typeof r=="string")throw new Error("If encoding is specified then the first argument must be a string");return N6(this,i);}return b5(this,i,r,n);}f5.poolSize=8192,f5._augment=function(i){return i.__proto__=f5.prototype,i;};function b5(i,r,n,e){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&r instanceof ArrayBuffer?Lr(i,r,n,e):typeof r=="string"?kr(i,r,n):Or(i,r);}f5.from=function(i,r,n){return b5(null,i,r,n);},f5.TYPED_ARRAY_SUPPORT&&(f5.prototype.__proto__=Uint8Array.prototype,f5.__proto__=Uint8Array);function rr(i){if(typeof i!="number")throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative');}function Nr(i,r,n,e){return rr(r),r<=0?R6(i,r):n!==void 0?typeof e=="string"?R6(i,r).fill(n,e):R6(i,r).fill(n):R6(i,r);}f5.alloc=function(i,r,n){return Nr(null,i,r,n);};function N6(i,r){if(rr(r),i=R6(i,r<0?0:L9(r)|0),!f5.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)i[n]=0;return i;}f5.allocUnsafe=function(i){return N6(null,i);},f5.allocUnsafeSlow=function(i){return N6(null,i);};function kr(i,r,n){if((typeof n!="string"||n==="")&&(n="utf8"),!f5.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var e=nr(r,n)|0;i=R6(i,e);var t=i.write(r,n);return t!==e&&(i=i.slice(0,t)),i;}function k7(i,r){var n=r.length<0?0:L9(r.length)|0;i=R6(i,n);for(var e=0;e<n;e+=1)i[e]=r[e]&255;return i;}function Lr(i,r,n,e){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(e||0))throw new RangeError("'length' is out of bounds");return n===void 0&&e===void 0?r=new Uint8Array(r):e===void 0?r=new Uint8Array(r,n):r=new Uint8Array(r,n,e),f5.TYPED_ARRAY_SUPPORT?(i=r,i.__proto__=f5.prototype):i=k7(i,r),i;}function Or(i,r){if(A7(r)){var n=L9(r.length)|0;return i=R6(i,n),i.length===0||r.copy(i,0,0,n),i;}if(r){if(typeof ArrayBuffer!="undefined"&&r.buffer instanceof ArrayBuffer||"length"in r)return typeof r.length!="number"||on2(r.length)?R6(i,0):k7(i,r);if(r.type==="Buffer"&&Q5(r.data))return k7(i,r.data);}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function L9(i){if(i>=M4())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+M4().toString(16)+" bytes");return i|0;}f5.isBuffer=un2;function A7(i){return!!(i!=null&&i._isBuffer);}f5.compare=function(r,n){if(!A7(r)||!A7(n))throw new TypeError("Arguments must be Buffers");if(r===n)return 0;for(var e=r.length,t=n.length,o=0,u=Math.min(e,t);o<u;++o)if(r[o]!==n[o]){e=r[o],t=n[o];break;}return e<t?-1:t<e?1:0;},f5.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},f5.concat=function(r,n){if(!Q5(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return f5.alloc(0);var e;if(n===void 0)for(n=0,e=0;e<r.length;++e)n+=r[e].length;var t=f5.allocUnsafe(n),o=0;for(e=0;e<r.length;++e){var u=r[e];if(!A7(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(t,o),o+=u.length;}return t;};function nr(i,r){if(A7(i))return i.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;typeof i!="string"&&(i=""+i);var n=i.length;if(n===0)return 0;for(var e=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return v6(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return cr(i).length;default:if(e)return v6(i).length;r=(""+r).toLowerCase(),e=!0;}}f5.byteLength=nr;function Wr(i,r,n){var e=!1;if((r===void 0||r<0)&&(r=0),r>this.length)return"";if((n===void 0||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,r>>>=0,n<=r)return"";for(i||(i="utf8");;)switch(i){case"hex":return Xr(this,r,n);case"utf8":case"utf-8":return or(this,r,n);case"ascii":return Hr(this,r,n);case"latin1":case"binary":return Zr(this,r,n);case"base64":return Vr(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kr(this,r,n);default:if(e)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),e=!0;}}f5.prototype._isBuffer=!0;function I7(i,r,n){var e=i[r];i[r]=i[n],i[n]=e;}f5.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)I7(this,n,n+1);return this;},f5.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)I7(this,n,n+3),I7(this,n+1,n+2);return this;},f5.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)I7(this,n,n+7),I7(this,n+1,n+6),I7(this,n+2,n+5),I7(this,n+3,n+4);return this;},f5.prototype.toString=function(){var r=this.length|0;return r===0?"":arguments.length===0?or(this,0,r):Wr.apply(this,arguments);},f5.prototype.equals=function(r){if(!A7(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:f5.compare(this,r)===0;},f5.prototype.inspect=function(){var r="",n=Mr;return this.length>0&&(r=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(r+=" ... ")),"<Buffer "+r+">";},f5.prototype.compare=function(r,n,e,t,o){if(!A7(r))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),e===void 0&&(e=r?r.length:0),t===void 0&&(t=0),o===void 0&&(o=this.length),n<0||e>r.length||t<0||o>this.length)throw new RangeError("out of range index");if(t>=o&&n>=e)return 0;if(t>=o)return-1;if(n>=e)return 1;if(n>>>=0,e>>>=0,t>>>=0,o>>>=0,this===r)return 0;for(var u=o-t,h=e-n,s=Math.min(u,h),a=this.slice(t,o),l=r.slice(n,e),c=0;c<s;++c)if(a[c]!==l[c]){u=a[c],h=l[c];break;}return u<h?-1:h<u?1:0;};function ir(i,r,n,e,t){if(i.length===0)return-1;if(typeof n=="string"?(e=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=t?0:i.length-1),n<0&&(n=i.length+n),n>=i.length){if(t)return-1;n=i.length-1;}else if(n<0)if(t)n=0;else return-1;if(typeof r=="string"&&(r=f5.from(r,e)),A7(r))return r.length===0?-1:er(i,r,n,e,t);if(typeof r=="number")return r=r&255,f5.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?t?Uint8Array.prototype.indexOf.call(i,r,n):Uint8Array.prototype.lastIndexOf.call(i,r,n):er(i,[r],n,e,t);throw new TypeError("val must be string, number or Buffer");}function er(i,r,n,e,t){var o=1,u=i.length,h=r.length;if(e!==void 0&&(e=String(e).toLowerCase(),e==="ucs2"||e==="ucs-2"||e==="utf16le"||e==="utf-16le")){if(i.length<2||r.length<2)return-1;o=2,u/=2,h/=2,n/=2;}function s(x,w){return o===1?x[w]:x.readUInt16BE(w*o);}var a;if(t){var l=-1;for(a=n;a<u;a++)if(s(i,a)===s(r,l===-1?0:a-l)){if(l===-1&&(l=a),a-l+1===h)return l*o;}else l!==-1&&(a-=a-l),l=-1;}else for(n+h>u&&(n=u-h),a=n;a>=0;a--){for(var c=!0,y=0;y<h;y++)if(s(i,a+y)!==s(r,y)){c=!1;break;}if(c)return a;}return-1;}f5.prototype.includes=function(r,n,e){return this.indexOf(r,n,e)!==-1;},f5.prototype.indexOf=function(r,n,e){return ir(this,r,n,e,!0);},f5.prototype.lastIndexOf=function(r,n,e){return ir(this,r,n,e,!1);};function jr(i,r,n,e){n=Number(n)||0;var t=i.length-n;e?(e=Number(e),e>t&&(e=t)):e=t;var o=r.length;if(o%2!==0)throw new TypeError("Invalid hex string");e>o/2&&(e=o/2);for(var u=0;u<e;++u){var h=parseInt(r.substr(u*2,2),16);if(isNaN(h))return u;i[n+u]=h;}return u;}function zr(i,r,n,e){return D4(v6(r,i.length-n),i,n,e);}function tr(i,r,n,e){return D4(en2(r),i,n,e);}function Jr(i,r,n,e){return tr(i,r,n,e);}function $r(i,r,n,e){return D4(cr(r),i,n,e);}function qr(i,r,n,e){return D4(tn2(r,i.length-n),i,n,e);}f5.prototype.write=function(r,n,e,t){if(n===void 0)t="utf8",e=this.length,n=0;else if(e===void 0&&typeof n=="string")t=n,e=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(e)?(e=e|0,t===void 0&&(t="utf8")):(t=e,e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-n;if((e===void 0||e>o)&&(e=o),r.length>0&&(e<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");t||(t="utf8");for(var u=!1;;)switch(t){case"hex":return jr(this,r,n,e);case"utf8":case"utf-8":return zr(this,r,n,e);case"ascii":return tr(this,r,n,e);case"latin1":case"binary":return Jr(this,r,n,e);case"base64":return $r(this,r,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qr(this,r,n,e);default:if(u)throw new TypeError("Unknown encoding: "+t);t=(""+t).toLowerCase(),u=!0;}},f5.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};};function Vr(i,r,n){return r===0&&n===i.length?X7(i):X7(i.slice(r,n));}function or(i,r,n){n=Math.min(i.length,n);for(var e=[],t=r;t<n;){var o=i[t],u=null,h=o>239?4:o>223?3:o>191?2:1;if(t+h<=n){var s,a,l,c;switch(h){case 1:o<128&&(u=o);break;case 2:s=i[t+1],(s&192)===128&&(c=(o&31)<<6|s&63,c>127&&(u=c));break;case 3:s=i[t+1],a=i[t+2],(s&192)===128&&(a&192)===128&&(c=(o&15)<<12|(s&63)<<6|a&63,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:s=i[t+1],a=i[t+2],l=i[t+3],(s&192)===128&&(a&192)===128&&(l&192)===128&&(c=(o&15)<<18|(s&63)<<12|(a&63)<<6|l&63,c>65535&&c<1114112&&(u=c));}}u===null?(u=65533,h=1):u>65535&&(u-=65536,e.push(u>>>10&1023|55296),u=56320|u&1023),e.push(u),t+=h;}return Gr(e);}var ur=4096;function Gr(i){var r=i.length;if(r<=ur)return String.fromCharCode.apply(String,i);for(var n="",e=0;e<r;)n+=String.fromCharCode.apply(String,i.slice(e,e+=ur));return n;}function Hr(i,r,n){var e="";n=Math.min(i.length,n);for(var t=r;t<n;++t)e+=String.fromCharCode(i[t]&127);return e;}function Zr(i,r,n){var e="";n=Math.min(i.length,n);for(var t=r;t<n;++t)e+=String.fromCharCode(i[t]);return e;}function Xr(i,r,n){var e=i.length;(!r||r<0)&&(r=0),(!n||n<0||n>e)&&(n=e);for(var t="",o=r;o<n;++o)t+=nn2(i[o]);return t;}function Kr(i,r,n){for(var e=i.slice(r,n),t="",o=0;o<e.length;o+=2)t+=String.fromCharCode(e[o]+e[o+1]*256);return t;}f5.prototype.slice=function(r,n){var e=this.length;r=~~r,n=n===void 0?e:~~n,r<0?(r+=e,r<0&&(r=0)):r>e&&(r=e),n<0?(n+=e,n<0&&(n=0)):n>e&&(n=e),n<r&&(n=r);var t;if(f5.TYPED_ARRAY_SUPPORT)t=this.subarray(r,n),t.__proto__=f5.prototype;else{var o=n-r;t=new f5(o,void 0);for(var u=0;u<o;++u)t[u]=this[u+r];}return t;};function p4(i,r,n){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+r>n)throw new RangeError("Trying to access beyond buffer length");}f5.prototype.readUIntLE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=this[r],o=1,u=0;++u<n&&(o*=256);)t+=this[r+u]*o;return t;},f5.prototype.readUIntBE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=this[r+--n],o=1;n>0&&(o*=256);)t+=this[r+--n]*o;return t;},f5.prototype.readUInt8=function(r,n){return n||p4(r,1,this.length),this[r];},f5.prototype.readUInt16LE=function(r,n){return n||p4(r,2,this.length),this[r]|this[r+1]<<8;},f5.prototype.readUInt16BE=function(r,n){return n||p4(r,2,this.length),this[r]<<8|this[r+1];},f5.prototype.readUInt32LE=function(r,n){return n||p4(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216;},f5.prototype.readUInt32BE=function(r,n){return n||p4(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3]);},f5.prototype.readIntLE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=this[r],o=1,u=0;++u<n&&(o*=256);)t+=this[r+u]*o;return o*=128,t>=o&&(t-=Math.pow(2,8*n)),t;},f5.prototype.readIntBE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=n,o=1,u=this[r+--t];t>0&&(o*=256);)u+=this[r+--t]*o;return o*=128,u>=o&&(u-=Math.pow(2,8*n)),u;},f5.prototype.readInt8=function(r,n){return n||p4(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r];},f5.prototype.readInt16LE=function(r,n){n||p4(r,2,this.length);var e=this[r]|this[r+1]<<8;return e&32768?e|4294901760:e;},f5.prototype.readInt16BE=function(r,n){n||p4(r,2,this.length);var e=this[r+1]|this[r]<<8;return e&32768?e|4294901760:e;},f5.prototype.readInt32LE=function(r,n){return n||p4(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24;},f5.prototype.readInt32BE=function(r,n){return n||p4(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3];},f5.prototype.readFloatLE=function(r,n){return n||p4(r,4,this.length),U6(this,r,!0,23,4);},f5.prototype.readFloatBE=function(r,n){return n||p4(r,4,this.length),U6(this,r,!1,23,4);},f5.prototype.readDoubleLE=function(r,n){return n||p4(r,8,this.length),U6(this,r,!0,52,8);},f5.prototype.readDoubleBE=function(r,n){return n||p4(r,8,this.length),U6(this,r,!1,52,8);};function E8(i,r,n,e,t,o){if(!A7(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>t||r<o)throw new RangeError('"value" argument is out of bounds');if(n+e>i.length)throw new RangeError("Index out of range");}f5.prototype.writeUIntLE=function(r,n,e,t){if(r=+r,n=n|0,e=e|0,!t){var o=Math.pow(2,8*e)-1;E8(this,r,n,e,o,0);}var u=1,h=0;for(this[n]=r&255;++h<e&&(u*=256);)this[n+h]=r/u&255;return n+e;},f5.prototype.writeUIntBE=function(r,n,e,t){if(r=+r,n=n|0,e=e|0,!t){var o=Math.pow(2,8*e)-1;E8(this,r,n,e,o,0);}var u=e-1,h=1;for(this[n+u]=r&255;--u>=0&&(h*=256);)this[n+u]=r/h&255;return n+e;},f5.prototype.writeUInt8=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,1,255,0),f5.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[n]=r&255,n+1;};function _8(i,r,n,e){r<0&&(r=65535+r+1);for(var t=0,o=Math.min(i.length-n,2);t<o;++t)i[n+t]=(r&255<<8*(e?t:1-t))>>>(e?t:1-t)*8;}f5.prototype.writeUInt16LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,65535,0),f5.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8):_8(this,r,n,!0),n+2;},f5.prototype.writeUInt16BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,65535,0),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>8,this[n+1]=r&255):_8(this,r,n,!1),n+2;};function d3(i,r,n,e){r<0&&(r=4294967295+r+1);for(var t=0,o=Math.min(i.length-n,4);t<o;++t)i[n+t]=r>>>(e?t:3-t)*8&255;}f5.prototype.writeUInt32LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,4294967295,0),f5.TYPED_ARRAY_SUPPORT?(this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=r&255):d3(this,r,n,!0),n+4;},f5.prototype.writeUInt32BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,4294967295,0),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255):d3(this,r,n,!1),n+4;},f5.prototype.writeIntLE=function(r,n,e,t){if(r=+r,n=n|0,!t){var o=Math.pow(2,8*e-1);E8(this,r,n,e,o-1,-o);}var u=0,h=1,s=0;for(this[n]=r&255;++u<e&&(h*=256);)r<0&&s===0&&this[n+u-1]!==0&&(s=1),this[n+u]=(r/h>>0)-s&255;return n+e;},f5.prototype.writeIntBE=function(r,n,e,t){if(r=+r,n=n|0,!t){var o=Math.pow(2,8*e-1);E8(this,r,n,e,o-1,-o);}var u=e-1,h=1,s=0;for(this[n+u]=r&255;--u>=0&&(h*=256);)r<0&&s===0&&this[n+u+1]!==0&&(s=1),this[n+u]=(r/h>>0)-s&255;return n+e;},f5.prototype.writeInt8=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,1,127,-128),f5.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[n]=r&255,n+1;},f5.prototype.writeInt16LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,32767,-32768),f5.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8):_8(this,r,n,!0),n+2;},f5.prototype.writeInt16BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,32767,-32768),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>8,this[n+1]=r&255):_8(this,r,n,!1),n+2;},f5.prototype.writeInt32LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,2147483647,-2147483648),f5.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24):d3(this,r,n,!0),n+4;},f5.prototype.writeInt32BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255):d3(this,r,n,!1),n+4;};function fr(i,r,n,e,t,o){if(n+e>i.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range");}function hr(i,r,n,e,t){return t||fr(i,r,n,4),K6(i,r,n,e,23,4),n+4;}f5.prototype.writeFloatLE=function(r,n,e){return hr(this,r,n,!0,e);},f5.prototype.writeFloatBE=function(r,n,e){return hr(this,r,n,!1,e);};function sr(i,r,n,e,t){return t||fr(i,r,n,8),K6(i,r,n,e,52,8),n+8;}f5.prototype.writeDoubleLE=function(r,n,e){return sr(this,r,n,!0,e);},f5.prototype.writeDoubleBE=function(r,n,e){return sr(this,r,n,!1,e);},f5.prototype.copy=function(r,n,e,t){if(e||(e=0),!t&&t!==0&&(t=this.length),n>=r.length&&(n=r.length),n||(n=0),t>0&&t<e&&(t=e),t===e)return 0;if(r.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(t<0)throw new RangeError("sourceEnd out of bounds");t>this.length&&(t=this.length),r.length-n<t-e&&(t=r.length-n+e);var o=t-e,u;if(this===r&&e<n&&n<t)for(u=o-1;u>=0;--u)r[u+n]=this[u+e];else if(o<1e3||!f5.TYPED_ARRAY_SUPPORT)for(u=0;u<o;++u)r[u+n]=this[u+e];else Uint8Array.prototype.set.call(r,this.subarray(e,e+o),n);return o;},f5.prototype.fill=function(r,n,e,t){if(typeof r=="string"){if(typeof n=="string"?(t=n,n=0,e=this.length):typeof e=="string"&&(t=e,e=this.length),r.length===1){var o=r.charCodeAt(0);o<256&&(r=o);}if(t!==void 0&&typeof t!="string")throw new TypeError("encoding must be a string");if(typeof t=="string"&&!f5.isEncoding(t))throw new TypeError("Unknown encoding: "+t);}else typeof r=="number"&&(r=r&255);if(n<0||this.length<n||this.length<e)throw new RangeError("Out of range index");if(e<=n)return this;n=n>>>0,e=e===void 0?this.length:e>>>0,r||(r=0);var u;if(typeof r=="number")for(u=n;u<e;++u)this[u]=r;else{var h=A7(r)?r:v6(new f5(r,t).toString()),s=h.length;for(u=0;u<e-n;++u)this[u+n]=h[u%s];}return this;};var Qr=/[^+\/0-9A-Za-z-_]/g;function br(i){if(i=rn2(i).replace(Qr,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i;}function rn2(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"");}function nn2(i){return i<16?"0"+i.toString(16):i.toString(16);}function v6(i,r){r=r||Infinity;for(var n,e=i.length,t=null,o=[],u=0;u<e;++u){if(n=i.charCodeAt(u),n>55295&&n<57344){if(!t){if(n>56319){(r-=3)>-1&&o.push(239,191,189);continue;}else if(u+1===e){(r-=3)>-1&&o.push(239,191,189);continue;}t=n;continue;}if(n<56320){(r-=3)>-1&&o.push(239,191,189),t=n;continue;}n=(t-55296<<10|n-56320)+65536;}else t&&(r-=3)>-1&&o.push(239,191,189);if(t=null,n<128){if((r-=1)<0)break;o.push(n);}else if(n<2048){if((r-=2)<0)break;o.push(n>>6|192,n&63|128);}else if(n<65536){if((r-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128);}else if(n<1114112){if((r-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128);}else throw new Error("Invalid code point");}return o;}function en2(i){for(var r=[],n=0;n<i.length;++n)r.push(i.charCodeAt(n)&255);return r;}function tn2(i,r){for(var n,e,t,o=[],u=0;u<i.length&&!((r-=2)<0);++u)n=i.charCodeAt(u),e=n>>8,t=n%256,o.push(t),o.push(e);return o;}function cr(i){return Sr(br(i));}function D4(i,r,n,e){for(var t=0;t<e&&!(t+n>=r.length||t>=i.length);++t)r[t+n]=i[t];return t;}function on2(i){return i!==i;}function un2(i){return i!=null&&(!!i._isBuffer||ar(i)||fn1(i));}function ar(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i);}function fn1(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&ar(i.slice(0,0));}const hn1=/^(data:|([A-Za-z]+:)?\/\/)/,sn1=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,cn1=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,lr="file://";function an2(i,r){return n=>({options:n||{},sanitize:pn2,load:ln2,fileAccess:!!r,file:xn2(r),http:En1(i)});}async function ln2(i,r){const n=await this.sanitize(i,r),e=n.href;return n.localFile?this.file(e):this.http(e,r);}async function pn2(i,r){r=J1({},this.options,r);const n=this.fileAccess,e={href:null};let t,o,u;const h=sn1.test(i.replace(cn1,""));(i==null||typeof i!="string"||!h)&&b("Sanitize failure, invalid URI: "+Z1(i));const s=hn1.test(i);return(u=r.baseURL)&&!s&&(!i.startsWith("/")&&!u.endsWith("/")&&(i="/"+i),i=u+i),o=(t=i.startsWith(lr))||r.mode==="file"||r.mode!=="http"&&!s&&n,t?i=i.slice(lr.length):i.startsWith("//")&&(r.defaultProtocol==="file"?(i=i.slice(2),o=!0):i=(r.defaultProtocol||"http")+":"+i),Object.defineProperty(e,"localFile",{value:!!o}),e.href=i,r.target&&(e.target=r.target+""),r.rel&&(e.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(e.crossOrigin=r.crossOrigin+""),e;}function xn2(i){return i?r=>new Promise((n,e)=>{i.readFile(r,(t,o)=>{t?e(t):n(o);});}):wn2;}async function wn2(){b("No file system access.");}function En1(i){return i?async function(r,n){const e=J1({},this.options.http,n),t=n&&n.response,o=await i(r,e);return o.ok?O1(o[t])?o[t]():o.text():b(o.status+""+o.statusText);}:yn;}async function yn(){b("No HTTP fetch method available.");}const Fn1=i=>i!=null&&i===i,mn1=i=>i==="true"||i==="false"||i===!0||i===!1,gn1=i=>!Number.isNaN(Date.parse(i)),pr=i=>!Number.isNaN(+i)&&!(i instanceof Date),An2=i=>pr(i)&&Number.isInteger(+i),O7={boolean:xn,integer:L2,number:L2,date:Kn,string:Vn,unknown:A1},S5=[mn1,An2,pr,gn1],Rn2=["boolean","integer","number","date"];function xr(i,r){if(!i||!i.length)return"unknown";const n=i.length,e=S5.length,t=S5.map((o,u)=>u+1);for(let o=0,u=0,h,s;o<n;++o)for(s=r?i[o][r]:i[o],h=0;h<e;++h)if(t[h]&&Fn1(s)&&!S5[h](s)&&(t[h]=0,++u,u===S5.length))return"string";return Rn2[t.reduce((o,u)=>o===0?u:o,0)-1];}function wr(i,r){return r.reduce((n,e)=>(n[e]=xr(i,e),n),{});}function Er(i){const r=function(n,e){const t={delimiter:i};return W6(n,e?J1(e,t):t);};return r.responseType="text",r;}function W6(i,r){return r.header&&(i=r.header.map(Z1).join(r.delimiter)+`
`+i),j2(r.delimiter).parse(i+"");}W6.responseType="text";function Tn1(i){return typeof f5=="function"&&O1(f5.isBuffer)?f5.isBuffer(i):!1;}function j9(i,r){const n=r&&r.property?z1(r.property):A1;return M1(i)&&!Tn1(i)?In1(n(i),r):n(JSON.parse(i));}j9.responseType="json";function In1(i,r){return!w1(i)&&Cn(i)&&(i=[...i]),r&&r.copy?JSON.parse(JSON.stringify(i)):i;}const Bn1={interior:(i,r)=>i!==r,exterior:(i,r)=>i===r};function yr(i,r){let n,e,t,o;return i=j9(i,r),r&&r.feature?(n=z3,t=r.feature):r&&r.mesh?(n=_3,t=r.mesh,o=Bn1[r.filter]):b("Missing TopoJSON feature or mesh parameter."),e=(e=i.objects[t])?n(i,e,o):b("Invalid TopoJSON object: "+t),e&&e.features||[e];}yr.responseType="json";const P6={dsv:W6,csv:Er(","),tsv:Er("	"),json:j9,topojson:yr};function z8(i,r){return arguments.length>1?(P6[i]=r,this):g(P6,i)?P6[i]:null;}function Un1(i){const r=z8(i);return r&&r.responseType||"text";}function _n1(i,r,n,e){r=r||{};const t=z8(r.type||"json");return t||b("Unknown data format type: "+r.type),i=t(i,r),r.parse&&dn1(i,r.parse,n,e),g(i,"columns")&&delete i.columns,i;}function dn1(i,r,n,e){if(!i.length)return;const t=d2();n=n||t.timeParse,e=e||t.utcParse;let o=i.columns||Object.keys(i[0]),u,h,s,a,l,c;r==="auto"&&(r=wr(i,o)),o=Object.keys(r);const y=o.map(x=>{const w=r[x];let B,m;if(w&&(w.startsWith("date:")||w.startsWith("utc:"))){B=w.split(/:(.+)?/,2),m=B[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1));const Fr=B[0]==="utc"?e:n;return Fr(m);}if(!O7[w])throw Error("Illegal format pattern: "+x+":"+w);return O7[w];});for(s=0,l=i.length,c=o.length;s<l;++s)for(u=i[s],a=0;a<c;++a)h=o[a],u[h]=y[a](u[h]);}const vn1=an2(typeof fetch!="undefined"&&fetch,null);function q8(t){const e=t||A1,n=[],i={};return n.add=s=>{const r=e(s);return i[r]||(i[r]=1,n.push(s)),n;},n.remove=s=>{const r=e(s);if(i[r]){i[r]=0;const u=n.indexOf(s);u>=0&&n.splice(u,1);}return n;},n;}async function I8(t,e){try{await e(t);}catch(n){t.error(n);}}const tt2=Symbol("vega_id");let Pt2=1;function Et(t){return!!(t&&d4(t));}function d4(t){return t[tt2];}function et2(t,e){return t[tt2]=e,t;}function W7(t){const e=t===Object(t)?t:{data:t};return d4(e)?e:et2(e,Pt2++);}function Ot1(t){return nt2(t,W7({}));}function nt2(t,e){for(const n in t)e[n]=t[n];return e;}function At2(t,e){return et2(e,d4(t));}function Mt1(t,e){return t?e?(n,i)=>t(n,i)||d4(e(n))-d4(e(i)):(n,i)=>t(n,i)||d4(n)-d4(i):null;}function it2(t){return t&&t.constructor===C6;}function C6(){const t=[],e=[],n=[],i=[],s=[];let r=null,u=!1;return{constructor:C6,insert(o){const a=p(o),h=a.length;for(let f=0;f<h;++f)t.push(a[f]);return this;},remove(o){const a=O1(o)?i:e,h=p(o),f=h.length;for(let l=0;l<f;++l)a.push(h[l]);return this;},modify(o,a,h){const f={field:a,value:On(h)};return O1(o)?(f.filter=o,s.push(f)):(f.tuple=o,n.push(f)),this;},encode(o,a){return O1(o)?s.push({filter:o,field:a}):n.push({tuple:o,field:a}),this;},clean(o){return r=o,this;},reflow(){return u=!0,this;},pulse(o,a){const h={},f={};let l,c,p,D,_,P;for(l=0,c=a.length;l<c;++l)h[d4(a[l])]=1;for(l=0,c=e.length;l<c;++l)_=e[l],h[d4(_)]=-1;for(l=0,c=i.length;l<c;++l)D=i[l],a.forEach(m=>{D(m)&&(h[d4(m)]=-1);});for(l=0,c=t.length;l<c;++l)_=t[l],P=d4(_),h[P]?h[P]=1:o.add.push(W7(t[l]));for(l=0,c=a.length;l<c;++l)_=a[l],h[d4(_)]<0&&o.rem.push(_);function J(m,Q,X){X?m[Q]=X(m):o.encode=Q,u||(f[d4(m)]=m);}for(l=0,c=n.length;l<c;++l)p=n[l],_=p.tuple,D=p.field,P=h[d4(_)],P>0&&(J(_,D,p.value),o.modifies(D));for(l=0,c=s.length;l<c;++l)p=s[l],D=p.filter,a.forEach(m=>{D(m)&&h[d4(m)]>0&&J(m,p.field,p.value);}),o.modifies(p.field);if(u)o.mod=e.length||i.length?a.filter(m=>h[d4(m)]>0):a.slice();else for(P in f)o.mod.push(f[P]);return(r||r==null&&(e.length||i.length))&&o.clean(!0),o;}};}const T4="_:mod:_";function U7(){Object.defineProperty(this,T4,{writable:!0,value:{}});}U7.prototype={set(t,e,n,i){const s=this,r=s[t],u=s[T4];return e!=null&&e>=0?(r[e]!==n||i)&&(r[e]=n,u[e+":"+t]=-1,u[t]=-1):(r!==n||i)&&(s[t]=n,u[t]=w1(n)?1+n.length:-1),s;},modified(t,e){const n=this[T4];if(arguments.length){if(w1(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1;}}else{for(const i in n)if(n[i])return!0;return!1;}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t];},clear(){return this[T4]={},this;}};let qt1=0;const St1="pulse",Lt2=new U7,bt1=1,Rt2=2;function g4(t,e,n,i){this.id=++qt1,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i);}function st2(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this);};}g4.prototype={targets(){return this._targets||(this._targets=q8(k1));},set(t){return this.value!==t?(this.value=t,1):0;},skip:st2(bt1),modified:st2(Rt2),parameters(t,e,n){e=e!==!1;const i=this._argval=this._argval||new U7,s=this._argops=this._argops||[],r=[];let u,o,a,h;const f=(l,c,p)=>{p instanceof g4?(p!==this&&(e&&p.targets().add(this),r.push(p)),s.push({op:p,name:l,index:c})):i.set(l,c,p);};for(u in t)if(o=t[u],u===St1)p(o).forEach(l=>{l instanceof g4?l!==this&&(l.targets().add(this),r.push(l)):b("Pulse parameters must be operator instances.");}),this.source=o;else if(w1(o))for(i.set(u,-1,Array(a=o.length)),h=0;h<a;++h)f(u,h,o[h]);else f(u,-1,o);return this.marshall().clear(),n&&(s.initonly=!0),r;},marshall(t){const e=this._argval||Lt2,n=this._argops;let i,s,r,u;if(n){const o=n.length;for(s=0;s<o;++s)i=n[s],r=i.op,u=r.modified()&&r.stamp===t,e.set(i.name,i.index,r.value,u);if(n.initonly){for(s=0;s<o;++s)i=n[s],i.op.targets().remove(this);this._argops=null,this._update=null;}}return e;},detach(){const t=this._argops;let e,n,i,s;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],s=i.op,s._targets&&s._targets.remove(this);this.pulse=null,this.source=null;},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation;}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t;}};function zt1(t,e,n,i){let s=1,r;return t instanceof g4?r=t:t&&t.prototype instanceof g4?r=new t:O1(t)?r=new g4(null,t):(s=0,r=new g4(t,e)),this.rank(r),s&&(i=n,n=e),n&&this.connect(r,r.parameters(n,i)),this.touch(r),r;}function It1(t,e){const n=t.rank,i=e.length;for(let s=0;s<i;++s)if(n<e[s].rank){this.rerank(t);return;}}let Ct1=0;function B6(t,e,n){this.id=++Ct1,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e);}function k8(t,e,n){return new B6(t,e,n);}B6.prototype={_filter:_1,_apply:A1,targets(){return this._targets||(this._targets=q8(k1));},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume;},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let s=0;s<i;++s)n[s].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation());}},filter(t){const e=k8(t);return this.targets().add(e),e;},apply(t){const e=k8(null,t);return this.targets().add(e),e;},merge(){const t=k8();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t;},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0;});},debounce(t){const e=k8();return this.targets().add(k8(null,null,Dn(t,n=>{const i=n.dataflow;e.receive(n),i&&i.run&&i.run();}))),e;},between(t,e){let n=!1;return t.targets().add(k8(null,null,()=>n=!0)),e.targets().add(k8(null,null,()=>n=!1)),this.filter(()=>n);},detach(){this._filter=_1,this._targets=null;}};function Tt1(t,e,n,i){const s=this,r=k8(n,i),u=function(h){h.dataflow=s;try{r.receive(h);}catch(f){s.error(f);}finally{s.run();}};let o;typeof t=="string"&&typeof document!="undefined"?o=document.querySelectorAll(t):o=p(t);const a=o.length;for(let h=0;h<a;++h)o[h].addEventListener(e,u);return r;}function Ut1(t,e){const n=this.locale();return _n1(t,e,n.timeParse,n.utcParse);}function jt1(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e));}async function Nt1(t,e){const n=this;let i=0,s;try{s=await n.loader().load(t,{context:"dataflow",response:Un1(e&&e.type)});try{s=n.parse(s,e);}catch(r){i=-2,n.warn("Data ingestion failed",t,r);}}catch(r){i=-1,n.warn("Loading failed",t,r);}return{data:s,status:i};}async function $t1(t,e,n){const i=this,s=i._pending||Kt1(i);s.requests+=1;const r=await i.request(e,n);return i.pulse(t,i.changeset().remove(_1).insert(r.data||[])),s.done(),r;}function Kt1(t){let e;const n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t));},t._pending=n;}const Wt2={skip:!0};function Bt1(t,e,n,i,s){const r=t instanceof g4?Gt1:Ht1;return r(this,t,e,n,i,s),this;}function Ht1(t,e,n,i,s,r){const u=J1({},r,Wt2);let o,a;O1(n)||(n=On(n)),i===void 0?o=h=>t.touch(n(h)):O1(i)?(a=new g4(null,i,s,!1),o=h=>{a.evaluate(h);const f=n(h),l=a.value;it2(l)?t.pulse(f,l,r):t.update(f,l,u);}):o=h=>t.update(n(h),i,u),e.apply(o);}function Gt1(t,e,n,i,s,r){if(i===void 0)e.targets().add(n);else{const u=r||{},o=new g4(null,Vt1(n,i),s,!1);o.modified(u.force),o.rank=e.rank,e.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),t.connect(n,[o]));}}function Vt1(t,e){return e=O1(e)?e:On(e),t?function(n,i){const s=e(n,i);return t.skip()||(t.skip(s!==this.value).value=s),s;}:e;}function Yt1(t){t.rank=++this._rank;}function Jt1(t){const e=[t];let n,i,s;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(s=i.length;--s>=0;)e.push(n=i[s]),n===t&&b("Cycle detected in dataflow graph.");}const j10={},v7=1<<0,y5=1<<1,w7=1<<2,Qt1=v7|y5,rt2=v7|w7,M5=v7|y5|w7,ot2=1<<3,S6=1<<4,lt2=1<<5,ut2=1<<6;function F6(t,e,n){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null;}function H5(t,e){const n=[];return Hn(t,e,i=>n.push(i)),n;}function ht1(t,e){const n={};return t.visit(e,i=>{n[d4(i)]=1;}),i=>n[d4(i)]?null:i;}function N7(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e;}F6.prototype={StopPropagation:j10,ADD:v7,REM:y5,MOD:w7,ADD_REM:Qt1,ADD_MOD:rt2,ALL:M5,REFLOW:ot2,SOURCE:S6,NO_SOURCE:lt2,NO_FIELDS:ut2,fork(t){return new F6(this.dataflow).init(this,t);},clone(){const t=this.fork(M5);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(M5|S6);},addAll(){let t=this;const e=!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length;return e||(t=new F6(this.dataflow).init(this),t.add=t.source,t.rem=[]),t;},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&ut2)&&(n.fields=t.fields),e&v7?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&y5?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&w7?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&lt2?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n;},runAfter(t){this.dataflow.runAfter(t);},changed(t){const e=t||M5;return e&v7&&this.add.length||e&y5&&this.rem.length||e&w7&&this.mod.length;},reflow(t){if(t)return this.fork(M5).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(w7,ht1(this,v7))),this;},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans;},modifies(t){const e=this.fields||(this.fields={});return w1(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this;},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?w1(t)?t.some(i=>n[i]):n[t]:!!n:!1;},filter(t,e){const n=this;return t&v7&&(n.addF=N7(n.addF,e)),t&y5&&(n.remF=N7(n.remF,e)),t&w7&&(n.modF=N7(n.modF,e)),t&S6&&(n.srcF=N7(n.srcF,e)),n;},materialize(t){t=t||M5;const e=this;return t&v7&&e.addF&&(e.add=H5(e.add,e.addF),e.addF=null),t&y5&&e.remF&&(e.rem=H5(e.rem,e.remF),e.remF=null),t&w7&&e.modF&&(e.mod=H5(e.mod,e.modF),e.modF=null),t&S6&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e;},visit(t,e){const n=this,i=e;if(t&S6)return Hn(n.source,n.srcF,i),n;t&v7&&Hn(n.add,n.addF,i),t&y5&&Hn(n.rem,n.remF,i),t&w7&&Hn(n.mod,n.modF,i);const s=n.source;if(t&ot2&&s){const r=n.add.length+n.mod.length;r===s.length||(r?Hn(s,ht1(n,rt2),i):Hn(s,n.srcF,i));}return n;}};function G8(t,e,n,i){const s=this;let r=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(const u of n){if(u.stamp!==e)continue;if(u.fields){const o=s.fields||(s.fields={});for(const a in u.fields)o[a]=1;}u.changed(s.ADD)&&(r|=s.ADD),u.changed(s.REM)&&(r|=s.REM),u.changed(s.MOD)&&(r|=s.MOD);}this.changes=r;}Pn(G8,F6,{fork(t){const e=new F6(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e;},changed(t){return this.changes&t;},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?w1(t)?t.some(i=>n[i]):n[t]:0;},filter(){b("MultiPulse does not support filtering.");},materialize(){b("MultiPulse does not support materialization.");},visit(t,e){const n=this,i=n.pulses,s=i.length;let r=0;if(t&n.SOURCE)for(;r<s;++r)i[r].visit(t,e);else for(;r<s;++r)i[r].stamp===n.stamp&&i[r].visit(t,e);return n;}});async function Xt1(t,e,n){const i=this,s=[];if(i._pulse)return at1(i);if(i._pending&&await i._pending,e&&await I8(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const r=++i._clock;i._pulse=new F6(i,r,t),i._touched.forEach(f=>i._enqueue(f,!0)),i._touched=q8(k1);let u=0,o,a,h;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue;}a=o.run(i._getPulse(o,t)),a.then?a=await a:a.async&&(s.push(a.async),a=j10),a!==j10&&o._targets&&o._targets.forEach(f=>i._enqueue(f)),++u;}}catch(f){i._heap.clear(),h=f;}if(i._input={},i._pulse=null,i.debug(`Pulse ${r}: ${u} operators`),h&&(i._postrun=[],i.error(h)),i._postrun.length){const f=i._postrun.sort((l,c)=>c.priority-l.priority);i._postrun=[];for(let l=0;l<f.length;++l)await I8(i,f[l].callback);}return n&&await I8(i,n),s.length&&Promise.all(s).then(f=>i.runAsync(null,()=>{f.forEach(l=>{try{l(i);}catch(c){i.error(c);}});})),i;}async function Zt2(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running;}function xt2(t,e,n){return this._pulse?at1(this):(this.evaluate(t,e,n),this);}function te3(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this);}catch(i){this.error(i);}}function at1(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t;}function ee3(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t));}function ne4(t,e){const n=t.source,i=this._clock;return n&&w1(n)?new G8(this,i,n.map(s=>s.pulse),e):this._input[t.id]||ie1(this._pulse,n&&n.pulse);}function ie1(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==j10&&(t.source=e.source),t);}const V5={skip:!1,force:!1};function se1(t,e){const n=e||V5;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this;}function re3(t,e,n){const i=n||V5;return(t.set(e)||i.force)&&this.touch(t,i),this;}function oe2(t,e,n){this.touch(t,n||V5);const i=new F6(this,this._clock+(this._pulse?0:1)),s=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,s),this;}function le1(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),ft2(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,ue3(e,0,t)):i=n,i;}};}function ft2(t,e,n,i){let s,r;const u=t[n];for(;n>e;){if(r=n-1>>1,s=t[r],i(u,s)<0){t[n]=s,n=r;continue;}break;}return t[n]=u;}function ue3(t,e,n){const i=e,s=t.length,r=t[e];let u=(e<<1)+1,o;for(;u<s;)o=u+1,o<s&&n(t[u],t[o])>=0&&(u=o),t[e]=t[u],e=u,u=(e<<1)+1;return t[e]=r,ft2(t,i,e,n);}function ct3(){this.logger(en()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=w6();try{this._loader=vn1();}catch(t){}this._touched=q8(k1),this._input={},this._pulse=null,this._heap=le1((t,e)=>t.qrank-e.qrank),this._postrun=[];}function L10(t){return function(){return this._log[t].apply(this,arguments);};}ct3.prototype={stamp(){return this._clock;},loader(t){return arguments.length?(this._loader=t,this):this._loader;},locale(t){return arguments.length?(this._locale=t,this):this._locale;},logger(t){return arguments.length?(this._log=t,this):this._log;},error:L10("error"),warn:L10("warn"),info:L10("info"),debug:L10("debug"),logLevel:L10("level"),cleanThreshold:1e4,add:zt1,connect:It1,rank:Yt1,rerank:Jt1,pulse:oe2,touch:se1,update:re3,changeset:C6,ingest:jt1,parse:Ut1,preload:$t1,request:Nt1,events:Tt1,on:Bt1,evaluate:Xt1,run:xt2,runAsync:Zt2,runAfter:te3,_enqueue:ee3,_getPulse:ne4};function dt2(t,e){g4.call(this,t,null,e);}Pn(dt2,g4,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e;},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n;},transform(){}});const Y6={};function he1(t){const e=pt1(t);return e&&e.Definition||null;}function pt1(t){return t=t&&t.toLowerCase(),g(Y6,t)?Y6[t]:null;}function*G9(t,n){if(n==null)for(let e of t)e!=null&&e!==""&&(e=+e)>=e&&(yield e);else{let e=-1;for(let l of t)l=n(l,++e,t),l!=null&&l!==""&&(l=+l)>=l&&(yield l);}}function K7(t,n,e){const l=Float64Array.from(G9(t,e));return l.sort(a1),n.map(o=>Hn1(l,o));}function W8(t,n){return K7(t,[.25,.5,.75],n);}function Z7(t,n){const e=t.length,l=v2(t,n),o=W8(t,n),r=(o[2]-o[0])/1.34,i=Math.min(l,r)||l||Math.abs(o[0])||1;return 1.06*i*Math.pow(e,-.2);}function pe1(t){const n=t.maxbins||20,e=t.base||10,l=Math.log(e),o=t.divide||[5,2];let r=t.extent[0],i=t.extent[1],u,f,s,c,a,h;const g=t.span||i-r||Math.abs(r)||1;if(t.step)u=t.step;else if(t.steps){for(c=g/n,a=0,h=t.steps.length;a<h&&t.steps[a]<c;++a);u=t.steps[Math.max(0,a-1)];}else{for(f=Math.ceil(Math.log(n)/l),s=t.minstep||0,u=Math.max(s,Math.pow(e,Math.round(Math.log(g)/l)-f));Math.ceil(g/u)>n;)u*=e;for(a=0,h=o.length;a<h;++a)c=u/o[a],c>=s&&g/c<=n&&(u=c);}c=Math.log(u);const p=c>=0?0:~~(-c/l)+1,M=Math.pow(e,-p-1);return(t.nice||t.nice===void 0)&&(c=Math.floor(r/u+M)*u,r=r<c?c-u:c,i=Math.ceil(i/u)*u),{start:r,stop:i===r?r+u:i,step:u};}var N8=Math.random;function Me1(t){N8=t;}function de1(t,n,e,l){if(!t.length)return[void 0,void 0];const o=Float64Array.from(G9(t,l)),r=o.length,i=n;let u,f,s,c;for(s=0,c=Array(i);s<i;++s){for(u=0,f=0;f<r;++f)u+=o[~~(N8()*r)];c[s]=u/r;}return c.sort(a1),[O2(c,e/2),O2(c,1-e/2)];}function me1(t,n,e,l){l=l||(h=>h);const o=t.length,r=new Float64Array(o);let i=0,u=1,f=l(t[0]),s=f,c=f+n,a;for(;u<o;++u){if(a=l(t[u]),a>=c){for(s=(f+s)/2;i<u;++i)r[i]=s;c=a+n,f=a;}s=a;}for(s=(f+s)/2;i<u;++i)r[i]=s;return e?we1(r,n+n/4):r;}function we1(t,n){const e=t.length;let l=0,o=1,r,i;for(;t[l]===t[o];)++o;for(;o<e;){for(r=o+1;t[o]===t[r];)++r;if(t[o]-t[o-1]<n){for(i=o+(l+r-o-o>>1);i<o;)t[i++]=t[o];for(;i>o;)t[i--]=t[l];}l=o,o=r;}return t;}function be1(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647;};}function Ne1(t,n){n==null&&(n=t,t=0);let e,l,o;const r={min(i){return arguments.length?(e=i||0,o=l-e,r):e;},max(i){return arguments.length?(l=i||0,o=l-e,r):l;},sample(){return e+Math.floor(o*N8());},pdf(i){return i===Math.floor(i)&&i>=e&&i<l?1/o:0;},cdf(i){const u=Math.floor(i);return u<e?0:u>=l?1:(u-e+1)/o;},icdf(i){return i>=0&&i<=1?e-1+Math.floor(i*o):NaN;}};return r.min(t).max(n);}const B7=Math.sqrt(2*Math.PI),Xe1=Math.SQRT2;let F7=NaN;function j11(t,n){t=t||0,n=n??1;let e=0,l=0,o,r;if(F7===F7)e=F7,F7=NaN;else{do e=N8()*2-1,l=N8()*2-1,o=e*e+l*l;while(o===0||o>1)r=Math.sqrt(-2*Math.log(o)/o),e*=r,F7=l*r;}return t+e*n;}function H6(t,n,e){e=e??1;const l=(t-(n||0))/e;return Math.exp(-.5*l*l)/(e*B7);}function z9(t,n,e){n=n||0,e=e??1;const l=(t-n)/e,o=Math.abs(l);let r;if(o>37)r=0;else{const i=Math.exp(-o*o/2);let u;o<7.07106781186547?(u=.0352624965998911*o+.700383064443688,u=u*o+6.37396220353165,u=u*o+33.912866078383,u=u*o+112.079291497871,u=u*o+221.213596169931,u=u*o+220.206867912376,r=i*u,u=.0883883476483184*o+1.75566716318264,u=u*o+16.064177579207,u=u*o+86.7807322029461,u=u*o+296.564248779674,u=u*o+637.333633378831,u=u*o+793.826512519948,u=u*o+440.413735824752,r=r/u):(u=o+.65,u=o+4/u,u=o+3/u,u=o+2/u,u=o+1/u,r=i/u/2.506628274631);}return l>0?1-r:r;}function P7(t,n,e){return t<0||t>1?NaN:(n||0)+(e??1)*Xe1*qe1(2*t-1);}function qe1(t){let n=-Math.log((1-t)*(1+t)),e;return n<6.25?(n-=3.125,e=-364441206401782e-35,e=-16850591381820166e-35+e*n,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=-1333171662854621e-31+e*n,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=-4054566272975207e-29+e*n,e=-8151934197605472e-29+e*n,e=26335093153082323e-28+e*n,e=-12975133253453532e-27+e*n,e=-5415412054294628e-26+e*n,e=10512122733215323e-25+e*n,e=-4112633980346984e-24+e*n,e=-29070369957882005e-24+e*n,e=42347877827932404e-23+e*n,e=-13654692000834679e-22+e*n,e=-13882523362786469e-21+e*n,e=18673420803405714e-20+e*n,e=-740702534166267e-18+e*n,e=-.006033670871430149+e*n,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=22137376921775787e-25,e=9075656193888539e-23+e*n,e=-27517406297064545e-23+e*n,e=18239629214389228e-24+e*n,e=15027403968909828e-22+e*n,e=-4013867526981546e-21+e*n,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=-47318229009055734e-21+e*n,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=-3550375203628475e-19+e*n,e=9532893797373805e-19+e*n,e=-.0016882755560235047+e*n,e=.002491442096107851+e*n,e=-.003751208507569241+e*n,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=-2555641816996525e-25+e*n,e=15076572693500548e-25+e*n,e=-3789465440126737e-24+e*n,e=761570120807834e-23+e*n,e=-1496002662714924e-23+e*n,e=2914795345090108e-23+e*n,e=-6771199775845234e-23+e*n,e=22900482228026655e-23+e*n,e=-99298272942317e-20+e*n,e=4526062597223154e-21+e*n,e=-1968177810553167e-20+e*n,e=7599527703001776e-20+e*n,e=-21503011930044477e-20+e*n,e=-13871931833623122e-20+e*n,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=Infinity,e*t;}function J5(t,n){let e,l;const o={mean(r){return arguments.length?(e=r||0,o):e;},stdev(r){return arguments.length?(l=r??1,o):l;},sample:()=>j11(e,l),pdf:r=>H6(r,e,l),cdf:r=>z9(r,e,l),icdf:r=>P7(r,e,l)};return o.mean(t).stdev(n);}function ye1(t,n){const e=J5();let l=0;const o={data(r){return arguments.length?(t=r,l=r?r.length:0,o.bandwidth(n)):t;},bandwidth(r){return arguments.length?(n=r,!n&&t&&(n=Z7(t)),o):n;},sample(){return t[~~(N8()*l)]+n*e.sample();},pdf(r){let i=0,u=0;for(;u<l;++u)i+=e.pdf((r-t[u])/n);return i/n/l;},cdf(r){let i=0,u=0;for(;u<l;++u)i+=e.cdf((r-t[u])/n);return i/l;},icdf(){throw Error("KDE icdf not supported.");}};return o.data(t);}function O8(t,n){return t=t||0,n=n??1,Math.exp(t+j11()*n);}function V6(t,n,e){if(t<=0)return 0;n=n||0,e=e??1;const l=(Math.log(t)-n)/e;return Math.exp(-.5*l*l)/(e*B7*t);}function $5(t,n,e){return z9(Math.log(t),n,e);}function _9(t,n,e){return Math.exp(P7(t,n,e));}function Ye1(t,n){let e,l;const o={mean(r){return arguments.length?(e=r||0,o):e;},stdev(r){return arguments.length?(l=r??1,o):l;},sample:()=>O8(e,l),pdf:r=>V6(r,e,l),cdf:r=>$5(r,e,l),icdf:r=>_9(r,e,l)};return o.mean(t).stdev(n);}function Ae1(t,n){let e=0,l;function o(i){const u=[];let f=0,s;for(s=0;s<e;++s)f+=u[s]=i[s]==null?1:+i[s];for(s=0;s<e;++s)u[s]/=f;return u;}const r={weights(i){return arguments.length?(l=o(n=i||[]),r):n;},distributions(i){return arguments.length?(i?(e=i.length,t=i):(e=0,t=[]),r.weights(n)):t;},sample(){const i=N8();let u=t[e-1],f=l[0],s=0;for(;s<e-1;f+=l[++s])if(i<f){u=t[s];break;}return u.sample();},pdf(i){let u=0,f=0;for(;f<e;++f)u+=l[f]*t[f].pdf(i);return u;},cdf(i){let u=0,f=0;for(;f<e;++f)u+=l[f]*t[f].cdf(i);return u;},icdf(){throw Error("Mixture icdf not supported.");}};return r.distributions(t).weights(n);}function x6(t,n){return n==null&&(n=t??1,t=0),t+(n-t)*N8();}function ee4(t,n,e){return e==null&&(e=n??1,n=0),t>=n&&t<=e?1/(e-n):0;}function ne5(t,n,e){return e==null&&(e=n??1,n=0),t<n?0:t>e?1:(t-n)/(e-n);}function te4(t,n,e){return e==null&&(e=n??1,n=0),t>=0&&t<=1?n+t*(e-n):NaN;}function Le(t,n){let e,l;const o={min(r){return arguments.length?(e=r||0,o):e;},max(r){return arguments.length?(l=r??1,o):l;},sample:()=>x6(e,l),pdf:r=>ee4(r,e,l),cdf:r=>ne5(r,e,l),icdf:r=>te4(r,e,l)};return n==null&&(n=t??1,t=0),o.min(t).max(n);}function re4(t,n,e){let l=0,o=0;for(const r of t){const i=e(r);if(n(r)==null||i==null||isNaN(i))continue;l+=(i-l)/++o;}return{coef:[l],predict:()=>l,rSquared:0};}function S7(t,n,e,l){const o=l-t*t,r=Math.abs(o)<1e-24?0:(e-t*n)/o,i=n-r*t;return[i,r];}function I9(t,n,e,l){t=t.filter(g=>{let p=n(g),M=e(g);return p!=null&&(p=+p)>=p&&M!=null&&(M=+M)>=M;}),l&&t.sort((g,p)=>n(g)-n(p));const o=t.length,r=new Float64Array(o),i=new Float64Array(o);let u=0,f=0,s=0,c,a,h;for(h of t)r[u]=c=+n(h),i[u]=a=+e(h),++u,f+=(c-f)/u,s+=(a-s)/u;for(u=0;u<o;++u)r[u]-=f,i[u]-=s;return[r,i,f,s];}function k9(t,n,e,l){let o=-1,r,i;for(const u of t)r=n(u),i=e(u),r!=null&&(r=+r)>=r&&i!=null&&(i=+i)>=i&&l(r,i,++o);}function Y7(t,n,e,l,o){let r=0,i=0;return k9(t,n,e,(u,f)=>{const s=f-o(u),c=f-l;r+=s*s,i+=c*c;}),1-r/i;}function oe3(t,n,e){let l=0,o=0,r=0,i=0,u=0;k9(t,n,e,(c,a)=>{++u,l+=(c-l)/u,o+=(a-o)/u,r+=(c*a-r)/u,i+=(c*c-i)/u;});const f=S7(l,o,r,i),s=c=>f[0]+f[1]*c;return{coef:f,predict:s,rSquared:Y7(t,n,e,o,s)};}function Fe1(t,n,e){let l=0,o=0,r=0,i=0,u=0;k9(t,n,e,(c,a)=>{++u,c=Math.log(c),l+=(c-l)/u,o+=(a-o)/u,r+=(c*a-r)/u,i+=(c*c-i)/u;});const f=S7(l,o,r,i),s=c=>f[0]+f[1]*Math.log(c);return{coef:f,predict:s,rSquared:Y7(t,n,e,o,s)};}function Se1(t,n,e){const[l,o,r,i]=I9(t,n,e);let u=0,f=0,s=0,c=0,a=0,h,g,p;k9(t,n,e,(b,w)=>{h=l[a++],g=Math.log(w),p=h*w,u+=(w*g-u)/a,f+=(p-f)/a,s+=(p*g-s)/a,c+=(h*p-c)/a;});const[M,d]=S7(f/i,u/i,s/i,c/i),m=b=>Math.exp(M+d*(b-r));return{coef:[Math.exp(M-d*r),d],predict:m,rSquared:Y7(t,n,e,i,m)};}function ke1(t,n,e){let l=0,o=0,r=0,i=0,u=0,f=0;k9(t,n,e,(a,h)=>{const g=Math.log(a),p=Math.log(h);++f,l+=(g-l)/f,o+=(p-o)/f,r+=(g*p-r)/f,i+=(g*g-i)/f,u+=(h-u)/f;});const s=S7(l,o,r,i),c=a=>s[0]*Math.pow(a,s[1]);return s[0]=Math.exp(s[0]),{coef:s,predict:c,rSquared:Y7(t,n,e,u,c)};}function le2(t,n,e){const[l,o,r,i]=I9(t,n,e),u=l.length;let f=0,s=0,c=0,a=0,h=0,g,p,M,d;for(g=0;g<u;)p=l[g],M=o[g++],d=p*p,f+=(d-f)/g,s+=(d*p-s)/g,c+=(d*d-c)/g,a+=(p*M-a)/g,h+=(d*M-h)/g;const m=c-f*f,b=f*m-s*s,w=(h*f-a*s)/b,X=(a*m-h*s)/b,q=-w*f,A=y=>(y=y-r,w*y*y+X*y+q+i);return{coef:[q-X*r+w*r*r+i,X-2*w*r,w],predict:A,rSquared:Y7(t,n,e,i,A)};}function Ie1(t,n,e,l){if(l===0)return re4(t,n,e);if(l===1)return oe3(t,n,e);if(l===2)return le2(t,n,e);const[o,r,i,u]=I9(t,n,e),f=o.length,s=[],c=[],a=l+1;let h,g,p,M,d;for(h=0;h<a;++h){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h)*r[p];for(s.push(M),d=new Float64Array(a),g=0;g<a;++g){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h+g);d[g]=M;}c.push(d);}c.push(s);const m=Qe2(c),b=w=>{w-=i;let X=u+m[0]+m[1]*w+m[2]*w*w;for(h=3;h<a;++h)X+=m[h]*Math.pow(w,h);return X;};return{coef:Ee1(a,m,-i,u),predict:b,rSquared:Y7(t,n,e,u,b)};}function Ee1(t,n,e,l){const o=Array(t);let r,i,u,f;for(r=0;r<t;++r)o[r]=0;for(r=t-1;r>=0;--r)for(u=n[r],f=1,o[r]+=u,i=1;i<=r;++i)f*=(r+1-i)/i,o[r-i]+=u*Math.pow(e,i)*f;return o[0]+=l,o;}function Qe2(t){const n=t.length-1,e=[];let l,o,r,i,u;for(l=0;l<n;++l){for(i=l,o=l+1;o<n;++o)Math.abs(t[l][o])>Math.abs(t[l][i])&&(i=o);for(r=l;r<n+1;++r)u=t[r][l],t[r][l]=t[r][i],t[r][i]=u;for(o=l+1;o<n;++o)for(r=n;r>=l;r--)t[r][o]-=t[r][l]*t[l][o]/t[l][l];}for(o=n-1;o>=0;--o){for(u=0,r=o+1;r<n;++r)u+=t[r][o]*e[r];e[o]=(t[n][o]-u)/t[o][o];}return e;}const ie2=1e-12;function Re1(t,n,e,l){const[o,r,i,u]=I9(t,n,e,!0),f=o.length,s=Math.max(2,~~(l*f)),c=new Float64Array(f),a=new Float64Array(f),h=new Float64Array(f).fill(1);for(let g=-1;++g<=2;){const p=[0,s-1];for(let d=0;d<f;++d){const m=o[d],b=p[0],w=p[1],X=m-o[b]>o[w]-m?b:w;let q=0,A=0,y=0,D=0,U=0;const fe=1/Math.abs(o[X]-m||1);for(let L=b;L<=w;++L){const E=o[L],C=r[L],Q=je2(Math.abs(m-E)*fe)*h[L],R=E*Q;q+=Q,A+=R,y+=C*Q,D+=C*R,U+=E*R;}const[se,ce]=S7(A/q,y/q,D/q,U/q);c[d]=se+ce*m,a[d]=Math.abs(r[d]-c[d]),ze2(o,d+1,p);}if(g===2)break;const M=Xn1(a);if(Math.abs(M)<1e-12)break;for(let d=0,m,b;d<f;++d)m=a[d]/(6*M),h[d]=m>=1?ie2:(b=1-m*m)*b;}return Pe(o,c,i,u);}function je2(t){return(t=1-t*t*t)*t*t;}function ze2(t,n,e){const l=t[n];let o=e[0],r=e[1]+1;if(r>=t.length)return;for(;n>o&&t[r]-l<=l-t[o];)e[0]=++o,e[1]=r,++r;}function Pe(t,n,e,l){const o=t.length,r=[];let i=0,u=0,f=[],s;for(;i<o;++i)s=t[i]+e,f[0]===s?f[1]+=(n[i]-f[1])/++u:(u=0,f[1]+=l,f=[s,n[i]],r.push(f));return f[1]+=l,r;}const De1=.5*Math.PI/180;function Ue1(t,n,e,l){e=e||25,l=Math.max(e,l||200);const o=M=>[M,t(M)],r=n[0],i=n[1],u=i-r,f=u/l,s=[o(r)],c=[];if(e===l){for(let M=1;M<l;++M)s.push(o(r+M/e*u));return s.push(o(i)),s;}else{c.push(o(i));for(let M=e;--M>0;)c.push(o(r+M/e*u));}let a=s[0],h=c[c.length-1];const g=1/u,p=Ce1(a[1],c);for(;h;){const M=o((a[0]+h[0])/2),d=M[0]-a[0]>=f;d&&Te1(a,M,h,g,p)>De1?c.push(M):(a=h,s.push(h),c.pop()),h=c[c.length-1];}return s;}function Ce1(t,n){let e=t,l=t;const o=n.length;for(let r=0;r<o;++r){const i=n[r][1];i<e&&(e=i),i>l&&(l=i);}return 1/(l-e);}function Te1(t,n,e,l,o){const r=Math.atan2(o*(e[1]-t[1]),l*(e[0]-t[0])),i=Math.atan2(o*(n[1]-t[1]),l*(n[0]-t[0]));return Math.abs(r-i);}function zt2(e){return t=>{const i=e.length;let n=1,r=String(e[0](t));for(;n<i;++n)r+="|"+e[n](t);return r;};}function K8(e){return!e||!e.length?function(){return"";}:e.length===1?e[0]:zt2(e);}function Se2(e,t,i){return i||e+(t?"_"+t:"");}const Q6=()=>{},Ft1={init:Q6,add:Q6,rem:Q6,idx:0},A8={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t);},rem:(e,t)=>{t<=e.min&&(e.min=NaN);},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t);},rem:(e,t)=>{t>=e.max&&(e.max=NaN);},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,i)=>{t<e.min&&(e.argmin=i);},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0);},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,i)=>{t>e.max&&(e.argmax=i);},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0);},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t;},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},I10=Object.keys(A8).filter(e=>e!=="__count__");function Lt3(e,t){return(i,n)=>J1({name:e,aggregate_param:n,out:i||e},Ft1,t);}[...I10,"__count__"].forEach(e=>{A8[e]=Lt3(e,A8[e]);});function _e1(e,t,i){return A8[e](i,t);}function Ne2(e,t){return e.idx-t.idx;}function Pt3(e){const t={};e.forEach(n=>t[n.name]=n);const i=n=>{if(!n.req)return;n.req.forEach(r=>{t[r]||i(t[r]=A8[r]());});};return e.forEach(i),Object.values(t).sort(Ne2);}function Tt2(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param));}function jt2(e,t){if(e==null||e===""){++this.missing;return;}if(e!==e)return;++this.valid,this._ops.forEach(i=>i.add(this,e,t));}function $t2(e,t){if(e==null||e===""){--this.missing;return;}if(e!==e)return;--this.valid,this._ops.forEach(i=>i.rem(this,e,t));}function Vt2(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e;}function Re2(e,t){const i=t||A1,n=Pt3(e),r=e.slice().sort(Ne2);function a(s){this._ops=n,this._out=r,this.cell=s,this.init();}return a.prototype.init=Tt2,a.prototype.add=jt2,a.prototype.rem=$t2,a.prototype.set=Vt2,a.prototype.get=i,a.fields=e.map(s=>s.out),a;}function G10(e){this._key=e?z1(e):d4,this.reset();}const E9=G10.prototype;E9.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null;},E9.add=function(e){this._add.push(e);},E9.rem=function(e){this._rem.push(e);},E9.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,i=this._key,n=e.length,r=t.length,a=Array(n-r),s={};let o,u,d;for(o=0;o<r;++o)s[i(t[o])]=1;for(o=0,u=0;o<n;++o)s[i(d=e[o])]?s[i(d)]=0:a[u++]=d;return this._rem=[],this._add=a;},E9.distinct=function(e){const t=this.values(),i={};let n=t.length,r=0,a;for(;--n>=0;)a=e(t[n])+"",g(i,a)||(i[a]=1,++r);return r;},E9.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),i=zn(t,e);this._ext=[t[i[0]],t[i[1]]],this._get=e;}return this._ext;},E9.argmin=function(e){return this.extent(e)[0]||{};},E9.argmax=function(e){return this.extent(e)[1]||{};},E9.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0;},E9.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0;},E9.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=W8(this.values(),e),this._get=e),this._q;},E9.q1=function(e){return this.quartile(e)[0];},E9.q2=function(e){return this.quartile(e)[1];},E9.q3=function(e){return this.quartile(e)[2];},E9.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=de1(this.values(),1e3,.05,e),this._get=e),this._ci;},E9.ci0=function(e){return this.ci(e)[0];},E9.ci1=function(e){return this.ci(e)[1];};function C7(e){dt2.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null;}C7.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:I10},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Pn(C7,dt2,{transform(e,t){const i=this,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return i.stamp=n.stamp,i.value&&(r||t.modified(i._inputs,!0))?(i._prev=i.value,i.value=r?i.init(e):Object.create(null),t.visit(t.SOURCE,a=>i.add(a))):(i.value=i.value||i.init(e),t.visit(t.REM,a=>i.rem(a)),t.visit(t.ADD,a=>i.add(a))),n.modifies(i._outputs),i._drop=e.drop!==!1,e.cross&&i._dims.length>1&&(i._drop=!1,i.cross()),t.clean()&&i._drop&&n.clean(!0).runAfter(()=>this.clean()),i.changes(n);},cross(){const e=this,t=e.value,i=e._dnames,n=i.map(()=>({})),r=i.length;function a(o){let u,d,l,f;for(u in o)for(l=o[u].tuple,d=0;d<r;++d)n[d][f=l[i[d]]]=f;}a(e._prev),a(t);function s(o,u,d){const l=i[d],f=n[d++];for(const m in f){const g=o?o+"|"+m:m;u[l]=f[m],d<r?s(g,u,d):t[g]||e.cell(g,u);}}s("",{},0);},init(e){const t=this._inputs=[],i=this._outputs=[],n={};function r(b){const O=p(R1(b)),M=O.length;let k=0,j;for(;k<M;++k)n[j=O[k]]||(n[j]=1,t.push(j));}this._dims=p(e.groupby),this._dnames=this._dims.map(b=>{const O=H1(b);return r(b),i.push(O),O;}),this.cellkey=e.key?e.key:K8(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],u=e.as||[],d=a.length,l={};let f,m,g,c,p1,y,x;for(d!==s.length&&b("Unmatched number of fields and aggregate ops."),x=0;x<d;++x){if(f=a[x],m=s[x],g=o[x]||null,f==null&&m!=="count"&&b("Null aggregate field specified."),p1=H1(f),y=Se2(m,p1,u[x]),i.push(y),m==="count"){this._counts.push(y);continue;}c=l[p1],c||(r(f),c=l[p1]=[],c.field=f,this._measures.push(c)),m!=="count"&&(this._countOnly=!1),c.push(_e1(m,g,y));}return this._measures=this._measures.map(b=>Re2(b,b.field)),Object.create(null);},cellkey:K8(),cell(e,t){let i=this.value[e];return i?i.num===0&&this._drop&&i.stamp<this.stamp?(i.stamp=this.stamp,this._adds[this._alen++]=i):i.stamp<this.stamp&&(i.stamp=this.stamp,this._mods[this._mlen++]=i):(i=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=i),i;},newcell(e,t){const i={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const n=this._measures,r=n.length;i.agg=Array(r);for(let a=0;a<r;++a)i.agg[a]=new n[a](i);}return i.store&&(i.data=new G10),i;},newtuple(e,t){const i=this._dnames,n=this._dims,r=n.length,a={};for(let s=0;s<r;++s)a[i[s]]=n[s](e);return t?At2(t.tuple,a):W7(a);},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t];},add(e){const t=this.cellkey(e),i=this.cell(t,e);if(i.num+=1,this._countOnly)return;i.store&&i.data.add(e);const n=i.agg;for(let r=0,a=n.length;r<a;++r)n[r].add(n[r].get(e),e);},rem(e){const t=this.cellkey(e),i=this.cell(t,e);if(i.num-=1,this._countOnly)return;i.store&&i.data.rem(e);const n=i.agg;for(let r=0,a=n.length;r<a;++r)n[r].rem(n[r].get(e),e);},celltuple(e){const t=e.tuple,i=this._counts;e.store&&e.data.values();for(let n=0,r=i.length;n<r;++n)t[i[n]]=e.num;if(!this._countOnly){const n=e.agg;for(let r=0,a=n.length;r<a;++r)n[r].set(t);}return t;},changes(e){const t=this._adds,i=this._mods,n=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let u,d,l,f;if(n)for(d in n)u=n[d],(!r||u.num)&&s.push(u.tuple);for(l=0,f=this._alen;l<f;++l)a.push(this.celltuple(t[l])),t[l]=null;for(l=0,f=this._mlen;l<f;++l)u=i[l],(u.num===0&&r?s:o).push(this.celltuple(u)),i[l]=null;return this._alen=this._mlen=0,this._prev=null,e;}});function J6(e){dt2.call(this,null,e);}J6.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Pn(J6,dt2,{transform(e,t){const i=e.interval!==!1,n=this._bins(e),r=n.start,a=n.step,s=e.as||["bin0","bin1"],o=s[0],u=s[1];let d;return e.modified()?(t=t.reflow(!0),d=t.SOURCE):d=t.modified(R1(e.field))?t.ADD_MOD:t.ADD,t.visit(d,i?l=>{const f=n(l);l[o]=f,l[u]=f==null?null:r+a*(1+(f-r)/a);}:l=>l[o]=n(l)),t.modifies(i?s:o);},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,i=pe1(e),n=i.step;let r=i.start,a=r+Math.ceil((i.stop-r)/n)*n,s,o;(s=e.anchor)!=null&&(o=s-(r+n*Math.floor((s-r)/n)),r+=o,a+=o);const u=function(d){let l=L2(t(d));return l==null?null:l<r?-Infinity:l>a?Infinity:(l=Math.max(r,Math.min(l,a-n)),r+n*Math.floor(1e-14+(l-r)/n));};return u.start=r,u.stop=i.stop,u.step=n,this.value=f(u,R1(t),e.name||"bin_"+H1(t));}});function Me2(e,t,i){const n=e;let r=t||[],a=i||[],s={},o=0;return{add:u=>a.push(u),remove:u=>s[n(u)]=++o,size:()=>r.length,data:(u,d)=>(o&&(r=r.filter(l=>!s[n(l)]),s={},o=0),d&&u&&r.sort(u),a.length&&(r=u?Bn(u,r,a.sort(u)):r.concat(a),a=[]),r)};}function Y8(e){dt2.call(this,[],e);}Y8.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Pn(Y8,dt2,{transform(e,t){const i=t.fork(t.ALL),n=Me2(d4,this.value,i.materialize(i.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return i.visit(i.REM,n.remove),this.modified(a),this.value=i.source=n.data(Mt1(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),i;}});function we2(e){g4.call(this,null,Bt2,e);}Pn(we2,g4);function Bt2(e){return this.value&&!e.modified()?this.value:Mn(e.fields,e.orders);}function H7(e){dt2.call(this,null,e);}H7.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Kt2(e,t,i){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break;}return e.match(i);}Pn(H7,dt2,{transform(e,t){const i=f=>m=>{for(var g=Kt2(o(m),e.case,a)||[],c,p=0,y=g.length;p<y;++p)s.test(c=g[p])||f(c);},n=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,u=e.as||["text","count"],d=i(f=>r[f]=1+(r[f]||0)),l=i(f=>r[f]-=1);return n?t.visit(t.SOURCE,d):(t.visit(t.ADD,d),t.visit(t.REM,l)),this._finish(t,u);},_parameterCheck(e,t){let i=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),i=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),i=!0),(e.modified("field")||t.modified(e.field.fields))&&(i=!0),i&&(this._counts={}),i;},_finish(e,t){const i=this._counts,n=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,u,d;for(o in i)u=n[o],d=i[o]||0,!u&&d?(n[o]=u=W7({}),u[r]=o,u[a]=d,s.add.push(u)):d===0?(u&&s.rem.push(u),i[o]=null,n[o]=null):u[a]!==d&&(u[a]=d,s.mod.push(u));return s.modifies(t);}});function X8(e){dt2.call(this,null,e);}X8.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Pn(X8,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.as||["a","b"],r=n[0],a=n[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(i.rem=o),o=t.materialize(t.SOURCE).source,i.add=this.value=Qt2(o,r,a,e.filter||_1)):i.mod=o,i.source=this.value,i.modifies(n);}});function Qt2(e,t,i,n){for(var r=[],a={},s=e.length,o=0,u,d;o<s;++o)for(a[t]=d=e[o],u=0;u<s;++u)a[i]=e[u],n(a)&&(r.push(W7(a)),a={},a[t]=d);return r;}const Ce2={kde:ye1,mixture:Ae1,normal:J5,lognormal:Ye1,uniform:Le},Gt2="distributions",Ue2="function",Jt2="field";function Ae2(e,t){const i=e[Ue2];g(Ce2,i)||b("Unknown distribution function: "+i);const n=Ce2[i]();for(const r in e)r===Jt2?n.data((e.from||t()).map(e[r])):r===Gt2?n[r](e[r].map(a=>Ae2(a,t))):typeof n[r]===Ue2&&n[r](e[r]);return n;}function Z8(e){dt2.call(this,null,e);}const Ie2=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Yt2={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Ie2},{name:"weights",type:"number",array:!0}]};Z8.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Ie2.concat(Yt2)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Pn(Z8,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const n=Ae2(e.distribution,Ht2(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&b("Invalid density method: "+s),!e.extent&&!n.data&&b("Missing density extent parameter."),s=n[s];const o=e.as||["value","density"],u=e.extent||Nn(n.data()),d=Ue1(s,u,r,a).map(l=>{const f={};return f[o[0]]=l[0],f[o[1]]=l[1],W7(f);});this.value&&(i.rem=this.value),this.value=i.add=i.source=d;}return i;}});function Ht2(e){return()=>e.materialize(e.SOURCE).source;}function ze3(e,t){return e?e.map((i,n)=>t[n]||H1(i)):null;}function ee5(e,t,i){const n=[],r=f=>f(u);let a,s,o,u,d,l;if(t==null)n.push(e.map(i));else for(a={},s=0,o=e.length;s<o;++s)u=e[s],d=t.map(r),l=a[d],l||(a[d]=l=[],l.dims=d,n.push(l)),l.push(i(u));return n;}const Fe2="bin";function te5(e){dt2.call(this,null,e);}te5.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Fe2}]};const Xt2=(e,t)=>Wn(Nn(e,t))/30;Pn(te5,dt2,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const i=t.materialize(t.SOURCE).source,n=ee5(t.source,e.groupby,A1),r=e.smooth||!1,a=e.field,s=e.step||Xt2(i,a),o=Mt1((c,p)=>a(c)-a(p)),u=e.as||Fe2,d=n.length;let l=Infinity,f=-Infinity,m=0,g;for(;m<d;++m){const c=n[m].sort(o);g=-1;for(const p of me1(c,s,r,a))p<l&&(l=p),p>f&&(f=p),c[++g][u]=p;}return this.value={start:l,stop:f,step:s},t.reflow(!0).modifies(u);}});function Le1(e){g4.call(this,null,Zt3,e),this.modified(!0);}Pn(Le1,g4);function Zt3(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:f(i=>t(i,e),R1(t),H1(t));}function ie3(e){dt2.call(this,[void 0,void 0],e);}ie3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Pn(ie3,dt2,{transform(e,t){const i=this.value,n=e.field,r=t.changed()||t.modified(n.fields)||e.modified("field");let a=i[0],s=i[1];if((r||a==null)&&(a=Infinity,s=-Infinity),t.visit(r?t.SOURCE:t.ADD,o=>{const u=L2(n(o));u!=null&&(u<a&&(a=u),u>s&&(s=u));}),!Number.isFinite(a)||!Number.isFinite(s)){let o=H1(n);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0;}this.value=[a,s];}});function ne6(e,t){g4.call(this,e),this.parent=t,this.count=0;}Pn(ne6,g4,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this;},add(e){this.count+=1,this.value.add.push(e);},rem(e){this.count-=1,this.value.rem.push(e);},mod(e){this.value.mod.push(e);},init(e){this.value.init(e,e.NO_SOURCE);},evaluate(){return this.value;}});function P8(e){dt2.call(this,{},e),this._keys=Sn();const t=this._targets=[];t.active=0,t.forEach=i=>{for(let n=0,r=t.active;n<r;++n)i(t[n],n,t);};}Pn(P8,dt2,{activate(e){this._targets[this._targets.active++]=e;},subflow(e,t,i,n){const r=this.value;let a=g(r,e)&&r[e],s,o;return a?a.value.stamp<i.stamp&&(a.init(i),this.activate(a)):(o=n||(o=this._group[e])&&o.tuple,s=i.dataflow,a=new ne6(i.fork(i.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a;},clean(){const e=this.value;let t=0;for(const i in e)if(e[i].count===0){const n=e[i].detachSubflow;n&&n(),delete e[i],++t;}if(t){const i=this._targets.filter(n=>n&&n.count>0);this.initTargets(i);}},initTargets(e){const t=this._targets,i=t.length,n=e?e.length:0;let r=0;for(;r<n;++r)t[r]=e[r];for(;r<i&&t[r]!=null;++r)t[r]=null;t.active=n;},transform(e,t){const i=t.dataflow,n=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=u=>this.subflow(u,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const d=d4(u),l=a.get(d);l!==void 0&&(a.delete(d),o(l).rem(u));}),t.visit(t.ADD,u=>{const d=n(u);a.set(d4(u),d),o(d).add(u);}),s||t.modified(n.fields)?t.visit(t.MOD,u=>{const d=d4(u),l=a.get(d),f=n(u);l===f?o(f).mod(u):(a.set(d,f),o(l).rem(u),o(f).add(u));}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{o(a.get(d4(u))).mod(u);}),s&&t.visit(t.REFLOW,u=>{const d=d4(u),l=a.get(d),f=n(u);l!==f&&(a.set(d,f),o(l).rem(u),o(f).add(u));}),t.clean()?i.runAfter(()=>{this.clean(),a.clean();}):a.empty>i.cleanThreshold&&i.runAfter(a.clean),t;}});function Pe1(e){g4.call(this,null,ei,e);}Pn(Pe1,g4);function ei(e){return this.value&&!e.modified()?this.value:w1(e.name)?p(e.name).map(t=>z1(t)):z1(e.name,e.as);}function ae2(e){dt2.call(this,Sn(),e);}ae2.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Pn(ae2,dt2,{transform(e,t){const i=t.dataflow,n=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,u=e.expr;let d=!0;t.visit(t.REM,f=>{const m=d4(f);n.has(m)?n.delete(m):s.push(f);}),t.visit(t.ADD,f=>{u(f,e)?a.push(f):n.set(d4(f),1);});function l(f){const m=d4(f),g=u(f,e),c=n.get(m);g&&c?(n.delete(m),a.push(f)):!g&&!c?(n.set(m,1),s.push(f)):d&&g&&!c&&o.push(f);}return t.visit(t.MOD,l),e.modified()&&(d=!1,t.visit(t.REFLOW,l)),n.empty>i.cleanThreshold&&i.runAfter(n.clean),r;}});function re5(e){dt2.call(this,[],e);}re5.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Pn(re5,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.fields,r=ze3(n,e.as||[]),a=e.index||null,s=r.length;return i.rem=this.value,t.visit(t.SOURCE,o=>{const u=n.map(c=>c(o)),d=u.reduce((c,p)=>Math.max(c,p.length),0);let l=0,f,m,g;for(;l<d;++l){for(m=Ot1(o),f=0;f<s;++f)m[r[f]]=(g=u[f][l])==null?null:g;a&&(m[a]=l),i.add.push(m);}}),this.value=i.source=i.add,a&&i.modifies(a),i.modifies(r);}});function se2(e){dt2.call(this,[],e);}se2.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Pn(se2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.fields,r=n.map(H1),a=e.as||["key","value"],s=a[0],o=a[1],u=n.length;return i.rem=this.value,t.visit(t.SOURCE,d=>{for(let l=0,f;l<u;++l)f=Ot1(d),f[s]=r[l],f[o]=n[l](d),i.add.push(f);}),this.value=i.source=i.add,i.modifies(a);}});function oe4(e){dt2.call(this,null,e);}oe4.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Pn(oe4,dt2,{transform(e,t){const i=e.expr,n=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(i.fields)||t.modified(n)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(n),t.visit(a,s=>s[n]=i(s,e));}});function Te2(e){dt2.call(this,[],e);}Pn(Te2,dt2,{transform(e,t){const i=t.fork(t.ALL),n=e.generator;let r=this.value,a=e.size-r.length,s,o,u;if(a>0){for(s=[];--a>=0;)s.push(u=W7(n(e))),r.push(u);i.add=i.add.length?i.materialize(i.ADD).add.concat(s):s;}else o=r.slice(0,-a),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(o):o,r=r.slice(-a);return i.source=this.value=r,i;}});const T5={value:"value",median:Xn1,mean:Pn1,min:L4,max:_4},ti=[];function ue4(e){dt2.call(this,[],e);}ue4.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ii(e){var t=e.method||T5.value,i;if(T5[t]==null)b("Unrecognized imputation method: "+t);else return t===T5.value?(i=e.value!==void 0?e.value:0,()=>i):T5[t];}function ni(e){const t=e.field;return i=>i?t(i):NaN;}Pn(ue4,dt2,{transform(e,t){var i=t.fork(t.ALL),n=ii(e),r=ni(e),a=H1(e.field),s=H1(e.key),o=(e.groupby||[]).map(H1),u=ai(t.source,e.groupby,e.key,e.keyvals),d=[],l=this.value,f=u.domain.length,m,g,c,p,y,x,b,O,M,k;for(y=0,O=u.length;y<O;++y)for(m=u[y],c=m.values,g=NaN,b=0;b<f;++b){if(m[b]!=null)continue;for(p=u.domain[b],k={_impute:!0},x=0,M=c.length;x<M;++x)k[o[x]]=c[x];k[s]=p,k[a]=Number.isNaN(g)?g=n(m,r):g,d.push(W7(k));}return d.length&&(i.add=i.materialize(i.ADD).add.concat(d)),l.length&&(i.rem=i.materialize(i.REM).rem.concat(l)),this.value=d,i;}});function ai(e,t,i,n){var r=x=>x(y),a=[],s=n?n.slice():[],o={},u={},d,l,f,m,g,c,p,y;for(s.forEach((x,b)=>o[x]=b+1),m=0,p=e.length;m<p;++m)y=e[m],c=i(y),g=o[c]||(o[c]=s.push(c)),l=(d=t?t.map(r):ti)+"",(f=u[l])||(f=u[l]=[],a.push(f),f.values=d),f[g-1]=y;return a.domain=s,a;}function le3(e){C7.call(this,e);}le3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:I10},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Pn(le3,C7,{transform(e,t){const i=this,n=e.modified();let r;return i.value&&(n||t.modified(i._inputs,!0))?(r=i.value=n?i.init(e):{},t.visit(t.SOURCE,a=>i.add(a))):(r=i.value=i.value||this.init(e),t.visit(t.REM,a=>i.rem(a)),t.visit(t.ADD,a=>i.add(a))),i.changes(),t.visit(t.SOURCE,a=>{J1(a,r[i.cellkey(a)].tuple);}),t.reflow(n).modifies(this._outputs);},changes(){const e=this._adds,t=this._mods;let i,n;for(i=0,n=this._alen;i<n;++i)this.celltuple(e[i]),e[i]=null;for(i=0,n=this._mlen;i<n;++i)this.celltuple(t[i]),t[i]=null;this._alen=this._mlen=0;}});function de2(e){dt2.call(this,null,e);}de2.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Pn(de2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const n=t.materialize(t.SOURCE).source,r=ee5(n,e.groupby,e.field),a=(e.groupby||[]).map(H1),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],d=[];let l=e.extent,f=e.steps||e.minsteps||25,m=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&b("Invalid density method: "+o),e.resolve==="shared"&&(l||(l=Nn(n,e.field)),f=m=e.steps||m),r.forEach(g=>{const c=ye1(g,s)[o],p=e.counts?g.length:1,y=l||Nn(g);Ue1(c,y,f,m).forEach(x=>{const b={};for(let O=0;O<a.length;++O)b[a[O]]=g.dims[O];b[u[0]]=x[0],b[u[1]]=x[1]*p,d.push(W7(b));});}),this.value&&(i.rem=this.value),this.value=i.add=i.source=d;}return i;}});function je3(e){g4.call(this,null,ri,e);}Pn(je3,g4);function ri(e){return this.value&&!e.modified()?this.value:qn(e.fields,e.flat);}function $e1(e){dt2.call(this,[],e),this._pending=null;}Pn($e1,dt2,{transform(e,t){const i=t.dataflow;if(this._pending)return fe1(this,t,this._pending);if(si(e))return t.StopPropagation;if(e.values)return fe1(this,t,i.parse(e.values,e.format));if(e.async){const n=i.request(e.url,e.format).then(r=>(this._pending=p(r.data),a=>a.touch(this)));return{async:n};}else return i.request(e.url,e.format).then(n=>fe1(this,t,p(n.data)));}});function si(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"));}function fe1(e,t,i){i.forEach(W7);const n=t.fork(t.NO_FIELDS&t.NO_SOURCE);return n.rem=e.value,e.value=n.source=n.add=i,e._pending=null,n.rem.length&&n.clean(!0),n;}function me2(e){dt2.call(this,{},e);}me2.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Pn(me2,dt2,{transform(e,t){const i=e.fields,n=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=i.length;let u=s?t.SOURCE:t.ADD,d=t,l=e.as,f,m,g;return r?(m=r.length,o>1&&!l&&b('Multi-field lookup requires explicit "as" parameter.'),l&&l.length!==o*m&&b('The "as" parameter has too few output field names.'),l=l||r.map(H1),f=function(c){for(var p=0,y=0,x,b;p<o;++p)if(b=n.get(i[p](c)),b==null)for(x=0;x<m;++x,++y)c[l[y]]=a;else for(x=0;x<m;++x,++y)c[l[y]]=r[x](b);}):(l||b("Missing output field names."),f=function(c){for(var p=0,y;p<o;++p)y=n.get(i[p](c)),c[l[p]]=y??a;}),s?d=t.reflow(!0):(g=i.some(c=>t.modified(c.fields)),u|=g?t.MOD:0),t.visit(u,f),d.modifies(l);}});function Ve1(e){g4.call(this,null,oi,e);}Pn(Ve1,g4);function oi(e){if(this.value&&!e.modified())return this.value;const t=e.extents,i=t.length;let n=Infinity,r=-Infinity,a,s;for(a=0;a<i;++a)s=t[a],s[0]<n&&(n=s[0]),s[1]>r&&(r=s[1]);return[n,r];}function We1(e){g4.call(this,null,ui,e);}Pn(We1,g4);function ui(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,i)=>t.concat(i),[]);}function Be1(e){dt2.call(this,null,e);}Pn(Be1,dt2,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS);}});function ce(e){C7.call(this,e);}ce.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:I10,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Pn(ce,C7,{_transform:C7.prototype.transform,transform(e,t){return this._transform(li(e,t),t);}});function li(e,t){const i=e.field,n=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=R1(i).concat(R1(n)),s=fi(i,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>di(o,i,n,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)};}function di(e,t,i,n){return f(r=>t(r)===e?i(r):NaN,n,e+"");}function fi(e,t,i){const n={},r=[];return i.visit(i.SOURCE,a=>{const s=e(a);n[s]||(n[s]=1,r.push(s));}),r.sort(P1),t?r.slice(0,t):r;}function Ke1(e){P8.call(this,e);}Pn(Ke1,P8,{transform(e,t){const i=e.subflow,n=e.field,r=a=>this.subflow(d4(a),i,t,a);return(e.modified("field")||n&&t.modified(R1(n)))&&b("PreFacet does not support field modification."),this.initTargets(),n?(t.visit(t.MOD,a=>{const s=r(a);n(a).forEach(o=>s.mod(o));}),t.visit(t.ADD,a=>{const s=r(a);n(a).forEach(o=>s.add(W7(o)));}),t.visit(t.REM,a=>{const s=r(a);n(a).forEach(o=>s.rem(o));})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t;}});function he2(e){dt2.call(this,null,e);}he2.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Pn(he2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.fields,r=ze3(e.fields,e.as||[]),a=n?(o,u)=>mi(o,u,n,r):nt2;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const u=d4(o);i.rem.push(s[u]),s[u]=null;}),t.visit(t.ADD,o=>{const u=a(o,W7({}));s[d4(o)]=u,i.add.push(u);}),t.visit(t.MOD,o=>{i.mod.push(a(o,s[d4(o)]));}),i;}});function mi(e,t,i,n){for(let r=0,a=i.length;r<a;++r)t[n[r]]=i[r](e);return t;}function Qe3(e){dt2.call(this,null,e);}Pn(Qe3,dt2,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation;}});function pe2(e){dt2.call(this,null,e);}pe2.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};Pn(pe2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS),n=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return i.source=this.value,i;const r=t.materialize(t.SOURCE).source,a=ee5(r,e.groupby,e.field),s=(e.groupby||[]).map(H1),o=[],u=e.step||.01,d=e.probs||ie(u/2,1-1e-14,u),l=d.length;return a.forEach(f=>{const m=K7(f,d);for(let g=0;g<l;++g){const c={};for(let p=0;p<s.length;++p)c[s[p]]=f.dims[p];c[n[0]]=d[g],c[n[1]]=m[g],o.push(W7(c));}}),this.value&&(i.rem=this.value),this.value=i.add=i.source=o,i;}});function Ge1(e){dt2.call(this,null,e);}Pn(Ge1,dt2,{transform(e,t){let i,n;return this.value?n=this.value:(i=t=t.addAll(),n=this.value={}),e.derive&&(i=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=d4(r);i.rem.push(n[a]),n[a]=null;}),t.visit(t.ADD,r=>{const a=Ot1(r);n[d4(r)]=a,i.add.push(a);}),t.visit(t.MOD,r=>{const a=n[d4(r)];for(const s in r)a[s]=r[s],i.modifies(s);i.mod.push(a);})),i;}});function ge1(e){dt2.call(this,[],e),this.count=0;}ge1.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Pn(ge1,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.modified("size"),r=e.size,a=this.value.reduce((l,f)=>(l[d4(f)]=1,l),{});let s=this.value,o=this.count,u=0;function d(l){let f,m;s.length<r?s.push(l):(m=~~((o+1)*N8()),m<s.length&&m>=u&&(f=s[m],a[d4(f)]&&i.rem.push(f),s[m]=l)),++o;}if(t.rem.length&&(t.visit(t.REM,l=>{const f=d4(l);a[f]&&(a[f]=-1,i.rem.push(l)),--o;}),s=s.filter(l=>a[d4(l)]!==-1)),(t.rem.length||n)&&s.length<r&&t.source&&(u=o=s.length,t.visit(t.SOURCE,l=>{a[d4(l)]||d(l);}),u=-1),n&&s.length>r){const l=s.length-r;for(let f=0;f<l;++f)a[d4(s[f])]=-1,i.rem.push(s[f]);s=s.slice(l);}return t.mod.length&&t.visit(t.MOD,l=>{a[d4(l)]&&i.mod.push(l);}),t.add.length&&t.visit(t.ADD,d),(t.add.length||u<0)&&(i.add=s.filter(l=>!a[d4(l)])),this.count=o,this.value=i.source=s,i;}});function ve1(e){dt2.call(this,null,e);}ve1.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Pn(ve1,dt2,{transform(e,t){if(this.value&&!e.modified())return;const i=t.materialize().fork(t.MOD),n=e.as||"data";return i.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ie(e.start,e.stop,e.step||1).map(r=>{const a={};return a[n]=r,W7(a);}),i.add=t.add.concat(this.value),i;}});function Je1(e){dt2.call(this,null,e),this.modified(!0);}Pn(Je1,dt2,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation;}});function ye2(e){dt2.call(this,null,e);}const Ye2=["unit0","unit1"];ye2.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:V3,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Ye2}]},Pn(ye2,dt2,{transform(e,t){const i=e.field,n=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Q4:G6)(a.unit).offset,o=e.as||Ye2,u=o[0],d=o[1],l=a.step;let f=a.start||Infinity,m=a.stop||-Infinity,g=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(R1(i)))&&(t=t.reflow(!0),g=t.SOURCE,f=Infinity,m=-Infinity),t.visit(g,c=>{const p=i(c);let y,x;p==null?(c[u]=null,n&&(c[d]=null)):(c[u]=y=x=a(p),n&&(c[d]=x=s(y,l)),y<f&&(f=y),x>m&&(m=x));}),a.start=f,a.stop=m,t.modifies(n?o:u);},_floor(e,t){const i=e.timezone==="utc",{units:n,step:r}=e.units?{units:e.units,step:e.step||1}:ue1({extent:e.extent||Nn(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a1=Z5(n),s=this.value||{},o=(i?Kt:Pt)(a1,r);return o.unit=a(a1),o.units=a1,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o;}});function He1(e){dt2.call(this,Sn(),e);}Pn(He1,dt2,{transform(e,t){const i=t.dataflow,n=e.field,r=this.value,a=o=>r.set(n(o),o);let s=!0;return e.modified("field")||t.modified(n.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(n(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>i.cleanThreshold&&i.runAfter(r.clean),t.fork();}});function Xe2(e){dt2.call(this,null,e);}Pn(Xe2,dt2,{transform(e,t){const i=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);i&&(this.value=(e.sort?t.source.slice().sort(Mt1(e.sort)):t.source).map(e.field));}});function hi(e,t,i,n){const r=z10[e](t,i);return{init:r.init||y1,update:function(a,s){s[n]=r.next(a);}};}const z10={row_number:function(){return{next:e=>e.index+1};},rank:function(){let e;return{init:()=>e=1,next:t=>{const i=t.index,n=t.data;return i&&t.compare(n[i-1],n[i])?e=i+1:e;}};},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const i=t.index,n=t.data;return i&&t.compare(n[i-1],n[i])?++e:e;}};},percent_rank:function(){const e=z10.rank(),t=e.next;return{init:e.init,next:i=>(t(i)-1)/(i.data.length-1)};},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const i=t.data,n=t.compare;let r=t.index;if(e<r){for(;r+1<i.length&&!n(i[r],i[r+1]);)++r;e=r;}return(1+e)/i.length;}};},ntile:function(e,t){t=+t,t>0||b("ntile num must be greater than zero.");const i=z10.cume_dist(),n=i.next;return{init:i.init,next:r=>Math.ceil(t*n(r))};},lag:function(e,t){return t=+t||1,{next:i=>{const n=i.index-t;return n>=0?e(i.data[n]):null;}};},lead:function(e,t){return t=+t||1,{next:i=>{const n=i.index+t,r=i.data;return n<r.length?e(r[n]):null;}};},first_value:function(e){return{next:t=>e(t.data[t.i0])};},last_value:function(e){return{next:t=>e(t.data[t.i1-1])};},nth_value:function(e,t){return t=+t,t>0||b("nth_value nth must be greater than zero."),{next:i=>{const n=i.i0+(t-1);return n<i.i1?e(i.data[n]):null;}};},prev_value:function(e){let t;return{init:()=>t=null,next:i=>{const n=e(i.data[i.index]);return n!=null?t=n:t;}};},next_value:function(e){let t,i;return{init:()=>(t=null,i=-1),next:n=>{const r=n.data;return n.index<=i?t:(i=pi(e,r,n.index))<0?(i=r.length,t=null):t=e(r[i]);}};}};function pi(e,t,i){for(let n=t.length;i<n;++i){const r=e(t[i]);if(r!=null)return i;}return-1;}const gi=Object.keys(z10);function Ze(e){const t=p(e.ops),i=p(e.fields),n=p(e.params),r=p(e.aggregate_params),a=p(e.as),s=this.outputs=[],o=this.windows=[],u={},d={},l=[],f=[];let m=!0;function g1(c){p(R1(c)).forEach(p=>u[p]=1);}g1(e.sort),t.forEach((c,p)=>{const y=i[p],x=n[p],b1=r[p]||null,O=H1(y),M=Se2(c,O,a[p]);if(g1(y),s.push(M),g(z10,c))o.push(hi(c,y,x,M));else{if(y==null&&c!=="count"&&b("Null aggregate field specified."),c==="count"){l.push(M);return;}m=!1;let k=d[O];k||(k=d[O]=[],k.field=y,f.push(k)),k.push(_e1(c,b1,M));}}),(l.length||f.length)&&(this.cell=vi(f,l,m)),this.inputs=Object.keys(u);}const et3=Ze.prototype;et3.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init();},et3.update=function(e,t){const i=this.cell,n=this.windows,r=e.data,a=n&&n.length;let s;if(i){for(s=e.p0;s<e.i0;++s)i.rem(r[s]);for(s=e.p1;s<e.i1;++s)i.add(r[s]);i.set(t);}for(s=0;s<a;++s)n[s].update(e,t);};function vi(e,t,i){e=e.map(u=>Re2(u,u.field));const n={num:0,agg:null,store:!1,count:t};if(!i)for(var r=e.length,a=n.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](n);if(n.store)var o=n.data=new G10;return n.add=function(u){if(n.num+=1,i)return;o&&o.add(u);for(let d=0;d<r;++d)a[d].add(a[d].get(u),u);},n.rem=function(u){if(n.num-=1,i)return;o&&o.rem(u);for(let d=0;d<r;++d)a[d].rem(a[d].get(u),u);},n.set=function(u){let d,l;for(o&&o.values(),d=0,l=t.length;d<l;++d)u[t[d]]=n.num;if(!i)for(d=0,l=a.length;d<l;++d)a[d].set(u);},n.init=function(){n.num=0,o&&o.reset();for(let u=0;u<r;++u)a[u].init();},n;}function xe1(e){dt2.call(this,{},e),this._mlen=0,this._mods=[];}xe1.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:gi.concat(I10)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Pn(xe1,dt2,{transform(e,t){this.stamp=t.stamp;const i=e.modified(),n=Mt1(e.sort),r=K8(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||i)&&(s=this.state=new Ze(e)),i||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,u=this._mlen;o<u;++o)yi(this._mods[o],s,n,e);return this._mlen=0,this._mods=[],t.reflow(i).modifies(s.outputs);},group(e){let t=this.value[e];return t||(t=this.value[e]=Me2(d4),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t;}});function yi(e,t,i,n){const r=n.sort,a=r&&!n.ignorePeers,s=n.frame||[null,0],o=e.data(i),u=o.length,d=a?G4(r):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||On(-1)};t.init();for(let f=0;f<u;++f)xi(l,s,f,u),a&&bi(l,d),t.update(l,o[f]);}function xi(e,t,i,n){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,i-Math.abs(t[0])),e.i1=t[1]==null?n:Math.min(n,i+Math.abs(t[1])+1),e.index=i;}function bi(e,t){const i=e.i0,n=e.i1-1,r=e.compare,a=e.data,s=a.length-1;i>0&&!r(a[i],a[i-1])&&(e.i0=t.left(a,a[i])),n<s&&!r(a[n],a[n+1])&&(e.i1=t.right(a,a[n]));}const mod=function(){return{aggregate:C7,bin:J6,collect:Y8,compare:we2,countpattern:H7,cross:X8,density:Z8,dotbin:te5,expression:Le1,extent:ie3,facet:P8,field:Pe1,filter:ae2,flatten:re5,fold:se2,formula:oe4,generate:Te2,impute:ue4,joinaggregate:le3,kde:de2,key:je3,load:$e1,lookup:me2,multiextent:Ve1,multivalues:We1,params:Be1,pivot:ce,prefacet:Ke1,project:he2,proxy:Qe3,quantile:pe2,relay:Ge1,sample:ge1,sequence:ve1,sieve:Je1,subflow:ne6,timeunit:ye2,tupleindex:He1,values:Xe2,window:xe1,default:null};}();const c=Math.PI,y6=2*c,u3=1e-6,q9=y6-u3;function E10($){this._+=$[0];for(let t=1,h=$.length;t<h;++t)this._+=arguments[t]+$[t];}function C8($){let t=Math.floor($);if(!(t>=0))throw new Error(`invalid digits: ${$}`);if(t>15)return E10;const h=10**t;return function(i){this._+=i[0];for(let s=1,e=i.length;s<e;++s)this._+=Math.round(arguments[s]*h)/h+i[s];};}class f6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?E10:C8(t);}moveTo(t,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}`;}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`);}lineTo(t,h){this._append`L${this._x1=+t},${this._y1=+h}`;}quadraticCurveTo(t,h,i,s){this._append`Q${+t},${+h},${this._x1=+i},${this._y1=+s}`;}bezierCurveTo(t,h,i,s,e,a){this._append`C${+t},${+h},${+i},${+s},${this._x1=+e},${this._y1=+a}`;}arcTo(t,h,i,s,e){if(t=+t,h=+h,i=+i,s=+s,e=+e,e<0)throw new Error(`negative radius: ${e}`);let a=this._x1,d=this._y1,l=i-t,p=s-h,_=a-t,o=d-h,n=_*_+o*o;if(this._x1===null)this._append`M${this._x1=t},${this._y1=h}`;else if(n>1e-6)if(!(Math.abs(o*l-p*_)>1e-6)||!e)this._append`L${this._x1=t},${this._y1=h}`;else{let r=i-a,M=s-d,v=l*l+p*p,m=r*r+M*M,b=Math.sqrt(v),T=Math.sqrt(n),w=e*Math.tan((c-Math.acos((v+n-m)/(2*b*T)))/2),x=w/T,A=w/b;Math.abs(x-1)>1e-6&&this._append`L${t+x*_},${h+x*o}`,this._append`A${e},${e},0,0,${+(o*r>_*M)},${this._x1=t+A*l},${this._y1=h+A*p}`;}}arc(t,h,i,s,e,a){if(t=+t,h=+h,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(s),l=i*Math.sin(s),p=t+d,_=h+l,o=1^a,n=a?s-e:e-s;if(this._x1===null?this._append`M${p},${_}`:(Math.abs(this._x1-p)>1e-6||Math.abs(this._y1-_)>1e-6)&&this._append`L${p},${_}`,!i)return;n<0&&(n=n%y6+y6),n>q9?this._append`A${i},${i},0,1,${o},${t-d},${h-l}A${i},${i},0,1,${o},${this._x1=p},${this._y1=_}`:n>1e-6&&this._append`A${i},${i},0,${+(n>=c)},${o},${this._x1=t+i*Math.cos(e)},${this._y1=h+i*Math.sin(e)}`;}rect(t,h,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}h${i=+i}v${+s}h${-i}Z`;}toString(){return this._;}}function L11(){return new f6;}L11.prototype=f6.prototype;function f7(t){return function(){return t;};}const Bt3=Math.abs,S8=Math.atan2,q10=Math.cos,wn3=Math.max,U8=Math.min,R7=Math.sin,x7=Math.sqrt,I11=Math.PI,et4=I11/2,L12=2*I11;function Sn1(t){return t>1?0:t<-1?I11:Math.acos(t);}function Yt3(t){return t>=1?et4:t<=-1?-et4:Math.asin(t);}function K9(t){let n=3;return t.digits=function(i){if(!arguments.length)return n;if(i==null)n=null;else{const e=Math.floor(i);if(!(e>=0))throw new RangeError(`invalid digits: ${i}`);n=e;}return t;},()=>new f6(n);}function Nn1(t){return t.innerRadius;}function En2(t){return t.outerRadius;}function An3(t){return t.startAngle;}function Rn3(t){return t.endAngle;}function Cn2(t){return t&&t.padAngle;}function Pn2(t,n,i,e,r,s,h,o){var l=i-t,a=e-n,u=h-r,_=o-s,c=_*l-u*a;return c*c<1e-12?void 0:(c=(u*(n-s)-_*(t-r))/c,[t+c*l,n+c*a]);}function st3(t,n,i,e,r,s,h){var o=t-i,l=n-e,a=(h?s:-s)/x7(o*o+l*l),u=a*l,_=-a*o,c=t+u,y=n+_,m=i+u,g=e+_,k=(c+m)/2,d=(y+g)/2,w=m-c,b=g-y,T=w*w+b*b,E=r-s,A=c*g-m*y,X=(b<0?-1:1)*x7(wn3(0,E*E*T-A*A)),z=(A*b-w*X)/T,D=(-A*w-b*X)/T,B=(A*b+w*X)/T,C=(-A*w+b*X)/T,P=z-k,p=D-d,v=B-k,H=C-d;return P*P+p*p>v*v+H*H&&(z=B,D=C),{cx:z,cy:D,x01:-u,y01:-_,x11:z*(r/E-1),y11:D*(r/E-1)};}function Mn1(){var t=Nn1,n=En2,i=f7(0),e=null,r=An3,s=Rn3,h=Cn2,o=null,l=K9(a);function a(){var u,_,c=+t.apply(this,arguments),y=+n.apply(this,arguments),m=r.apply(this,arguments)-et4,g=s.apply(this,arguments)-et4,k=Bt3(g-m),d=g>m;if(o||(o=u=l()),y<c&&(_=y,y=c,c=_),!(y>1e-12))o.moveTo(0,0);else if(k>L12-1e-12)o.moveTo(y*q10(m),y*R7(m)),o.arc(0,0,y,m,g,!d),c>1e-12&&(o.moveTo(c*q10(g),c*R7(g)),o.arc(0,0,c,g,m,d));else{var w=m,b=g,T=m,E=g,A=k,X=k,z=h.apply(this,arguments)/2,D=z>1e-12&&(e?+e.apply(this,arguments):x7(c*c+y*y)),B=U8(Bt3(y-c)/2,+i.apply(this,arguments)),C=B,P=B,p,v;if(D>1e-12){var H=Yt3(D/c*R7(z)),$=Yt3(D/y*R7(z));(A-=H*2)>1e-12?(H*=d?1:-1,T+=H,E-=H):(A=0,T=E=(m+g)/2),(X-=$*2)>1e-12?($*=d?1:-1,w+=$,b-=$):(X=0,w=b=(m+g)/2);}var W=y*q10(w),F=y*R7(w),j=c*q10(E),tt=c*R7(E);if(B>1e-12){var nt=y*q10(b),it=y*R7(b),pt=c*q10(T),yt=c*R7(T),Y;if(k<I11)if(Y=Pn2(W,F,pt,yt,nt,it,j,tt)){var dt=W-Y[0],mt=F-Y[1],vt=nt-Y[0],gt=it-Y[1],Mt=1/R7(Sn1((dt*vt+mt*gt)/(x7(dt*dt+mt*mt)*x7(vt*vt+gt*gt)))/2),Ot=x7(Y[0]*Y[0]+Y[1]*Y[1]);C=U8(B,(c-Ot)/(Mt-1)),P=U8(B,(y-Ot)/(Mt+1));}else C=P=0;}X>1e-12?P>1e-12?(p=st3(pt,yt,W,F,y,P,d),v=st3(nt,it,j,tt,y,P,d),o.moveTo(p.cx+p.x01,p.cy+p.y01),P<B?o.arc(p.cx,p.cy,P,S8(p.y01,p.x01),S8(v.y01,v.x01),!d):(o.arc(p.cx,p.cy,P,S8(p.y01,p.x01),S8(p.y11,p.x11),!d),o.arc(0,0,y,S8(p.cy+p.y11,p.cx+p.x11),S8(v.cy+v.y11,v.cx+v.x11),!d),o.arc(v.cx,v.cy,P,S8(v.y11,v.x11),S8(v.y01,v.x01),!d))):(o.moveTo(W,F),o.arc(0,0,y,w,b,!d)):o.moveTo(W,F),!(c>1e-12)||!(A>1e-12)?o.lineTo(j,tt):C>1e-12?(p=st3(j,tt,nt,it,c,-C,d),v=st3(W,F,pt,yt,c,-C,d),o.lineTo(p.cx+p.x01,p.cy+p.y01),C<B?o.arc(p.cx,p.cy,C,S8(p.y01,p.x01),S8(v.y01,v.x01),!d):(o.arc(p.cx,p.cy,C,S8(p.y01,p.x01),S8(p.y11,p.x11),!d),o.arc(0,0,c,S8(p.cy+p.y11,p.cx+p.x11),S8(v.cy+v.y11,v.cx+v.x11),d),o.arc(v.cx,v.cy,C,S8(v.y11,v.x11),S8(v.y01,v.x01),!d))):o.arc(0,0,c,E,T,d);}if(o.closePath(),u)return o=null,u+""||null;}return a.centroid=function(){var u=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,_=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-I11/2;return[q10(_)*u,R7(_)*u];},a.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:f7(+u),a):t;},a.outerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:f7(+u),a):n;},a.cornerRadius=function(u){return arguments.length?(i=typeof u=="function"?u:f7(+u),a):i;},a.padRadius=function(u){return arguments.length?(e=u==null?null:typeof u=="function"?u:f7(+u),a):e;},a.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:f7(+u),a):r;},a.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:f7(+u),a):s;},a.padAngle=function(u){return arguments.length?(h=typeof u=="function"?u:f7(+u),a):h;},a.context=function(u){return arguments.length?(o=u??null,a):o;},a;}Array.prototype.slice;function ot3(t){return typeof t=="object"&&"length"in t?t:Array.from(t);}function qt2(t){this._context=t;}qt2.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break;}}};function rt3(t){return new qt2(t);}function xt3(t){return t[0];}function Tt3(t){return t[1];}function bt2(t,n){var i=f7(!0),e=null,r=rt3,s=null,h=K9(o);t=typeof t=="function"?t:t===void 0?xt3:f7(t),n=typeof n=="function"?n:n===void 0?Tt3:f7(n);function o(l){var a,u=(l=ot3(l)).length,_,c=!1,y;for(e==null&&(s=r(y=h())),a=0;a<=u;++a)!(a<u&&i(_=l[a],a,l))===c&&((c=!c)?s.lineStart():s.lineEnd()),c&&s.point(+t(_,a,l),+n(_,a,l));if(y)return s=null,y+""||null;}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:f7(+l),o):t;},o.y=function(l){return arguments.length?(n=typeof l=="function"?l:f7(+l),o):n;},o.defined=function(l){return arguments.length?(i=typeof l=="function"?l:f7(!!l),o):i;},o.curve=function(l){return arguments.length?(r=l,e!=null&&(s=r(e)),o):r;},o.context=function(l){return arguments.length?(l==null?e=s=null:s=r(e=l),o):e;},o;}function Xt3(t,n,i){var e=null,r=f7(!0),s=null,h=rt3,o=null,l=K9(a);t=typeof t=="function"?t:t===void 0?xt3:f7(+t),n=typeof n=="function"?n:n===void 0?f7(0):f7(+n),i=typeof i=="function"?i:i===void 0?Tt3:f7(+i);function a(_){var c,y,m,g=(_=ot3(_)).length,k,d=!1,w,b=new Array(g),T=new Array(g);for(s==null&&(o=h(w=l())),c=0;c<=g;++c){if(!(c<g&&r(k=_[c],c,_))===d)if(d=!d)y=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=c-1;m>=y;--m)o.point(b[m],T[m]);o.lineEnd(),o.areaEnd();}d&&(b[c]=+t(k,c,_),T[c]=+n(k,c,_),o.point(e?+e(k,c,_):b[c],i?+i(k,c,_):T[c]));}if(w)return o=null,w+""||null;}function u(){return bt2().defined(r).curve(h).context(s);}return a.x=function(_){return arguments.length?(t=typeof _=="function"?_:f7(+_),e=null,a):t;},a.x0=function(_){return arguments.length?(t=typeof _=="function"?_:f7(+_),a):t;},a.x1=function(_){return arguments.length?(e=_==null?null:typeof _=="function"?_:f7(+_),a):e;},a.y=function(_){return arguments.length?(n=typeof _=="function"?_:f7(+_),i=null,a):n;},a.y0=function(_){return arguments.length?(n=typeof _=="function"?_:f7(+_),a):n;},a.y1=function(_){return arguments.length?(i=_==null?null:typeof _=="function"?_:f7(+_),a):i;},a.lineX0=a.lineY0=function(){return u().x(t).y(n);},a.lineY1=function(){return u().x(t).y(i);},a.lineX1=function(){return u().x(e).y(n);},a.defined=function(_){return arguments.length?(r=typeof _=="function"?_:f7(!!_),a):r;},a.curve=function(_){return arguments.length?(h=_,s!=null&&(o=h(s)),a):h;},a.context=function(_){return arguments.length?(_==null?s=o=null:o=h(s=_),a):s;},a;}kt1(rt3);function Dt1(t){this._curve=t;}Dt1.prototype={areaStart:function(){this._curve.areaStart();},areaEnd:function(){this._curve.areaEnd();},lineStart:function(){this._curve.lineStart();},lineEnd:function(){this._curve.lineEnd();},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t));}};function kt1(t){function n(i){return new Dt1(t(i));}return n._curve=t,n;}x7(3);var at2={draw(t,n){const i=x7(n/I11);t.moveTo(i,0),t.arc(0,0,i,0,L12);}};x7(1/3);const jt3=R7(I11/10)/R7(7*I11/10),Gn1=R7(L12/10)*jt3,Jn1=-q10(L12/10)*jt3;x7(3);x7(3);x7(3)/2,1/x7(12);function $n2(t,n){let i=null,e=K9(r);t=typeof t=="function"?t:f7(t||at2),n=typeof n=="function"?n:f7(n===void 0?64:+n);function r(){let s;if(i||(i=s=e()),t.apply(this,arguments).draw(i,+n.apply(this,arguments)),s)return i=null,s+""||null;}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:f7(s),r):t;},r.size=function(s){return arguments.length?(n=typeof s=="function"?s:f7(+s),r):n;},r.context=function(s){return arguments.length?(i=s??null,r):i;},r;}function V7(){}function lt3(t,n,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+i)/6);}function ut3(t){this._context=t;}ut3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 3:lt3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lt3(this,t,n);break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n;}};function jn1(t){return new ut3(t);}function rn3(t){this._context=t;}rn3.prototype={areaStart:V7,areaEnd:V7,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break;}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break;}}},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:lt3(this,t,n);break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n;}};function ti1(t){return new rn3(t);}function hn2(t){this._context=t;}hn2.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 3:this._point=4;default:lt3(this,t,n);break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n;}};function ni1(t){return new hn2(t);}function an3(t,n){this._basis=new ut3(t),this._beta=n;}an3.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart();},lineEnd:function(){var t=this._x,n=this._y,i=t.length-1;if(i>0)for(var e=t[0],r=n[0],s=t[i]-e,h=n[i]-r,o=-1,l;++o<=i;)l=o/i,this._basis.point(this._beta*t[o]+(1-this._beta)*(e+l*s),this._beta*n[o]+(1-this._beta)*(r+l*h));this._x=this._y=null,this._basis.lineEnd();},point:function(t,n){this._x.push(+t),this._y.push(+n);}};var ii1=function t(n){function i(e){return n===1?new ut3(e):new an3(e,n);}return i.beta=function(e){return t(+e);},i;}(.85);function _t1(t,n,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-i),t._x2,t._y2);}function Et1(t,n){this._context=t,this._k=(1-n)/6;}Et1.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_t1(this,this._x1,this._y1);break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:_t1(this,t,n);break;}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var ei1=function t(n){function i(e){return new Et1(e,n);}return i.tension=function(e){return t(+e);},i;}(0);function At3(t,n){this._context=t,this._k=(1-n)/6;}At3.prototype={areaStart:V7,areaEnd:V7,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break;}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break;}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break;}}},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:_t1(this,t,n);break;}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var si1=function t(n){function i(e){return new At3(e,n);}return i.tension=function(e){return t(+e);},i;}(0);function Rt3(t,n){this._context=t,this._k=(1-n)/6;}Rt3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_t1(this,t,n);break;}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var oi1=function t(n){function i(e){return new Rt3(e,n);}return i.tension=function(e){return t(+e);},i;}(0);function Ct2(t,n,i){var e=t._x1,r=t._y1,s=t._x2,h=t._y2;if(t._l01_a>1e-12){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l;}if(t._l23_a>1e-12){var a=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*a+t._x1*t._l23_2a-n*t._l12_2a)/u,h=(h*a+t._y1*t._l23_2a-i*t._l12_2a)/u;}t._context.bezierCurveTo(e,r,s,h,t._x2,t._y2);}function ln3(t,n){this._context=t,this._alpha=n;}ln3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha));}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Ct2(this,t,n);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var ri1=function t(n){function i(e){return n?new ln3(e,n):new Et1(e,0);}return i.alpha=function(e){return t(+e);},i;}(.5);function un3(t,n){this._context=t,this._alpha=n;}un3.prototype={areaStart:V7,areaEnd:V7,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break;}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break;}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break;}}},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha));}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ct2(this,t,n);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var hi1=function t(n){function i(e){return n?new un3(e,n):new At3(e,0);}return i.alpha=function(e){return t(+e);},i;}(.5);function _n2(t,n){this._context=t,this._alpha=n;}_n2.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha));}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ct2(this,t,n);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var ai1=function t(n){function i(e){return n?new _n2(e,n):new Rt3(e,0);}return i.alpha=function(e){return t(+e);},i;}(.5);function cn2(t){this._context=t;}cn2.prototype={areaStart:V7,areaEnd:V7,lineStart:function(){this._point=0;},lineEnd:function(){this._point&&this._context.closePath();},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n));}};function li1(t){return new cn2(t);}function fn2(t){return t<0?-1:1;}function pn3(t,n,i){var e=t._x1-t._x0,r=n-t._x1,s=(t._y1-t._y0)/(e||r<0&&-0),h=(i-t._y1)/(r||e<0&&-0),o=(s*r+h*e)/(e+r);return(fn2(s)+fn2(h))*Math.min(Math.abs(s),Math.abs(h),.5*Math.abs(o))||0;}function yn1(t,n){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-n)/2:n;}function Pt4(t,n,i){var e=t._x0,r=t._y0,s=t._x1,h=t._y1,o=(s-e)/3;t._context.bezierCurveTo(e+o,r+o*n,s-o,h-o*i,s,h);}function ct4(t){this._context=t;}ct4.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pt4(this,this._t0,yn1(this,this._t0));break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){var i=NaN;if(t=+t,n=+n,t===this._x1&&n===this._y1)return;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Pt4(this,yn1(this,i=pn3(this,t,n)),i);break;default:Pt4(this,this._t0,i=pn3(this,t,n));break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=i;}};function dn2(t){this._context=new mn2(t);}(dn2.prototype=Object.create(ct4.prototype)).point=function(t,n){ct4.prototype.point.call(this,n,t);};function mn2(t){this._context=t;}mn2.prototype={moveTo:function(t,n){this._context.moveTo(n,t);},closePath:function(){this._context.closePath();},lineTo:function(t,n){this._context.lineTo(n,t);},bezierCurveTo:function(t,n,i,e,r,s){this._context.bezierCurveTo(n,t,e,i,s,r);}};function ui1(t){return new ct4(t);}function _i(t){return new dn2(t);}function vn2(t){this._context=t;}vn2.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x=[],this._y=[];},lineEnd:function(){var t=this._x,n=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),i===2)this._context.lineTo(t[1],n[1]);else for(var e=gn2(t),r=gn2(n),s=0,h=1;h<i;++s,++h)this._context.bezierCurveTo(e[0][s],r[0][s],e[1][s],r[1][s],t[h],n[h]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null;},point:function(t,n){this._x.push(+t),this._y.push(+n);}};function gn2(t){var n,i=t.length-1,e,r=new Array(i),s=new Array(i),h=new Array(i);for(r[0]=0,s[0]=2,h[0]=t[0]+2*t[1],n=1;n<i-1;++n)r[n]=1,s[n]=4,h[n]=4*t[n]+2*t[n+1];for(r[i-1]=2,s[i-1]=7,h[i-1]=8*t[i-1]+t[i],n=1;n<i;++n)e=r[n]/s[n-1],s[n]-=e,h[n]-=e*h[n-1];for(r[i-1]=h[i-1]/s[i-1],n=i-2;n>=0;--n)r[n]=(h[n]-r[n+1])/s[n];for(s[i-1]=(t[i]+r[i-1])/2,n=0;n<i-1;++n)s[n]=2*t[n+1]-r[n+1];return[r,s];}function ci(t){return new vn2(t);}function ft3(t,n){this._context=t,this._t=n;}ft3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x=this._y=NaN,this._point=0;},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line);},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,n);}break;}}this._x=t,this._y=n;}};function fi1(t){return new ft3(t,.5);}function pi1(t){return new ft3(t,0);}function yi1(t){return new ft3(t,1);}function n1(t,a){if(typeof document!="undefined"&&document.createElement){const e=document.createElement("canvas");if(e&&e.getContext)return e.width=t,e.height=a,e;}return null;}const o2=()=>typeof Image!="undefined"?Image:null;function y7(e,t,r){e.prototype=t.prototype=r,r.constructor=e;}function v8(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r;}function g5(){}var d5=.7,m3=1/d5,$6="\\s*([+-]?\\d+)\\s*",M6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ge2=/^#([0-9a-f]{3,8})$/,de3=new RegExp(`^rgb\\(${$6},${$6},${$6}\\)$`),oe5=new RegExp(`^rgb\\(${c1},${c1},${c1}\\)$`),pe3=new RegExp(`^rgba\\(${$6},${$6},${$6},${M6}\\)$`),we3=new RegExp(`^rgba\\(${c1},${c1},${c1},${M6}\\)$`),ye3=new RegExp(`^hsl\\(${M6},${c1},${c1}\\)$`),me3=new RegExp(`^hsla\\(${M6},${c1},${c1},${M6}\\)$`),A9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};y7(g5,R8,{copy(e){return Object.assign(new this.constructor,this,e);},displayable(){return this.rgb().displayable();},hex:L13,formatHex:L13,formatHex8:$e2,formatHsl:Ne3,formatRgb:K10,toString:K10});function L13(){return this.rgb().formatHex();}function $e2(){return this.rgb().formatHex8();}function Ne3(){return J7(this).formatHsl();}function K10(){return this.rgb().formatRgb();}function R8(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ge2.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?X9(t):r===3?new a3(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?k10(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?k10(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=de3.exec(e))?new a3(t[1],t[2],t[3],1):(t=oe5.exec(e))?new a3(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pe3.exec(e))?k10(t[1],t[2],t[3],t[4]):(t=we3.exec(e))?k10(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ye3.exec(e))?G11(t[1],t[2]/100,t[3]/100,1):(t=me3.exec(e))?G11(t[1],t[2]/100,t[3]/100,t[4]):A9.hasOwnProperty(e)?X9(A9[e]):e==="transparent"?new a3(NaN,NaN,NaN,0):null;}function X9(e){return new a3(e>>16&255,e>>8&255,e&255,1);}function k10(e,t,r,n){return n<=0&&(e=t=r=NaN),new a3(e,t,r,n);}function _10(e){return e instanceof g5||(e=R8(e)),e?(e=e.rgb(),new a3(e.r,e.g,e.b,e.opacity)):new a3;}function Y9(e,t,r,n){return arguments.length===1?_10(e):new a3(e,t,r,n??1);}function a3(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n;}y7(a3,Y9,v8(g5,{brighter(e){return e=e==null?m3:Math.pow(m3,e),new a3(this.r*e,this.g*e,this.b*e,this.opacity);},darker(e){return e=e==null?d5:Math.pow(d5,e),new a3(this.r*e,this.g*e,this.b*e,this.opacity);},rgb(){return this;},clamp(){return new a3(o3(this.r),o3(this.g),o3(this.b),q11(this.opacity));},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:Z9,formatHex:Z9,formatHex8:ve2,formatRgb:F8,toString:F8}));function Z9(){return`#${p5(this.r)}${p5(this.g)}${p5(this.b)}`;}function ve2(){return`#${p5(this.r)}${p5(this.g)}${p5(this.b)}${p5((isNaN(this.opacity)?1:this.opacity)*255)}`;}function F8(){const e=q11(this.opacity);return`${e===1?"rgb(":"rgba("}${o3(this.r)}, ${o3(this.g)}, ${o3(this.b)}${e===1?")":`, ${e})`}`;}function q11(e){return isNaN(e)?1:Math.max(0,Math.min(1,e));}function o3(e){return Math.max(0,Math.min(255,Math.round(e)||0));}function p5(e){return e=o3(e),(e<16?"0":"")+e.toString(16);}function G11(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new h5(e,t,r,n);}function J7(e){if(e instanceof h5)return new h5(e.h,e.s,e.l,e.opacity);if(e instanceof g5||(e=R8(e)),!e)return new h5;if(e instanceof h5)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),f=Math.max(t,r,n),s=NaN,x=f-i,b=(f+i)/2;return x?(t===f?s=(r-n)/x+(r<n)*6:r===f?s=(n-t)/x+2:s=(t-r)/x+4,x/=b<.5?f+i:2-f-i,s*=60):x=b>0&&b<1?0:s,new h5(s,x,b,e.opacity);}function Q7(e,t,r,n){return arguments.length===1?J7(e):new h5(e,t,r,n??1);}function h5(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n;}y7(h5,Q7,v8(g5,{brighter(e){return e=e==null?m3:Math.pow(m3,e),new h5(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=e==null?d5:Math.pow(d5,e),new h5(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new a3(I12(e>=240?e-240:e+120,i,n),I12(e,i,n),I12(e<120?e+240:e-120,i,n),this.opacity);},clamp(){return new h5(T6(this.h),E11(this.s),E11(this.l),q11(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){const e=q11(this.opacity);return`${e===1?"hsl(":"hsla("}${T6(this.h)}, ${E11(this.s)*100}%, ${E11(this.l)*100}%${e===1?")":`, ${e})`}`;}}));function T6(e){return e=(e||0)%360,e<0?e+360:e;}function E11(e){return Math.max(0,Math.min(1,e||0));}function I12(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255;}const U9=Math.PI/180,V8=180/Math.PI,W9=.96422,ee6=1,te6=.82521,re6=4/29,N9=6/29,ne7=3*N9*N9,Me3=N9*N9*N9;function ie4(e){if(e instanceof l4)return new l4(e.l,e.a,e.b,e.opacity);if(e instanceof u4)return he3(e);e instanceof a3||(e=_10(e));var t=D5(e.r),r=D5(e.g),n=D5(e.b),i=z11((.2225045*t+.7168786*r+.0606169*n)/1),f,s;return t===r&&r===n?f=s=i:(f=z11((.4360747*t+.3850649*r+.1430804*n)/W9),s=z11((.0139322*t+.0971045*r+.7141733*n)/te6)),new l4(116*i-16,500*(f-i),200*(i-s),e.opacity);}function ae3(e,t,r,n){return arguments.length===1?ie4(e):new l4(e,t,r,n??1);}function l4(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n;}y7(l4,ae3,v8(g5,{brighter(e){return new l4(this.l+18*(e??1),this.a,this.b,this.opacity);},darker(e){return new l4(this.l-18*(e??1),this.a,this.b,this.opacity);},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=W9*j12(t),e=ee6*j12(e),r=te6*j12(r),new a3(B8(3.1338561*t-1.6168667*e-.4906146*r),B8(-.9787684*t+1.9161415*e+.033454*r),B8(.0719453*t-.2289914*e+1.4052427*r),this.opacity);}}));function z11(e){return e>Me3?Math.pow(e,1/3):e/ne7+re6;}function j12(e){return e>N9?e*e*e:ne7*(e-re6);}function B8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055);}function D5(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);}function fe2(e){if(e instanceof u4)return new u4(e.h,e.c,e.l,e.opacity);if(e instanceof l4||(e=ie4(e)),e.a===0&&e.b===0)return new u4(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*V8;return new u4(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity);}function se3(e,t,r,n){return arguments.length===1?fe2(e):new u4(e,t,r,n??1);}function u4(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n;}function he3(e){if(isNaN(e.h))return new l4(e.l,0,0,e.opacity);var t=e.h*U9;return new l4(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity);}y7(u4,se3,v8(g5,{brighter(e){return new u4(this.h,this.c,this.l+18*(e??1),this.opacity);},darker(e){return new u4(this.h,this.c,this.l-18*(e??1),this.opacity);},rgb(){return he3(this).rgb();}}));var le4=-.14861,O9=1.78277,S9=-.29227,P9=-.90649,H8=1.97294,xe2=H8*P9,ce1=H8*O9,ue5=O9*S9-P9*le4;function ke2(e){if(e instanceof w8)return new w8(e.h,e.s,e.l,e.opacity);e instanceof a3||(e=_10(e));var t=e.r/255,r=e.g/255,n=e.b/255,i=(ue5*n+xe2*t-ce1*r)/(ue5+xe2-ce1),f=n-i,s=(H8*(r-i)-S9*f)/P9,x=Math.sqrt(s*s+f*f)/(H8*i*(1-i)),b=x?Math.atan2(s,f)*V8-120:NaN;return new w8(b<0?b+360:b,x,i,e.opacity);}function be2(e,t,r,n){return arguments.length===1?ke2(e):new w8(e,t,r,n??1);}function w8(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n;}y7(w8,be2,v8(g5,{brighter(e){return e=e==null?m3:Math.pow(m3,e),new w8(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=e==null?d5:Math.pow(d5,e),new w8(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=isNaN(this.h)?0:(this.h+120)*U9,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),i=Math.sin(e);return new a3(255*(t+r*(le4*n+O9*i)),255*(t+r*(S9*n+P9*i)),255*(t+r*(H8*n)),this.opacity);}}));function _11(r,n,e,i,t){var u=r*r,o=u*r;return((1-3*r+3*u-o)*n+(4-6*u+3*o)*e+(1+3*r+3*u-3*o)*i+o*t)/6;}function F9(r){var n=r.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),t=r[i],u=r[i+1],o=i>0?r[i-1]:2*t-u,a=i<n-1?r[i+2]:2*u-t;return _11((e-i/n)*n,o,t,u,a);};}function G12(r){var n=r.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),t=r[(i+n-1)%n],u=r[i%n],o=r[(i+1)%n],a=r[(i+2)%n];return _11((e-i/n)*n,t,u,o,a);};}var A10=r=>()=>r;function Q8(r,n){return function(e){return r+e*n;};}function cn3(r,n,e){return r=Math.pow(r,e),n=Math.pow(n,e)-r,e=1/e,function(i){return Math.pow(r+i*n,e);};}function N10(r,n){var e=n-r;return e?Q8(r,e>180||e<-180?e-360*Math.round(e/360):e):A10(isNaN(r)?n:r);}function ln4(r){return(r=+r)===1?p6:function(n,e){return e-n?cn3(n,e,r):A10(isNaN(n)?e:n);};}function p6(r,n){var e=n-r;return e?Q8(r,e):A10(isNaN(r)?n:r);}var q12=function r(n){var e=ln4(n);function i(t,u){var o=e((t=Y9(t)).r,(u=Y9(u)).r),a=e(t.g,u.g),s=e(t.b,u.b),l=p6(t.opacity,u.opacity);return function(c){return t.r=o(c),t.g=a(c),t.b=s(c),t.opacity=l(c),t+"";};}return i.gamma=r,i;}(1);function K11(r){return function(n){var e=n.length,i=new Array(e),t=new Array(e),u=new Array(e),o,a;for(o=0;o<e;++o)a=Y9(n[o]),i[o]=a.r||0,t[o]=a.g||0,u[o]=a.b||0;return i=r(i),t=r(t),u=r(u),a.opacity=1,function(s){return a.r=i(s),a.g=t(s),a.b=u(s),a+"";};};}var fn3=K11(F9),sn2=K11(G12);function B9(r,n){n||(n=[]);var e=r?Math.min(n.length,r.length):0,i=n.slice(),t;return function(u){for(t=0;t<e;++t)i[t]=r[t]*(1-u)+n[t]*u;return i;};}function W10(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView);}function hn3(r,n){return(W10(n)?B9:Z10)(r,n);}function Z10(r,n){var e=n?n.length:0,i=r?Math.min(e,r.length):0,t=new Array(i),u=new Array(e),o;for(o=0;o<i;++o)t[o]=d6(r[o],n[o]);for(;o<e;++o)u[o]=n[o];return function(a){for(o=0;o<i;++o)u[o]=t[o](a);return u;};}function J8(r,n){var e=new Date;return r=+r,n=+n,function(i){return e.setTime(r*(1-i)+n*i),e;};}function M7(r,n){return r=+r,n=+n,function(e){return r*(1-e)+n*e;};}function U10(r,n){var e={},i={},t;(r===null||typeof r!="object")&&(r={}),(n===null||typeof n!="object")&&(n={});for(t in n)t in r?e[t]=d6(r[t],n[t]):i[t]=n[t];return function(u){for(t in e)i[t]=e[t](u);return i;};}var C9=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R9=new RegExp(C9.source,"g");function pn4(r){return function(){return r;};}function gn3(r){return function(n){return r(n)+"";};}function P10(r,n){var e=C9.lastIndex=R9.lastIndex=0,i,t,u,o=-1,a=[],s=[];for(r=r+"",n=n+"";(i=C9.exec(r))&&(t=R9.exec(n));)(u=t.index)>e&&(u=n.slice(e,u),a[o]?a[o]+=u:a[++o]=u),(i=i[0])===(t=t[0])?a[o]?a[o]+=t:a[++o]=t:(a[++o]=null,s.push({i:o,x:M7(i,t)})),e=R9.lastIndex;return e<n.length&&(u=n.slice(e),a[o]?a[o]+=u:a[++o]=u),a.length<2?s[0]?gn3(s[0].x):pn4(n):(n=s.length,function(l){for(var c=0,f;c<n;++c)a[(f=s[c]).i]=f.x(l);return a.join("");});}function d6(r,n){var e=typeof n,i;return n==null||e==="boolean"?A10(n):(e==="number"?M7:e==="string"?(i=R8(n))?(n=i,q12):P10:n instanceof R8?q12:n instanceof Date?J8:W10(n)?B9:Array.isArray(n)?Z10:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?U10:M7)(r,n);}function vn3(r){var n=r.length;return function(e){return r[Math.max(0,Math.min(n-1,Math.floor(e*n)))];};}function mn3(r,n){var e=N10(+r,+n);return function(i){var t=e(i);return t-360*Math.floor(t/360);};}function Mn2(r,n){return r=+r,n=+n,function(e){return Math.round(r*(1-e)+n*e);};}var b6=180/Math.PI,z12={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nn3(r,n,e,i,t,u){var o,a,s;return(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o),(s=r*e+n*i)&&(e-=r*s,i-=n*s),(a=Math.sqrt(e*e+i*i))&&(e/=a,i/=a,s/=a),r*i<n*e&&(r=-r,n=-n,s=-s,o=-o),{translateX:t,translateY:u,rotate:Math.atan2(n,r)*b6,skewX:Math.atan(s)*b6,scaleX:o,scaleY:a};}var S10;function wn4(r){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return n.isIdentity?z12:nn3(n.a,n.b,n.c,n.d,n.e,n.f);}function yn2(r){return r==null?z12:(S10||(S10=document.createElementNS("http://www.w3.org/2000/svg","g")),S10.setAttribute("transform",r),(r=S10.transform.baseVal.consolidate())?(r=r.matrix,nn3(r.a,r.b,r.c,r.d,r.e,r.f)):z12);}function rn4(r,n,e,i){function t(l){return l.length?l.pop()+" ":"";}function u(l,c,f,h,g,m){if(l!==f||c!==h){var v=g.push("translate(",null,n,null,e);m.push({i:v-4,x:M7(l,f)},{i:v-2,x:M7(c,h)});}else(f||h)&&g.push("translate("+f+n+h+e);}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(t(f)+"rotate(",null,i)-2,x:M7(l,c)})):c&&f.push(t(f)+"rotate("+c+i);}function a(l,c,f,h){l!==c?h.push({i:f.push(t(f)+"skewX(",null,i)-2,x:M7(l,c)}):c&&f.push(t(f)+"skewX("+c+i);}function s(l,c,f,h,g,m){if(l!==f||c!==h){var v=g.push(t(g)+"scale(",null,",",null,")");m.push({i:v-4,x:M7(l,f)},{i:v-2,x:M7(c,h)});}else(f!==1||h!==1)&&g.push(t(g)+"scale("+f+","+h+")");}return function(l,c){var f=[],h=[];return l=r(l),c=r(c),u(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),a(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(g){for(var m=-1,v=h.length,w;++m<v;)f[(w=h[m]).i]=w.x(g);return f.join("");};};}var xn3=rn4(wn4,"px, ","px)","deg)"),Xn2=rn4(yn2,", ",")",")"),An4=1e-12;function en3(r){return((r=Math.exp(r))+1/r)/2;}function Nn2(r){return((r=Math.exp(r))-1/r)/2;}function dn3(r){return((r=Math.exp(2*r))-1)/(r+1);}var Sn2=function r(n,e,i){function t(u,o){var a=u[0],s=u[1],l=u[2],c=o[0],f=o[1],h=o[2],g=c-a,m=f-s,v=g*g+m*m,w,y;if(v<An4)y=Math.log(h/l)/n,w=function(X){return[a+X*g,s+X*m,l*Math.exp(n*X*y)];};else{var k=Math.sqrt(v),$=(h*h-l*l+i*v)/(2*l*e*k),Y=(h*h-l*l-i*v)/(2*h*e*k),x=Math.log(Math.sqrt($*$+1)-$),an=Math.log(Math.sqrt(Y*Y+1)-Y);y=(an-x)/n,w=function(X){var D=X*y,L=en3(x),I=l/(e*k)*(L*dn3(n*D+x)-Nn2(x));return[a+I*g,s+I*m,l*L/en3(n*D+x)];};}return w.duration=y*1e3*n/Math.SQRT2,w;}return t.rho=function(u){var o=Math.max(.001,+u),a=o*o,s=a*a;return r(o,a,s);},t;}(Math.SQRT2,2,4);function tn3(r){return function(n,e){var i=r((n=Q7(n)).h,(e=Q7(e)).h),t=p6(n.s,e.s),u=p6(n.l,e.l),o=p6(n.opacity,e.opacity);return function(a){return n.h=i(a),n.s=t(a),n.l=u(a),n.opacity=o(a),n+"";};};}var kn1=tn3(N10),$n3=tn3(p6);function Yn(r,n){var e=p6((r=ae3(r)).l,(n=ae3(n)).l),i=p6(r.a,n.a),t=p6(r.b,n.b),u=p6(r.opacity,n.opacity);return function(o){return r.l=e(o),r.a=i(o),r.b=t(o),r.opacity=u(o),r+"";};}function on3(r){return function(n,e){var i=r((n=se3(n)).h,(e=se3(e)).h),t=p6(n.c,e.c),u=p6(n.l,e.l),o=p6(n.opacity,e.opacity);return function(a){return n.h=i(a),n.c=t(a),n.l=u(a),n.opacity=o(a),n+"";};};}var jn2=on3(N10),qn2=on3(p6);function un4(r){return function n(e){e=+e;function i(t,u){var o=r((t=be2(t)).h,(u=be2(u)).h),a=p6(t.s,u.s),s=p6(t.l,u.l),l=p6(t.opacity,u.opacity);return function(c){return t.h=o(c),t.s=a(c),t.l=s(Math.pow(c,e)),t.opacity=l(c),t+"";};}return i.gamma=n,i;}(1);}var Bn2=un4(N10),Cn3=un4(p6);function Rn4(r,n){n===void 0&&(n=r,r=d6);for(var e=0,i=n.length-1,t=n[0],u=new Array(i<0?0:i);e<i;)u[e]=r(t,t=n[++e]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return u[a](o-a);};}function zn1(r,n){for(var e=new Array(n),i=0;i<n;++i)e[i]=r(i/(n-1));return e;}const mod1=function(){return{interpolate:d6,interpolateArray:hn3,interpolateBasis:F9,interpolateBasisClosed:G12,interpolateCubehelix:Bn2,interpolateCubehelixLong:Cn3,interpolateDate:J8,interpolateDiscrete:vn3,interpolateHcl:jn2,interpolateHclLong:qn2,interpolateHsl:kn1,interpolateHslLong:$n3,interpolateHue:mn3,interpolateLab:Yn,interpolateNumber:M7,interpolateNumberArray:B9,interpolateObject:U10,interpolateRgb:q12,interpolateRgbBasis:fn3,interpolateRgbBasisClosed:sn2,interpolateRound:Mn2,interpolateString:P10,interpolateTransformCss:xn3,interpolateTransformSvg:Xn2,interpolateZoom:Sn2,piecewise:Rn4,quantize:zn1,default:null};}();function M8(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n);break;}return this;}function N11(n,r){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break;}default:{this.domain(n),typeof r=="function"?this.interpolator(r):this.range(r);break;}}return this;}const F10=Symbol("implicit");function T7(){var n=new f1,r=[],u=[],t=F10;function a(e){let i=n.get(e);if(i===void 0){if(t!==F10)return t;n.set(e,i=r.push(e)-1);}return u[i%u.length];}return a.domain=function(e){if(!arguments.length)return r.slice();r=[],n=new f1;for(const i of e){if(n.has(i))continue;n.set(i,r.push(i)-1);}return a;},a.range=function(e){return arguments.length?(u=Array.from(e),a):u.slice();},a.unknown=function(e){return arguments.length?(t=e,a):t;},a.copy=function(){return T7(r,u).unknown(t);},M8.apply(a,arguments),a;}function at3(n){return function(){return n;};}function R10(n){return+n;}var Z11=[0,1];function y8(n){return n;}function $7(n,r){return(r-=n=+n)?function(u){return(u-n)/r;}:at3(isNaN(r)?NaN:.5);}function it3(n,r){var u;return n>r&&(u=n,n=r,r=u),function(t){return Math.max(n,Math.min(r,t));};}function ot4(n,r,u){var t=n[0],a=n[1],e=r[0],i=r[1];return a<t?(t=$7(a,t),e=u(i,e)):(t=$7(t,a),e=u(e,i)),function(c){return e(t(c));};}function lt4(n,r,u){var t=Math.min(n.length,r.length)-1,a=new Array(t),e=new Array(t),i=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++i<t;)a[i]=$7(n[i],n[i+1]),e[i]=u(r[i],r[i+1]);return function(c){var s=U2(n,c,1,t)-1;return e[s](a[s](c));};}function A11(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());}function L14(){var n=Z11,r=Z11,u=d6,t,a,e,i=y8,c,s,o;function g(){var l=Math.min(n.length,r.length);return i!==y8&&(i=it3(n[0],n[l-1])),c=l>2?lt4:ot4,s=o=null,f;}function f(l){return l==null||isNaN(l=+l)?e:(s||(s=c(n.map(t),r,u)))(t(i(l)));}return f.invert=function(l){return i(a((o||(o=c(r,n.map(t),M7)))(l)));},f.domain=function(l){return arguments.length?(n=Array.from(l,R10),g()):n.slice();},f.range=function(l){return arguments.length?(r=Array.from(l),g()):r.slice();},f.rangeRound=function(l){return r=Array.from(l),u=Mn2,g();},f.clamp=function(l){return arguments.length?(i=l?!0:y8,g()):i!==y8;},f.interpolate=function(l){return arguments.length?(u=l,g()):u;},f.unknown=function(l){return arguments.length?(e=l,f):e;},function(l,p){return t=l,a=p,g();};}function Y10(){return L14()(y8,y8);}function nn4(n,r,u,t){var a=kn(n,r,u),e;t=E5(t??",f");switch(t.type){case"s":{var i=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(e=on1(a,i))&&(t.precision=e),B3(t,i);}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(e=an1(a,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=e-(t.type==="e"));break;}case"f":case"%":{t.precision==null&&!isNaN(e=en1(a))&&(t.precision=e-(t.type==="%")*2);break;}}return q4(t);}function q13(n){var r=n.domain;return n.ticks=function(u){var t=r();return ln1(t[0],t[t.length-1],u??10);},n.tickFormat=function(u,t){var a=r();return nn4(a[0],a[a.length-1],u??10,t);},n.nice=function(u){u==null&&(u=10);var t=r(),a=0,e=t.length-1,i=t[a],c=t[e],s,o,g=10;for(c<i&&(o=i,i=c,c=o,o=a,a=e,e=o);g-- >0;){if(o=E4(i,c,u),o===s)return t[a]=i,t[e]=c,r(t);if(o>0)i=Math.floor(i/o)*o,c=Math.ceil(c/o)*o;else if(o<0)i=Math.ceil(i*o)/o,c=Math.floor(c*o)/o;else break;s=o;}return n;},n;}function tn4(){var n=Y10();return n.copy=function(){return A11(n,tn4());},M8.apply(n,arguments),q13(n);}function rn5(n){var r;function u(t){return t==null||isNaN(t=+t)?r:t;}return u.invert=u,u.domain=u.range=function(t){return arguments.length?(n=Array.from(t,R10),u):n.slice();},u.unknown=function(t){return arguments.length?(r=t,u):r;},u.copy=function(){return rn5(n).unknown(r);},n=arguments.length?Array.from(n,R10):[0,1],q13(u);}function en4(n,r){n=n.slice();var u=0,t=n.length-1,a=n[u],e=n[t],i;return e<a&&(i=u,u=t,t=i,i=a,a=e,e=i),n[u]=r.floor(a),n[t]=r.ceil(e),n;}function un5(n){return Math.log(n);}function an4(n){return Math.exp(n);}function ct5(n){return-Math.log(-n);}function st4(n){return-Math.exp(-n);}function ft4(n){return isFinite(n)?+("1e"+n):n<0?0:n;}function gt1(n){return n===10?ft4:n===Math.E?Math.exp:r=>Math.pow(n,r);}function mt1(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),r=>Math.log(r)/n);}function on4(n){return(r,u)=>-n(-r,u);}function B10(n){const r=n(un5,an4),u=r.domain;let t=10,a,e;function i(){return a=mt1(t),e=gt1(t),u()[0]<0?(a=on4(a),e=on4(e),n(ct5,st4)):n(un5,an4),r;}return r.base=function(c){return arguments.length?(t=+c,i()):t;},r.domain=function(c){return arguments.length?(u(c),i()):u();},r.ticks=c=>{const s=u();let o=s[0],g=s[s.length-1];const f=g<o;f&&([o,g]=[g,o]);let l=a(o),p=a(g),d,m;const w=c==null?10:+c;let v=[];if(!(t%1)&&p-l<w){if(l=Math.floor(l),p=Math.ceil(p),o>0)for(;l<=p;++l)for(d=1;d<t;++d){if(m=l<0?d/e(-l):d*e(l),m<o)continue;if(m>g)break;v.push(m);}else for(;l<=p;++l)for(d=t-1;d>=1;--d){if(m=l>0?d/e(-l):d*e(l),m<o)continue;if(m>g)break;v.push(m);}v.length*2<w&&(v=ln1(o,g,w));}else v=ln1(l,p,Math.min(p-l,w)).map(e);return f?v.reverse():v;},r.tickFormat=(c,s)=>{if(c==null&&(c=10),s==null&&(s=t===10?"s":","),typeof s!="function"&&(!(t%1)&&(s=E5(s)).precision==null&&(s.trim=!0),s=q4(s)),c===Infinity)return s;const o=Math.max(1,t*c/r.ticks().length);return g=>{let f=g/e(Math.round(a(g)));return f*t<t-.5&&(f*=t),f<=o?s(g):"";};},r.nice=()=>u(en4(u(),{floor:c=>e(Math.floor(a(c))),ceil:c=>e(Math.ceil(a(c)))})),r;}function ln5(){const n=B10(L14()).domain([1,10]);return n.copy=()=>A11(n,ln5()).base(n.base()),M8.apply(n,arguments),n;}function cn4(n){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/n));};}function sn3(n){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*n;};}function Q9(n){var r=1,u=n(cn4(r),sn3(r));return u.constant=function(t){return arguments.length?n(cn4(r=+t),sn3(r)):r;},q13(u);}function fn4(){var n=Q9(L14());return n.copy=function(){return A11(n,fn4()).constant(n.constant());},M8.apply(n,arguments);}function gn4(n){return function(r){return r<0?-Math.pow(-r,n):Math.pow(r,n);};}function pt2(n){return n<0?-Math.sqrt(-n):Math.sqrt(n);}function ht2(n){return n<0?-n*n:n*n;}function H9(n){var r=n(y8,y8),u=1;function t(){return u===1?n(y8,y8):u===.5?n(pt2,ht2):n(gn4(u),gn4(1/u));}return r.exponent=function(a){return arguments.length?(u=+a,t()):u;},q13(r);}function U11(){var n=H9(L14());return n.copy=function(){return A11(n,U11()).exponent(n.exponent());},M8.apply(n,arguments),n;}function dt3(){return U11.apply(null,arguments).exponent(.5);}function hn4(){var n=[],r=[],u=[],t;function a(){var i=0,c=Math.max(1,r.length);for(u=new Array(c-1);++i<c;)u[i-1]=Hn1(n,i/c);return e;}function e(i){return i==null||isNaN(i=+i)?t:r[U2(u,i)];}return e.invertExtent=function(i){var c=r.indexOf(i);return c<0?[NaN,NaN]:[c>0?u[c-1]:n[0],c<u.length?u[c]:n[n.length-1]];},e.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let c of i)c!=null&&!isNaN(c=+c)&&n.push(c);return n.sort(a1),a();},e.range=function(i){return arguments.length?(r=Array.from(i),a()):r.slice();},e.unknown=function(i){return arguments.length?(t=i,e):t;},e.quantiles=function(){return u.slice();},e.copy=function(){return hn4().domain(n).range(r).unknown(t);},M8.apply(e,arguments);}function dn4(){var n=0,r=1,u=1,t=[.5],a=[0,1],e;function i(s){return s!=null&&s<=s?a[U2(t,s,0,u)]:e;}function c(){var s=-1;for(t=new Array(u);++s<u;)t[s]=((s+1)*r-(s-u)*n)/(u+1);return i;}return i.domain=function(s){return arguments.length?([n,r]=s,n=+n,r=+r,c()):[n,r];},i.range=function(s){return arguments.length?(u=(a=Array.from(s)).length-1,c()):a.slice();},i.invertExtent=function(s){var o=a.indexOf(s);return o<0?[NaN,NaN]:o<1?[n,t[0]]:o>=u?[t[u-1],r]:[t[o-1],t[o]];},i.unknown=function(s){return arguments.length&&(e=s),i;},i.thresholds=function(){return t.slice();},i.copy=function(){return dn4().domain([n,r]).range(a).unknown(e);},M8.apply(q13(i),arguments);}function yn3(){var n=[.5],r=[0,1],u,t=1;function a(e){return e!=null&&e<=e?r[U2(n,e,0,t)]:u;}return a.domain=function(e){return arguments.length?(n=Array.from(e),t=Math.min(n.length,r.length-1),a):n.slice();},a.range=function(e){return arguments.length?(r=Array.from(e),t=Math.min(n.length,r.length-1),a):r.slice();},a.invertExtent=function(e){var i=r.indexOf(e);return[n[i-1],n[i]];},a.unknown=function(e){return arguments.length?(u=e,a):u;},a.copy=function(){return yn3().domain(n).range(r).unknown(u);},M8.apply(a,arguments);}function vt1(n){return new Date(n);}function Mt2(n){return n instanceof Date?+n:+new Date(+n);}function C10(n,r,u,t,a,e,i,c,s,o){var g=Y10(),f=g.invert,l=g.domain,p=o(".%L"),d=o(":%S"),m=o("%I:%M"),w=o("%I %p"),v=o("%a %d"),D=o("%b %d"),I=o("%B"),bn=o("%Y");function An(h){return(s(h)<h?p:c(h)<h?d:i(h)<h?m:e(h)<h?w:t(h)<h?a(h)<h?v:D:u(h)<h?I:bn)(h);}return g.invert=function(h){return new Date(f(h));},g.domain=function(h){return arguments.length?l(Array.from(h,Mt2)):l().map(vt1);},g.ticks=function(h){var k=l();return n(k[0],k[k.length-1],h??10);},g.tickFormat=function(h,k){return k==null?An:o(k);},g.nice=function(h){var k=l();return(!h||typeof h.range!="function")&&(h=r(k[0],k[k.length-1],h??10)),h?l(en4(k,h)):g;},g.copy=function(){return A11(g,C10(n,r,u,t,a,e,i,c,s,o));},g;}function wt1(){return M8.apply(C10(je,ke,w3,A4,v4,Z4,j5,b3,h2,re2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments);}function kt2(){return M8.apply(C10(be,Qe,W5,B4,S4,L6,k4,Q3,h2,I6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments);}function O10(){var n=0,r=1,u,t,a,e,i=y8,c=!1,s;function o(f){return f==null||isNaN(f=+f)?s:i(a===0?.5:(f=(e(f)-u)*a,c?Math.max(0,Math.min(1,f)):f));}o.domain=function(f){return arguments.length?([n,r]=f,u=e(n=+n),t=e(r=+r),a=u===t?0:1/(t-u),o):[n,r];},o.clamp=function(f){return arguments.length?(c=!!f,o):c;},o.interpolator=function(f){return arguments.length?(i=f,o):i;};function g(f){return function(l){var p,d;return arguments.length?([p,d]=l,i=f(p,d),o):[i(0),i(1)];};}return o.range=g(d6),o.rangeRound=g(Mn2),o.unknown=function(f){return arguments.length?(s=f,o):s;},function(f){return e=f,u=f(n),t=f(r),a=u===t?0:1/(t-u),o;};}function S11(n,r){return r.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown());}function vn4(){var n=q13(O10()(y8));return n.copy=function(){return S11(n,vn4());},N11.apply(n,arguments);}function Mn3(){var n=B10(O10()).domain([1,10]);return n.copy=function(){return S11(n,Mn3()).base(n.base());},N11.apply(n,arguments);}function wn5(){var n=Q9(O10());return n.copy=function(){return S11(n,wn5()).constant(n.constant());},N11.apply(n,arguments);}function X10(){var n=H9(O10());return n.copy=function(){return S11(n,X10()).exponent(n.exponent());},N11.apply(n,arguments);}function Nt2(){return X10.apply(null,arguments).exponent(.5);}function P11(){var n=0,r=.5,u=1,t=1,a,e,i,c,s,o=y8,g,f=!1,l;function p(m){return isNaN(m=+m)?l:(m=.5+((m=+g(m))-e)*(t*m<t*e?c:s),o(f?Math.max(0,Math.min(1,m)):m));}p.domain=function(m){return arguments.length?([n,r,u]=m,a=g(n=+n),e=g(r=+r),i=g(u=+u),c=a===e?0:.5/(e-a),s=e===i?0:.5/(i-e),t=e<a?-1:1,p):[n,r,u];},p.clamp=function(m){return arguments.length?(f=!!m,p):f;},p.interpolator=function(m){return arguments.length?(o=m,p):o;};function d(m){return function(w){var v,D,I;return arguments.length?([v,D,I]=w,o=Rn4(m,[v,D,I]),p):[o(0),o(.5),o(1)];};}return p.range=d(d6),p.rangeRound=d(Mn2),p.unknown=function(m){return arguments.length?(l=m,p):l;},function(m){return g=m,a=m(n),e=m(r),i=m(u),c=a===e?0:.5/(e-a),s=e===i?0:.5/(i-e),t=e<a?-1:1,p;};}function Nn3(){var n=q13(P11()(y8));return n.copy=function(){return S11(n,Nn3());},N11.apply(n,arguments);}function qn3(){var n=B10(P11()).domain([.1,1,10]);return n.copy=function(){return S11(n,qn3()).base(n.base());},N11.apply(n,arguments);}function Sn3(){var n=Q9(P11());return n.copy=function(){return S11(n,Sn3()).constant(n.constant());},N11.apply(n,arguments);}function x8(){var n=H9(P11());return n.copy=function(){return S11(n,x8()).exponent(n.exponent());},N11.apply(n,arguments);}function qt3(){return x8.apply(null,arguments).exponent(.5);}function e(f){for(var d=f.length/6|0,b=new Array(d),r=0;r<d;)b[r]="#"+f.slice(r*6,++r*6);return b;}var W11=e("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),z13=e("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),F11=e("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),N12=e("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),q14=e("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),L15=e("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),U12=e("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),V9=e("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),E12=e("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),J9=e("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),K12=e("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),a4=f=>fn3(f[f.length-1]),o4=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(e),Q10=a4(o4),h6=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(e),X11=a4(h6),i1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(e),Z12=a4(i1),l5=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(e),ff=a4(l5),p7=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(e),ef=a4(p7),v9=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(e),af=a4(v9),u5=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(e),df=a4(u5),B11=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(e),cf=a4(B11),P12=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(e),bf=a4(P12),y9=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(e),rf=a4(y9),w9=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(e),sf=a4(w9),G13=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(e),nf=a4(G13),M9=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(e),tf=a4(M9),R11=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(e),mf=a4(R11),A12=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(e),of=a4(A12),$8=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(e),hf=a4($8),Y11=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(e),lf=a4(Y11),g6=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(e),pf=a4(g6),x9=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(e),vf=a4(x9),O11=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(e),uf=a4(O11),S12=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(e),Bf=a4(S12),C11=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(e),Pf=a4(C11),j13=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(e),yf=a4(j13),k11=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(e),wf=a4(k11),D6=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(e),Gf=a4(D6),I13=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(e),Mf=a4(I13),_12=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(e),Rf=a4(_12);Cn3(be2(300,.5,0),be2(-240,.5,1)),Cn3(be2(-100,.75,.35),be2(80,1.5,.8)),Cn3(be2(260,.75,.35),be2(80,1.5,.8)),be2();Y9();function t(f){var d=f.length;return function(b){return f[Math.max(0,Math.min(d-1,Math.floor(b*d)))];};}t(e("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),t(e("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),t(e("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),t(e("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function H10(e,n,t){const a=e-n+t*2;return e?a>0?a:1:0;}const X12="identity",z14="linear",v10="log",I14="pow",j14="sqrt",D7="symlog",S13="time",$9="utc",R12="sequential",q15="diverging",x10="quantile",L16="quantize",C12="threshold",J10="ordinal",Z13="point",_13="band",ee7="bin-ordinal",s2="continuous",G14="discrete",O12="discretizing",g7="interpolating",T8="temporal";function yn4(e){return function(n){let t=n[0],a=n[1],f;return a<t&&(f=t,t=a,a=f),[e.invert(t),e.invert(a)];};}function vn5(e){return function(n){const t=e.range();let a=n[0],f=n[1],c=-1,d,r,o,l;for(f<a&&(r=a,a=f,f=r),o=0,l=t.length;o<l;++o)t[o]>=a&&t[o]<=f&&(c<0&&(c=o),d=o);return c<0?void 0:(a=e.invertExtent(t[c]),f=e.invertExtent(t[d]),[a[0]===void 0?a[1]:a[0],f[1]===void 0?f[0]:f[1]]);};}function U13(){const e=T7().unknown(void 0),n=e.domain,t=e.range;let a=[0,1],f,c,d=!1,r=0,o=0,l=.5;delete e.unknown;function m(){const i=n().length,p=a[1]<a[0],w=a[1-p],P=H10(i,r,o);let u=a[p-0];f=(w-u)/(P||1),d&&(f=Math.floor(f)),u+=(w-u-f*(i-r))*l,c=f*(1-r),d&&(u=Math.round(u),c=Math.round(c));const h=ie(i).map(y=>u+f*y);return t(p?h.reverse():h);}return e.domain=function(i){return arguments.length?(n(i),m()):n();},e.range=function(i){return arguments.length?(a=[+i[0],+i[1]],m()):a.slice();},e.rangeRound=function(i){return a=[+i[0],+i[1]],d=!0,m();},e.bandwidth=function(){return c;},e.step=function(){return f;},e.round=function(i){return arguments.length?(d=!!i,m()):d;},e.padding=function(i){return arguments.length?(o=Math.max(0,Math.min(1,i)),r=o,m()):r;},e.paddingInner=function(i){return arguments.length?(r=Math.max(0,Math.min(1,i)),m()):r;},e.paddingOuter=function(i){return arguments.length?(o=Math.max(0,Math.min(1,i)),m()):o;},e.align=function(i){return arguments.length?(l=Math.max(0,Math.min(1,i)),m()):l;},e.invertRange=function(i){if(i[0]==null||i[1]==null)return;const p=a[1]<a[0],w=p?t().reverse():t(),P=w.length-1;let u=+i[0],h=+i[1],y,B,k;return u!==u||h!==h?void 0:(h<u&&(k=u,u=h,h=k),h<w[0]||u>a[1-p]?void 0:(y=Math.max(0,U2(w,u)-1),B=u===h?y:U2(w,h)-1,u-w[y]>c+1e-10&&++y,p&&(k=y,y=P-B,B=P-k),y>B?void 0:n().slice(y,B+1)));},e.invert=function(i){const p=e.invertRange([i,i]);return p&&p[0];},e.copy=function(){return U13().domain(n()).range(a).round(d).paddingInner(r).paddingOuter(o).align(l);},m();}function ne8(e){const n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ne8(n());},e;}function wn6(){return ne8(U13().paddingInner(1));}var Mn4=Array.prototype.map;function Sn4(e){return Mn4.call(e,L2);}const $n4=Array.prototype.slice;function ae4(){let e=[],n=[];function t(a){return a==null||a!==a?void 0:n[(U2(e,a)-1)%n.length];}return t.domain=function(a){return arguments.length?(e=Sn4(a),t):e.slice();},t.range=function(a){return arguments.length?(n=$n4.call(a),t):n.slice();},t.tickFormat=function(a1,f){return nn4(e[0],a(e),a1??10,f);},t.copy=function(){return ae4().domain(t.domain()).range(t.range());},t;}const A13=new Map,te7=Symbol("vega_scale");function fe3(e){return e[te7]=!0,e;}function Rn5(e){return e&&e[te7]===!0;}function Fn2(e,n,t){const a=function(){const c=n();return c.invertRange||(c.invertRange=c.invert?yn4(c):c.invertExtent?vn5(c):void 0),c.type=e,fe3(c);};return a.metadata=Xn(p(t)),a;}function b7(e,n,t){return arguments.length>1?(A13.set(e,Fn2(e,n,t)),this):ce2(e)?A13.get(e):void 0;}b7(X12,rn5),b7(z14,tn4,s2),b7(v10,ln5,[s2,v10]),b7(I14,U11,s2),b7(j14,dt3,s2),b7(D7,fn4,s2),b7(S13,wt1,[s2,T8]),b7($9,kt2,[s2,T8]),b7(R12,vn4,[s2,g7]),b7(`${R12}-${z14}`,vn4,[s2,g7]),b7(`${R12}-${v10}`,Mn3,[s2,g7,v10]),b7(`${R12}-${I14}`,X10,[s2,g7]),b7(`${R12}-${j14}`,Nt2,[s2,g7]),b7(`${R12}-${D7}`,wn5,[s2,g7]),b7(`${q15}-${z14}`,Nn3,[s2,g7]),b7(`${q15}-${v10}`,qn3,[s2,g7,v10]),b7(`${q15}-${I14}`,x8,[s2,g7]),b7(`${q15}-${j14}`,qt3,[s2,g7]),b7(`${q15}-${D7}`,Sn3,[s2,g7]),b7(x10,hn4,[O12,x10]),b7(L16,dn4,O12),b7(C12,yn3,O12),b7(ee7,ae4,[G14,O12]),b7(J10,T7,G14),b7(_13,U13,G14),b7(Z13,wn6,G14);function ce2(e){return A13.has(e);}function F12(e,n){const t=A13.get(e);return t&&t.metadata[n];}function qn4(e){return F12(e,s2);}function de4(e){return F12(e,G14);}function re7(e){return F12(e,O12);}function ie5(e){return F12(e,v10);}function be3(e){return F12(e,T8);}function xn4(e){return F12(e,g7);}function Bn3(e){return F12(e,x10);}const Gn2=["clamp","base","constant","exponent"];function On1(e,n){const t=n[0],a1=a(n)-t;return function(f){return e(t+f*a1);};}function oe6(e,n,t){return Rn4(se4(n||"rgb",t),e);}function Pn3(e,n){const t=new Array(n),a=n+1;for(let f=0;f<n;)t[f]=e(++f/a);return t;}function zn2(e,n,t){const a=t-n;let f,c,d;return!a||!Number.isFinite(a)?On(.5):(f=(c=e.type).indexOf("-"),c=f<0?c:c.slice(f+1),d=b7(c)().domain([n,t]).range([0,1]),Gn2.forEach(r=>e[r]?d[r](e[r]()):0),d);}function se4(e,n){const t=mod1[In2(e)];return n!=null&&t&&t.gamma?t.gamma(n):t;}function In2(e){return"interpolate"+e.toLowerCase().split("-").map(n=>n[0].toUpperCase()+n.slice(1)).join("");}const jn3={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Dn1={accent:z13,category10:W11,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:F11,observable10:N12,paired:q14,pastel1:L15,pastel2:U12,set1:V9,set2:E12,set3:J9,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function ue6(e){if(w1(e))return e;const n=e.length/6|0,t=new Array(n);for(let a=0;a<n;)t[a]="#"+e.slice(a*6,++a*6);return t;}function le5(e,n){for(const t in e)ge3(t,n(e[t]));}const me4={};le5(Dn1,ue6),le5(jn3,e=>oe6(ue6(e)));function ge3(e,n){return e=e&&e.toLowerCase(),arguments.length>1?(me4[e]=n,this):me4[e];}const pe4="symbol",he4="discrete",Ln1="gradient",Cn4=e=>w1(e)?e.map(n=>String(n)):String(e),An5=(e,n)=>e[1]-n[1],Tn2=(e,n)=>n[1]-e[1];function Un2(e,n,t){let a;return V(n)&&(e.bins&&(n=Math.max(n,e.bins.length)),t!=null&&(n=Math.min(n,Math.floor(Wn(e.domain())/t||1)+1))),M1(n)&&(a=n.step,n=n.interval),X1(n)&&(n=e.type===S13?G6(n):e.type==$9?Q4(n):b("Only time and utc scales accept interval strings."),a&&(n=n.every(a))),n;}function ye4(e,n,t){let a1=e.range(),f=a1[0],c=a(a1),d=An5;if(f>c&&(a1=c,c=f,f=a1,d=Tn2),f=Math.floor(f),c=Math.ceil(c),n=n.map(r=>[r,e(r)]).filter(r=>f<=r[1]&&r[1]<=c).sort(d).map(r=>r[0]),t>0&&n.length>1){const r=[n[0],a(n)];for(;n.length>t&&n.length>=3;)n=n.filter((o,l)=>!(l%2));n.length<3&&(n=r);}return n;}function E13(e,n){return e.bins?ye4(e,e.bins,n):e.ticks?e.ticks(n):e.domain();}function ve3(e,n,t,a,f,c){const d=n.type;let r=Cn4;if(d===S13||f===S13)r=e.timeFormat(a);else if(d===$9||f===$9)r=e.utcFormat(a);else if(ie5(d)){const o=e.formatFloat(a);if(c||n.bins)r=o;else{const l=we4(n,t,!1);r=m=>l(m)?o(m):"";}}else if(n.tickFormat){const o=n.domain();r=e.formatSpan(o[0],o[o.length-1],t,a);}else a&&(r=e.format(a));return r;}function we4(e,n,t){const a=E13(e,n),f=e.base(),c=Math.log(f),d=Math.max(1,f*n/a.length),r=o=>{let l=o/Math.pow(f,Math.round(Math.log(o)/c));return l*f<f-.5&&(l*=f),l<=d;};return t?a.filter(r):r;}const N13={[x10]:"quantiles",[L16]:"thresholds",[C12]:"domain"},Me4={[x10]:"quantiles",[L16]:"domain"};function Se3(e,n){return e.bins?Qn1(e.bins):e.type===v10?we4(e,n,!0):N13[e.type]?Nn4(e[N13[e.type]]()):E13(e,n);}function En3(e,n,t){const a=n[Me4[n.type]](),f=a.length;let c=f>1?a[1]-a[0]:a[0],d;for(d=1;d<f;++d)c=Math.min(c,a[d]-a[d-1]);return e.formatSpan(0,c,3*10,t);}function Nn4(e){const n=[-Infinity].concat(e);return n.max=Infinity,n;}function Qn1(e){const n=e.slice(0,-1);return n.max=a(e),n;}const Vn1=e=>N13[e.type]||e.bins;function $e3(e,n,t,a,f,c,d){const r=Me4[n.type]&&c!==S13&&c!==$9?En3(e,n,f):ve3(e,n,t,f,c,d);return a===pe4&&Vn1(n)?Yn1(r):a===he4?Kn1(r):Wn2(r);}const Yn1=e=>(n,t,a)=>{const f=Re3(a[t+1],Re3(a.max,Infinity)),c=Fe3(n,e),d=Fe3(f,e);return c&&d?c+" – "+d:d?"< "+d:"≥ "+c;},Re3=(e,n)=>e??n,Kn1=e=>(n,t)=>t?e(n):null,Wn2=e=>n=>e(n),Fe3=(e,n)=>Number.isFinite(e)?n(e):null;function Hn2(e){const n=e.domain(),t=n.length-1;let a1=+n[0],f=+a(n),c=f-a1;if(e.type===C12){const d=t?c/t:.1;a1-=d,f+=d,c=f-a1;}return d=>(d-a1)/c;}function Xn3(e,n,t,a){const f=a||n.type;return X1(t)&&be3(f)&&(t=t.replace(/%a/g,"%A").replace(/%b/g,"%B")),!t&&f===S13?e.timeFormat("%A, %d %B %Y, %X"):!t&&f===$9?e.utcFormat("%A, %d %B %Y, %X UTC"):$e3(e,n,5,null,t,a,!0);}function Jn2(e,n,t){t=t||{};const a1=Math.max(3,t.maxlen||7),f=Xn3(e,n,t.format,t.formatType);if(re7(n.type)){const c=Se3(n).slice(1).map(f),d=c.length;return`${d} boundar${d===1?"y":"ies"}: ${c.join(", ")}`;}else if(de4(n.type)){const c=n.domain(),d=c.length,r=d>a1?c.slice(0,a1-2).map(f).join(", ")+", ending with "+c.slice(-1).map(f):c.map(f).join(", ");return`${d} value${d===1?"":"s"}: ${r}`;}else{const c=n.domain();return`values from ${f(c[0])} to ${f(a(c))}`;}}let kn2=0;function wr1(){kn2=0;}const St2="p_";function de5(t){return t&&t.gradient;}function wn7(t,e,n){const i=t.gradient;let r=t.id,o=i==="radial"?St2:"";return r||(r=t.id="gradient_"+kn2++,i==="radial"?(t.x1=I15(t.x1,.5),t.y1=I15(t.y1,.5),t.r1=I15(t.r1,0),t.x2=I15(t.x2,.5),t.y2=I15(t.y2,.5),t.r2=I15(t.r2,.5),o=St2):(t.x1=I15(t.x1,0),t.y1=I15(t.y1,0),t.x2=I15(t.x2,1),t.y2=I15(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+o+r+")";}function I15(t,e){return t??e;}function br1(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i;}};}const bn2={basis:{curve:jn1},"basis-closed":{curve:ti1},"basis-open":{curve:ni1},bundle:{curve:ii1,tension:"beta",value:.85},cardinal:{curve:ei1,tension:"tension",value:0},"cardinal-open":{curve:oi1,tension:"tension",value:0},"cardinal-closed":{curve:si1,tension:"tension",value:0},"catmull-rom":{curve:ri1,tension:"alpha",value:.5},"catmull-rom-closed":{curve:hi1,tension:"alpha",value:.5},"catmull-rom-open":{curve:ai1,tension:"alpha",value:.5},linear:{curve:rt3},"linear-closed":{curve:li1},monotone:{horizontal:_i,vertical:ui1},natural:{curve:ci},step:{curve:fi1},"step-after":{curve:yi1},"step-before":{curve:pi1}};function pe5(t,e,n){var i=g(bn2,t)&&bn2[t],r=null;return i&&(r=i.curve||i[e||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r;}const xr1={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Tr=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Mr1=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Cr1=/^((\s+,?\s*)|(,\s*))/,Rr=/^[01]/;function dt4(t){const e=[],n=t.match(Tr)||[];return n.forEach(i=>{let r=i[0];const o=r.toLowerCase(),s=xr1[o],l=zr1(o,s,i.slice(1).trim()),a=l.length;if(a<s||a&&a%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([r,...l.slice(0,s)]),a===s)return;o==="m"&&(r=r==="M"?"L":"l");for(let h=s;h<a;h+=s)e.push([r,...l.slice(h,h+s)]);}),e;}function zr1(t,e,n){const i=[];for(let r=0;e&&r<n.length;)for(let o=0;o<e;++o){const s=t==="a"&&(o===3||o===4)?Rr:Mr1,l=n.slice(r).match(s);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");r+=l[0].length,i.push(+l[0]);const a=n.slice(r).match(Cr1);a!==null&&(r+=a[0].length);}return i;}const B12=Math.PI/180,Q11=Math.PI/2,D8=Math.PI*2,at4=Math.sqrt(3)/2;var ge4={},ve4={},xn5=[].join;function Er1(t,e,n,i,r,o,s,l,a){const h=xn5.call(arguments);if(ge4[h])return ge4[h];const u=s*B12,c=Math.sin(u),f=Math.cos(u);n=Math.abs(n),i=Math.abs(i);const d=f*(l-t)*.5+c*(a-e)*.5,g=f*(a-e)*.5-c*(l-t)*.5;let p=d*d/(n*n)+g*g/(i*i);p>1&&(p=Math.sqrt(p),n*=p,i*=p);const v=f/n,y=c/n,k=-c/i,T=f/i,_=v*l+y*a,R=k*l+T*a,z=v*t+y*e,x=k*t+T*e,A=(z-_)*(z-_)+(x-R)*(x-R);let ot=1/A-.25;ot<0&&(ot=0);let F=Math.sqrt(ot);o==r&&(F=-F);const ae=.5*(_+z)-F*(x-R),le=.5*(R+x)+F*(z-_),he=Math.atan2(R-le,_-ae),ji=Math.atan2(x-le,z-ae);let K=ji-he;K<0&&o===1?K+=D8:K>0&&o===0&&(K-=D8);const ue=Math.ceil(Math.abs(K/(Q11+.001))),ln=[];for(let ft=0;ft<ue;++ft){const Wi=he+ft*K/ue,Ui=he+(ft+1)*K/ue;ln[ft]=[ae,le,Wi,Ui,n,i,c,f];}return ge4[h]=ln;}function Pr1(t){const e=xn5.call(t);if(ve4[e])return ve4[e];var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],l=t[5],a=t[6],h=t[7];const u=h*s,c=-a*l,f=a*s,d=h*l,g=Math.cos(r),p=Math.sin(r),v=Math.cos(o),y=Math.sin(o),k=.5*(o-r),T=Math.sin(k*.5),_=8/3*T*T/Math.sin(k),R=n+g-_*p,z=i+p+_*g,x=n+v,A=i+y,ot=x+_*y,F=A-_*v;return ve4[e]=[u*R+c*z,f*R+d*z,u*ot+c*F,f*ot+d*F,u*x+c*A,f*x+d*A];}const P13=["l",0,0,0,0,0,0,0];function Sr1(t,e,n){const i=P13[0]=t[0];if(i==="a"||i==="A")P13[1]=e*t[1],P13[2]=n*t[2],P13[3]=t[3],P13[4]=t[4],P13[5]=t[5],P13[6]=e*t[6],P13[7]=n*t[7];else if(i==="h"||i==="H")P13[1]=e*t[1];else if(i==="v"||i==="V")P13[1]=n*t[1];else for(var r=1,o=t.length;r<o;++r)P13[r]=(r%2==1?e:n)*t[r];return P13;}function Lt4(t,e,n,i,r,o){var s,l=null,a=0,h=0,u=0,c=0,f,d,g,p,v=0,y=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),o==null&&(o=r),t.beginPath&&t.beginPath();for(var k=0,T=e.length;k<T;++k){s=e[k],(r!==1||o!==1)&&(s=Sr1(s,r,o));switch(s[0]){case"l":a+=s[1],h+=s[2],t.lineTo(a+n,h+i);break;case"L":a=s[1],h=s[2],t.lineTo(a+n,h+i);break;case"h":a+=s[1],t.lineTo(a+n,h+i);break;case"H":a=s[1],t.lineTo(a+n,h+i);break;case"v":h+=s[1],t.lineTo(a+n,h+i);break;case"V":h=s[1],t.lineTo(a+n,h+i);break;case"m":a+=s[1],h+=s[2],v=a,y=h,t.moveTo(a+n,h+i);break;case"M":a=s[1],h=s[2],v=a,y=h,t.moveTo(a+n,h+i);break;case"c":f=a+s[5],d=h+s[6],u=a+s[3],c=h+s[4],t.bezierCurveTo(a+s[1]+n,h+s[2]+i,u+n,c+i,f+n,d+i),a=f,h=d;break;case"C":a=s[5],h=s[6],u=s[3],c=s[4],t.bezierCurveTo(s[1]+n,s[2]+i,u+n,c+i,a+n,h+i);break;case"s":f=a+s[3],d=h+s[4],u=2*a-u,c=2*h-c,t.bezierCurveTo(u+n,c+i,a+s[1]+n,h+s[2]+i,f+n,d+i),u=a+s[1],c=h+s[2],a=f,h=d;break;case"S":f=s[3],d=s[4],u=2*a-u,c=2*h-c,t.bezierCurveTo(u+n,c+i,s[1]+n,s[2]+i,f+n,d+i),a=f,h=d,u=s[1],c=s[2];break;case"q":f=a+s[3],d=h+s[4],u=a+s[1],c=h+s[2],t.quadraticCurveTo(u+n,c+i,f+n,d+i),a=f,h=d;break;case"Q":f=s[3],d=s[4],t.quadraticCurveTo(s[1]+n,s[2]+i,f+n,d+i),a=f,h=d,u=s[1],c=s[2];break;case"t":f=a+s[1],d=h+s[2],l[0].match(/[QqTt]/)===null?(u=a,c=h):l[0]==="t"?(u=2*a-g,c=2*h-p):l[0]==="q"&&(u=2*a-u,c=2*h-c),g=u,p=c,t.quadraticCurveTo(u+n,c+i,f+n,d+i),a=f,h=d,u=a+s[1],c=h+s[2];break;case"T":f=s[1],d=s[2],u=2*a-u,c=2*h-c,t.quadraticCurveTo(u+n,c+i,f+n,d+i),a=f,h=d;break;case"a":Tn3(t,a+n,h+i,[s[1],s[2],s[3],s[4],s[5],s[6]+a+n,s[7]+h+i]),a+=s[6],h+=s[7];break;case"A":Tn3(t,a+n,h+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),a=s[6],h=s[7];break;case"z":case"Z":a=v,h=y,t.closePath();break;}l=s;}}function Tn3(t,e,n,i){const r=Er1(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let o=0;o<r.length;++o){const s=Pr1(r[o]);t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);}}const Mn5=.5773502691896257,Cn5={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,D8);}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath();}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath();}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n);}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,r=n/2.5,o=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-o),t.lineTo(r,-o),t.lineTo(0,-n),t.lineTo(-r,-o),t.lineTo(-i,-o),t.closePath();}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=at4*n,r=i-n*Mn5,o=n/4;t.moveTo(0,-i-r),t.lineTo(-o,i-r),t.lineTo(o,i-r),t.closePath();}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=at4*n,r=i-n*Mn5;t.moveTo(0,-i-r),t.lineTo(-n,i-r),t.lineTo(n,i-r),t.closePath();}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=at4*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath();}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=at4*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath();}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=at4*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath();}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=at4*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath();}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0);}}};function Rn6(t){return g(Cn5,t)?Cn5[t]:Lr1(t);}var ye5={};function Lr1(t){if(!g(ye5,t)){const e=dt4(t);ye5[t]={draw:function(n,i){Lt4(n,e,0,0,Math.sqrt(i)/2);}};}return ye5[t];}function mr(t){return t.x;}function Or1(t){return t.y;}function $r1(t){return t.width;}function Ir(t){return t.height;}function H11(t){return typeof t=="function"?t:()=>+t;}function mt2(t,e,n){return Math.max(e,Math.min(t,n));}function zn3(){var t=mr,e=Or1,n=$r1,i=Ir,r=H11(0),o=r,s=r,l=r,a=null;function h(u,c,f){var d,g=c??+t.call(this,u),p=f??+e.call(this,u),v=+n.call(this,u),y=+i.call(this,u),k=Math.min(v,y)/2,T=mt2(+r.call(this,u),0,k),_=mt2(+o.call(this,u),0,k),R=mt2(+s.call(this,u),0,k),z=mt2(+l.call(this,u),0,k);if(a||(a=d=L11()),T<=0&&_<=0&&R<=0&&z<=0)a.rect(g,p,v,y);else{var x=g+v,A=p+y;a.moveTo(g+T,p),a.lineTo(x-_,p),a.bezierCurveTo(x-.448084975506*_,p,x,p+.448084975506*_,x,p+_),a.lineTo(x,A-z),a.bezierCurveTo(x,A-.448084975506*z,x-.448084975506*z,A,x-z,A),a.lineTo(g+R,A),a.bezierCurveTo(g+.448084975506*R,A,g,A-.448084975506*R,g,A-R),a.lineTo(g,p+T),a.bezierCurveTo(g,p+.448084975506*T,g+.448084975506*T,p,g+T,p),a.closePath();}if(d)return a=null,d+""||null;}return h.x=function(u){return arguments.length?(t=H11(u),h):t;},h.y=function(u){return arguments.length?(e=H11(u),h):e;},h.width=function(u){return arguments.length?(n=H11(u),h):n;},h.height=function(u){return arguments.length?(i=H11(u),h):i;},h.cornerRadius=function(u,c,f,d){return arguments.length?(r=H11(u),o=c!=null?H11(c):r,l=f!=null?H11(f):r,s=d!=null?H11(d):o,h):r;},h.context=function(u){return arguments.length?(a=u??null,h):a;},h;}function An6(){var t,e,n,i,r=null,o,s,l,a;function h(c,f,d){const g=d/2;if(o){var p=l-f,v=c-s;if(p||v){var y=Math.hypot(p,v),k=(p/=y)*a,T=(v/=y)*a,_=Math.atan2(v,p);r.moveTo(s-k,l-T),r.lineTo(c-p*g,f-v*g),r.arc(c,f,g,_-Math.PI,_),r.lineTo(s+k,l+T),r.arc(s,l,a,_,_+Math.PI);}else r.arc(c,f,g,0,D8);r.closePath();}else o=1;s=c,l=f,a=g;}function u(c){var f,d=c.length,g,p=!1,v;for(r==null&&(r=v=L11()),f=0;f<=d;++f)!(f<d&&i(g=c[f],f,c))===p&&(p=!p)&&(o=0),p&&h(+t(g,f,c),+e(g,f,c),+n(g,f,c));if(v)return r=null,v+""||null;}return u.x=function(c){return arguments.length?(t=c,u):t;},u.y=function(c){return arguments.length?(e=c,u):e;},u.size=function(c){return arguments.length?(n=c,u):n;},u.defined=function(c){return arguments.length?(i=c,u):i;},u.context=function(c){return arguments.length?(c==null?r=null:r=c,u):r;},u;}function pt3(t,e){return t??e;}const gt2=t=>t.x||0,vt2=t=>t.y||0,Dr1=t=>t.width||0,Nr1=t=>t.height||0,Hr1=t=>(t.x||0)+(t.width||0),qr1=t=>(t.y||0)+(t.height||0),Br=t=>t.startAngle||0,Gr1=t=>t.endAngle||0,Vr1=t=>t.padAngle||0,jr1=t=>t.innerRadius||0,Wr1=t=>t.outerRadius||0,Ur=t=>t.cornerRadius||0,Xr1=t=>pt3(t.cornerRadiusTopLeft,t.cornerRadius)||0,Yr1=t=>pt3(t.cornerRadiusTopRight,t.cornerRadius)||0,Jr1=t=>pt3(t.cornerRadiusBottomRight,t.cornerRadius)||0,Fr=t=>pt3(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Kr1=t=>pt3(t.size,64),Zr1=t=>t.size||1,Ot2=t=>!(t.defined===!1),Qr1=t=>Rn6(t.shape||"circle"),ts=Mn1().startAngle(Br).endAngle(Gr1).padAngle(Vr1).innerRadius(jr1).outerRadius(Wr1).cornerRadius(Ur),es=Xt3().x(gt2).y1(vt2).y0(qr1).defined(Ot2),ns=Xt3().y(vt2).x1(gt2).x0(Hr1).defined(Ot2),is=bt2().x(gt2).y(vt2).defined(Ot2),rs=zn3().x(gt2).y(vt2).width(Dr1).height(Nr1).cornerRadius(Xr1,Yr1,Jr1,Fr),ss=$n2().type(Qr1).size(Kr1),os=An6().x(gt2).y(vt2).defined(Ot2).size(Zr1);function _e2(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft;}function as(t,e){return ts.context(t)(e);}function ls(t,e){const n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?ns:es).curve(pe5(i,n.orient,n.tension)).context(t)(e);}function hs(t,e){const n=e[0],i=n.interpolate||"linear";return is.curve(pe5(i,n.orient,n.tension)).context(t)(e);}function lt5(t,e,n,i){return rs.context(t)(e,n,i);}function us(t,e){return(e.mark.shape||e.shape).context(t)(e);}function cs(t,e){return ss.context(t)(e);}function fs(t,e){return os.context(t)(e);}var En4=1;function Pn4(){En4=1;}function ke3(t,e,n){var i=e.clip,r=t._defs,o=e.clip_id||(e.clip_id="clip"+En4++),s=r.clipping[o]||(r.clipping[o]={id:o});return O1(i)?s.path=i(null):_e2(n)?s.path=lt5(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")";}function E14(t){this.clear(),t&&this.union(t);}E14.prototype={clone(){return new E14(this);},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this;},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE;},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2;},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this;},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this;},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this;},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this;},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this;},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this;},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7]);},rotatedPoints(t,e,n){var{x1:i,y1:r,x2:o,y2:s}=this,l=Math.cos(t),a=Math.sin(t),h=e-e*l+n*a,u=n-e*a-n*l;return[l*i-a*r+h,a*i+l*r+u,l*i-a*s+h,a*i+l*s+u,l*o-a*r+h,a*o+l*r+u,l*o-a*s+h,a*o+l*s+u];},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this;},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this;},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2;},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2);},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2);},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2);},width(){return this.x2-this.x1;},height(){return this.y2-this.y1;}};function we5(t){this.mark=t,this.bounds=this.bounds||new E14;}function be4(t){we5.call(this,t),this.items=this.items||[];}Pn(be4,we5);class Sn5{constructor(e){this._pending=0,this._loader=e||vn1();}pending(){return this._pending;}sanitizeURL(e){const n=this;return Ln2(n),n._loader.sanitize(e,{context:"href"}).then(i=>(yt1(n),i)).catch(()=>(yt1(n),null));}loadImage(e){const n=this,i=o2();return Ln2(n),n._loader.sanitize(e,{context:"image"}).then(r=>{const o=r.href;if(!o||!i)throw{url:o};const s=new i,l=g(r,"crossOrigin")?r.crossOrigin:"anonymous";return l!=null&&(s.crossOrigin=l),s.onload=()=>yt1(n),s.onerror=()=>yt1(n),s.src=o,s;}).catch(r=>(yt1(n),{complete:!1,width:0,height:0,src:r&&r.url||""}));}ready(){const e=this;return new Promise(n=>{function i(r){e.pending()?setTimeout(()=>{i(!0);},10):n(r);}i(!1);});}}function Ln2(t){t._pending+=1;}function yt1(t){t._pending-=1;}function tt3(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?ds(e,i):0));}return t;}function ds(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e;}const ps=D8-1e-8;let $t3,It2,Dt2,et5,xe3,Nt3,Te3,Me5;const V10=(t,e)=>$t3.add(t,e),Ht3=(t,e)=>V10(It2=t,Dt2=e),mn4=t=>V10(t,$t3.y1),On2=t=>V10($t3.x1,t),nt3=(t,e)=>xe3*t+Te3*e,it4=(t,e)=>Nt3*t+Me5*e,Ce3=(t,e)=>V10(nt3(t,e),it4(t,e)),Re4=(t,e)=>Ht3(nt3(t,e),it4(t,e));function _t2(t,e){return $t3=t,e?(et5=e*B12,xe3=Me5=Math.cos(et5),Nt3=Math.sin(et5),Te3=-Nt3):(xe3=Me5=1,et5=Nt3=Te3=0),gs;}const gs={beginPath(){},closePath(){},moveTo:Re4,lineTo:Re4,rect(t,e,n,i){et5?(Ce3(t+n,e),Ce3(t+n,e+i),Ce3(t,e+i),Re4(t,e)):(V10(t+n,e+i),Ht3(t,e));},quadraticCurveTo(t,e,n,i){const r=nt3(t,e),o=it4(t,e),s=nt3(n,i),l=it4(n,i);$n5(It2,r,s,mn4),$n5(Dt2,o,l,On2),Ht3(s,l);},bezierCurveTo(t,e,n,i,r,o){const s=nt3(t,e),l=it4(t,e),a=nt3(n,i),h=it4(n,i),u=nt3(r,o),c=it4(r,o);In3(It2,s,a,u,mn4),In3(Dt2,l,h,c,On2),Ht3(u,c);},arc(t,e,n,i,r,o){if(i+=et5,r+=et5,It2=n*Math.cos(r)+t,Dt2=n*Math.sin(r)+e,Math.abs(r-i)>ps)V10(t-n,e-n),V10(t+n,e+n);else{const s=h=>V10(n*Math.cos(h)+t,n*Math.sin(h)+e);let l,a;if(s(i),s(r),r!==i)if(i=i%D8,i<0&&(i+=D8),r=r%D8,r<0&&(r+=D8),r<i&&(o=!o,l=i,i=r,r=l),o)for(r-=D8,l=i-i%Q11,a=0;a<4&&l>r;++a,l-=Q11)s(l);else for(l=i-i%Q11+Q11,a=0;a<4&&l<r;++a,l=l+Q11)s(l);}}};function $n5(t,e,n,i){const r=(t-e)/(t+n-2*e);0<r&&r<1&&i(t+(e-t)*r);}function In3(t,e,n,i,r){const o=i-t+3*e-3*n,s=t+n-2*e,l=t-e;let a=0,h=0,u;Math.abs(o)>1e-14?(u=s*s+l*o,u>=0&&(u=Math.sqrt(u),a=(-s+u)/o,h=(-s-u)/o)):a=.5*l/s,0<a&&a<1&&r(Dn2(a,t,e,n,i)),0<h&&h<1&&r(Dn2(h,t,e,n,i));}function Dn2(t,e,n,i,r){const o=1-t,s=o*o,l=t*t;return s*o*e+3*s*t*n+3*o*l*i+l*t*r;}var j15=(j15=n1(1,1))?j15.getContext("2d"):null;const ze4=new E14;function Ae3(t){return function(e,n){if(!j15)return!0;t(j15,e),ze4.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:s}=ze4;for(let l=r;l<=s;++l)for(let a=i;a<=o;++a)if(j15.isPointInPath(a,l))return!0;return!1;};}function Ee2(t,e){return e.contains(t.x||0,t.y||0);}function Nn5(t,e){const n=t.x||0,i=t.y||0,r=t.width||0,o=t.height||0;return e.intersects(ze4.set(n,i,n+r,i+o));}function Hn3(t,e){const n=t.x||0,i=t.y||0,r=t.x2!=null?t.x2:n,o=t.y2!=null?t.y2:i;return ht3(e,n,i,r,o);}function ht3(t,e,n,i,r){const{x1:o,y1:s,x2:l,y2:a}=t,h=i-e,u=r-n;let c=0,f=1,d,g,p,v;for(v=0;v<4;++v){if(v===0&&(d=-h,g=-(o-e)),v===1&&(d=h,g=l-e),v===2&&(d=-u,g=-(s-n)),v===3&&(d=u,g=a-n),Math.abs(d)<1e-10&&g<0)return!1;if(p=g/d,d<0){if(p>f)return!1;p>c&&(c=p);}else if(d>0){if(p<c)return!1;p<f&&(f=p);}}return!0;}function ut4(t,e){t.globalCompositeOperation=e.blend||"source-over";}function L17(t,e){return t??e;}function qn5(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t;}function vs(t,e,n){const i=n.width(),r=n.height();let o;if(e.gradient==="radial")o=t.createRadialGradient(n.x1+L17(e.x1,.5)*i,n.y1+L17(e.y1,.5)*r,Math.max(i,r)*L17(e.r1,0),n.x1+L17(e.x2,.5)*i,n.y1+L17(e.y2,.5)*r,Math.max(i,r)*L17(e.r2,.5));else{const s=L17(e.x1,0),l=L17(e.y1,0),a=L17(e.x2,1),h=L17(e.y2,0);if(s===a||l===h||i===r)o=t.createLinearGradient(n.x1+s*i,n.y1+l*r,n.x1+a*i,n.y1+h*r);else{const u=n1(Math.ceil(i),Math.ceil(r)),c=u.getContext("2d");return c.scale(i,r),c.fillStyle=qn5(c.createLinearGradient(s,l,a,h),e.stops),c.fillRect(0,0,i,r),t.createPattern(u,"no-repeat");}}return qn5(o,e.stops);}function Bn4(t,e,n){return de5(n)?vs(t,n,e.bounds):n;}function qt4(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=Bn4(t,e,e.fill),!0):!1;}var ys=[];function ct6(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=Bn4(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||ys),t.lineDashOffset=e.strokeDashOffset||0),!0):!1);}function _s(t,e){return t.zindex-e.zindex||t.index-e.index;}function Pe2(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,r,o;for(r=0,o=e.length;r<o;++r)i=e[r],i.index=r,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(_s);}function m4(t,e){var n=t.items,i,r;if(!n||!n.length)return;const o=Pe2(t);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||e(n[i]);n=o;}for(i=0,r=n.length;i<r;++i)e(n[i]);}function Bt4(t,e){var n=t.items,i,r;if(!n||!n.length)return null;const o=Pe2(t);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=e(n[r]))return i;if(n===o){for(n=t.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=e(n[r])))return i;}return null;}function Se4(t){return function(e,n,i){m4(n,r=>{(!i||i.intersects(r.bounds))&&Gn3(t,e,r,r);});};}function ks(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&Gn3(t,e,n.items[0],n.items);};}function Gn3(t,e,n,i){var r=n.opacity==null?1:n.opacity;if(r===0)return;if(t(e,i))return;ut4(e,n),n.fill&&qt4(e,n,r)&&e.fill(),n.stroke&&ct6(e,n,r)&&e.stroke();}function Gt3(t){return t=t||_1,function(e,n,i,r,o,s){return i*=e.pixelRatio,r*=e.pixelRatio,Bt4(n,l=>{const a=l.bounds;if(a&&!a.contains(o,s)||!a)return;if(t(e,l,i,r,o,s))return l;});};}function kt3(t,e){return function(n,i,r,o){var s=Array.isArray(i)?i[0]:i,l=e??s.fill,a=s.stroke&&n.isPointInStroke,h,u;return a&&(h=s.strokeWidth,u=s.strokeCap,n.lineWidth=h??1,n.lineCap=u??"butt"),t(n,i)?!1:l&&n.isPointInPath(r,o)||a&&n.isPointInStroke(r,o);};}function Le2(t){return Gt3(kt3(t));}function rt4(t,e){return"translate("+t+","+e+")";}function me5(t){return"rotate("+t+")";}function ws(t,e){return"scale("+t+","+e+")";}function Vn2(t){return rt4(t.x||0,t.y||0);}function bs(t){return rt4(t.x||0,t.y||0)+(t.angle?" "+me5(t.angle):"");}function xs(t){return rt4(t.x||0,t.y||0)+(t.angle?" "+me5(t.angle):"")+(t.scaleX||t.scaleY?" "+ws(t.scaleX||1,t.scaleY||1):"");}function Oe(t,e,n){function i(s,l){s("transform",bs(l)),s("d",e(null,l));}function r(s,l){return e(_t2(s,l.angle),l),tt3(s,l).translate(l.x||0,l.y||0);}function o(s,l){var a=l.x||0,h=l.y||0,u=l.angle||0;s.translate(a,h),u&&s.rotate(u*=B12),s.beginPath(),e(s,l),u&&s.rotate(-u),s.translate(-a,-h);}return{type:t,tag:"path",nested:!1,attr:i,bound:r,draw:Se4(o),pick:Le2(o),isect:n||Ae3(o)};}var Ts=Oe("arc",as);function Ms(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",r=t.length,o=Infinity,s,l;--r>=0;){if(t[r].defined===!1)continue;l=Math.abs(t[r][i]-n),l<o&&(o=l,s=t[r]);}return s;}function Cs(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,r,o,s;--i>=0;){if(t[i].defined===!1)continue;if(r=t[i].x-e[0],o=t[i].y-e[1],s=r*r+o*o,s<n)return t[i];}return null;}function Rs(t,e){for(var n=t.length,i,r,o;--n>=0;){if(t[n].defined===!1)continue;if(i=t[n].x-e[0],r=t[n].y-e[1],o=i*i+r*r,i=t[n].size||1,o<i*i)return t[n];}return null;}function $e4(t,e,n){function i(a,h){var u=h.mark.items;u.length&&a("d",e(null,u));}function r(a,h){var u=h.items;return u.length===0?a:(e(_t2(a),u),tt3(a,u[0]));}function o(a,h){a.beginPath(),e(a,h);}const s=kt3(o);function l(a,h,u,c,f,d){var g=h.items,p=h.bounds;return!g||!g.length||p&&!p.contains(f,d)?null:(u*=a.pixelRatio,c*=a.pixelRatio,s(a,g,u,c)?g[0]:null);}return{type:t,tag:"path",nested:!0,attr:i,bound:r,draw:ks(o),pick:l,isect:Ee2,tip:n};}var zs=$e4("area",ls,Ms);function As(t,e){var n=e.clip;t.save(),O1(n)?(t.beginPath(),n(t),t.clip()):jn4(t,e.group);}function jn4(t,e){t.beginPath(),_e2(e)?lt5(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip();}function Wn3(t){const e=L17(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0;}function Es(t,e){t("transform",Vn2(e));}function Un3(t,e){const n=Wn3(e);t("d",lt5(null,e,n,n));}function Ps(t,e){t("class","background"),t("aria-hidden",!0),Un3(t,e);}function Ss(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?Un3(t,e):t("d","");}function Ls(t,e,n){const i=e.clip?ke3(n,e,e):null;t("clip-path",i);}function ms(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let r=0;r<i;++r)t.union(n[r].bounds);}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),tt3(t,e),t.translate(e.x||0,e.y||0);}function wt2(t,e,n,i){const r=Wn3(e);t.beginPath(),lt5(t,e,(n||0)+r,(i||0)+r);}const Os=kt3(wt2),$s=kt3(wt2,!1),Is=kt3(wt2,!0);function Ds(t,e,n,i){m4(e,r=>{const o=r.x||0,s=r.y||0,l=r.strokeForeground,a=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&a&&(wt2(t,r,o,s),ut4(t,r),r.fill&&qt4(t,r,a)&&t.fill(),r.stroke&&!l&&ct6(t,r,a)&&t.stroke()),t.save(),t.translate(o,s),r.clip&&jn4(t,r),n&&n.translate(-o,-s),m4(r,h=>{(h.marktype==="group"||i==null||i.includes(h.marktype))&&this.draw(t,h,n,i);}),n&&n.translate(o,s),t.restore(),l&&r.stroke&&a&&(wt2(t,r,o,s),ut4(t,r),ct6(t,r,a)&&t.stroke());});}function Ns(t,e,n,i,r,o){if(e.bounds&&!e.bounds.contains(r,o)||!e.items)return null;const s=n*t.pixelRatio,l=i*t.pixelRatio;return Bt4(e,a=>{let h,u,c;const f=a.bounds;if(f&&!f.contains(r,o))return;u=a.x||0,c=a.y||0;const d=u+(a.width||0),g=c+(a.height||0),p=a.clip;if(p&&(r<u||r>d||o<c||o>g))return;if(t.save(),t.translate(u,c),u=r-u,c=o-c,p&&_e2(a)&&!Is(t,a,s,l))return t.restore(),null;const v=a.strokeForeground,y=e.interactive!==!1;return y&&v&&a.stroke&&$s(t,a,s,l)?(t.restore(),a):(h=Bt4(a,k=>Hs(k,u,c)?this.pick(k,n,i,u,c):null),!h&&y&&(a.fill||!v&&a.stroke)&&Os(t,a,s,l)&&(h=a),t.restore(),h||null);});}function Hs(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n);}var qs={type:"group",tag:"g",nested:!1,attr:Es,bound:ms,draw:Ds,pick:Ns,isect:Nn5,content:Ls,background:Ps,foreground:Ss},bt3={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ie3(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url;})),n;}function De2(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width;}function Ne4(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height;}function Vt3(t,e){return t==="center"?e/2:t==="right"?e:0;}function jt4(t,e){return t==="middle"?e/2:t==="bottom"?e:0;}function Bs(t,e,n){const i=Ie3(e,n),r=De2(e,i),o=Ne4(e,i),s=(e.x||0)-Vt3(e.align,r),l=(e.y||0)-jt4(e.baseline,o),a=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",a,bt3["xmlns:xlink"],"xlink:href"),t("transform",rt4(s,l)),t("width",r),t("height",o),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid");}function Gs(t,e){const n=e.image,i=De2(e,n),r=Ne4(e,n),o=(e.x||0)-Vt3(e.align,i),s=(e.y||0)-jt4(e.baseline,r);return t.set(o,s,o+i,s+r);}function Vs(t,e,n){m4(e,i=>{if(n&&!n.intersects(i.bounds))return;const r=Ie3(i,this);let o=De2(i,r),s=Ne4(i,r);if(o===0||s===0)return;let l=(i.x||0)-Vt3(i.align,o),a=(i.y||0)-jt4(i.baseline,s),h,u,c,f;i.aspect!==!1&&(u=r.width/r.height,c=i.width/i.height,u===u&&c===c&&u!==c&&(c<u?(f=o/u,a+=(s-f)/2,s=f):(f=s*u,l+=(o-f)/2,o=f))),(r.complete||r.toDataURL)&&(ut4(t,i),t.globalAlpha=(h=i.opacity)!=null?h:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(r,l,a,o,s));});}var js={type:"image",tag:"image",nested:!1,attr:Bs,bound:Gs,draw:Vs,pick:Gt3(),isect:_1,get:Ie3,xOffset:Vt3,yOffset:jt4},Ws=$e4("line",hs,Cs);function Us(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",xs(e)),t("d",e.path);}function Wt3(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,r=e.y||0,o=e.scaleX||1,s=e.scaleY||1,l=(e.angle||0)*B12,a=e.pathCache;(!a||a.path!==n)&&((e.pathCache=a=dt4(n)).path=n),l&&t.rotate&&t.translate?(t.translate(i,r),t.rotate(l),Lt4(t,a,0,0,o,s),t.rotate(-l),t.translate(-i,-r)):Lt4(t,a,i,r,o,s);}function Xs(t,e){return Wt3(_t2(t,e.angle),e)?t.set(0,0,0,0):tt3(t,e,!0);}var Ys={type:"path",tag:"path",nested:!1,attr:Us,bound:Xs,draw:Se4(Wt3),pick:Le2(Wt3),isect:Ae3(Wt3)};function Js(t,e){t("d",lt5(null,e));}function Fs(t,e){var n,i;return tt3(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e);}function Xn4(t,e){t.beginPath(),lt5(t,e);}var Ks={type:"rect",tag:"path",nested:!1,attr:Js,bound:Fs,draw:Se4(Xn4),pick:Le2(Xn4),isect:Nn5};function Zs(t,e){t("transform",Vn2(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0);}function Qs(t,e){var n,i;return tt3(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e);}function Yn2(t,e,n){var i,r,o,s;return e.stroke&&ct6(t,e,n)?(i=e.x||0,r=e.y||0,o=e.x2!=null?e.x2:i,s=e.y2!=null?e.y2:r,t.beginPath(),t.moveTo(i,r),t.lineTo(o,s),!0):!1;}function to(t,e,n){m4(e,i=>{if(n&&!n.intersects(i.bounds))return;var r=i.opacity==null?1:i.opacity;r&&Yn2(t,i,r)&&(ut4(t,i),t.stroke());});}function eo(t,e,n,i){return t.isPointInStroke?Yn2(t,e,1)&&t.isPointInStroke(n,i):!1;}var no={type:"rule",tag:"line",nested:!1,attr:Zs,bound:Qs,draw:to,pick:Gt3(eo),isect:Hn3},io=Oe("shape",us),ro=Oe("symbol",cs,Ee2);const Jn3=Un();var W12={height:N14,measureWidth:He2,estimateWidth:Ut2,width:Ut2,canvas:Fn3};Fn3(!0);function Fn3(t){W12.width=t&&j15?He2:Ut2;}function Ut2(t,e){return Kn2(X13(t,e),N14(t));}function Kn2(t,e){return~~(.8*t.length*e);}function He2(t,e){return N14(t)<=0||!(e=X13(t,e))?0:Zn1(e,Xt4(t));}function Zn1(t,e){const n=`(${e}) ${t}`;let i=Jn3.get(n);return i===void 0&&(j15.font=e,i=j15.measureText(t).width,Jn3.set(n,i)),i;}function N14(t){return t.fontSize!=null?+t.fontSize||0:11;}function U14(t){return t.lineHeight!=null?t.lineHeight:N14(t)+2;}function so(t){return w1(t)?t.length>1?t:t[0]:t;}function xt4(t){return so(t.lineBreak&&t.text&&!w1(t.text)?t.text.split(t.lineBreak):t.text);}function oo(t){const e=xt4(t);return(w1(e)?e.length-1:0)*U14(t);}function X13(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?lo(t,n):n;}function ao(t){if(W12.width===He2){const e=Xt4(t);return n=>Zn1(n,e);}else if(W12.width===Ut2){const e=N14(t);return n=>Kn2(n,e);}else return e=>W12.width(t,e);}function lo(t,e){var n=+t.limit,i=ao(t);if(i(e)<n)return e;var r=t.ellipsis||"…",o=t.dir==="rtl",s=0,l=e.length,a;if(n-=i(r),o){for(;s<l;)a=s+l>>>1,i(e.slice(a))>n?s=a+1:l=a;return r+e.slice(s);}else{for(;s<l;)a=1+(s+l>>>1),i(e.slice(0,a))<n?s=a:l=a-1;return e.slice(0,s)+r;}}function Tt4(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif";}function Xt4(t,e){return""+(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+N14(t)+"px "+Tt4(t,e);}function qe2(t){var e=t.baseline,n=N14(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*U14(t):e==="line-bottom"?.29*n-.5*U14(t):0);}const ho={left:"start",center:"middle",right:"end"},Mt3=new E14;function Yt4(t){var e=t.x||0,n=t.y||0,i=t.radius||0,r;return i&&(r=(t.theta||0)-Q11,e+=i*Math.cos(r),n+=i*Math.sin(r)),Mt3.x1=e,Mt3.y1=n,Mt3;}function uo(t,e){var n=e.dx||0,i=(e.dy||0)+qe2(e),r=Yt4(e),o=r.x1,s=r.y1,l=e.angle||0,a;t("text-anchor",ho[e.align]||"start"),l?(a=rt4(o,s)+" "+me5(l),(n||i)&&(a+=" "+rt4(n,i))):a=rt4(o+n,s+i),t("transform",a);}function Be2(t,e,n){var i=W12.height(e),r=e.align,o=Yt4(e),s=o.x1,l=o.y1,a=e.dx||0,h=(e.dy||0)+qe2(e)-Math.round(.8*i),u=xt4(e),c;if(w1(u)?(i+=U14(e)*(u.length-1),c=u.reduce((f,d)=>Math.max(f,W12.width(e,d)),0)):c=W12.width(e,u),r==="center"?a-=c/2:r==="right"&&(a-=c),t.set(a+=s,h+=l,a+c,h+i),e.angle&&!n)t.rotate(e.angle*B12,s,l);else if(n===2)return t.rotatedPoints(e.angle*B12,s,l);return t;}function co(t,e,n){m4(e,i=>{var r=i.opacity==null?1:i.opacity,o,s,l,a,h,u,c;if(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)return;if(t.font=Xt4(i),t.textAlign=i.align||"left",o=Yt4(i),s=o.x1,l=o.y1,i.angle&&(t.save(),t.translate(s,l),t.rotate(i.angle*B12),s=l=0),s+=i.dx||0,l+=(i.dy||0)+qe2(i),u=xt4(i),ut4(t,i),w1(u))for(h=U14(i),a=0;a<u.length;++a)c=X13(i,u[a]),i.fill&&qt4(t,i,r)&&t.fillText(c,s,l),i.stroke&&ct6(t,i,r)&&t.strokeText(c,s,l),l+=h;else c=X13(i,u),i.fill&&qt4(t,i,r)&&t.fillText(c,s,l),i.stroke&&ct6(t,i,r)&&t.strokeText(c,s,l);i.angle&&t.restore();});}function fo(t,e,n,i,r,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var s=Yt4(e),l=s.x1,a=s.y1,h=Be2(Mt3,e,1),u=-e.angle*B12,c=Math.cos(u),f=Math.sin(u),d=c*r-f*o+(l-c*l+f*a),g=f*r+c*o+(a-f*l-c*a);return h.contains(d,g);}function po(t,e){const n=Be2(Mt3,t,2);return ht3(e,n[0],n[1],n[2],n[3])||ht3(e,n[0],n[1],n[4],n[5])||ht3(e,n[4],n[5],n[6],n[7])||ht3(e,n[2],n[3],n[6],n[7]);}var go={type:"text",tag:"text",nested:!1,attr:uo,bound:Be2,draw:co,pick:Gt3(fo),isect:po},vo=$e4("trail",fs,Rs),O13={arc:Ts,area:zs,group:qs,image:js,line:Ws,path:Ys,rect:Ks,rule:no,shape:io,symbol:ro,text:go,trail:vo};function Ge2(t,e,n){var i=O13[t.mark.marktype],r=e||i.bound;return i.nested&&(t=t.mark),r(t.bounds||(t.bounds=new E14),t,n);}var Qn2={mark:null};function ti2(t,e,n){var i=O13[t.marktype],r=i.bound,o=t.items,s=o&&o.length,l,a,h,u;if(i.nested)return s?h=o[0]:(Qn2.mark=t,h=Qn2),u=Ge2(h,r,n),e=e&&e.union(u)||u,e;if(e=e||t.bounds&&t.bounds.clear()||new E14,s)for(l=0,a=o.length;l<a;++l)e.union(Ge2(o[l],r,n));return t.bounds=e;}const yo=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function ei2(t,e){return JSON.stringify(t,yo,e);}function ni2(t){const e=typeof t=="string"?JSON.parse(t):t;return ii2(e);}function ii2(t){var e=t.marktype,n=t.items,i,r,o;if(n)for(r=0,o=n.length;r<o;++r)i=e?"mark":"group",n[r][i]=t,n[r].zindex&&(n[r][i].zdirty=!0),(e||i)==="group"&&ii2(n[r]);return e&&ti2(t),t;}class _o{constructor(e){arguments.length?this.root=ni2(e):(this.root=ri2({marktype:"group",name:"root",role:"frame"}),this.root.items=[new be4(this.root)]);}toJSON(e){return ei2(this.root,e||0);}mark(e,n,i){n=n||this.root.items[0];const r=ri2(e,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r;}}function ri2(t,e){const n={bounds:new E14,clip:!!t.clip,group:e,interactive:!(t.interactive===!1),items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n;}function Y12(t,e,n){return!t&&typeof document!="undefined"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null;}function Ve2(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===e)return n[i];}function w10(t,e,n,i){var r=t.childNodes[e],o;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=Y12(t.ownerDocument,n,i),t.insertBefore(r,o)),r;}function S14(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t;}function si2(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"");}function je4(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)];}function ko(t,e,n,i){var r=t&&t.mark,o,s;if(r&&(o=O13[r.marktype]).tip){for(s=je4(e,n),s[0]-=i[0],s[1]-=i[1];t=t.mark.group;)s[0]-=t.x||0,s[1]-=t.y||0;t=o.tip(r.items,s);}return t;}class We2{constructor(e,n){this._active=null,this._handlers={},this._loader=e||vn1(),this._tooltip=n||wo;}initialize(e,n,i){return this._el=e,this._obj=i||null,this.origin(n);}element(){return this._el;}canvas(){return this._el&&this._el.firstChild;}origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice();}scene(e){return arguments.length?(this._scene=e,this):this._scene;}on(){}off(){}_handlerIndex(e,n,i){for(let r=e?e.length:0;--r>=0;)if(e[r].type===n&&(!i||e[r].handler===i))return r;return-1;}handlers(e){const n=this._handlers,i=[];if(e)i.push(...n[this.eventName(e)]);else for(const r in n)i.push(...n[r]);return i;}eventName(e){const n=e.indexOf(".");return n<0?e:e.slice(0,n);}handleHref(e,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const o=new MouseEvent(e.type,e),s=Y12(null,"a");for(const l in r)s.setAttribute(l,r[l]);s.dispatchEvent(o);}).catch(()=>{});}handleTooltip(e,n,i){if(n&&n.tooltip!=null){n=ko(n,e,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,e,n,r);}}getItemBoundingClientRect(e){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,o=e.bounds,s=o.width(),l=o.height();let a=o.x1+r[0]+i.left,h=o.y1+r[1]+i.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,h+=e.y||0;return{x:a,y:h,width:s,height:l,left:a,top:h,right:a+s,bottom:h+l};}}function wo(t,e,n,i){t.element().setAttribute("title",i||"");}class Ct3{constructor(e){this._el=null,this._bgcolor=null,this._loader=new Sn5(e);}initialize(e,n,i,r,o){return this._el=e,this.resize(n,i,r,o);}element(){return this._el;}canvas(){return this._el&&this._el.firstChild;}background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this);}resize(e,n,i,r){return this._width=e,this._height=n,this._origin=i||[0,0],this._scale=r||1,this;}dirty(){}render(e,n){const i=this;return i._call=function(){i._render(e,n);},i._call(),i._call=null,i;}_render(){}renderAsync(e,n){const i=this.render(e,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i);}_load(e,n){var i=this,r=i._loader[e](n);if(!i._ready){const o=i._call;i._ready=i._loader.ready().then(s=>{s&&o(),i._ready=null;});}return r;}sanitizeURL(e){return this._load("sanitizeURL",e);}loadImage(e){return this._load("loadImage",e);}}const bo="keydown",xo="keypress",To="keyup",oi2="dragenter",Jt3="dragleave",ai2="dragover",Ue3="pointerdown",Mo="pointerup",Ft2="pointermove",Kt3="pointerout",li2="pointerover",Xe3="mousedown",Co="mouseup",hi2="mousemove",Zt4="mouseout",ui2="mouseover",Qt3="click",Ro="dblclick",zo="wheel",ci1="mousewheel",te8="touchstart",ee8="touchmove",ne9="touchend",Ao=[bo,xo,To,oi2,Jt3,ai2,Ue3,Mo,Ft2,Kt3,li2,Xe3,Co,hi2,Zt4,ui2,Qt3,Ro,zo,ci1,te8,ee8,ne9],Ye3=Ft2,Rt4=Zt4,Je2=Qt3;class Fe4 extends We2{constructor(e,n){super(e,n);this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Ao,this.pointermove=di1([Ft2,hi2],[li2,ui2],[Kt3,Zt4]),this.dragover=di1([ai2],[oi2],[Jt3]),this.pointerout=pi2([Kt3,Zt4]),this.dragleave=pi2([Jt3]);}initialize(e,n,i){return this._canvas=e&&Ve2(e,"canvas"),[Qt3,Xe3,Ue3,Ft2,Kt3,Jt3].forEach(r=>fi2(this,r)),super.initialize(e,n,i);}canvas(){return this._canvas;}context(){return this._canvas.getContext("2d");}DOMMouseScroll(e){this.fire(ci1,e);}pointerdown(e){this._down=this._active,this.fire(Ue3,e);}mousedown(e){this._down=this._active,this.fire(Xe3,e);}click(e){this._down===this._active&&(this.fire(Qt3,e),this._down=null);}touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(te8,e,!0);}touchmove(e){this.fire(ee8,e,!0);}touchend(e){this.fire(ne9,e,!0),this._touch=null;}fire(e,n,i){const r=i?this._touch:this._active,o=this._handlers[e];if(n.vegaType=e,e===Je2&&r&&r.href?this.handleHref(n,r,r.href):(e===Ye3||e===Rt4)&&this.handleTooltip(n,r,e!==Rt4),o)for(let s=0,l=o.length;s<l;++s)o[s].handler.call(this._obj,n,r);}on(e,n){const i=this.eventName(e),r=this._handlers,o=this._handlerIndex(r[i],e,n);return o<0&&(fi2(this,e),(r[i]||(r[i]=[])).push({type:e,handler:n})),this;}off(e,n){const i=this.eventName(e),r=this._handlers[i],o=this._handlerIndex(r,e,n);return o>=0&&r.splice(o,1),this;}pickEvent(e){const n=je4(e,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1]);}pick(e,n,i,r,o){const s=this.context(),l=O13[e.marktype];return l.pick.call(this,s,e,n,i,r,o);}}const Eo=t=>t===te8||t===ee8||t===ne9?[te8,ee8,ne9]:[t];function fi2(t,e){Eo(e).forEach(n=>Po(t,n));}function Po(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)));}function zt3(t,e,n){e.forEach(i=>t.fire(i,n));}function di1(t,e,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r?zt3(this,t,i):((!r||!r.exit)&&zt3(this,n,i),this._active=o,zt3(this,e,i),zt3(this,t,i));};}function pi2(t){return function(e){zt3(this,t,e),this._active=null;};}function So(){return typeof window!="undefined"&&window.devicePixelRatio||1;}function Lo(t,e,n,i,r,o){const s=typeof HTMLElement!="undefined"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),a=s?So():r;t.width=e*a,t.height=n*a;for(const h in o)l[h]=o[h];return s&&a!==1&&(t.style.width=e+"px",t.style.height=n+"px"),l.pixelRatio=a,l.setTransform(a,0,0,a,a*i[0],a*i[1]),t;}class ie6 extends Ct3{constructor(e){super(e);this._options={},this._redraw=!1,this._dirty=new E14,this._tempb=new E14;}initialize(e,n,i,r,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:n1(1,1,this._options.type),e&&this._canvas&&(S14(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(e,n,i,r,o);}resize(e,n,i,r){if(super.resize(e,n,i,r),this._canvas)Lo(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||b("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1]);}return this._redraw=!0,this;}canvas(){return this._canvas;}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null);}dirty(e){const n=this._tempb.clear().union(e.bounds);let i=e.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n);}_render(e,n){const i=this.context(),r=this._origin,o=this._width,s=this._height,l=this._dirty,a=mo(r,o,s);i.save();const h=this._redraw||l.empty()?(this._redraw=!1,a.expand(1)):Oo(i,a.intersect(l),r);return this.clear(-r[0],-r[1],o,s),this.draw(i,e,h,n),i.restore(),l.clear(),this;}draw(e,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const o=O13[n.marktype];n.clip&&As(e,n),o.draw.call(this,e,n,i,r),n.clip&&e.restore();}clear(e,n,i,r){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(e,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,n,i,r));}}const mo=(t,e,n)=>new E14().set(0,0,e,n).translate(-t[0],-t[1]);function Oo(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e;}class gi1 extends We2{constructor(e,n){super(e,n);const i=this;i._hrefHandler=Ke2(i,(r,o)=>{o&&o.href&&i.handleHref(r,o,o.href);}),i._tooltipHandler=Ke2(i,(r,o)=>{i.handleTooltip(r,o,r.type!==Rt4);});}initialize(e,n,i){let r=this._svg;return r&&(r.removeEventListener(Je2,this._hrefHandler),r.removeEventListener(Ye3,this._tooltipHandler),r.removeEventListener(Rt4,this._tooltipHandler)),this._svg=r=e&&Ve2(e,"svg"),r&&(r.addEventListener(Je2,this._hrefHandler),r.addEventListener(Ye3,this._tooltipHandler),r.addEventListener(Rt4,this._tooltipHandler)),super.initialize(e,n,i);}canvas(){return this._svg;}on(e,n){const i=this.eventName(e),r=this._handlers,o=this._handlerIndex(r[i],e,n);if(o<0){const s={type:e,handler:n,listener:Ke2(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener);}return this;}off(e,n){const i=this.eventName(e),r=this._handlers[i],o=this._handlerIndex(r,e,n);return o>=0&&(this._svg&&this._svg.removeEventListener(i,r[o].listener),r.splice(o,1)),this;}}const Ke2=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i);},vi1="aria-hidden",Ze1="aria-label",Qe4="role",tn5="aria-roledescription",yi2="graphics-object",en5="graphics-symbol",_i1=(t,e,n)=>({[Qe4]:t,[tn5]:e,[Ze1]:n||void 0}),$o=Xn(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),ki={axis:{desc:"axis",caption:No},legend:{desc:"legend",caption:Ho},"title-text":{desc:"title",caption:t=>`Title text '${Ti(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${Ti(t)}'`}},wi={ariaRole:Qe4,ariaRoleDescription:tn5,description:Ze1};function bi1(t,e){const n=e.aria===!1;if(t(vi1,n||void 0),n||e.description==null)for(const i in wi)t(wi[i],void 0);else{const i=e.mark.marktype;t(Ze1,e.description),t(Qe4,e.ariaRole||(i==="group"?yi2:en5)),t(tn5,e.ariaRoleDescription||`${i} mark`);}}function xi1(t){return t.aria===!1?{[vi1]:!0}:$o[t.role]?null:ki[t.role]?Do(t,ki[t.role]):Io(t);}function Io(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return _i1(n?yi2:en5,`${e} mark container`,t.description);}function Do(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return _i1(e.role||en5,e.desc,n.description||i(n));}catch(n){return null;}}function Ti(t){return p(t.text).join(" ");}function No(t){const e=t.datum,n=t.orient,i=e.title?Mi(t):null,r=t.context,o=r.scales[e.scale].value,s=r.dataflow.locale(),l=o.type,a=n==="left"||n==="right"?"Y":"X";return`${a}-axis`+(i?` titled '${i}'`:"")+` for a ${de4(l)?"discrete":l} scale with ${Jn2(s,o,t)}`;}function Ho(t){const e=t.datum,n=e.title?Mi(t):null,i=`${e.type||""} legend`.trim(),r=e.scales,o=Object.keys(r),s=t.context,l=s.scales[r[o[0]]].value,a=s.dataflow.locale();return Bo(i)+(n?` titled '${n}'`:"")+` for ${qo(o)} with ${Jn2(a,l,t)}`;}function Mi(t){try{return p(a(t.items).items[0].text).join(" ");}catch(e){return null;}}function qo(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+a(t);}function Bo(t){return t.length?t[0].toUpperCase()+t.slice(1):t;}const Ci=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Go=t=>Ci(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function nn5(){let t="",e="",n="";const i=[],r=()=>e=n="",o=a=>{e&&(t+=`${e}>${n}`,r()),i.push(a);},s=(a,h)=>(h!=null&&(e+=` ${a}="${Go(h)}"`),l),l={open(a){o(a),e="<"+a;for(var h=arguments.length,u=new Array(h>1?h-1:0),c=1;c<h;c++)u[c-1]=arguments[c];for(const f of u)for(const d in f)s(d,f[d]);return l;},close(){const a=i.pop();return e?t+=e+(n?`>${n}</${a}>`:"/>"):t+=`</${a}>`,r(),l;},attr:s,text:a=>(n+=Ci(a),l),toString:()=>t};return l;}const Ri=t=>zi(nn5(),t)+"";function zi(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let r=0;r<i;++r)t.attr(n[r].name,n[r].value);}if(e.hasChildNodes()){const n=e.childNodes;for(const i of n)i.nodeType===3?t.text(i.nodeValue):zi(t,i);}return t.close();}const re8={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},se5={blend:"mix-blend-mode"},Ai={fill:"none","stroke-miterlimit":10},At4=0,Ei="http://www.w3.org/2000/xmlns/",b8=bt3.xmlns;class rn6 extends Ct3{constructor(e){super(e);this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null;}initialize(e,n,i,r,o){return this._defs={},this._clearDefs(),e&&(this._svg=w10(e,0,"svg",b8),this._svg.setAttributeNS(Ei,"xmlns",b8),this._svg.setAttributeNS(Ei,"xmlns:xlink",bt3["xmlns:xlink"]),this._svg.setAttribute("version",bt3.version),this._svg.setAttribute("class","marks"),S14(e,1),this._root=w10(this._svg,At4,"g",b8),J11(this._root,Ai),S14(this._svg,0+1)),this.background(this._bgcolor),super.initialize(e,n,i,r,o);}background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),super.background(...arguments);}resize(e,n,i,r){return super.resize(e,n,i,r),this._svg&&(J11(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this;}canvas(){return this._svg;}svg(){const e=this._svg,n=this._bgcolor;if(!e)return null;let i;n&&(e.removeAttribute("style"),i=w10(e,At4,"rect",b8),J11(i,{width:this._width,height:this._height,fill:n}));const r=Ri(e);return n&&(e.removeChild(i),this._svg.style.setProperty("background-color",n)),r;}_render(e,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,n),S14(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this;}dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e));}isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID;}_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,o,s,l,a,h;for(l=0,a=e.length;l<a;++l){if(i=e[l],r=i.mark,r.marktype!==o&&(o=r.marktype,s=O13[o]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,Pi(i,n),r.items.forEach(u=>{u.dirty=n;})),r.zdirty)continue;if(i.exit){s.nested&&r.items.length?(h=r.items[0],h._svg&&this._update(s,h._svg,h)):i._svg&&(h=i._svg.parentNode,h&&h.removeChild(i._svg)),i._svg=null;continue;}if(i=s.nested?r.items[0]:i,i._update===n)continue;!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,Pi(i,n)):this._update(s,i._svg,i),i._update=n;}return!this._dirtyAll;}mark(e,n,i,r){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,l=O13[s],a=n.interactive===!1?"none":null,h=l.tag==="g",u=Si(n,e,i,"g",o);if(s!=="group"&&r!=null&&!r.includes(s))return S14(u,0),n._svg;u.setAttribute("class",si2(n));const c=xi1(n);for(const p in c)C13(u,p,c[p]);h||C13(u,"pointer-events",a),C13(u,"clip-path",n.clip?ke3(this,n,n.group):null);let f=null,d=0;const g=p=>{const v=this.isDirty(p),y=Si(p,u,f,l.tag,o);v&&(this._update(l,y,p),h&&Wo(this,y,p,r)),f=y,++d;};return l.nested?n.items.length&&g(n.items[0]):m4(n,g),S14(u,d),u;}_update(e,n,i){q16=n,M10=n.__values__,bi1(Et2,i),e.attr(Et2,i,this);const r=Xo[e.type];r&&r.call(this,e,n,i),q16&&this.style(q16,i);}style(e,n){if(n==null)return;for(const i in re8){let r=i==="font"?Tt4(n):n[i];if(r===M10[i])continue;const o=re8[i];r==null?e.removeAttribute(o):(de5(r)&&(r=wn7(r,this._defs.gradient,Li())),e.setAttribute(o,r+"")),M10[i]=r;}for(const i in se5)oe7(e,se5[i],n[i]);}defs(){const e=this._svg,n=this._defs;let i=n.el,r=0;for(const o in n.gradient)i||(n.el=i=w10(e,At4+1,"defs",b8)),r=Vo(i,n.gradient[o],r);for(const o in n.clipping)i||(n.el=i=w10(e,At4+1,"defs",b8)),r=jo(i,n.clipping[o],r);i&&(r===0?(e.removeChild(i),n.el=null):S14(i,r));}_clearDefs(){const e=this._defs;e.gradient={},e.clipping={};}}function Pi(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return;}function Vo(t,e,n){let i,r,o;if(e.gradient==="radial"){let s=w10(t,n++,"pattern",b8);J11(s,{id:St2+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=w10(s,0,"rect",b8),J11(s,{width:1,height:1,fill:`url(${Li()}#${e.id})`}),t=w10(t,n++,"radialGradient",b8),J11(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2});}else t=w10(t,n++,"linearGradient",b8),J11(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,r=e.stops.length;i<r;++i)o=w10(t,i,"stop",b8),o.setAttribute("offset",e.stops[i].offset),o.setAttribute("stop-color",e.stops[i].color);return S14(t,i),n;}function jo(t,e,n){let i;return t=w10(t,n,"clipPath",b8),t.setAttribute("id",e.id),e.path?(i=w10(t,0,"path",b8),i.setAttribute("d",e.path)):(i=w10(t,0,"rect",b8),J11(i,{x:0,y:0,width:e.width,height:e.height})),S14(t,1),n+1;}function Wo(t,e,n,i){e=e.lastChild.previousSibling;let r,o=0;m4(n,s=>{r=t.mark(e,s,r,i),++o;}),S14(e,1+o);}function Si(t,e,n,i,r){let o=t._svg,s;if(!o&&(s=e.ownerDocument,o=Y12(s,i,b8),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},i==="g"))){const l=Y12(s,"path",b8);o.appendChild(l),l.__data__=t;const a=Y12(s,"g",b8);o.appendChild(a),a.__data__=t;const h=Y12(s,"path",b8);o.appendChild(h),h.__data__=t,h.__values__={fill:"default"};}return(o.ownerSVGElement!==r||Uo(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o;}function Uo(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e;}let q16=null,M10=null;const Xo={group(t,e,n){const i=q16=e.childNodes[2];M10=i.__values__,t.foreground(Et2,n,this),M10=e.__values__,q16=e.childNodes[1],t.content(Et2,n,this);const r=q16=e.childNodes[0];t.background(Et2,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==M10.events&&(C13(i,"pointer-events",o),C13(r,"pointer-events",o),M10.events=o),n.strokeForeground&&n.stroke){const s=n.fill;C13(i,"display",null),this.style(r,n),C13(r,"stroke",null),s&&(n.fill=null),M10=i.__values__,this.style(i,n),s&&(n.fill=s),q16=null;}else C13(i,"display","none");},image(t,e,n){n.smooth===!1?(oe7(e,"image-rendering","optimizeSpeed"),oe7(e,"image-rendering","pixelated")):oe7(e,"image-rendering",null);},text(t,e,n){const i=xt4(n);let r,o,s,l;w1(i)?(o=i.map(a=>X13(n,a)),r=o.join(`
`),r!==M10.text&&(S14(e,0),s=e.ownerDocument,l=U14(n),o.forEach((a,h)=>{const u=Y12(s,"tspan",b8);u.__data__=n,u.textContent=a,h&&(u.setAttribute("x",0),u.setAttribute("dy",l)),e.appendChild(u);}),M10.text=r)):(o=X13(n,i),o!==M10.text&&(e.textContent=o,M10.text=o)),C13(e,"font-family",Tt4(n)),C13(e,"font-size",N14(n)+"px"),C13(e,"font-style",n.fontStyle),C13(e,"font-variant",n.fontVariant),C13(e,"font-weight",n.fontWeight);}};function Et2(t,e,n){if(e===M10[t])return;n?Yo(q16,t,e,n):C13(q16,t,e),M10[t]=e;}function oe7(t,e,n){n!==M10[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),M10[e]=n);}function J11(t,e){for(const n in e)C13(t,n,e[n]);}function C13(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e);}function Yo(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e);}function Li(){let t;return typeof window=="undefined"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href;}class mi1 extends Ct3{constructor(e){super(e);this._text=null,this._defs={gradient:{},clipping:{}};}svg(){return this._text;}_render(e){const n=nn5();n.open("svg",J1({},bt3,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",Ai,{transform:"translate("+this._origin+")"}),this.mark(n,e),n.close(),this.defs(n),this._text=n.close()+"",this;}mark(e,n){const i=O13[n.marktype],r=i.tag,o=[bi1,i.attr];e.open("g",{class:si2(n),"clip-path":n.clip?ke3(this,n,n.group):null},xi1(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=l=>{const a=this.href(l);if(a&&e.open("a",a),e.open(r,this.attr(n,l,o,r!=="g"?r:null)),r==="text"){const h=xt4(l);if(w1(h)){const u={x:0,dy:U14(l)};for(let c=0;c<h.length;++c)e.open("tspan",c?u:null).text(X13(l,h[c])).close();}else e.text(X13(l,h));}else if(r==="g"){const h=l.strokeForeground,u=l.fill,c=l.stroke;h&&c&&(l.stroke=null),e.open("path",this.attr(n,l,i.background,"bgrect")).close(),e.open("g",this.attr(n,l,i.content)),m4(l,f=>this.mark(e,f)),e.close(),h&&c?(u&&(l.fill=null),l.stroke=c,e.open("path",this.attr(n,l,i.foreground,"bgrect")).close(),u&&(l.fill=u)):e.open("path",this.attr(n,l,i.foreground,"bgfore")).close();}e.close(),a&&e.close();};return i.nested?n.items&&n.items.length&&s(n.items[0]):m4(n,s),e.close();}href(e){const n=e.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r;});}return null;}attr(e,n,i,r){const o={},s=(l,a,h,u)=>{o[u||l]=a;};return Array.isArray(i)?i.forEach(l=>l(s,n,this)):i(s,n,this),r&&Jo(o,n,e,r,this._defs),o;}defs(e){const n=this._defs.gradient,i=this._defs.clipping,r=Object.keys(n).length+Object.keys(i).length;if(r===0)return;e.open("defs");for(const o in n){const s=n[o],l=s.stops;s.gradient==="radial"?(e.open("pattern",{id:St2+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),e.close(),e.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<l.length;++a)e.open("stop",{offset:l[a].offset,"stop-color":l[a].color}).close();e.close();}for(const o in i){const s=i[o];e.open("clipPath",{id:o}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close();}e.close();}}function Jo(t,e,n,i,r){let o;if(e==null)return t;if(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null))return t;i==="image"&&e.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(t["font-family"]=Tt4(e),t["font-size"]=N14(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const s in re8){let l=e[s];const a=re8[s];l==="transparent"&&(a==="fill"||a==="stroke")||l!=null&&(de5(l)&&(l=wn7(l,r.gradient,"")),t[a]=l);}for(const s in se5){const l=e[s];l!=null&&(o=o||[],o.push(`${se5[s]}: ${l};`));}return o&&(t.style=o.join(" ")),t;}const $10={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Fo(t){$10.svgMarkTypes=t.svgMarkTypes??["text"],$10.svgOnTop=t.svgOnTop??!0,$10.debug=t.debug??!1;}class sn4 extends Ct3{constructor(e){super(e);this._svgRenderer=new rn6(e),this._canvasRenderer=new ie6(e);}initialize(e,n,i,r,o){this._root_el=w10(e,0,"div");const s=w10(this._root_el,0,"div"),l=w10(this._root_el,1,"div");return this._root_el.style.position="relative",$10.debug||(s.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=$10.svgOnTop?l:s,this._canvasEl=$10.svgOnTop?s:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,o),this._svgRenderer.initialize(this._svgEl,n,i,r,o),super.initialize(e,n,i,r,o);}dirty(e){return $10.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this;}_render(e,n){const i=n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"],r=i.filter(o=>!$10.svgMarkTypes.includes(o));this._svgRenderer.render(e,$10.svgMarkTypes),this._canvasRenderer.render(e,r);}resize(e,n,i,r){return super.resize(e,n,i,r),this._svgRenderer.resize(e,n,i,r),this._canvasRenderer.resize(e,n,i,r),this;}background(e){return $10.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this;}}class Oi extends Fe4{constructor(e,n){super(e,n);}initialize(e,n,i){const r=w10(w10(e,0,"div"),$10.svgOnTop?0:1,"div");return super.initialize(r,n,i);}}const $i="canvas",Ii="hybrid",Di="png",Ni="svg",Hi="none",Ko={Canvas:$i,PNG:Di,SVG:Ni,Hybrid:Ii,None:Hi},st5={};st5[$i]=st5[Di]={renderer:ie6,headless:ie6,handler:Fe4},st5[Ni]={renderer:rn6,headless:mi1,handler:gi1},st5[Ii]={renderer:sn4,headless:sn4,handler:Oi},st5[Hi]={};function Zo(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(st5[t]=e,this):st5[t];}function Qo(t,e,n){const i=[],r=new E14().union(e),o=t.marktype;return o?qi(t,r,n,i):o==="group"?Bi(t,r,n,i):b("Intersect scene must be mark node or group item.");}function qi(t,e,n,i){if(ta(t,e,n)){const r=t.items,o=t.marktype,s=r.length;let l=0;if(o==="group")for(;l<s;++l)Bi(r[l],e,n,i);else for(const a=O13[o].isect;l<s;++l){const h=r[l];Gi(h,e,a)&&i.push(h);}}return i;}function ta(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)));}function Bi(t,e,n,i){n&&n(t.mark)&&Gi(t,e,O13.group.isect)&&i.push(t);const r=t.items,o=r&&r.length;if(o){const s=t.x||0,l=t.y||0;e.translate(-s,-l);for(let a=0;a<o;++a)qi(r[a],e,n,i);e.translate(s,l);}return i;}function Gi(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e);}const on5=new E14;function ea(t){const e=t.clip;if(O1(e))e(_t2(on5.clear()));else if(e)on5.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(on5);}function an5(t,e,n){return t===e?!0:n==="path"?Vi(t,e):t instanceof Date&&e instanceof Date?+t===+e:V(t)&&V(e)?Math.abs(t-e)<=1e-9:!t||!e||!M1(t)&&!M1(e)?t==e:ia(t,e);}function Vi(t,e){return an5(dt4(t),dt4(e));}function ia(t,e){var n=Object.keys(t),i=Object.keys(e),r,o;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(r=n[o],!an5(t[r],e[r],r))return!1;return typeof t===typeof e;}function ra(){Pn4(),wr1();}const U15="top",v11="left",S15="right",P14="bottom",Ut3="top-left",qt5="top-right",Wt4="bottom-left",Nt4="bottom-right",Z14="start",_14="middle",A14="end",Vt4="x",Yt5="y",Y13="group",tt4="axis",nt4="title",Xt5="frame",Jt4="scope",ot5="legend",ut5="row-header",ft5="row-footer",ht4="row-title",mt3="column-header",yt2="column-footer",bt4="column-title",Qt4="padding",$t4="symbol",xt5="fit",gt3="fit-x",kt4="fit-y",Kt4="pad",et6="none",X14="all",at5="each",rt5="flush",B13="column",G15="row";function Mt4(n){dt2.call(this,null,n);}Pn(Mt4,dt2,{transform(n,t){const o=t.dataflow,r=n.mark,a=r.marktype,i=O13[a],s=i.bound;let c=r.bounds,l;if(i.nested)r.items.length&&o.dirty(r.items[0]),c=J12(r,s),r.items.forEach(u=>{u.bounds.clear().union(c);});else if(a===Y13||n.modified()){t.visit(t.MOD,u=>o.dirty(u)),c.clear(),r.items.forEach(u=>c.union(J12(u,s)));switch(r.role){case tt4:case ot5:case nt4:t.reflow();}}else l=t.changed(t.REM),t.visit(t.ADD,u=>{c.union(J12(u,s));}),t.visit(t.MOD,u=>{l=l||c.alignsWith(u.bounds),o.dirty(u),c.union(J12(u,s));}),l&&(c.clear(),r.items.forEach(u=>c.union(u.bounds)));return ea(r),t.modifies("bounds");}});function J12(n,t,o){return t(n.bounds.clear(),n,o);}const wt3=":vega_identifier:";function it5(n){dt2.call(this,0,n);}it5.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Pn(it5,dt2,{transform(n,t){const o=Zt5(t.dataflow),r=n.as;let a=o.value;return t.visit(t.ADD,i=>i[r]=i[r]||++a),o.set(this.value=a),t;}});function Zt5(n){return n._signals[wt3]||(n._signals[wt3]=n.add(0));}function pt4(n){dt2.call(this,null,n);}Pn(pt4,dt2,{transform(n,t){let o=this.value;o||(o=t.dataflow.scenegraph().mark(n.markdef,_t3(n),n.index),o.group.context=n.context,n.context.group||(n.context.group=o.group),o.source=this.source,o.clip=n.clip,o.interactive=n.interactive,this.value=o);const r=o.marktype===Y13?be4:we5;return t.visit(t.ADD,a=>r.call(a,o)),(n.modified("clip")||n.modified("interactive"))&&(o.clip=n.clip,o.interactive=!!n.interactive,o.zdirty=!0,t.reflow()),o.items=t.source,t;}});function _t3(n){const t=n.groups,o=n.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&o?t.lookup(o):null;}function Et3(n){dt2.call(this,null,n);}const zt4={parity:n=>n.filter((t,o)=>o%2?t.opacity=0:1),greedy:(n,t)=>{let o;return n.filter((r,a)=>!a||!Rt5(o.bounds,r.bounds,t)?(o=r,1):r.opacity=0);}},Rt5=(n,t,o)=>o>Math.max(t.x1-n.x2,n.x1-t.x2,t.y1-n.y2,n.y1-t.y2),Lt5=(n,t)=>{for(var o=1,r=n.length,a=n[0].bounds,i;o<r;a=i,++o)if(Rt5(a,i=n[o].bounds,t))return!0;},tn6=n=>{const t=n.bounds;return t.width()>1&&t.height()>1;},nn6=(n,t,o)=>{var r=n.range(),a=new E14;return t===U15||t===P14?a.set(r[0],-Infinity,r[1],Infinity):a.set(-Infinity,r[0],Infinity,r[1]),a.expand(o||1),i=>a.encloses(i.bounds);},Tt5=n=>(n.forEach(t=>t.opacity=1),n),At5=(n,t)=>n.reflow(t.modified()).modifies("opacity");Pn(Et3,dt2,{transform(n,t){const o=zt4[n.method]||zt4.parity,r=n.separation||0;let a1=t.materialize(t.SOURCE).source,i,s;if(!a1||!a1.length)return;if(!n.method)return n.modified("method")&&(Tt5(a1),t=At5(t,n)),t;if(a1=a1.filter(tn6),!a1.length)return;if(n.sort&&(a1=a1.slice().sort(n.sort)),i=Tt5(a1),t=At5(t,n),i.length>=3&&Lt5(i,r)){do i=o(i,r);while(i.length>=3&&Lt5(i,r))i.length<3&&!a(a1).opacity&&(i.length>1&&(a(i).opacity=0),a(a1).opacity=1);}n.boundScale&&n.boundTolerance>=0&&(s=nn6(n.boundScale,n.boundOrient,+n.boundTolerance),a1.forEach(l=>{s(l)||(l.opacity=0);}));const c=i[0].mark.bounds.clear();return a1.forEach(l=>{l.opacity&&c.union(l.bounds);}),t;}});function It3(n){dt2.call(this,null,n);}Pn(It3,dt2,{transform(n,t){const o=t.dataflow;if(t.visit(t.ALL,r=>o.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0);}}});const T9=new E14;function q17(n,t,o){return n[t]===o?0:(n[t]=o,1);}function on6(n){var t=n.items[0].orient;return t===v11||t===S15;}function en6(n){let t=+n.grid;return[n.ticks?t++:-1,n.labels?t++:-1,t+ +n.domain];}function an6(n,t,o,r){var a=t.items[0],i=a.datum,s=a.translate!=null?a.translate:.5,c=a.orient,l=en6(i),u=a.range,d=a.offset,m=a.position,h=a.minExtent,x=a.maxExtent,b=i.title&&a.items[l[2]].items[0],g=a.titlePadding,f=a.bounds,y=b&&oo(b),k=0,M=0,R,E;T9.clear().union(f),f.clear(),(R=l[0])>-1&&f.union(a.items[R].bounds),(R=l[1])>-1&&f.union(a.items[R].bounds);switch(c){case U15:k=m||0,M=-d,E=Math.max(h,Math.min(x,-f.y1)),f.add(0,-E).add(u,0),b&&Q12(n,b,E,g,y,0,-1,f);break;case v11:k=-d,M=m||0,E=Math.max(h,Math.min(x,-f.x1)),f.add(-E,0).add(0,u),b&&Q12(n,b,E,g,y,1,-1,f);break;case S15:k=o+d,M=m||0,E=Math.max(h,Math.min(x,f.x2)),f.add(0,0).add(E,u),b&&Q12(n,b,E,g,y,1,1,f);break;case P14:k=m||0,M=r+d,E=Math.max(h,Math.min(x,f.y2)),f.add(0,0).add(u,E),b&&Q12(n,b,E,g,0,0,1,f);break;default:k=a.x,M=a.y;}return tt3(f.translate(k,M),a),q17(a,"x",k+s)|q17(a,"y",M+s)&&(a.bounds=T9,n.dirty(a),a.bounds=f,n.dirty(a)),a.mark.bounds.clear().union(f);}function Q12(n,t,o,r,a,i,s,c){const l=t.bounds;if(t.auto){const u=s*(o+a+r);let d=0,m=0;n.dirty(t),i?d=(t.x||0)-(t.x=u):m=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-d,-m)),n.dirty(t);}c.union(l);}const Ft3=(n,t)=>Math.floor(Math.min(n,t)),Ot3=(n,t)=>Math.ceil(Math.max(n,t));function rn7(n){var t=n.items,o=t.length,r=0,a,i;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<o;++r)if(a=t[r],i=a.items,a.marktype===Y13)switch(a.role){case tt4:case ot5:case nt4:break;case ut5:s.rowheaders.push(...i);break;case ft5:s.rowfooters.push(...i);break;case mt3:s.colheaders.push(...i);break;case yt2:s.colfooters.push(...i);break;case ht4:s.rowtitle=i[0];break;case bt4:s.coltitle=i[0];break;default:s.marks.push(...i);}return s;}function sn5(n){return new E14().set(0,0,n.width||0,n.height||0);}function cn5(n){const t=n.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(n.x||0),-(n.y||0));}function w11(n,t,o){const r=M1(n)?n[t]:n;return r??(o!==void 0?o:0);}function Ct4(n){return n<0?Math.ceil(-n):0;}function Dt3(n,t,o){var r=!o.nodirty,a=o.bounds===rt5?sn5:cn5,i=T9.set(0,0,0,0),s=w11(o.align,B13),c=w11(o.align,G15),l=w11(o.padding,B13),u=w11(o.padding,G15),d=o.columns||t.length,m=d<=0?1:Math.ceil(t.length/d),h=t.length,x=Array(h),b=Array(d),g=0,f=Array(h),y=Array(m),k=0,M=Array(h),R=Array(h),E=Array(h),I,e,p,z,j,O,st,ct,F,C,L;for(e=0;e<d;++e)b[e]=0;for(e=0;e<m;++e)y[e]=0;for(e=0;e<h;++e)O=t[e],j=E[e]=a(O),O.x=O.x||0,M[e]=0,O.y=O.y||0,R[e]=0,p=e%d,z=~~(e/d),g=Math.max(g,st=Math.ceil(j.x2)),k=Math.max(k,ct=Math.ceil(j.y2)),b[p]=Math.max(b[p],st),y[z]=Math.max(y[z],ct),x[e]=l+Ct4(j.x1),f[e]=u+Ct4(j.y1),r&&n.dirty(t[e]);for(e=0;e<h;++e)e%d===0&&(x[e]=0),e<d&&(f[e]=0);if(s===at5)for(p=1;p<d;++p){for(L=0,e=p;e<h;e+=d)L<x[e]&&(L=x[e]);for(e=p;e<h;e+=d)x[e]=L+b[p-1];}else if(s===X14){for(L=0,e=0;e<h;++e)e%d&&L<x[e]&&(L=x[e]);for(e=0;e<h;++e)e%d&&(x[e]=L+g);}else for(s=!1,p=1;p<d;++p)for(e=p;e<h;e+=d)x[e]+=b[p-1];if(c===at5)for(z=1;z<m;++z){for(L=0,e=z*d,I=e+d;e<I;++e)L<f[e]&&(L=f[e]);for(e=z*d;e<I;++e)f[e]=L+y[z-1];}else if(c===X14){for(L=0,e=d;e<h;++e)L<f[e]&&(L=f[e]);for(e=d;e<h;++e)f[e]=L+k;}else for(c=!1,z=1;z<m;++z)for(e=z*d,I=e+d;e<I;++e)f[e]+=y[z-1];for(F=0,e=0;e<h;++e)F=x[e]+(e%d?F:0),M[e]+=F-t[e].x;for(p=0;p<d;++p)for(C=0,e=p;e<h;e+=d)C+=f[e],R[e]+=C-t[e].y;if(s&&w11(o.center,B13)&&m>1)for(e=0;e<h;++e)j=s===X14?g:b[e%d],F=j-E[e].x2-t[e].x-M[e],F>0&&(M[e]+=F/2);if(c&&w11(o.center,G15)&&d!==1)for(e=0;e<h;++e)j=c===X14?k:y[~~(e/d)],C=j-E[e].y2-t[e].y-R[e],C>0&&(R[e]+=C/2);for(e=0;e<h;++e)i.union(E[e].translate(M[e],R[e]));F=w11(o.anchor,Vt4),C=w11(o.anchor,Yt5);switch(w11(o.anchor,B13)){case A14:F-=i.width();break;case _14:F-=i.width()/2;}switch(w11(o.anchor,G15)){case A14:C-=i.height();break;case _14:C-=i.height()/2;}for(F=Math.round(F),C=Math.round(C),i.clear(),e=0;e<h;++e)t[e].mark.bounds.clear();for(e=0;e<h;++e)O=t[e],O.x+=M[e]+=F,O.y+=R[e]+=C,i.union(O.mark.bounds.union(O.bounds.translate(M[e],R[e]))),r&&n.dirty(O);return i;}function dn5(n,t,o){var r=rn7(t),a=r.marks,i=o.bounds===rt5?ln6:un6,s=o.offset,c=o.columns||a.length,l=c<=0?1:Math.ceil(a.length/c),u=l*c,d,m,h,x,b,g,f;const y=Dt3(n,a,o);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=w11(o.headerBand,G15,null),d=$11(n,r.rowheaders,a,c,l,-w11(s,"rowHeader"),Ft3,0,i,"x1",0,c,1,g)),r.colheaders&&(g=w11(o.headerBand,B13,null),m=$11(n,r.colheaders,a,c,c,-w11(s,"columnHeader"),Ft3,1,i,"y1",0,1,c,g)),r.rowfooters&&(g=w11(o.footerBand,G15,null),h=$11(n,r.rowfooters,a,c,l,w11(s,"rowFooter"),Ot3,0,i,"x2",c-1,c,1,g)),r.colfooters&&(g=w11(o.footerBand,B13,null),x=$11(n,r.colfooters,a,c,c,w11(s,"columnFooter"),Ot3,1,i,"y2",u-c,1,c,g)),r.rowtitle&&(b=w11(o.titleAnchor,G15),f=w11(s,"rowTitle"),f=b===A14?h+f:d-f,g=w11(o.titleBand,G15,.5),vt3(n,r.rowtitle,f,0,y,g)),r.coltitle&&(b=w11(o.titleAnchor,B13),f=w11(s,"columnTitle"),f=b===A14?x+f:m-f,g=w11(o.titleBand,B13,.5),vt3(n,r.coltitle,f,1,y,g));}function ln6(n,t){return t==="x1"?n.x||0:t==="y1"?n.y||0:t==="x2"?(n.x||0)+(n.width||0):t==="y2"?(n.y||0)+(n.height||0):void 0;}function un6(n,t){return n.bounds[t];}function $11(n,t,o,r,a,i,s,c,l,u,d,m,h,x){var b=o.length,g=0,f=0,y,k,M,R,E,I,e,p,z;if(!b)return g;for(y=d;y<b;y+=m)o[y]&&(g=s(g,l(o[y],u)));if(!t.length)return g;for(t.length>a&&(n.warn("Grid headers exceed limit: "+a),t=t.slice(0,a)),g+=i,k=0,R=t.length;k<R;++k)n.dirty(t[k]),t[k].mark.bounds.clear();for(y=d,k=0,R=t.length;k<R;++k,y+=m){for(I=t[k],E=I.mark.bounds,M=y;M>=0&&(e=o[M])==null;M-=h);c?(p=x==null?e.x:Math.round(e.bounds.x1+x*e.bounds.width()),z=g):(p=g,z=x==null?e.y:Math.round(e.bounds.y1+x*e.bounds.height())),E.union(I.bounds.translate(p-(I.x||0),z-(I.y||0))),I.x=p,I.y=z,n.dirty(I),f=s(f,E[u]);}return f;}function vt3(n,t,o,r,a,i){if(!t)return;n.dirty(t);var s=o,c=o;r?s=Math.round(a.x1+i*a.width()):c=Math.round(a.y1+i*a.height()),t.bounds.translate(s-(t.x||0),c-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=c,n.dirty(t);}function fn5(n,t){const o=n[t]||{};return(r,a)=>o[r]!=null?o[r]:n[r]!=null?n[r]:a;}function hn5(n,t){let o=-Infinity;return n.forEach(r=>{r.offset!=null&&(o=Math.max(o,r.offset));}),o>-Infinity?o:t;}function mn5(n,t,o,r,a,i,s){const c=fn5(o,t),l=hn5(n,c("offset",0)),u=c("anchor",Z14),d=u===A14?1:u===_14?.5:0,m={align:at5,bounds:c("bounds",rt5),columns:c("direction")==="vertical"?1:n.length,padding:c("margin",8),center:c("center"),nodirty:!0};switch(t){case v11:m.anchor={x:Math.floor(r.x1)-l,column:A14,y:d*(s||r.height()+2*r.y1),row:u};break;case S15:m.anchor={x:Math.ceil(r.x2)+l,y:d*(s||r.height()+2*r.y1),row:u};break;case U15:m.anchor={y:Math.floor(a.y1)-l,row:A14,x:d*(i||a.width()+2*a.x1),column:u};break;case P14:m.anchor={y:Math.ceil(a.y2)+l,x:d*(i||a.width()+2*a.x1),column:u};break;case Ut3:m.anchor={x:l,y:l};break;case qt5:m.anchor={x:i-l,y:l,column:A14};break;case Wt4:m.anchor={x:l,y:s-l,row:A14};break;case Nt4:m.anchor={x:i-l,y:s-l,column:A14,row:A14};break;}return m;}function yn5(n,t){var o=t.items[0],r=o.datum,a=o.orient,i=o.bounds,s=o.x,c=o.y,l,u;return o._bounds?o._bounds.clear().union(i):o._bounds=i.clone(),i.clear(),xn6(n,o,o.items[0].items[0]),i=bn3(o,i),l=2*o.padding,u=2*o.padding,i.empty()||(l=Math.ceil(i.width()+l),u=Math.ceil(i.height()+u)),r.type===$t4&&gn5(o.items[0].items[0].items[0].items),a!==et6&&(o.x=s=0,o.y=c=0),o.width=l,o.height=u,tt3(i.set(s,c,s+l,c+u),o),o.mark.bounds.clear().union(i),o;}function bn3(n,t){return n.items.forEach(o=>t.union(o.bounds)),t.x1=n.padding,t.y1=n.padding,t;}function xn6(n,t,o){var r=t.padding,a=r-o.x,i=r-o.y;if(!t.datum.title)(a||i)&&N15(n,o,a,i);else{var s=t.items[1].items[0],c=s.anchor,l=t.titlePadding||0,u=r-s.x,d=r-s.y;switch(s.orient){case v11:a+=Math.ceil(s.bounds.width())+l;break;case S15:case P14:break;default:i+=s.bounds.height()+l;}(a||i)&&N15(n,o,a,i);switch(s.orient){case v11:d+=W13(t,o,s,c,1,1);break;case S15:u+=W13(t,o,s,A14,0,0)+l,d+=W13(t,o,s,c,1,1);break;case P14:u+=W13(t,o,s,c,0,0),d+=W13(t,o,s,A14,-1,0,1)+l;break;default:u+=W13(t,o,s,c,0,0);}(u||d)&&N15(n,s,u,d),(u=Math.round(s.bounds.x1-r))<0&&(N15(n,o,-u,0),N15(n,s,-u,0));}}function W13(n,t,o,r,a,i,s){const c=n.datum.type!=="symbol",l=o.datum.vgrad,u=c&&(i||!l)&&!s?t.items[0]:t,d=u.bounds[a?"y2":"x2"]-n.padding,m=l&&i?d:0,h=l&&i?0:d,x=a<=0?0:oo(o);return Math.round(r===Z14?m:r===A14?h-x:.5*(d-x));}function N15(n,t,o,r){t.x+=o,t.y+=r,t.bounds.translate(o,r),t.mark.bounds.translate(o,r),n.dirty(t);}function gn5(n){const t=n.reduce((o,r)=>(o[r.column]=Math.max(r.bounds.x2-r.x,o[r.column]||0),o),{});n.forEach(o=>{o.width=t[o.column],o.height=o.bounds.y2-o.y;});}function kn3(n,t,o,r,a){var i=t.items[0],s=i.frame,c=i.orient,l=i.anchor,u=i.offset,d=i.padding,m=i.items[0].items[0],h=i.items[1]&&i.items[1].items[0],x=c===v11||c===S15?r:o,b=0,g=0,f=0,y=0,k=0,M;if(s!==Y13?c===v11?(b=a.y2,x=a.y1):c===S15?(b=a.y1,x=a.y2):(b=a.x1,x=a.x2):c===v11&&(b=r,x=0),M=l===Z14?b:l===A14?x:(b+x)/2,h&&h.text){switch(c){case U15:case P14:k=m.bounds.height()+d;break;case v11:y=m.bounds.width()+d;break;case S15:y=-m.bounds.width()-d;break;}T9.clear().union(h.bounds),T9.translate(y-(h.x||0),k-(h.y||0)),q17(h,"x",y)|q17(h,"y",k)&&(n.dirty(h),h.bounds.clear().union(T9),h.mark.bounds.clear().union(T9),n.dirty(h)),T9.clear().union(h.bounds);}else T9.clear();T9.union(m.bounds);switch(c){case U15:g=M,f=a.y1-T9.height()-u;break;case v11:g=a.x1-T9.width()-u,f=M;break;case S15:g=a.x2+T9.width()+u,f=M;break;case P14:g=M,f=a.y2+u;break;default:g=i.x,f=i.y;}return q17(i,"x",g)|q17(i,"y",f)&&(T9.translate(g,f),n.dirty(i),i.bounds.clear().union(T9),t.bounds.clear().union(T9),n.dirty(i)),i.bounds;}function St3(n){dt2.call(this,null,n);}Pn(St3,dt2,{transform(n,t){const o=t.dataflow;return n.mark.items.forEach(r=>{n.layout&&dn5(o,r,n.layout),wn8(o,r,n);}),Mn6(n.mark.group)?t.reflow():t;}});function Mn6(n){return n&&n.mark.role!=="legend-entry";}function wn8(n,t,o){var r=t.items,a=Math.max(0,t.width||0),i=Math.max(0,t.height||0),s=new E14().set(0,0,a,i),c=s.clone(),l=s.clone(),u=[],d,m,h,x,b,g;for(b=0,g=r.length;b<g;++b){m=r[b];switch(m.role){case tt4:x=on6(m)?c:l,x.union(an6(n,m,a,i));break;case nt4:d=m;break;case ot5:u.push(yn5(n,m));break;case Xt5:case Jt4:case ut5:case ft5:case ht4:case mt3:case yt2:case bt4:c.union(m.bounds),l.union(m.bounds);break;default:s.union(m.bounds);}}if(u.length){const f={};u.forEach(y=>{h=y.orient||S15,h!==et6&&(f[h]||(f[h]=[])).push(y);});for(const y in f){const k=f[y];Dt3(n,k,mn5(k,y,o.legends,c,l,a,i));}u.forEach(y=>{const k=y.bounds;if(k.equals(y._bounds)||(y.bounds=y._bounds,n.dirty(y),y.bounds=k,n.dirty(y)),o.autosize&&(o.autosize.type===xt5||o.autosize.type===gt3||o.autosize.type===kt4))switch(y.orient){case v11:case S15:s.add(k.x1,0).add(k.x2,0);break;case U15:case P14:s.add(0,k.y1).add(0,k.y2);}else s.union(k);});}s.union(c).union(l),d&&s.union(kn3(n,d,a,i,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),pn5(n,t,s,o);}function pn5(n,t,o,r){const a=r.autosize||{},i=a.type;if(n._autosize<1||!i)return;let s=n._width,c=n._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-o.x1)),d=Math.max(0,t.height||0),m=Math.max(0,Math.ceil(-o.y1));const h=Math.max(0,Math.ceil(o.x2-l)),x=Math.max(0,Math.ceil(o.y2-d));if(a.contains===Qt4){const b=n.padding();s-=b.left+b.right,c-=b.top+b.bottom;}i===et6?(u=0,m=0,l=s,d=c):i===xt5?(l=Math.max(0,s-u-h),d=Math.max(0,c-m-x)):i===gt3?(l=Math.max(0,s-u-h),c=d+m+x):i===kt4?(s=l+u+h,d=Math.max(0,c-m-x)):i===Kt4&&(s=l+u+h,c=d+m+x),n._resizeView(s,c,l,d,[u,m],a.resize);}const mod2=function(){return{bound:Mt4,identifier:it5,mark:pt4,overlap:Et3,render:It3,viewlayout:St3,default:null};}();function W14(e){dt2.call(this,null,e);}Pn(W14,dt2,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,l=e.count==null?e.values?e.values.length:10:e.count,r=Un2(o,l,e.minstep),s=e.format||ve3(n,o,r,e.formatSpecifier,e.formatType,!!e.values),d=e.values?ye4(o,e.values,r):E13(o,r);return i&&(a.rem=i),i=d.map((f,m)=>W7({index:m/(d.length-1||1),value:f,label:s(f)})),e.extra&&i.length&&i.push(W7({index:-1,extra:{value:i[0].value},label:""})),a.source=i,a.add=i,this.value=i,a;}});function Z15(e){dt2.call(this,null,e);}function He3(){return W7({});}function We3(e){const t=Sn().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t;}Pn(Z15,dt2,{transform(e,t){var n=t.dataflow,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||He3,o=e.key||d4,l=this.value;return w1(a.encode)&&(a.encode=null),l&&(e.modified("key")||t.modified(o))&&b("DataJoin does not support modified key function or fields."),l||(t=t.addAll(),this.value=l=We3(o)),t.visit(t.ADD,r=>{const s=o(r);let d=l.get(s);d?d.exit?(l.empty--,a.add.push(d)):a.mod.push(d):(d=i(r),l.set(s,d),a.add.push(d)),d.datum=r,d.exit=!1;}),t.visit(t.MOD,r=>{const s=o(r),d=l.get(s);d&&(d.datum=r,a.mod.push(d));}),t.visit(t.REM,r=>{const s=o(r),d=l.get(s);r===d.datum&&!d.exit&&(a.rem.push(d),d.exit=!0,++l.empty);}),t.changed(t.ADD_MOD)&&a.modifies("datum"),(t.clean()||e.clean&&l.empty>n.cleanThreshold)&&n.runAfter(l.clean),a;}});function J13(e){dt2.call(this,null,e);}Pn(J13,dt2,{transform(e,t){var n=t.fork(t.ADD_REM),a=e.mod||!1,i=e.encoders,o=t.encode;if(w1(o))if(n.changed()||o.every(m=>i[m]))o=o[0],n.encode=null;else return t.StopPropagation;var l=o==="enter",r=i.update||nn,s=i.enter||nn,d=i.exit||nn,f=(o&&!l?i[o]:r)||nn;if(t.changed(t.ADD)&&(t.visit(t.ADD,m=>{s(m,e),r(m,e);}),n.modifies(s.output),n.modifies(r.output),f!==nn&&f!==r&&(t.visit(t.ADD,m=>{f(m,e);}),n.modifies(f.output))),t.changed(t.REM)&&d!==nn&&(t.visit(t.REM,m=>{d(m,e);}),n.modifies(d.output)),l||f!==nn){const m=t.MOD|(e.modified()?t.REFLOW:0);l?(t.visit(m,u=>{const g=s(u,e)||a;(f(u,e)||g)&&n.mod.push(u);}),n.mod.length&&n.modifies(s.output)):t.visit(m,u=>{(f(u,e)||a)&&n.mod.push(u);}),n.mod.length&&n.modifies(f.output);}return n.changed()?n:t.StopPropagation;}});function K13(e){dt2.call(this,[],e);}Pn(K13,dt2,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),a1=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||pe4,l=e.scale,r=+e.limit,s=Un2(l,e.count==null?5:e.count,e.minstep),d=!!e.values||o===pe4,f=e.format||$e3(n,l,s,o,e.formatSpecifier,e.formatType,d),m=e.values||Se3(l,s),u,g,c,M,k;return i&&(a1.rem=i),o===pe4?(r&&m.length>r?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=m.slice(0,r-1),k=!0):i=m,O1(c=e.size)?(!e.values&&l(i[0])===0&&(i=i.slice(1)),M=i.reduce((p,v)=>Math.max(p,c(v,e)),0)):c=On(M=c||8),i=i.map((p,v)=>W7({index:v,label:f(p,v,i),value:p,offset:M,size:c(p,e)})),k&&(k=m[i.length],i.push(W7({index:i.length,label:`\u2026${m.length-i.length} entries`,value:k,offset:M,size:c(k,e)})))):o===Ln1?(u=l.domain(),g=zn2(l,u[0],a(u)),m.length<3&&!e.values&&u[0]!==a(u)&&(m=[u[0],a(u)]),i=m.map((p,v)=>W7({index:v,label:f(p,v,m),value:p,perc:g(p)}))):(c=m.length-1,g=Hn2(l),i=m.map((p,v)=>W7({index:v,label:f(p,v,m),value:p,perc:v?g(p):0,perc2:v===c?1:g(m[v+1])}))),a1.source=i,a1.add=i,this.value=i,a1;}});const Ze2=e=>e.source.x,Je3=e=>e.source.y,Ke3=e=>e.target.x,Qe5=e=>e.target.y;function L18(e){dt2.call(this,{},e);}L18.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Pn(L18,dt2,{transform(e,t){var n=e.sourceX||Ze2,a=e.sourceY||Je3,i=e.targetX||Ke3,o=e.targetY||Qe5,l=e.as||"path",r=e.orient||"vertical",s=e.shape||"line",d=te9.get(s+"-"+r)||te9.get(s);return d||b("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[l]=d(n(f),a(f),i(f),o(f));}),t.reflow(e.modified()).modifies(l);}});const Q13=(e,t,n,a)=>"M"+e+","+t+"L"+n+","+a,_e3=(e,t,n,a)=>Q13(t*Math.cos(e),t*Math.sin(e),a*Math.cos(n),a*Math.sin(n)),_15=(e,t,n,a)=>{var i=n-e,o=a-t,l=Math.hypot(i,o)/2,r=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+l+","+l+" "+r+" 0 1 "+n+","+a;},et7=(e,t,n,a)=>_15(t*Math.cos(e),t*Math.sin(e),a*Math.cos(n),a*Math.sin(n)),ee9=(e,t,n,a)=>{const i=n-e,o=a-t,l=.2*(i+o),r=.2*(o-i);return"M"+e+","+t+"C"+(e+l)+","+(t+r)+" "+(n+r)+","+(a-l)+" "+n+","+a;},tt5=(e,t,n,a)=>ee9(t*Math.cos(e),t*Math.sin(e),a*Math.cos(n),a*Math.sin(n)),nt5=(e,t,n,a)=>"M"+e+","+t+"V"+a+"H"+n,it6=(e,t,n,a)=>"M"+e+","+t+"H"+n+"V"+a,at6=(e,t,n,a)=>{const i=Math.cos(e),o=Math.sin(e),l=Math.cos(n),r=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*l+","+t*r+"L"+a*l+","+a*r;},ot6=(e,t,n,a)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+a+" "+n+","+a;},rt6=(e,t,n,a)=>{const i=(t+a)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+a;},lt6=(e,t,n,a)=>{const i=Math.cos(e),o=Math.sin(e),l=Math.cos(n),r=Math.sin(n),s=(t+a)/2;return"M"+t*i+","+t*o+"C"+s*i+","+s*o+" "+s*l+","+s*r+" "+a*l+","+a*r;},te9=Sn({line:Q13,"line-radial":_e3,arc:_15,"arc-radial":et7,curve:ee9,"curve-radial":tt5,"orthogonal-horizontal":nt5,"orthogonal-vertical":it6,"orthogonal-radial":at6,"diagonal-horizontal":ot6,"diagonal-vertical":rt6,"diagonal-radial":lt6});function P15(e){dt2.call(this,null,e);}P15.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Pn(P15,dt2,{transform(e,t){var n=e.as||["startAngle","endAngle"],a=n[0],i=n[1],o=e.field||v,l=e.startAngle||0,r=e.endAngle!=null?e.endAngle:2*Math.PI,s=t.source,d=s.map(o),f=d.length,m=l,u=(r-l)/de(d),g=ie(f),c,M,k;for(e.sort&&g.sort((p,v)=>d[p]-d[v]),c=0;c<f;++c)k=d[g[c]],M=s[g[c]],M[a]=m,M[i]=m+=k*u;return this.value=d,t.reflow(e.modified()).modifies(n);}});const st6=5;function dt5(e){const t=e.type;return!e.bins&&(t===z14||t===I14||t===j14);}function ne10(e){return qn4(e)&&e!==R12;}const ft6=Xn(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function ie7(e){dt2.call(this,null,e),this.modified(!0);}Pn(ie7,dt2,{transform(e,t){var n=t.dataflow,a=this.value,i=mt4(e);(!a||i!==a.type)&&(this.value=a=b7(i)());for(i in e)if(!ft6[i]){if(i==="padding"&&ne10(a.type))continue;O1(a[i])?a[i](e[i]):n.warn("Unsupported scale property: "+i);}return vt4(a,e,pt5(a,e,ct7(a,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS);}});function mt4(e){var t=e.type,n="",a;return t===R12?R12+"-"+z14:(ut6(e)&&(a=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=a===2?R12+"-":a===3?q15+"-":""),(n+t||z14).toLowerCase());}function ut6(e){const t=e.type;return qn4(t)&&t!==S13&&t!==$9&&(e.scheme||e.range&&e.range.length&&e.range.every(X1));}function ct7(e,t,n){const a1=ht5(e,t.domainRaw,n);if(a1>-1)return a1;var i=t.domain,o=e.type,l=t.zero||t.zero===void 0&&dt5(e),r,s;if(!i)return 0;if((l||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(r=(i=i.slice()).length-1||1,l&&(i[0]>0&&(i[0]=0),i[r]<0&&(i[r]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[r]=t.domainMax),t.domainMid!=null)){s=t.domainMid;const d=s>i[r]?r+1:s<i[0]?0:r;d!==r&&n.warn("Scale domainMid exceeds domain min or max.",s),i.splice(d,0,s);}return ne10(o)&&t.padding&&i[0]!==a(i)&&(i=gt4(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(ae5(o,i,n)),o===J10&&e.unknown(t.domainImplicit?F10:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Un2(e,t.nice)||null),i.length;}function ht5(e,t,n){return t?(e.domain(ae5(e.type,t,n)),t.length):-1;}function gt4(e,t,n,a1,i,o){var l=Math.abs(a(n)-n[0]),r=l/(l-2*a1),s=e===v10?gn(t,null,r):e===j14?an(t,null,r,.5):e===I14?an(t,null,r,i||1):e===D7?hn(t,null,r,o||1):fn(t,null,r);return t=t.slice(),t[0]=s[0],t[t.length-1]=s[1],t;}function ae5(e,t,n){if(ie5(e)){var a=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));a!==t.length&&n.warn("Log scale domain includes zero: "+Z1(t));}return t;}function pt5(e,t,n){let a1=t.bins;if(a1&&!w1(a1)){const i=e.domain(),o=i[0],l=a(i),r=a1.step;let s=a1.start==null?o:a1.start,d=a1.stop==null?l:a1.stop;r||b("Scale bins parameter missing step property."),s<o&&(s=r*Math.ceil(o/r)),d>l&&(d=r*Math.floor(l/r)),a1=ie(s,d+r/2,r);}return a1?e.bins=a1:e.bins&&delete e.bins,e.type===ee7&&(a1?!t.domain&&!t.domainRaw&&(e.domain(a1),n=a1.length):e.bins=e.domain()),n;}function vt4(e,t,n){var a=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Mt5(a,t,n);else if(t.scheme&&(o=yt3(a,t,n),O1(o))){if(e.interpolator)return e.interpolator(o);b(`Scale type ${a} does not support interpolating color schemes.`);}if(o&&xn4(a))return e.interpolator(oe6(E15(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(se4(t.interpolate,t.interpolateGamma)):O1(e.round)?e.round(i):O1(e.rangeRound)&&e.interpolate(i?Mn2:d6),o&&e.range(E15(o,t.reverse));}function Mt5(e,t,n){e!==_13&&e!==Z13&&b("Only band and point scales support rangeStep.");var a=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Z13?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*H10(n,i,a)];}function yt3(e,t,n){var a=t.schemeExtent,i,o;return w1(t.scheme)?o=oe6(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=ge3(i),o||b(`Unrecognized scheme name: ${t.scheme}`)),n=e===C12?n+1:e===ee7?n-1:e===x10||e===L16?+t.schemeCount||st6:n,xn4(e)?oe8(o,a,t.reverse):O1(o)?Pn3(oe8(o,a),n):e===J10?o:o.slice(0,n);}function oe8(e,t,n){return O1(e)&&(t||n)?On1(e,E15(t||[0,1],n)):e;}function E15(e,t){return t?e.slice().reverse():e;}function re9(e){dt2.call(this,null,e);}Pn(re9,dt2,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Mt1(e.sort)),this.modified(n),t;}});const le6="zero",se6="center",de6="normalize",fe4=["y0","y1"];function I16(e){dt2.call(this,null,e);}I16.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:le6,values:[le6,se6,de6]},{name:"as",type:"string",array:!0,length:2,default:fe4}]},Pn(I16,dt2,{transform(e,t){var n=e.as||fe4,a=n[0],i=n[1],o=Mt1(e.sort),l=e.field||v,r=e.offset===se6?kt5:e.offset===de6?St4:Dt4,s,d,f,m;for(s=bt5(t.source,e.groupby,o,l),d=0,f=s.length,m=s.max;d<f;++d)r(s[d],m,l,a,i);return t.reflow(e.modified()).modifies(n);}});function kt5(e,t,n,a,i){for(var o=(t-e.sum)/2,l=e.length,r=0,s;r<l;++r)s=e[r],s[a]=o,s[i]=o+=Math.abs(n(s));}function St4(e,t,n,a,i){for(var o=1/e.sum,l=0,r=e.length,s=0,d=0,f;s<r;++s)f=e[s],f[a]=l,f[i]=l=o*(d+=Math.abs(n(f)));}function Dt4(e,t,n,a,i){for(var o=0,l=0,r=e.length,s=0,d,f;s<r;++s)f=e[s],d=+n(f),d<0?(f[a]=l,f[i]=l+=d):(f[a]=o,f[i]=o+=d);}function bt5(e,t,n,a){var i=[],o=M=>M(f),l,r,s,d,f,m,u,g,c;if(t==null)i.push(e.slice());else for(l={},r=0,s=e.length;r<s;++r)f=e[r],m=t.map(o),u=l[m],u||(l[m]=u=[],i.push(u)),u.push(f);for(m=0,c=0,d=i.length;m<d;++m){for(u=i[m],r=0,g=0,s=u.length;r<s;++r)g+=Math.abs(a(u[r]));u.sum=g,g>c&&(c=g),n&&u.sort(n);}return i.max=c,i;}const mod3=function(){return{axisticks:W14,datajoin:Z15,encode:J13,legendentries:K13,linkpath:L18,pie:P15,scale:ie7,sortitems:re9,stack:I16,default:null};}();var m5=1e-6,xn7=1e-12,L19=Math.PI,O14=L19/2,nt6=L19/4,U16=L19*2,Y14=180/L19,N16=L19/180,C14=Math.abs,mn6=Math.atan,J14=Math.atan2,$12=Math.cos,tt6=Math.ceil,zr2=Math.exp,Ft4=Math.hypot,rt7=Math.log,Yt6=Math.pow,w12=Math.sin,on7=Math.sign||function(n){return n>0?1:n<0?-1:0;},H12=Math.sqrt,Xt6=Math.tan;function Lr2(n){return n>1?0:n<-1?L19:Math.acos(n);}function K14(n){return n>1?O14:n<-1?-O14:Math.asin(n);}function D9(){}function it7(n,t){n&&Ir1.hasOwnProperty(n.type)&&Ir1[n.type](n,t);}var qr2={Feature:function(n,t){it7(n.geometry,t);},FeatureCollection:function(n,t){for(var i=n.features,r=-1,e=i.length;++r<e;)it7(i[r].geometry,t);}},Ir1={Sphere:function(n,t){t.sphere();},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2]);},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)n=i[r],t.point(n[0],n[1],n[2]);},LineString:function(n,t){Dt5(n.coordinates,t,0);},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)Dt5(i[r],t,0);},Polygon:function(n,t){xr2(n.coordinates,t);},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)xr2(i[r],t);},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,e=i.length;++r<e;)it7(i[r],t);}};function Dt5(n,t,i){var r=-1,e=n.length-i,o;for(t.lineStart();++r<e;)o=n[r],t.point(o[0],o[1],o[2]);t.lineEnd();}function xr2(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)Dt5(n[i],t,1);t.polygonEnd();}function an7(n,t){n&&qr2.hasOwnProperty(n.type)?qr2[n.type](n,t):it7(n,t);}var et8=new C1,ot7=new C1,Tr1,Fr1,Gt4,Ot4,Zt6,fn6={point:D9,lineStart:D9,lineEnd:D9,polygonStart:function(){et8=new C1,fn6.lineStart=Bi1,fn6.lineEnd=Hi1;},polygonEnd:function(){var n=+et8;ot7.add(n<0?U16+n:n),this.lineStart=this.lineEnd=this.point=D9;},sphere:function(){ot7.add(U16);}};function Bi1(){fn6.point=ki1;}function Hi1(){Yr2(Tr1,Fr1);}function ki1(n,t){fn6.point=Yr2,Tr1=n,Fr1=t,n*=N16,t*=N16,Gt4=n,Ot4=$12(t=t/2+nt6),Zt6=w12(t);}function Yr2(n,t){n*=N16,t*=N16,t=t/2+nt6;var i=n-Gt4,r=i>=0?1:-1,e=r*i,o=$12(t),a=w12(t),u=Zt6*a,f=Ot4*o+u*$12(e),p=u*r*w12(e);et8.add(J14(p,f)),Gt4=n,Ot4=o,Zt6=a;}function Ui(n){return ot7=new C1,an7(n,fn6),ot7*2;}function ut7(n){return[J14(n[1],n[0]),K14(n[2])];}function wn9(n){var t=n[0],i=n[1],r=$12(i);return[r*$12(t),r*w12(t),w12(i)];}function at7(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2];}function Nn6(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]];}function Wt5(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2];}function ct8(n,t){return[n[0]*t,n[1]*t,n[2]*t];}function ft7(n){var t=H12(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t;}var G16,nn7,Z16,tn7,Pn5,Xr2,Dr2,An7,Tn4,Sn6,vn6,dn6={point:Bt5,lineStart:Or2,lineEnd:Zr2,polygonStart:function(){dn6.point=Wr2,dn6.lineStart=Ji,dn6.lineEnd=Ki,Tn4=new C1,fn6.polygonStart();},polygonEnd:function(){fn6.polygonEnd(),dn6.point=Bt5,dn6.lineStart=Or2,dn6.lineEnd=Zr2,et8<0?(G16=-(Z16=180),nn7=-(tn7=90)):Tn4>m5?tn7=90:Tn4<-m5&&(nn7=-90),vn6[0]=G16,vn6[1]=Z16;},sphere:function(){G16=-(Z16=180),nn7=-(tn7=90);}};function Bt5(n,t){Sn6.push(vn6=[G16=n,Z16=n]),t<nn7&&(nn7=t),t>tn7&&(tn7=t);}function Gr2(n,t){var i=wn9([n*N16,t*N16]);if(An7){var r=Nn6(An7,i),e=[r[1],-r[0],0],o=Nn6(e,r);ft7(o),o=ut7(o);var a=n-Pn5,u=a>0?1:-1,f=o[0]*Y14*u,p,c=C14(a)>180;c^(u*Pn5<f&&f<u*n)?(p=o[1]*Y14,p>tn7&&(tn7=p)):(f=(f+360)%360-180,c^(u*Pn5<f&&f<u*n))?(p=-o[1]*Y14,p<nn7&&(nn7=p)):(t<nn7&&(nn7=t),t>tn7&&(tn7=t)),c?n<Pn5?rn8(G16,n)>rn8(G16,Z16)&&(Z16=n):rn8(n,Z16)>rn8(G16,Z16)&&(G16=n):Z16>=G16?(n<G16&&(G16=n),n>Z16&&(Z16=n)):n>Pn5?rn8(G16,n)>rn8(G16,Z16)&&(Z16=n):rn8(n,Z16)>rn8(G16,Z16)&&(G16=n);}else Sn6.push(vn6=[G16=n,Z16=n]);t<nn7&&(nn7=t),t>tn7&&(tn7=t),An7=i,Pn5=n;}function Or2(){dn6.point=Gr2;}function Zr2(){vn6[0]=G16,vn6[1]=Z16,dn6.point=Bt5,An7=null;}function Wr2(n,t){if(An7){var i=n-Pn5;Tn4.add(C14(i)>180?i+(i>0?360:-360):i);}else Xr2=n,Dr2=t;fn6.point(n,t),Gr2(n,t);}function Ji(){fn6.lineStart();}function Ki(){Wr2(Xr2,Dr2),fn6.lineEnd(),C14(Tn4)>m5&&(G16=-(Z16=180)),vn6[0]=G16,vn6[1]=Z16,An7=null;}function rn8(n,t){return(t-=n)<0?t+360:t;}function Qi(n,t){return n[0]-t[0];}function Br1(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t;}function Vi1(n){var t,i,r,e,o,a,u;if(tn7=Z16=-(G16=nn7=Infinity),Sn6=[],an7(n,dn6),i=Sn6.length){for(Sn6.sort(Qi),t=1,r=Sn6[0],o=[r];t<i;++t)e=Sn6[t],Br1(r,e[0])||Br1(r,e[1])?(rn8(r[0],e[1])>rn8(r[0],r[1])&&(r[1]=e[1]),rn8(e[0],r[1])>rn8(r[0],r[1])&&(r[0]=e[0])):o.push(r=e);for(a=-Infinity,i=o.length-1,t=0,r=o[i];t<=i;r=e,++t)e=o[t],(u=rn8(r[1],e[0]))>a&&(a=u,G16=e[0],Z16=r[1]);}return Sn6=vn6=null,G16===Infinity||nn7===Infinity?[[NaN,NaN],[NaN,NaN]]:[[G16,nn7],[Z16,tn7]];}var Fn4,lt7,st7,pt6,gt5,ht6,vt5,dt6,Ht4,kt6,Ut4,Hr2,kr1,Q14,V11,j16,cn6={sphere:D9,point:Jt5,lineStart:Ur1,lineEnd:Jr2,polygonStart:function(){cn6.lineStart=bi2,cn6.lineEnd=ne11;},polygonEnd:function(){cn6.lineStart=Ur1,cn6.lineEnd=Jr2;}};function Jt5(n,t){n*=N16,t*=N16;var i=$12(t);Yn3(i*$12(n),i*w12(n),w12(t));}function Yn3(n,t,i){++Fn4,st7+=(n-st7)/Fn4,pt6+=(t-pt6)/Fn4,gt5+=(i-gt5)/Fn4;}function Ur1(){cn6.point=ji;}function ji(n,t){n*=N16,t*=N16;var i=$12(t);Q14=i*$12(n),V11=i*w12(n),j16=w12(t),cn6.point=_i2,Yn3(Q14,V11,j16);}function _i2(n,t){n*=N16,t*=N16;var i=$12(t),r=i*$12(n),e=i*w12(n),o=w12(t),a=J14(H12((a=V11*o-j16*e)*a+(a=j16*r-Q14*o)*a+(a=Q14*e-V11*r)*a),Q14*r+V11*e+j16*o);lt7+=a,ht6+=a*(Q14+(Q14=r)),vt5+=a*(V11+(V11=e)),dt6+=a*(j16+(j16=o)),Yn3(Q14,V11,j16);}function Jr2(){cn6.point=Jt5;}function bi2(){cn6.point=te10;}function ne11(){Kr2(Hr2,kr1),cn6.point=Jt5;}function te10(n,t){Hr2=n,kr1=t,n*=N16,t*=N16,cn6.point=Kr2;var i=$12(t);Q14=i*$12(n),V11=i*w12(n),j16=w12(t),Yn3(Q14,V11,j16);}function Kr2(n,t){n*=N16,t*=N16;var i=$12(t),r=i*$12(n),e=i*w12(n),o=w12(t),a=V11*o-j16*e,u=j16*r-Q14*o,f=Q14*e-V11*r,p=Ft4(a,u,f),c=K14(p),s=p&&-c/p;Ht4.add(s*a),kt6.add(s*u),Ut4.add(s*f),lt7+=c,ht6+=c*(Q14+(Q14=r)),vt5+=c*(V11+(V11=e)),dt6+=c*(j16+(j16=o)),Yn3(Q14,V11,j16);}function re10(n){Fn4=lt7=st7=pt6=gt5=ht6=vt5=dt6=0,Ht4=new C1,kt6=new C1,Ut4=new C1,an7(n,cn6);var t=+Ht4,i=+kt6,r=+Ut4,e=Ft4(t,i,r);return e<xn7&&(t=ht6,i=vt5,r=dt6,lt7<m5&&(t=st7,i=pt6,r=gt5),e=Ft4(t,i,r),e<xn7)?[NaN,NaN]:[J14(i,t)*Y14,K14(r/e)*Y14];}function Kt5(n,t){function i(r,e){return r=n(r,e),t(r[0],r[1]);}return n.invert&&t.invert&&(i.invert=function(r,e){return r=t.invert(r,e),r&&n.invert(r[0],r[1]);}),i;}function Qt5(n,t){return C14(n)>L19&&(n-=Math.round(n/U16)*U16),[n,t];}Qt5.invert=Qt5;function Vt5(n,t,i){return(n%=U16)?t||i?Kt5(Vr2(n),jr2(t,i)):Vr2(n):t||i?jr2(t,i):Qt5;}function Qr2(n){return function(t,i){return t+=n,C14(t)>L19&&(t-=Math.round(t/U16)*U16),[t,i];};}function Vr2(n){var t=Qr2(n);return t.invert=Qr2(-n),t;}function jr2(n,t){var i=$12(n),r=w12(n),e=$12(t),o=w12(t);function a(u,f){var p=$12(f),c=$12(u)*p,s=w12(u)*p,l=w12(f),g=l*i+c*r;return[J14(s*e-g*o,c*i-l*r),K14(g*e+s*o)];}return a.invert=function(u,f){var p=$12(f),c=$12(u)*p,s=w12(u)*p,l=w12(f),g=l*e-s*o;return[J14(s*e+l*o,c*i+g*r),K14(g*i-c*r)];},a;}function _r(n){n=Vt5(n[0]*N16,n[1]*N16,n.length>2?n[2]*N16:0);function t(i){return i=n(i[0]*N16,i[1]*N16),i[0]*=Y14,i[1]*=Y14,i;}return t.invert=function(i){return i=n.invert(i[0]*N16,i[1]*N16),i[0]*=Y14,i[1]*=Y14,i;},t;}function br2(n,t,i,r,e,o){if(!i)return;var a=$12(t),u=w12(t),f=r*i;e==null?(e=t+r*U16,o=t-f/2):(e=ni3(a,e),o=ni3(a,o),(r>0?e<o:e>o)&&(e+=r*U16));for(var p,c=e;r>0?c>o:c<o;c-=f)p=ut7([a,-u*$12(c),-u*w12(c)]),n.point(p[0],p[1]);}function ni3(n,t){t=wn9(t),t[0]-=n,ft7(t);var i=Lr2(-t[1]);return((-t[2]<0?-i:i)+U16-m5)%U16;}function ti3(){var n=[],t;return{point:function(i,r,e){t.push([i,r,e]);},lineStart:function(){n.push(t=[]);},lineEnd:D9,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()));},result:function(){var i=n;return n=[],t=null,i;}};}function Et4(n,t){return C14(n[0]-t[0])<m5&&C14(n[1]-t[1])<m5;}function St5(n,t,i,r){this.x=n,this.z=t,this.o=i,this.e=r,this.v=!1,this.n=this.p=null;}function ri3(n,t,i,r,e){var o=[],a=[],u,f;if(n.forEach(function(h){if((y=h.length-1)<=0)return;var y,S=h[0],P=h[y],M;if(Et4(S,P)){if(!S[2]&&!P[2]){for(e.lineStart(),u=0;u<y;++u)e.point((S=h[u])[0],S[1]);e.lineEnd();return;}P[0]+=2*m5;}o.push(M=new St5(S,h,null,!0)),a.push(M.o=new St5(S,null,M,!1)),o.push(M=new St5(P,h,null,!1)),a.push(M.o=new St5(P,null,M,!0));}),!o.length)return;for(a.sort(t),ii3(o),ii3(a),u=0,f=a.length;u<f;++u)a[u].e=i=!i;for(var p=o[0],c,s;;){for(var l=p,g=!0;l.v;)if((l=l.n)===p)return;c=l.z,e.lineStart();do{if(l.v=l.o.v=!0,l.e){if(g)for(u=0,f=c.length;u<f;++u)e.point((s=c[u])[0],s[1]);else r(l.x,l.n.x,1,e);l=l.n;}else{if(g)for(c=l.p.z,u=c.length-1;u>=0;--u)e.point((s=c[u])[0],s[1]);else r(l.x,l.p.x,-1,e);l=l.p;}l=l.o,c=l.z,g=!g;}while(!l.v)e.lineEnd();}}function ii3(n){if(!(t=n.length))return;for(var t,i=0,r=n[0],e;++i<t;)r.n=e=n[i],e.p=r,r=e;r.n=e=n[0],e.p=r;}function jt5(n){return C14(n[0])<=L19?n[0]:on7(n[0])*((C14(n[0])+L19)%U16-L19);}function ei3(n,t){var i=jt5(t),r=t[1],e=w12(r),o=[w12(i),-$12(i),0],a=0,u=0,f=new C1;e===1?r=O14+m5:e===-1&&(r=-O14-m5);for(var p=0,c=n.length;p<c;++p){if(!(l=(s=n[p]).length))continue;for(var s,l,g=s[l-1],h=jt5(g),y=g[1]/2+nt6,S=w12(y),P=$12(y),M=0;M<l;++M,h=d,S=A,P=I,g=v){var v=s[M],d=jt5(v),R=v[1]/2+nt6,A=w12(R),I=$12(R),x=d-h,T=x>=0?1:-1,X=T*x,z=X>L19,_=S*A;if(f.add(J14(_*T*w12(X),P*I+_*$12(X))),a+=z?x+T*U16:x,z^h>=i^d>=i){var W=Nn6(wn9(g),wn9(v));ft7(W);var F=Nn6(o,W);ft7(F);var E=(z^x>=0?-1:1)*K14(F[2]);(r>E||r===E&&(W[0]||W[1]))&&(u+=z^x>=0?1:-1);}}}return(a<-m5||a<m5&&f<-xn7)^u&1;}function oi3(n,t,i,r){return function(e){var o=t(e),a=ti3(),u=t(a),f=!1,p,c,s,l={point:g,lineStart:y,lineEnd:S,polygonStart:function(){l.point=P,l.lineStart=M,l.lineEnd=v,c=[],p=[];},polygonEnd:function(){l.point=g,l.lineStart=y,l.lineEnd=S,c=ne(c);var d=ei3(p,r);c.length?(f||(e.polygonStart(),f=!0),ri3(c,oe9,d,i,e)):d&&(f||(e.polygonStart(),f=!0),e.lineStart(),i(null,null,1,e),e.lineEnd()),f&&(e.polygonEnd(),f=!1),c=p=null;},sphere:function(){e.polygonStart(),e.lineStart(),i(null,null,1,e),e.lineEnd(),e.polygonEnd();}};function g(d,R){n(d,R)&&e.point(d,R);}function h(d,R){o.point(d,R);}function y(){l.point=h,o.lineStart();}function S(){l.point=g,o.lineEnd();}function P(d,R){s.push([d,R]),u.point(d,R);}function M(){u.lineStart(),s=[];}function v(){P(s[0][0],s[0][1]),u.lineEnd();var d=u.clean(),R=a.result(),A,I=R.length,x,T,X;if(s.pop(),p.push(s),s=null,!I)return;if(d&1){if(T=R[0],(x=T.length-1)>0){for(f||(e.polygonStart(),f=!0),e.lineStart(),A=0;A<x;++A)e.point((X=T[A])[0],X[1]);e.lineEnd();}return;}I>1&&d&2&&R.push(R.pop().concat(R.shift())),c.push(R.filter(ee10));}return l;};}function ee10(n){return n.length>1;}function oe9(n,t){return((n=n.x)[0]<0?n[1]-O14-m5:O14-n[1])-((t=t.x)[0]<0?t[1]-O14-m5:O14-t[1]);}var _t4=oi3(function(){return!0;},ue7,ce3,[-L19,-O14]);function ue7(n){var t=NaN,i=NaN,r=NaN,e;return{lineStart:function(){n.lineStart(),e=1;},point:function(o,a){var u=o>0?L19:-L19,f=C14(o-t);C14(f-L19)<m5?(n.point(t,i=(i+a)/2>0?O14:-O14),n.point(r,i),n.lineEnd(),n.lineStart(),n.point(u,i),n.point(o,i),e=0):r!==u&&f>=L19&&(C14(t-r)<m5&&(t-=r*m5),C14(o-u)<m5&&(o-=u*m5),i=ae6(t,i,o,a),n.point(r,i),n.lineEnd(),n.lineStart(),n.point(u,i),e=0),n.point(t=o,i=a),r=u;},lineEnd:function(){n.lineEnd(),t=i=NaN;},clean:function(){return 2-e;}};}function ae6(n,t,i,r){var e,o,a=w12(n-i);return C14(a)>m5?mn6((w12(t)*(o=$12(r))*w12(i)-w12(r)*(e=$12(t))*w12(n))/(e*o*a)):(t+r)/2;}function ce3(n,t,i,r){var e;if(n==null)e=i*O14,r.point(-L19,e),r.point(0,e),r.point(L19,e),r.point(L19,0),r.point(L19,-e),r.point(0,-e),r.point(-L19,-e),r.point(-L19,0),r.point(-L19,e);else if(C14(n[0]-t[0])>m5){var o=n[0]<t[0]?L19:-L19;e=i*o/2,r.point(-o,e),r.point(0,e),r.point(o,e);}else r.point(t[0],t[1]);}function ui3(n){var t=$12(n),i=2*N16,r=t>0,e=C14(t)>m5;function o(c,s,l,g){br2(g,n,i,l,c,s);}function a(c,s){return $12(c)*$12(s)>t;}function u(c){var s,l,g,h,y;return{lineStart:function(){h=g=!1,y=1;},point:function(S,P){var M=[S,P],v,d=a(S,P),R=r?d?0:p(S,P):d?p(S+(S<0?L19:-L19),P):0;if(!s&&(h=g=d)&&c.lineStart(),d!==g&&(v=f(s,M),(!v||Et4(s,v)||Et4(M,v))&&(M[2]=1)),d!==g)y=0,d?(c.lineStart(),v=f(M,s),c.point(v[0],v[1])):(v=f(s,M),c.point(v[0],v[1],2),c.lineEnd()),s=v;else if(e&&s&&r^d){var A;!(R&l)&&(A=f(M,s,!0))&&(y=0,r?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)));}d&&(!s||!Et4(s,M))&&c.point(M[0],M[1]),s=M,g=d,l=R;},lineEnd:function(){g&&c.lineEnd(),s=null;},clean:function(){return y|(h&&g)<<1;}};}function f(c,s,l){var g=wn9(c),h=wn9(s),y=[1,0,0],S=Nn6(g,h),P=at7(S,S),M=S[0],v=P-M*M;if(!v)return!l&&c;var d=t*P/v,R=-t*M/v,A=Nn6(y,S),I=ct8(y,d),x=ct8(S,R);Wt5(I,x);var T=A,X=at7(I,T),z=at7(T,T),_=X*X-z*(at7(I,I)-1);if(_<0)return;var W=H12(_),F=ct8(T,(-X-W)/z);if(Wt5(F,I),F=ut7(F),!l)return F;var E=c[0],q=s[0],B=c[1],b=s[1],en;q<E&&(en=E,E=q,q=en);var In=q-E,gn=C14(In-L19)<m5,yn=gn||In<m5;if(!gn&&b<B&&(en=B,B=b,b=en),yn?gn?B+b>0^F[1]<(C14(F[0]-E)<m5?B:b):B<=F[1]&&F[1]<=b:In>L19^(E<=F[0]&&F[0]<=q)){var hn=ct8(T,(-X+W)/z);return Wt5(hn,I),[F,ut7(hn)];}}function p(c,s){var l=r?n:L19-n,g=0;return c<-l?g|=1:c>l&&(g|=2),s<-l?g|=4:s>l&&(g|=8),g;}return oi3(a,u,o,r?[0,-n]:[-L19,n-L19]);}function fe5(n,t,i,r,e,o){var a=n[0],u=n[1],f=t[0],p=t[1],c=0,s=1,l=f-a,g=p-u,h;if(h=i-a,!l&&h>0)return;if(h/=l,l<0){if(h<c)return;h<s&&(s=h);}else if(l>0){if(h>s)return;h>c&&(c=h);}if(h=e-a,!l&&h<0)return;if(h/=l,l<0){if(h>s)return;h>c&&(c=h);}else if(l>0){if(h<c)return;h<s&&(s=h);}if(h=r-u,!g&&h>0)return;if(h/=g,g<0){if(h<c)return;h<s&&(s=h);}else if(g>0){if(h>s)return;h>c&&(c=h);}if(h=o-u,!g&&h<0)return;if(h/=g,g<0){if(h>s)return;h>c&&(c=h);}else if(g>0){if(h<c)return;h<s&&(s=h);}return c>0&&(n[0]=a+c*l,n[1]=u+c*g),s<1&&(t[0]=a+s*l,t[1]=u+s*g),!0;}var Xn5=1e9,yt4=-Xn5;function wt4(n,t,i,r){function e(p,c){return n<=p&&p<=i&&t<=c&&c<=r;}function o(p,c,s,l){var g=0,h=0;if(p==null||(g=a(p,s))!==(h=a(c,s))||f(p,c)<0^s>0)do l.point(g===0||g===3?n:i,g>1?r:t);while((g=(g+s+4)%4)!==h)else l.point(c[0],c[1]);}function a(p,c){return C14(p[0]-n)<m5?c>0?0:3:C14(p[0]-i)<m5?c>0?2:1:C14(p[1]-t)<m5?c>0?1:0:c>0?3:2;}function u(p,c){return f(p.x,c.x);}function f(p,c){var s=a(p,1),l=a(c,1);return s!==l?s-l:s===0?c[1]-p[1]:s===1?p[0]-c[0]:s===2?p[1]-c[1]:c[0]-p[0];}return function(p){var c=p,s=ti3(),l,g,h,y,S,P,M,v,d,R,A,I={point:x,lineStart:_,lineEnd:W,polygonStart:X,polygonEnd:z};function x(E,q){e(E,q)&&c.point(E,q);}function T(){for(var E=0,q=0,B=g.length;q<B;++q)for(var b=g[q],en=1,In=b.length,gn=b[0],yn,hn,bn=gn[0],Mn=gn[1];en<In;++en)yn=bn,hn=Mn,gn=b[en],bn=gn[0],Mn=gn[1],hn<=r?Mn>r&&(bn-yn)*(r-hn)>(Mn-hn)*(n-yn)&&++E:Mn<=r&&(bn-yn)*(r-hn)<(Mn-hn)*(n-yn)&&--E;return E;}function X(){c=s,l=[],g=[],A=!0;}function z(){var E=T(),q=A&&E,B=(l=ne(l)).length;(q||B)&&(p.polygonStart(),q&&(p.lineStart(),o(null,null,1,p),p.lineEnd()),B&&ri3(l,u,E,o,p),p.polygonEnd()),c=p,l=g=h=null;}function _(){I.point=F,g&&g.push(h=[]),R=!0,d=!1,M=v=NaN;}function W(){l&&(F(y,S),P&&d&&s.rejoin(),l.push(s.result())),I.point=x,d&&c.lineEnd();}function F(E,q){var B=e(E,q);if(g&&h.push([E,q]),R)y=E,S=q,P=B,R=!1,B&&(c.lineStart(),c.point(E,q));else if(B&&d)c.point(E,q);else{var b=[M=Math.max(yt4,Math.min(Xn5,M)),v=Math.max(yt4,Math.min(Xn5,v))],en=[E=Math.max(yt4,Math.min(Xn5,E)),q=Math.max(yt4,Math.min(Xn5,q))];fe5(b,en,n,t,i,r)?(d||(c.lineStart(),c.point(b[0],b[1])),c.point(en[0],en[1]),B||c.lineEnd(),A=!1):B&&(c.lineStart(),c.point(E,q),A=!1);}M=E,v=q,d=B;}return I;};}var bt6,nr1,Pt5,Rt6,Ln3={sphere:D9,point:D9,lineStart:se7,lineEnd:D9,polygonStart:D9,polygonEnd:D9};function se7(){Ln3.point=ge5,Ln3.lineEnd=pe6;}function pe6(){Ln3.point=Ln3.lineEnd=D9;}function ge5(n,t){n*=N16,t*=N16,nr1=n,Pt5=w12(t),Rt6=$12(t),Ln3.point=he5;}function he5(n,t){n*=N16,t*=N16;var i=w12(t),r=$12(t),e=C14(n-nr1),o=$12(e),a=w12(e),u=r*a,f=Rt6*i-Pt5*r*o,p=Pt5*i+Rt6*r*o;bt6.add(J14(H12(u*u+f*f),p)),nr1=n,Pt5=i,Rt6=r;}function ai3(n){return bt6=new C1,an7(n,Ln3),+bt6;}var tr1=[null,null],ve5={type:"LineString",coordinates:tr1};function Mt6(n,t){return tr1[0]=n,tr1[1]=t,ai3(ve5);}var fi3={Sphere:function(){return!0;},Point:function(n,t){return li3(n.coordinates,t);},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)if(li3(i[r],t))return!0;return!1;},LineString:function(n,t){return si3(n.coordinates,t);},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)if(si3(i[r],t))return!0;return!1;},Polygon:function(n,t){return pi3(n.coordinates,t);},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)if(pi3(i[r],t))return!0;return!1;},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,e=i.length;++r<e;)if($t5(i[r],t))return!0;return!1;}};function $t5(n,t){return n&&fi3.hasOwnProperty(n.type)?fi3[n.type](n,t):!1;}function li3(n,t){return Mt6(n,t)===0;}function si3(n,t){for(var i,r,e,o=0,a=n.length;o<a;o++){if(r=Mt6(n[o],t),r===0)return!0;if(o>0&&(e=Mt6(n[o],n[o-1]),e>0&&i<=e&&r<=e&&(i+r-e)*(1-Math.pow((i-r)/e,2))<xn7*e))return!0;i=r;}return!1;}function pi3(n,t){return!!ei3(n.map(de7),gi2(t));}function de7(n){return n=n.map(gi2),n.pop(),n;}function gi2(n){return[n[0]*N16,n[1]*N16];}function hi3(n,t,i){var r=ie(n,t-m5,i).concat(t);return function(e){return r.map(function(o){return[e,o];});};}function vi2(n,t,i){var r=ie(n,t-m5,i).concat(t);return function(e){return r.map(function(o){return[o,e];});};}function di2(){var n,t,i,r,e,o,a,u,f=10,p=f,c=90,s=360,l,g,h,y,S=2.5;function P(){return{type:"MultiLineString",coordinates:M()};}function M(){return ie(tt6(r/c)*c,i,c).map(h).concat(ie(tt6(u/s)*s,a,s).map(y)).concat(ie(tt6(t/f)*f,n,f).filter(function(v){return C14(v%c)>m5;}).map(l)).concat(ie(tt6(o/p)*p,e,p).filter(function(v){return C14(v%s)>m5;}).map(g));}return P.lines=function(){return M().map(function(v){return{type:"LineString",coordinates:v};});},P.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(y(a).slice(1),h(i).reverse().slice(1),y(u).reverse().slice(1))]};},P.extent=function(v){return arguments.length?P.extentMajor(v).extentMinor(v):P.extentMinor();},P.extentMajor=function(v){return arguments.length?(r=+v[0][0],i=+v[1][0],u=+v[0][1],a=+v[1][1],r>i&&(v=r,r=i,i=v),u>a&&(v=u,u=a,a=v),P.precision(S)):[[r,u],[i,a]];},P.extentMinor=function(v){return arguments.length?(t=+v[0][0],n=+v[1][0],o=+v[0][1],e=+v[1][1],t>n&&(v=t,t=n,n=v),o>e&&(v=o,o=e,e=v),P.precision(S)):[[t,o],[n,e]];},P.step=function(v){return arguments.length?P.stepMajor(v).stepMinor(v):P.stepMinor();},P.stepMajor=function(v){return arguments.length?(c=+v[0],s=+v[1],P):[c,s];},P.stepMinor=function(v){return arguments.length?(f=+v[0],p=+v[1],P):[f,p];},P.precision=function(v){return arguments.length?(S=+v,l=hi3(o,e,90),g=vi2(t,n,S),h=hi3(u,a,90),y=vi2(r,i,S),P):S;},P.extentMajor([[-180,-90+m5],[180,90-m5]]).extentMinor([[-180,-80-m5],[180,80+m5]]);}var Dn3=n=>n,rr1=new C1,ir1=new C1,Ei1,Si1,er1,or1,En5={point:D9,lineStart:D9,lineEnd:D9,polygonStart:function(){En5.lineStart=we6,En5.lineEnd=Re5;},polygonEnd:function(){En5.lineStart=En5.lineEnd=En5.point=D9,rr1.add(C14(ir1)),ir1=new C1;},result:function(){var n=rr1/2;return rr1=new C1,n;}};function we6(){En5.point=Pe3;}function Pe3(n,t){En5.point=yi3,Ei1=er1=n,Si1=or1=t;}function yi3(n,t){ir1.add(or1*n-er1*t),er1=n,or1=t;}function Re5(){yi3(Ei1,Si1);}var Cn6=Infinity,mt5=Cn6,Gn4=-Cn6,Nt5=Gn4,At6={point:Me6,lineStart:D9,lineEnd:D9,polygonStart:D9,polygonEnd:D9,result:function(){var n=[[Cn6,mt5],[Gn4,Nt5]];return Gn4=Nt5=-(mt5=Cn6=Infinity),n;}};function Me6(n,t){n<Cn6&&(Cn6=n),n>Gn4&&(Gn4=n),t<mt5&&(mt5=t),t>Nt5&&(Nt5=t);}var ur1=0,ar1=0,On3=0,zt5=0,Lt6=0,qn6=0,cr1=0,fr1=0,Zn2=0,wi1,Pi1,ln7,sn6,un7={point:Rn7,lineStart:Ri1,lineEnd:Mi1,polygonStart:function(){un7.lineStart=Ne5,un7.lineEnd=Ae4;},polygonEnd:function(){un7.point=Rn7,un7.lineStart=Ri1,un7.lineEnd=Mi1;},result:function(){var n=Zn2?[cr1/Zn2,fr1/Zn2]:qn6?[zt5/qn6,Lt6/qn6]:On3?[ur1/On3,ar1/On3]:[NaN,NaN];return ur1=ar1=On3=zt5=Lt6=qn6=cr1=fr1=Zn2=0,n;}};function Rn7(n,t){ur1+=n,ar1+=t,++On3;}function Ri1(){un7.point=$e5;}function $e5(n,t){un7.point=me6,Rn7(ln7=n,sn6=t);}function me6(n,t){var i=n-ln7,r=t-sn6,e=H12(i*i+r*r);zt5+=e*(ln7+n)/2,Lt6+=e*(sn6+t)/2,qn6+=e,Rn7(ln7=n,sn6=t);}function Mi1(){un7.point=Rn7;}function Ne5(){un7.point=ze5;}function Ae4(){$i1(wi1,Pi1);}function ze5(n,t){un7.point=$i1,Rn7(wi1=ln7=n,Pi1=sn6=t);}function $i1(n,t){var i=n-ln7,r=t-sn6,e=H12(i*i+r*r);zt5+=e*(ln7+n)/2,Lt6+=e*(sn6+t)/2,qn6+=e,e=sn6*n-ln7*t,cr1+=e*(ln7+n),fr1+=e*(sn6+t),Zn2+=e*3,Rn7(ln7=n,sn6=t);}function mi2(n){this._context=n;}mi2.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this;},polygonStart:function(){this._line=0;},polygonEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN;},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break;}case 1:{this._context.lineTo(n,t);break;}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,U16);break;}}},result:D9};var lr1=new C1,sr1,Ni1,Ai1,Wn4,Bn5,Hn4={point:D9,lineStart:function(){Hn4.point=Le3;},lineEnd:function(){sr1&&zi1(Ni1,Ai1),Hn4.point=D9;},polygonStart:function(){sr1=!0;},polygonEnd:function(){sr1=null;},result:function(){var n=+lr1;return lr1=new C1,n;}};function Le3(n,t){Hn4.point=zi1,Ni1=Wn4=n,Ai1=Bn5=t;}function zi1(n,t){Wn4-=n,Bn5-=t,lr1.add(H12(Wn4*Wn4+Bn5*Bn5)),Wn4=n,Bn5=t;}let Li1,Ct5,Ci1,qi1;class Ii1{constructor(t){this._append=t==null?xi2:Ce4(t),this._radius=4.5,this._="";}pointRadius(t){return this._radius=+t,this;}polygonStart(){this._line=0;}polygonEnd(){this._line=NaN;}lineStart(){this._point=0;}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN;}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break;}case 1:{this._append`L${t},${i}`;break;}default:{if(this._append`M${t},${i}`,this._radius!==Ci1||this._append!==Ct5){const r=this._radius,e=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ci1=r,Ct5=this._append,qi1=this._,this._=e;}this._+=qi1;break;}}}result(){const t=this._;return this._="",t.length?t:null;}}function xi2(n){let t=1;this._+=n[0];for(const i=n.length;t<i;++t)this._+=arguments[t]+n[t];}function Ce4(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return xi2;if(t!==Li1){const i=10**t;Li1=t,Ct5=function(e){let o=1;this._+=e[0];for(const a=e.length;o<a;++o)this._+=Math.round(arguments[o]*i)/i+e[o];};}return Ct5;}function qe3(n,t){let i=3,r=4.5,e,o;function a(u){return u&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),an7(u,e(o))),o.result();}return a.area=function(u){return an7(u,e(En5)),En5.result();},a.measure=function(u){return an7(u,e(Hn4)),Hn4.result();},a.bounds=function(u){return an7(u,e(At6)),At6.result();},a.centroid=function(u){return an7(u,e(un7)),un7.result();},a.projection=function(u){return arguments.length?(e=u==null?(n=null,Dn3):(n=u).stream,a):n;},a.context=function(u){return arguments.length?(o=u==null?(t=null,new Ii1(i)):new mi2(t=u),typeof r!="function"&&o.pointRadius(r),a):t;},a.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(o.pointRadius(+u),+u),a):r;},a.digits=function(u){if(!arguments.length)return i;if(u==null)i=null;else{const f=Math.floor(u);if(!(f>=0))throw new RangeError(`invalid digits: ${u}`);i=f;}return t===null&&(o=new Ii1(i)),a;},a.projection(n).digits(i).context(t);}function kn4(n){return function(t){var i=new pr1;for(var r in n)i[r]=n[r];return i.stream=t,i;};}function pr1(){}pr1.prototype={constructor:pr1,point:function(n,t){this.stream.point(n,t);},sphere:function(){this.stream.sphere();},lineStart:function(){this.stream.lineStart();},lineEnd:function(){this.stream.lineEnd();},polygonStart:function(){this.stream.polygonStart();},polygonEnd:function(){this.stream.polygonEnd();}};function gr(n,t,i){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),an7(i,n.stream(At6)),t(At6.result()),r!=null&&n.clipExtent(r),n;}function qt6(n,t,i){return gr(n,function(r){var e=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(e/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),u=+t[0][0]+(e-a*(r[1][0]+r[0][0]))/2,f=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;n.scale(150*a).translate([u,f]);},i);}function hr1(n,t,i){return qt6(n,[[0,0],t],i);}function vr(n,t,i){return gr(n,function(r){var e=+t,o=e/(r[1][0]-r[0][0]),a=(e-o*(r[1][0]+r[0][0]))/2,u=-o*r[0][1];n.scale(150*o).translate([a,u]);},i);}function dr(n,t,i){return gr(n,function(r){var e=+t,o=e/(r[1][1]-r[0][1]),a=-o*r[0][0],u=(e-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([a,u]);},i);}var Ti1=16,xe4=$12(30*N16);function Fi(n,t){return+t?Fe5(n,t):Te4(n);}function Te4(n){return kn4({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1]);}});}function Fe5(n,t){function i(r,e,o,a,u,f,p,c,s,l,g,h,y,S){var P=p-r,M=c-e,v=P*P+M*M;if(v>4*t&&y--){var d=a+l,R=u+g,A=f+h,I=H12(d*d+R*R+A*A),x=K14(A/=I),T=C14(C14(A)-1)<m5||C14(o-s)<m5?(o+s)/2:J14(R,d),X=n(T,x),z=X[0],_=X[1],W=z-r,F=_-e,E=M*W-P*F;(E*E/v>t||C14((P*W+M*F)/v-.5)>.3||a*l+u*g+f*h<xe4)&&(i(r,e,o,a,u,f,z,_,T,d/=I,R/=I,A,y,S),S.point(z,_),i(z,_,T,d,R,A,p,c,s,l,g,h,y,S));}}return function(r){var e,o,a,u,f,p,c,s,l,g,h,y,S={point:P,lineStart:M,lineEnd:d,polygonStart:function(){r.polygonStart(),S.lineStart=R;},polygonEnd:function(){r.polygonEnd(),S.lineStart=M;}};function P(x,T){x=n(x,T),r.point(x[0],x[1]);}function M(){s=NaN,S.point=v,r.lineStart();}function v(x,T){var X=wn9([x,T]),z=n(x,T);i(s,l,c,g,h,y,s=z[0],l=z[1],c=x,g=X[0],h=X[1],y=X[2],Ti1,r),r.point(s,l);}function d(){S.point=P,r.lineEnd();}function R(){M(),S.point=A,S.lineEnd=I;}function A(x,T){v(e=x,T),o=s,a=l,u=g,f=h,p=y,S.point=v;}function I(){i(s,l,c,g,h,y,o,a,e,u,f,p,Ti1,r),S.lineEnd=d,d();}return S;};}var Ye4=kn4({point:function(n,t){this.stream.point(n*N16,t*N16);}});function Xe4(n){return kn4({point:function(t,i){var r=n(t,i);return this.stream.point(r[0],r[1]);}});}function De3(n,t,i,r,e){function o(a,u){return a*=r,u*=e,[t+n*a,i-n*u];}return o.invert=function(a,u){return[(a-t)/n*r,(i-u)/n*e];},o;}function Yi(n,t,i,r,e,o){if(!o)return De3(n,t,i,r,e);var a=$12(o),u=w12(o),f=a*n,p=u*n,c=a/n,s=u/n,l=(u*i-a*t)/n,g=(u*t+a*i)/n;function h(y,S){return y*=r,S*=e,[f*y-p*S+t,i-p*y-f*S];}return h.invert=function(y,S){return[r*(c*y-s*S+l),e*(g-s*y-c*S)];},h;}function pn6(n){return Er2(function(){return n;})();}function Er2(n){var t,i=150,r=480,e=250,o=0,a=0,u=0,f=0,p=0,c,s=0,l=1,g=1,h=null,y=_t4,S=null,P,M,v,d=Dn3,R=.5,A,I,x,T,X;function z(E){return x(E[0]*N16,E[1]*N16);}function _(E){return E=x.invert(E[0],E[1]),E&&[E[0]*Y14,E[1]*Y14];}z.stream=function(E){return T&&X===E?T:T=Ye4(Xe4(c)(y(A(d(X=E)))));},z.preclip=function(E){return arguments.length?(y=E,h=void 0,F()):y;},z.postclip=function(E){return arguments.length?(d=E,S=P=M=v=null,F()):d;},z.clipAngle=function(E){return arguments.length?(y=+E?ui3(h=E*N16):(h=null,_t4),F()):h*Y14;},z.clipExtent=function(E){return arguments.length?(d=E==null?(S=P=M=v=null,Dn3):wt4(S=+E[0][0],P=+E[0][1],M=+E[1][0],v=+E[1][1]),F()):S==null?null:[[S,P],[M,v]];},z.scale=function(E){return arguments.length?(i=+E,W()):i;},z.translate=function(E){return arguments.length?(r=+E[0],e=+E[1],W()):[r,e];},z.center=function(E){return arguments.length?(o=E[0]%360*N16,a=E[1]%360*N16,W()):[o*Y14,a*Y14];},z.rotate=function(E){return arguments.length?(u=E[0]%360*N16,f=E[1]%360*N16,p=E.length>2?E[2]%360*N16:0,W()):[u*Y14,f*Y14,p*Y14];},z.angle=function(E){return arguments.length?(s=E%360*N16,W()):s*Y14;},z.reflectX=function(E){return arguments.length?(l=E?-1:1,W()):l<0;},z.reflectY=function(E){return arguments.length?(g=E?-1:1,W()):g<0;},z.precision=function(E){return arguments.length?(A=Fi(I,R=E*E),F()):H12(R);},z.fitExtent=function(E,q){return qt6(z,E,q);},z.fitSize=function(E,q){return hr1(z,E,q);},z.fitWidth=function(E,q){return vr(z,E,q);},z.fitHeight=function(E,q){return dr(z,E,q);};function W(){var E=Yi(i,0,0,l,g,s).apply(null,t(o,a)),q=Yi(i,r-E[0],e-E[1],l,g,s);return c=Vt5(u,f,p),I=Kt5(t,q),x=Kt5(c,I),A=Fi(I,R),F();}function F(){return T=X=null,z;}return function(){return t=n.apply(this,arguments),z.invert=t.invert&&_,W();};}function Sr2(n){var t=0,i=L19/3,r=Er2(n),e=r(t,i);return e.parallels=function(o){return arguments.length?r(t=o[0]*N16,i=o[1]*N16):[t*Y14,i*Y14];},e;}function Ge3(n){var t=$12(n);function i(r,e){return[r*t,w12(e)/t];}return i.invert=function(r,e){return[r/t,K14(e*t)];},i;}function Xi(n,t){var i=w12(n),r=(i+w12(t))/2;if(C14(r)<m5)return Ge3(n);var e=1+i*(2*r-i),o=H12(e)/r;function a(u,f){var p=H12(e-2*r*w12(f))/r;return[p*w12(u*=r),o-p*$12(u)];}return a.invert=function(u,f){var p=o-f,c=J14(u,C14(p))*on7(p);return p*r<0&&(c-=L19*on7(u)*on7(p)),[c/r,K14((e-(u*u+p*p)*r*r)/(2*r))];},a;}function It4(){return Sr2(Xi).scale(155.424).center([0,33.6442]);}function Di1(){return It4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]);}function Oe1(n){var t=n.length;return{point:function(i,r){for(var e=-1;++e<t;)n[e].point(i,r);},sphere:function(){for(var i=-1;++i<t;)n[i].sphere();},lineStart:function(){for(var i=-1;++i<t;)n[i].lineStart();},lineEnd:function(){for(var i=-1;++i<t;)n[i].lineEnd();},polygonStart:function(){for(var i=-1;++i<t;)n[i].polygonStart();},polygonEnd:function(){for(var i=-1;++i<t;)n[i].polygonEnd();}};}function Ze3(){var n,t,i=Di1(),r,e=It4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=It4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,f,p={point:function(l,g){f=[l,g];}};function c(l){var g=l[0],h=l[1];return f=null,(r.point(g,h),f)||(o.point(g,h),f)||(u.point(g,h),f);}c.invert=function(l){var g=i.scale(),h=i.translate(),y=(l[0]-h[0])/g,S=(l[1]-h[1])/g;return(S>=.12&&S<.234&&y>=-.425&&y<-.214?e:S>=.166&&S<.234&&y>=-.214&&y<-.115?a:i).invert(l);},c.stream=function(l){return n&&t===l?n:n=Oe1([i.stream(t=l),e.stream(l),a.stream(l)]);},c.precision=function(l){return arguments.length?(i.precision(l),e.precision(l),a.precision(l),s()):i.precision();},c.scale=function(l){return arguments.length?(i.scale(l),e.scale(l*.35),a.scale(l),c.translate(i.translate())):i.scale();},c.translate=function(l){if(!arguments.length)return i.translate();var g=i.scale(),h=+l[0],y=+l[1];return r=i.translate(l).clipExtent([[h-.455*g,y-.238*g],[h+.455*g,y+.238*g]]).stream(p),o=e.translate([h-.307*g,y+.201*g]).clipExtent([[h-.425*g+m5,y+.12*g+m5],[h-.214*g-m5,y+.234*g-m5]]).stream(p),u=a.translate([h-.205*g,y+.212*g]).clipExtent([[h-.214*g+m5,y+.166*g+m5],[h-.115*g-m5,y+.234*g-m5]]).stream(p),s();},c.fitExtent=function(l,g){return qt6(c,l,g);},c.fitSize=function(l,g){return hr1(c,l,g);},c.fitWidth=function(l,g){return vr(c,l,g);},c.fitHeight=function(l,g){return dr(c,l,g);};function s(){return n=t=null,c;}return c.scale(1070);}function Gi1(n){return function(t,i){var r=$12(t),e=$12(i),o=n(r*e);return o===Infinity?[2,0]:[o*e*w12(t),o*w12(i)];};}function Un4(n){return function(t,i){var r=H12(t*t+i*i),e=n(r),o=w12(e),a=$12(e);return[J14(t*o,r*a),K14(r&&i*o/r)];};}var yr1=Gi1(function(n){return H12(2/(1+n));});yr1.invert=Un4(function(n){return 2*K14(n/2);});function We4(){return pn6(yr1).scale(124.75).clipAngle(180-.001);}var wr2=Gi1(function(n){return(n=Lr2(n))&&n/w12(n);});wr2.invert=Un4(function(n){return n;});function Be3(){return pn6(wr2).scale(79.4188).clipAngle(180-.001);}function Jn4(n,t){return[n,rt7(Xt6((O14+t)/2))];}Jn4.invert=function(n,t){return[n,2*mn6(zr2(t))-O14];};function He4(){return Oi1(Jn4).scale(961/U16);}function Oi1(n){var t=pn6(n),i=t.center,r=t.scale,e=t.translate,o=t.clipExtent,a=null,u,f,p;t.scale=function(s){return arguments.length?(r(s),c()):r();},t.translate=function(s){return arguments.length?(e(s),c()):e();},t.center=function(s){return arguments.length?(i(s),c()):i();},t.clipExtent=function(s){return arguments.length?(s==null?a=u=f=p=null:(a=+s[0][0],u=+s[0][1],f=+s[1][0],p=+s[1][1]),c()):a==null?null:[[a,u],[f,p]];};function c(){var s=L19*r(),l=t(_r(t.rotate()).invert([0,0]));return o(a==null?[[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]]:n===Jn4?[[Math.max(l[0]-s,a),u],[Math.min(l[0]+s,f),p]]:[[a,Math.max(l[1]-s,u)],[f,Math.min(l[1]+s,p)]]);}return c();}function xt6(n){return Xt6((O14+n)/2);}function Zi(n,t){var i=$12(n),r=n===t?w12(n):rt7(i/$12(t))/rt7(xt6(t)/xt6(n)),e=i*Yt6(xt6(n),r)/r;if(!r)return Jn4;function o(a,u){e>0?u<-O14+m5&&(u=-O14+m5):u>O14-m5&&(u=O14-m5);var f=e/Yt6(xt6(u),r);return[f*w12(r*a),e-f*$12(r*a)];}return o.invert=function(a,u){var f=e-u,p=on7(r)*H12(a*a+f*f),c=J14(a,C14(f))*on7(f);return f*r<0&&(c-=L19*on7(a)*on7(f)),[c/r,2*mn6(Yt6(e/p,1/r))-O14];},o;}function ke4(){return Sr2(Zi).scale(109.5).parallels([30,30]);}function Kn3(n,t){return[n,t];}Kn3.invert=Kn3;function Ue4(){return pn6(Kn3).scale(152.63);}function Wi(n,t){var i=$12(n),r=n===t?w12(n):(i-$12(t))/(t-n),e=i/r+n;if(C14(r)<m5)return Kn3;function o(a,u){var f=e-u,p=r*a;return[f*w12(p),e-f*$12(p)];}return o.invert=function(a,u){var f=e-u,p=J14(a,C14(f))*on7(f);return f*r<0&&(p-=L19*on7(a)*on7(f)),[p/r,e-on7(r)*H12(a*a+f*f)];},o;}function Je4(){return Sr2(Wi).scale(131.154).center([0,13.9389]);}var Qn3=1.340264,Vn3=-.081106,jn5=893e-6,_n3=.003796,Tt6=H12(3)/2,Ke4=12;function Pr2(n,t){var i=K14(Tt6*w12(t)),r=i*i,e=r*r*r;return[n*$12(i)/(Tt6*(Qn3+3*Vn3*r+e*(7*jn5+9*_n3*r))),i*(Qn3+Vn3*r+e*(jn5+_n3*r))];}Pr2.invert=function(n,t){for(var i=t,r=i*i,e=r*r*r,o=0,a,u,f;o<Ke4&&!(u=i*(Qn3+Vn3*r+e*(jn5+_n3*r))-t,f=Qn3+3*Vn3*r+e*(7*jn5+9*_n3*r),i-=a=u/f,r=i*i,e=r*r*r,C14(a)<xn7);++o);return[Tt6*n*(Qn3+3*Vn3*r+e*(7*jn5+9*_n3*r))/$12(i),K14(w12(i)/Tt6)];};function Qe6(){return pn6(Pr2).scale(177.158);}function Rr1(n,t){var i=$12(t),r=$12(n)*i;return[i*w12(n)/r,w12(t)/r];}Rr1.invert=Un4(mn6);function Ve3(){return pn6(Rr1).scale(144.049).clipAngle(60);}function je5(){var n=1,t=0,i=0,r=1,e=1,o=0,a,u,f=null,p,c,s,l=1,g=1,h=kn4({point:function(d,R){var A=v([d,R]);this.stream.point(A[0],A[1]);}}),y=Dn3,S,P;function M(){return l=n*r,g=n*e,S=P=null,v;}function v(d){var R=d[0]*l,A=d[1]*g;if(o){var I=A*a-R*u;R=R*a+A*u,A=I;}return[R+t,A+i];}return v.invert=function(d){var R=d[0]-t,A=d[1]-i;if(o){var I=A*a+R*u;R=R*a-A*u,A=I;}return[R/l,A/g];},v.stream=function(d){return S&&P===d?S:S=h(y(P=d));},v.postclip=function(d){return arguments.length?(y=d,f=p=c=s=null,M()):y;},v.clipExtent=function(d){return arguments.length?(y=d==null?(f=p=c=s=null,Dn3):wt4(f=+d[0][0],p=+d[0][1],c=+d[1][0],s=+d[1][1]),M()):f==null?null:[[f,p],[c,s]];},v.scale=function(d){return arguments.length?(n=+d,M()):n;},v.translate=function(d){return arguments.length?(t=+d[0],i=+d[1],M()):[t,i];},v.angle=function(d){return arguments.length?(o=d%360*N16,u=w12(o),a=$12(o),M()):o*Y14;},v.reflectX=function(d){return arguments.length?(r=d?-1:1,M()):r<0;},v.reflectY=function(d){return arguments.length?(e=d?-1:1,M()):e<0;},v.fitExtent=function(d,R){return qt6(v,d,R);},v.fitSize=function(d,R){return hr1(v,d,R);},v.fitWidth=function(d,R){return vr(v,d,R);},v.fitHeight=function(d,R){return dr(v,d,R);},v;}function Mr2(n,t){var i=t*t,r=i*i;return[n*(.8707-.131979*i+r*(-.013791+r*(.003971*i-.001529*r))),t*(1.007226+i*(.015085+r*(-.044475+.028874*i-.005916*r)))];}Mr2.invert=function(n,t){var i=t,r=25,e;do{var o=i*i,a=o*o;i-=e=(i*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)));}while(C14(e)>m5&&--r>0)return[n/(.8707+(o=i*i)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),i];};function _e4(){return pn6(Mr2).scale(175.295);}function $r2(n,t){return[$12(t)*w12(n),w12(t)];}$r2.invert=Un4(K14);function be5(){return pn6($r2).scale(249.5).clipAngle(90+m5);}function mr1(n,t){var i=$12(t),r=1+$12(n)*i;return[i*w12(n)/r,w12(t)/r];}mr1.invert=Un4(function(n){return 2*mn6(n);});function no1(){return pn6(mr1).scale(250).clipAngle(142);}function Nr2(n,t){return[rt7(Xt6((O14+t)/2)),-n];}Nr2.invert=function(n,t){return[-t,2*mn6(zr2(n))-O14];};function to1(){var n=Oi1(Nr2),t=n.center,i=n.rotate;return n.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]]);},n.rotate=function(r){return arguments.length?i([r[0],r[1],r.length>2?r[2]+90:90]):(r=i(),[r[0],r[1],r[2]-90]);},i([0,0,90]).scale(159.155);}var d7=Math.abs,y10=Math.atan,V12=Math.atan2,w13=Math.cos,tr2=Math.exp,dr1=Math.floor,Y15=Math.log,fr2=Math.max,X15=Math.min,Fr2=Math.pow,$13=Math.sign||function(r){return r>0?1:r<0?-1:0;},R13=Math.sin,I17=Math.tan,P16=1e-6,Sr3=1e-12,k12=Math.PI,M11=k12/2,C15=k12/4,b9=Math.SQRT1_2,K15=S16(2),x11=S16(k12),rr2=k12*2,W15=180/k12,H13=k12/180;function Kt6(r){return r?r/Math.sin(r):1;}function q18(r){return r>1?M11:r<-1?-M11:Math.asin(r);}function J15(r){return r>1?0:r<-1?k12:Math.acos(r);}function S16(r){return r>0?Math.sqrt(r):0;}function Tt7(r){return r=tr2(2*r),(r-1)/(r+1);}function un8(r){return(tr2(r)-tr2(-r))/2;}function Ee3(r){return(tr2(r)+tr2(-r))/2;}function yt5(r){return Y15(r+S16(r*r+1));}function Ut5(r){return Y15(r+S16(r*r-1));}function $r3(r,n){var e=w13(n),t=Kt6(J15(e*w13(r/=2)));return[2*e*R13(r)*t,R13(n)*t];}$r3.invert=function(r,n){if(r*r+4*n*n>k12*k12+P16)return;var e=r,t=n,u=25;do{var o=R13(e),i=R13(e/2),a=w13(e/2),f=R13(t),c=w13(t),l=R13(2*t),s=f*f,v=c*c,g=i*i,h=1-v*a*a,m=h?J15(c*a)*S16(E=1/h):E=0,E,z=2*m*c*i-r,G=m*f-n,F=E*(v*g+m*c*a*s),p=E*(.5*o*l-m*2*f*i),N=E*.25*(l*i-m*f*v*o),Q=E*(s*a+m*g*c),T=p*N-Q*F;if(!T)break;var O=(G*p-z*Q)/T,U=(z*N-G*F)/T;e-=O,t-=U;}while((d7(O)>P16||d7(U)>P16)&&--u>0)return[e,t];};function Ir2(r,n){var e=I17(n/2),t=S16(1-e*e),u=1+t*w13(r/=2),o=R13(r)*t/u,i=e/u,a=o*o,f=i*i;return[4/3*o*(3+a-3*f),4/3*i*(3+3*a-f)];}Ir2.invert=function(r,n){if(r*=3/8,n*=3/8,!r&&d7(n)>1)return null;var e=r*r,t=n*n,u=1+e+t,o=S16((u-S16(u*u-4*n*n))/2),i=q18(o)/3,a=o?Ut5(d7(n/o))/3:yt5(d7(r))/3,f=w13(i),c=Ee3(a),l=c*c-f*f;return[$13(r)*2*V12(un8(a)*f,.25-l),$13(n)*2*V12(c*R13(i),.25+l)];};var an8=S16(8),Zt7=Y15(1+K15);function cn7(r,n){var e=d7(n);return e<C15?[r,Y15(I17(C15+n/2))]:[r*w13(e)*(2*K15-1/R13(e)),$13(n)*(2*K15*(e-C15)-Y15(I17(e/2)))];}cn7.invert=function(r,n){if((o=d7(n))<Zt7)return[r,2*y10(tr2(n))-M11];var e=C15,t=25,u,o;do{var i=w13(e/2),a=I17(e/2);e-=u=(an8*(e-C15)-Y15(a)-o)/(an8-i*i/(2*a));}while(d7(u)>Sr3&&--t>0)return[r/(w13(e)*(an8-1/R13(e))),$13(n)*e];};function Ge4(r,n){return[r*w13(n)/w13(n/=2),2*R13(n)];}Ge4.invert=function(r,n){var e=2*q18(n/2);return[r*w13(e/2)/w13(e),e];};function Vr3(r,n,e){var t=100,u,o,i;e=e===void 0?0:+e,n=+n;do o=r(e),i=r(e+P16),o===i&&(i=o+P16),e-=u=-1*P16*(o-n)/(o-i);while(t-- >0&&d7(u)>P16)return t<0?NaN:e;}function Fe6(r,n){var e=r*R13(n),t=30,u;do n-=u=(n+R13(n)-e)/(1+w13(n));while(d7(u)>P16&&--t>0)return n/2;}function ln8(r,n,e){function t(u,o){return[r*u*w13(o=Fe6(e,o)),n*R13(o)];}return t.invert=function(u,o){return o=q18(o/n),[u/(r*w13(o)),q18((2*o+R13(2*o))/e)];},t;}var gr1=ln8(K15/M11,K15,k12);function jt6(){return pn6(gr1).scale(169.529);}var Wr3=2.00276,qe4=1.11072;function Qr3(r,n){var e=Fe6(k12,n);return[Wr3*r/(1/w13(n)+qe4/w13(e)),(n+K15*R13(e))/Wr3];}Qr3.invert=function(r,n){var e=Wr3*n,t=n<0?-C15:C15,u=25,o,i;do i=e-K15*R13(t),t-=o=(R13(2*t)+2*t-k12*R13(i))/(2*w13(2*t)+2+k12*w13(i)*K15*w13(t));while(d7(o)>P16&&--u>0)return i=e-K15*R13(t),[r*(1/w13(i)+qe4/w13(t))/Wr3,i];};function lr2(r,n){return[r*w13(n),n];}lr2.invert=function(r,n){return[r/w13(n),n];};ln8(1,4/k12,k12);function or2(r,n){var e=S16(1-R13(n));return[2/x11*r*e,x11*(1-e)];}or2.invert=function(r,n){var e=(e=n/x11-1)*e;return[e>0?r*S16(k12/e)/2:0,q18(1-e)];};var Kr3=S16(3);function gn6(r,n){return[Kr3*r*(2*w13(2*n/3)-1)/x11,Kr3*x11*R13(n/3)];}gn6.invert=function(r,n){var e=3*q18(n/(Kr3*x11));return[x11*r/(Kr3*(2*w13(2*e/3)-1)),e];};function wn10(r){var n=w13(r);function e(t,u){return[t*n,R13(u)/n];}return e.invert=function(t,u){return[t/n,q18(u*n)];},e;}function Rn8(r,n){var e=S16(8/(3*k12));return[e*r*(1-d7(n)/k12),e*n];}Rn8.invert=function(r,n){var e=S16(8/(3*k12)),t=n/e;return[r/(e*(1-d7(t)/k12)),t];};function kn5(r,n){var e=S16(4-3*R13(d7(n)));return[2/S16(6*k12)*r*e,$13(n)*S16(2*k12/3)*(2-e)];}kn5.invert=function(r,n){var e=2-d7(n)/S16(2*k12/3);return[r*S16(6*k12)/(2*e),$13(n)*q18((4-e*e)/3)];};function hn6(r,n){var e=S16(k12*(4+k12));return[2/e*r*(1+S16(1-4*n*n/(k12*k12))),4/e*n];}hn6.invert=function(r,n){var e=S16(k12*(4+k12))/2;return[r*e/(1+S16(1-n*n*(4+k12)/(4*k12))),n*e/2];};function mn7(r,n){var e=(2+M11)*R13(n);n/=2;for(var t=0,u=Infinity;t<10&&d7(u)>P16;t++){var o=w13(n);n-=u=(n+R13(n)*(o+2)-e)/(2*o*(1+o));}return[2/S16(k12*(4+k12))*r*(1+w13(n)),2*S16(k12/(4+k12))*R13(n)];}mn7.invert=function(r,n){var e=n*S16((4+k12)/k12)/2,t=q18(e),u=w13(t);return[r/(2/S16(k12*(4+k12))*(1+u)),q18((t+e*(u+2))/(2+M11))];};function Sn7(r,n){return[r*(1+w13(n))/S16(2+k12),2*n/S16(2+k12)];}Sn7.invert=function(r,n){var e=S16(2+k12),t=n*e/2;return[e*r/(1+w13(t)),t];};function dn7(r,n){for(var e=(1+M11)*R13(n),t=0,u=Infinity;t<10&&d7(u)>P16;t++)n-=u=(n+R13(n)-e)/(1+w13(n));return e=S16(2+k12),[r*(1+w13(n))/e,2*n/e];}dn7.invert=function(r,n){var e=1+M11,t=S16(e/2);return[r*2*t/(1+w13(n*=t)),q18((n+R13(n))/e)];};var Tr2=3+2*K15;function En6(r,n){var e=R13(r/=2),t=w13(r),u=S16(w13(n)),o=w13(n/=2),i=R13(n)/(o+K15*t*u),a=S16(2/(1+i*i)),f=S16((K15*o+(t+e)*u)/(K15*o+(t-e)*u));return[Tr2*(a*(f-1/f)-2*Y15(f)),Tr2*(a*i*(f+1/f)-2*y10(i))];}En6.invert=function(r,n){if(!(o=Ir2.invert(r/1.2,n*1.065)))return null;var e=o[0],t=o[1],u=20,o;r/=Tr2,n/=Tr2;do{var i=e/2,a=t/2,f=R13(i),c=w13(i),l=R13(a),s=w13(a),v=w13(t),g=S16(v),h=l/(s+K15*c*g),m=h*h,E=S16(2/(1+m)),z=K15*s+(c+f)*g,G=K15*s+(c-f)*g,F=z/G,p=S16(F),N=p-1/p,Q=p+1/p,T=E*N-2*Y15(p)-r,O=E*h*Q-2*y10(h)-n,U=l&&b9*g*f*m/l,_=(K15*c*s+g)/(2*(s+K15*c*g)*(s+K15*c*g)*g),nr=-.5*h*E*E*E,kr=nr*U,hr=nr*_,D=(D=2*s+K15*g*(c-f))*D*p,B=(K15*c*s*g+v)/D,er=-(K15*f*l)/(g*D),ir=N*kr-2*B/p+E*(B+B/F),ar=N*hr-2*er/p+E*(er+er/F),cr=h*Q*kr-2*U/(1+m)+E*Q*U+E*h*(B-B/F),sr=h*Q*hr-2*_/(1+m)+E*Q*_+E*h*(er-er/F),vr=ar*cr-sr*ir;if(!vr)break;var mr=(O*ar-T*sr)/vr,zr=(T*cr-O*ir)/vr;e-=mr,t=fr2(-M11,X15(M11,t-zr));}while((d7(mr)>P16||d7(zr)>P16)&&--u>0)return d7(d7(t)-M11)<P16?[0,t]:u&&[e,t];};var yr2=w13(35*H13);function Pn6(r,n){var e=I17(n/2);return[r*yr2*S16(1-e*e),(1+yr2)*e];}Pn6.invert=function(r,n){var e=n/(1+yr2);return[r&&r/(yr2*S16(1-e*e)),2*y10(e)];};function Mn7(r,n){var e=n/2,t=w13(e);return[2*r/x11*w13(n)*t*t,x11*I17(e)];}Mn7.invert=function(r,n){var e=y10(n/x11),t=w13(e),u=2*e;return[r*x11/2/(w13(u)*t*t),u];};function Or3(r,n,e,t,u,o,i,a){arguments.length<8&&(a=0);function f(c,l){if(!l)return[r*c/k12,0];var s=l*l,v=r+s*(n+s*(e+s*t)),g=l*(u-1+s*(o-a+s*i)),h=(v*v+g*g)/(2*g),m=c*q18(v/h)/k12;return[h*R13(m),l*(1+s*a)+h*(1-w13(m))];}return f.invert=function(c,l){var s=k12*c/r,v=l,g,h,m=50;do{var E=v*v,z=r+E*(n+E*(e+E*t)),G=v*(u-1+E*(o-a+E*i)),F=z*z+G*G,p=2*G,N=F/p,Q=N*N,T=q18(z/N)/k12,O=s*T,U=z*z,_=(2*n+E*(4*e+E*6*t))*v,nr=u+E*(3*o+E*5*i),kr=2*(z*_+G*(nr-1)),hr=2*(nr-1),D=(kr*p-F*hr)/(p*p),B=w13(O),er=R13(O),ir=N*B,ar=N*er,cr=s/k12*(1/S16(1-U/Q))*(_*N-z*D)/Q,sr=ar-c,vr=v*(1+E*a)+N-ir-l,mr=D*er+ir*cr,zr=ir*T,ke=1+D-(D*B-ar*cr),he=ar*T,nn=mr*he-ke*zr;if(!nn)break;s-=g=(vr*mr-sr*ke)/nn,v-=h=(sr*he-vr*zr)/nn;}while((d7(g)>P16||d7(h)>P16)&&--m>0)return[s,v];},f;}Or3(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);Or3(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);Or3(5/6*k12,-.62636,-.0344,0,1.3493,-.05524,0,.045);function zn4(r,n){var e=r*r,t=n*n;return[r*(1-.162388*t)*(.87-952426e-9*e*e),n*(1+t/12)];}zn4.invert=function(r,n){var e=r,t=n,u=50,o;do{var i=t*t;t-=o=(t*(1+i/12)-n)/(1+i/4);}while(d7(o)>P16&&--u>0)u=50,r/=1-.162388*i;do{var a=(a=e*e)*a;e-=o=(e*(.87-952426e-9*a)-r)/(.87-.00476213*a);}while(d7(o)>P16&&--u>0)return[e,t];};Or3(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Yr3(r,n){var e=$13(r),t=$13(n),u=w13(n),o=w13(r)*u,i=R13(r)*u,a=R13(t*n);r=d7(V12(i,a)),n=q18(o),d7(r-M11)>P16&&(r%=M11);var f=p0(r>k12/4?M11-r:r,n);return r>k12/4&&(a=f[0],f[0]=-f[1],f[1]=-a),f[0]*=e,f[1]*=-t,f;}Yr3.invert=function(r,n){d7(r)>1&&(r=$13(r)*2-r),d7(n)>1&&(n=$13(n)*2-n);var e=$13(r),t=$13(n),u=-e*r,o=-t*n,i=o/u<1,a=F0(i?o:u,i?u:o),f=a[0],c=a[1],l=w13(c);return i&&(f=-M11-f),[e*(V12(R13(f)*l,-R13(c))+k12),t*q18(w13(f)*l)];};function p0(r,n){if(n===M11)return[0,0];var e=R13(n),t=e*e,u=t*t,o=1+u,i=1+3*u,a=1-u,f=q18(1/S16(o)),c=a+t*o*f,l=(1-e)/c,s=S16(l),v=l*o,g=S16(v),h=s*a,m,E;if(r===0)return[0,-(h+t*g)];var z=w13(n),G=1/z,F=2*e*z,p=(-3*t+f*i)*F,N=(-c*z-(1-e)*p)/(c*c),Q=.5*N/s,T=a*Q-2*t*s*F,O=t*o*N+l*i*F,U=-G*F,_=-G*O,nr=-2*G*T,kr=4*r/k12,hr;if(r>.222*k12||n<k12/4&&r>.175*k12){if(m=(h+t*S16(v*(1+u)-h*h))/(1+u),r>k12/4)return[m,m];var D=m,B=.5*m;m=.5*(B+D),E=50;do{var er=S16(v-m*m),ir=m*(nr+U*er)+_*q18(m/g)-kr;if(!ir)break;ir<0?B=m:D=m,m=.5*(B+D);}while(d7(D-B)>P16&&--E>0)}else{m=P16,E=25;do{var ar=m*m,cr=S16(v-ar),sr=nr+U*cr,vr=m*sr+_*q18(m/g)-kr,mr=sr+(_-U*ar)/cr;m-=hr=cr?vr/mr:0;}while(d7(hr)>P16&&--E>0)}return[m,-h-t*S16(v-m*m)];}function F0(r,n){for(var e=0,t=1,u=.5,o=50;;){var i=u*u,a=S16(u),f=q18(1/S16(1+i)),c=1-i+u*(1+i)*f,l=(1-a)/c,s=S16(l),v=l*(1+i),g=s*(1-i),h=v-r*r,m=S16(h),E=n+g+u*m;if(d7(t-e)<Sr3||--o===0||E===0)break;E>0?e=u:t=u,u=.5*(e+t);}if(!o)return null;var z=q18(a),G=w13(z),F=1/G,p=2*a*G,N=(-3*u+f*(1+3*i))*p,Q=(-c*G-(1-a)*N)/(c*c),T=.5*Q/s,O=(1-i)*T-2*u*s*p,U=-2*F*O,_=-F*p,nr=-F*(u*(1+i)*Q+l*(1+3*i)*p);return[k12/4*(r*(U+_*m)+nr*q18(r/S16(v))),z];}function A0(r,n,e){var t,u,o;return r?(t=Gn5(r,e),n?(u=Gn5(n,1-e),o=u[1]*u[1]+e*t[0]*t[0]*u[0]*u[0],[[t[0]*u[2]/o,t[1]*t[2]*u[0]*u[1]/o],[t[1]*u[1]/o,-t[0]*t[2]*u[0]*u[2]/o],[t[2]*u[1]*u[2]/o,-e*t[0]*t[1]*u[0]/o]]):[[t[0],0],[t[1],0],[t[2],0]]):(u=Gn5(n,1-e),[[0,u[0]/u[1]],[1/u[1],0],[u[2]/u[1],0]]);}function Gn5(r,n){var e,t,u,o,i;if(n<P16)return o=R13(r),t=w13(r),e=n*(r-o*t)/4,[o-e*t,t+e*o,1-n*o*o/2,r-e];if(n>=1-P16)return e=(1-n)/4,t=Ee3(r),o=Tt7(r),u=1/t,i=t*un8(r),[o+e*(i-r)/(t*t),u-e*o*u*(i-r),u+e*o*u*(i+r),2*y10(tr2(r))-M11+e*(i-r)/t];var a=[1,0,0,0,0,0,0,0,0],f=[S16(n),0,0,0,0,0,0,0,0],c=0;for(t=S16(1-n),i=1;d7(f[c]/a[c])>P16&&c<8;)e=a[c++],f[c]=(e-t)/2,a[c]=(e+t)/2,t=S16(e*t),i*=2;u=i*a[c]*r;do o=f[c]*R13(t=u)/a[c],u=(q18(o)+u)/2;while(--c)return[R13(u),o=w13(u),o/w13(u-t),u];}function N0(r,n,e){var t=d7(r),u=d7(n),o=un8(u);if(t){var i=1/R13(t),a=1/(I17(t)*I17(t)),f=-(a+e*(o*o*i*i)-1+e),c=(e-1)*a,l=(-f+S16(f*f-4*c))/2;return[qr3(y10(1/S16(l)),e)*$13(r),qr3(y10(S16((l/a-1)/e)),1-e)*$13(n)];}return[0,qr3(y10(o),1-e)*$13(n)];}function qr3(r,n){if(!n)return r;if(n===1)return Y15(I17(r/2+C15));for(var e=1,t=S16(1-n),u=S16(n),o=0;d7(u)>P16;o++){if(r%k12){var i=y10(t*I17(r)/e);i<0&&(i+=k12),r+=i+~~(r/k12)*k12;}else r+=r;u=(e+t)/2,t=S16(e*t),u=((e=u)-t)/2;}return r/(Fr2(2,o)*e);}function Jr3(r,n){var e=(K15-1)/(K15+1),t=S16(1-e*e),u=qr3(M11,t*t),o=-1,i=Y15(I17(k12/4+d7(n)/2)),a=tr2(o*i)/S16(e),f=$0(a*w13(o*r),a*R13(o*r)),c=N0(f[0],f[1],t*t);return[-c[1],(n>=0?1:-1)*(.5*u-c[0])];}function $0(r,n){var e=r*r,t=n+1,u=1-e-n*n;return[.5*((r>=0?M11:-M11)-V12(u,2*r)),-.25*Y15(u*u+4*e)+.5*Y15(t*t+e)];}function I0(r,n){var e=n[0]*n[0]+n[1]*n[1];return[(r[0]*n[0]+r[1]*n[1])/e,(r[1]*n[0]-r[0]*n[1])/e];}Jr3.invert=function(r,n){var e=(K15-1)/(K15+1),t=S16(1-e*e),u=qr3(M11,t*t),o=-1,i=A0(.5*u-n,-r,t*t),a=I0(i[0],i[1]),f=V12(a[1],a[0])/o;return[f,2*y10(tr2(.5/o*Y15(e*a[0]*a[0]+e*a[1]*a[1])))-M11];};var W0=3,pn7=q18(1-1/W0)*W15,Fn5=wn10(0);var Lr3=.7109889596207567,Pr3=.0528035274542;function Zr3(r,n){return n>-Lr3?(r=gr1(r,n),r[1]+=Pr3,r):lr2(r,n);}Zr3.invert=function(r,n){return n>-Lr3?gr1.invert(r,n-Pr3):lr2.invert(r,n);};function Xr3(r,n){return d7(n)>Lr3?(r=gr1(r,n),r[1]-=n>0?Pr3:-Pr3,r):lr2(r,n);}Xr3.invert=function(r,n){return d7(n)>Lr3?gr1.invert(r,n+(n>0?Pr3:-Pr3)):lr2.invert(r,n);};function An8(r,n){return[3/rr2*r*S16(k12*k12/3-n*n),n];}An8.invert=function(r,n){return[rr2/3*r/S16(k12*k12/3-n*n),n];};var Nn7=k12/K15;function $n6(r,n){return[r*(1+S16(w13(n)))/2,n/(w13(n/2)*w13(r/6))];}$n6.invert=function(r,n){var e=d7(r),t=d7(n),u=P16,o=M11;t<Nn7?o*=t/Nn7:u+=6*J15(Nn7/t);for(var i=0;i<25;i++){var a=R13(o),f=S16(w13(o)),c=R13(o/2),l=w13(o/2),s=R13(u/6),v=w13(u/6),g=.5*u*(1+f)-e,h=o/(l*v)-t,m=f?-.25*u*a/f:0,E=.5*(1+f),z=(1+.5*o*c/l)/(l*v),G=o/l*(s/6)/(v*v),F=m*G-z*E,p=(g*G-h*E)/F,N=(h*m-g*z)/F;if(o-=p,u-=N,d7(p)<P16&&d7(N)<P16)break;}return[r<0?-u:u,n<0?-o:o];};function In4(r,n){var e=r*r,t=n*n;return[r*(.975534+t*(-.119161+e*-.0143059+t*-.0547009)),n*(1.00384+e*(.0802894+t*-.02855+e*199025e-9)+t*(.0998909+t*-.0491032))];}In4.invert=function(r,n){var e=$13(r)*k12,t=n/2,u=50;do{var o=e*e,i=t*t,a=e*t,f=e*(.975534+i*(-.119161+o*-.0143059+i*-.0547009))-r,c=t*(1.00384+o*(.0802894+i*-.02855+o*199025e-9)+i*(.0998909+i*-.0491032))-n,l=.975534-i*(.119161+3*o*.0143059+i*.0547009),s=-a*(2*.119161+4*.0547009*i+2*.0143059*o),v=a*(2*.0802894+4*199025e-9*o+2*-.02855*i),g=1.00384+o*(.0802894+199025e-9*o)+i*(3*(.0998909-.02855*o)-5*.0491032*i),h=s*v-g*l,m=(c*s-f*g)/h,E=(f*v-c*l)/h;e-=m,t-=E;}while((d7(m)>P16||d7(E)>P16)&&--u>0)return u&&[e,t];};function Hn5(r,n){return[R13(r)/w13(n),I17(n)*w13(r)];}Hn5.invert=function(r,n){var e=r*r,t=n*n,u=t+1,o=e+u,i=r?b9*S16((o-S16(o*o-4*e))/e):1/S16(u);return[q18(r*i),$13(n)*J15(i)];};function Vn4(r,n){return[r,1.25*Y15(I17(C15+.4*n))];}Vn4.invert=function(r,n){return[r,2.5*y10(tr2(.8*n))-.625*k12];};var Dr3=S16(6),Cr2=S16(7);function Wn5(r,n){var e=q18(7*R13(n)/(3*Dr3));return[Dr3*r*(2*w13(2*e/3)-1)/Cr2,9*R13(e/3)/Cr2];}Wn5.invert=function(r,n){var e=3*q18(n*Cr2/9);return[r*Cr2/(Dr3*(2*w13(2*e/3)-1)),q18(R13(e)*3*Dr3/7)];};function Qn4(r,n){for(var e=(1+b9)*R13(n),t=n,u=0,o;u<25&&!(t-=o=(R13(t/2)+R13(t)-e)/(.5*w13(t/2)+w13(t)),d7(o)<P16);u++);return[r*(1+2*w13(t)/w13(t/2))/(3*K15),2*S16(3)*R13(t/2)/S16(2+K15)];}Qn4.invert=function(r,n){var e=n*S16(2+K15)/(2*S16(3)),t=2*q18(e);return[3*K15*r/(1+2*w13(t)/w13(t/2)),q18((e+R13(t))/(1+b9))];};function Kn4(r,n){for(var e=S16(6/(4+k12)),t=(1+k12/4)*R13(n),u=n/2,o=0,i;o<25&&!(u-=i=(u/2+R13(u)-t)/(.5+w13(u)),d7(i)<P16);o++);return[e*(.5+w13(u))*r/1.5,e*u];}Kn4.invert=function(r,n){var e=S16(6/(4+k12)),t=n/e;return d7(d7(t)-M11)<P16&&(t=t<0?-M11:M11),[1.5*r/(e*(.5+w13(t))),q18((t/2+R13(t))/(1+k12/4))];};function Tn5(r,n){var e=n*n,t=e*e,u=e*t;return[r*(.84719-.13063*e+u*u*(-.04515+.05494*e-.02326*t+.00331*u)),n*(1.01183+t*t*(-.02625+.01926*e-.00396*t))];}Tn5.invert=function(r,n){var e=n,t=25,u,o,i,a;do o=e*e,i=o*o,e-=u=(e*(1.01183+i*i*(-.02625+.01926*o-.00396*i))-n)/(1.01183+i*i*(9*-.02625+11*.01926*o+13*-.00396*i));while(d7(u)>Sr3&&--t>0)return o=e*e,i=o*o,a=o*i,[r/(.84719-.13063*o+a*a*(-.04515+.05494*o-.02326*i+.00331*a)),e];};function yn6(r,n){return[r*(1+w13(n))/2,2*(n-I17(n/2))];}yn6.invert=function(r,n){for(var e=n/2,t=0,u=Infinity;t<10&&d7(u)>P16;++t){var o=w13(n/2);n-=u=(n-I17(n/2)-e)/(1-.5/(o*o));}return[2*r/(1+w13(n)),n];};function Un5(r,n){var e=R13(n),t=w13(n),u=$13(r);if(r===0||d7(n)===M11)return[0,n];if(n===0)return[r,0];if(d7(r)===M11)return[r*t,M11*e];var o=k12/(2*r)-2*r/k12,i=2*n/k12,a=(1-i*i)/(e-i),f=o*o,c=a*a,l=1+f/c,s=1+c/f,v=(o*e/a-o/2)/l,g=(c*e/f+a/2)/s,h=v*v+t*t/l,m=g*g-(c*e*e/f+a*e-1)/s;return[M11*(v+S16(h)*u),M11*(g+S16(m<0?0:m)*$13(-n*o)*u)];}Un5.invert=function(r,n){r/=M11,n/=M11;var e=r*r,t=n*n,u=e+t,o=k12*k12;return[r?(u-1+S16((1-u)*(1-u)+4*e))/(2*r)*M11:0,Vr3(function(i){return u*(k12*R13(i)-2*i)*k12+4*i*i*(n-R13(i))+2*k12*i-o*n;},0)];};var On4=1.0148,Yn4=.23185,Jn5=-.14499,Ln4=.02406,Ho1=On4,Vo1=5*Yn4,Wo1=7*Jn5,Qo1=9*Ln4,Br2=1.790857183;function Zn3(r,n){var e=n*n;return[r,n*(On4+e*e*(Yn4+e*(Jn5+Ln4*e)))];}Zn3.invert=function(r,n){n>Br2?n=Br2:n<-Br2&&(n=-Br2);var e=n,t;do{var u=e*e;e-=t=(e*(On4+u*u*(Yn4+u*(Jn5+Ln4*u)))-n)/(Ho1+u*u*(Vo1+u*(Wo1+Qo1*u)));}while(d7(t)>P16)return[r,e];};function Xn6(r,n){if(d7(n)<P16)return[r,0];var e=I17(n),t=r*R13(n);return[R13(t)/e,n+(1-w13(t))/e];}Xn6.invert=function(r,n){if(d7(n)<P16)return[r,0];var e=r*r+n*n,t=n*.5,u=10,o;do{var i=I17(t),a=1/w13(t),f=e-2*n*t+t*t;t-=o=(i*f+2*(t-n))/(2+f*a*a+2*(t-n)*i);}while(d7(o)>P16&&--u>0)return i=I17(t),[(d7(n)<d7(t+1/i)?q18(r*i):$13(n)*$13(r)*(J15(d7(r*i))+M11))/R13(t),t];};var Lo1=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],br3=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(r){return r.map(function(n){return Lo1[n];});});var at8=2/S16(3);function ct9(r,n){var e=or2(r,n);return[e[0]*at8,e[1]];}ct9.invert=function(r,n){return or2.invert(r/at8,n);};var j17=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];j17.forEach(function(r){r[1]*=1.593415793900743;});function bn4(r,n){var e=X15(18,d7(n)*36/k12),t=dr1(e),u=e-t,o=(s=j17[t])[0],i=s[1],a=(s=j17[++t])[0],f=s[1],c=(s=j17[X15(19,++t)])[0],l=s[1],s;return[r*(a+u*(c-o)/2+u*u*(c-2*a+o)/2),$13(n)*(f+u*(l-i)/2+u*u*(l-2*f+i)/2)];}bn4.invert=function(r,n){var e=n*90,t=X15(18,d7(e/5)),u=fr2(0,dr1(t));do{var o=j17[u][1],i=j17[u+1][1],a=j17[X15(19,u+2)][1],f=a-o,c=a-2*i+o,l=2*(d7(n)-i)/f,s=c/f,v=l*(1-s*l*(1-2*s*l));if(v>=0||u===1){e=(n>=0?5:-5)*(v+t);var g=50,h;do t=X15(18,d7(e)/5),u=dr1(t),v=t-u,o=j17[u][1],i=j17[u+1][1],a=j17[X15(19,u+2)][1],e-=(h=$13(n)*(i+v*(a-o)/2+v*v*(a-2*i+o)/2)-n)*W15;while(d7(h)>Sr3&&--g>0)break;}}while(--u>=0)var m=j17[u][0],E=j17[u+1][0],z=j17[X15(19,u+2)][0];return[r/(E+v*(z-m)/2+v*v*(z-2*E+m)/2),e*H13];};function ce4(r,n){var e=I17(n/2),t=R13(C15*e);return[r*(.74482-.34588*t*t),1.70711*e];}ce4.invert=function(r,n){var e=n/1.70711,t=R13(C15*e);return[r/(.74482-.34588*t*t),2*y10(e)];};function fe6(r,n){if(d7(n)<P16)return[r,0];var e=d7(n/M11),t=q18(e);if(d7(r)<P16||d7(d7(n)-M11)<P16)return[0,$13(n)*k12*I17(t/2)];var u=w13(t),o=d7(k12/r-r/k12)/2,i=o*o,a=u/(e+u-1),f=a*(2/e-1),c=f*f,l=c+i,s=a-c,v=i+a;return[$13(r)*k12*(o*s+S16(i*s*s-l*(a*a-c)))/l,$13(n)*k12*(f*v-o*S16((i+1)*l-v*v))/l];}fe6.invert=function(r,n){if(d7(n)<P16)return[r,0];if(d7(r)<P16)return[0,M11*R13(2*y10(n/k12))];var e=(r/=k12)*r,t=(n/=k12)*n,u=e+t,o=u*u,i=-d7(n)*(1+u),a=i-2*t+e,f=-2*i+1+2*t+o,c=t/f+(2*a*a*a/(f*f*f)-9*i*a/(f*f))/27,l=(i-a*a/(3*f))/f,s=2*S16(-l/3),v=J15(3*c/(l*s))/3;return[k12*(u-1+S16(1+2*(e-t)+o))/(2*r),$13(n)*k12*(-s*w13(v+k12/3)-a/(3*f))];};function le7(r,n){if(d7(n)<P16)return[r,0];var e=d7(n/M11),t=q18(e);if(d7(r)<P16||d7(d7(n)-M11)<P16)return[0,$13(n)*k12*I17(t/2)];var u=w13(t),o=d7(k12/r-r/k12)/2,i=o*o,a=u*(S16(1+i)-o*u)/(1+i*e*e);return[$13(r)*k12*a,$13(n)*k12*S16(1-a*(2*o+a))];}le7.invert=function(r,n){if(!r)return[0,M11*R13(2*y10(n/k12))];var e=d7(r/k12),t=(1-e*e-(n/=k12)*n)/(2*e),u=t*t,o=S16(u+1);return[$13(r)*k12*(o-t),$13(n)*M11*R13(2*V12(S16((1-2*t*e)*(t+o)-e),S16(o+t+e)))];};function se8(r,n){if(d7(n)<P16)return[r,0];var e=n/M11,t=q18(e);if(d7(r)<P16||d7(d7(n)-M11)<P16)return[0,k12*I17(t/2)];var u=(k12/r-r/k12)/2,o=e/(1+w13(t));return[k12*($13(r)*S16(u*u+1-o*o)-u),k12*o];}se8.invert=function(r,n){if(!n)return[r,0];var e=n/k12,t=(k12*k12*(1-e*e)-r*r)/(2*k12*r);return[r?k12*($13(r)*S16(t*t+1)-t):0,M11*R13(2*y10(e))];};function ve6(r,n){if(!n)return[r,0];var e=d7(n);if(!r||e===M11)return[0,n];var t=e/M11,u=t*t,o=(8*t-u*(u+2)-5)/(2*u*(t-1)),i=o*o,a=t*o,f=u+i+2*a,c=t+3*o,l=r/M11,s=l+1/l,v=$13(d7(r)-M11)*S16(s*s-4),g=v*v,h=f*(u+i*g-1)+(1-u)*(u*(c*c+4*i)+12*a*i+4*i*i),m=(v*(f+i-1)+2*S16(h))/(4*f+g);return[$13(r)*M11*m,$13(n)*M11*S16(1+v*d7(m)-m*m)];}ve6.invert=function(r,n){var e;if(!r||!n)return[r,n];var t=$13(n);n=d7(n)/k12;var u=$13(r)*r/M11,o=(u*u-1+4*n*n)/d7(u),i=o*o,a=n*(2-(n>.5?X15(n,d7(r)):0)),f=r*r+n*n,c=50;do{var l=a*a,s=(8*a-l*(l+2)-5)/(2*l*(a-1)),v=(3*a-l*a-10)/(2*l*a),g=s*s,h=a*s,m=a+s,E=m*m,z=a+3*s,G=E*(l+g*i-1)+(1-l)*(l*(z*z+4*g)+g*(12*h+4*g)),F=-2*m*(4*h*g+(1-4*l+3*l*l)*(1+v)+g*(-6+14*l-i+(-8+8*l-2*i)*v)+h*(-8+12*l+(-10+10*l-i)*v)),p=S16(G),N=o*(E+g-1)+2*p-u*(4*E+i),Q=o*(2*s*v+2*m*(1+v))+F/p-8*m*(o*(-1+g+E)+2*p)*(1+v)/(i+4*E);a-=e=N/Q;}while(e*f*f>P16&&--c>0)return[$13(r)*(S16(o*o+4)+o)*k12/4,t*M11*a];};var At7=4*k12+3*S16(3),Nt6=2*S16(2*k12*S16(3)/At7),$t6=ln8(Nt6*S16(3)/k12,Nt6,At7/6);function ge6(r,n){return[r*S16(1-3*n*n/(k12*k12)),n];}ge6.invert=function(r,n){return[r/S16(1-3*n*n/(k12*k12)),n];};function we7(r,n){var e=w13(n),t=w13(r)*e,u=1-t,o=w13(r=V12(R13(r)*e,-R13(n))),i=R13(r);return e=S16(1-t*t),[i*e-o*u,-o*e-i*u];}we7.invert=function(r,n){var e=(r*r+n*n)/-2,t=S16(-e*(2+e)),u=n*e+r*t,o=r*e-n*t,i=S16(o*o+u*u);return[V12(t*u,i*(1+e)),i?-q18(t*o/i):0];};function Re6(r,n){var e=$r3(r,n);return[(e[0]+r/M11)/2,(e[1]+n)/2];}Re6.invert=function(r,n){var e=r,t=n,u=25;do{var o=w13(t),i=R13(t),a=R13(2*t),f=i*i,c=o*o,l=R13(e),s=w13(e/2),v=R13(e/2),g=v*v,h=1-c*s*s,m=h?J15(o*s)*S16(E=1/h):E=0,E,z=.5*(2*m*o*v+e/M11)-r,G=.5*(m*i+t)-n,F=.5*E*(c*g+m*o*s*f)+.5/M11,p=E*(l*a/4-m*i*v),N=.125*E*(a*v-m*i*c*l),Q=.5*E*(f*s+m*g*o)+.5,T=p*N-Q*F,O=(G*p-z*Q)/T,U=(z*N-G*F)/T;e-=O,t-=U;}while((d7(O)>P16||d7(U)>P16)&&--u>0)return[e,t];};const x12=qe3(),c2=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function G17(e,r){return function l(){const o=r();return o.type=e,o.path=qe3().projection(o),o.copy=o.copy||function(){const i=l();return c2.forEach(a=>{o[a]&&i[a](o[a]());}),i.path.pointRadius(o.path.pointRadius()),i;},fe3(o);};}function s3(e,r){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(t1[e]=G17(e,r),this):t1[e]||null;}function H14(e){return e&&e.path||x12;}const t1={albers:Di1,albersusa:Ze3,azimuthalequalarea:We4,azimuthalequidistant:Be3,conicconformal:ke4,conicequalarea:It4,conicequidistant:Je4,equalEarth:Qe6,equirectangular:Ue4,gnomonic:Ve3,identity:je5,mercator:He4,mollweide:jt6,naturalEarth1:_e4,orthographic:be5,stereographic:no1,transversemercator:to1};for(const e in t1)s3(e,t1[e]);function je6(){}const O15=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function re11(){var e=1,t=1,n=o;function i(r,m){return m.map(f=>a(r,f));}function a(r,m){var f=[],l=[];return s(r,m,d=>{n(d,r,m),Re7(d)>0?f.push([d]):l.push(d);}),l.forEach(d=>{for(var g=0,h=f.length,y;g<h;++g)if(Pe4((y=f[g])[0],d)!==-1){y.push(d);return;}}),{type:"MultiPolygon",value:m,coordinates:f};}function s(r,m,f){var l=[],d=[],g,h,y,c,p,E;for(g=h=-1,c=r[0]>=m,O15[c<<1].forEach(D);++g<e-1;)y=c,c=r[g+1]>=m,O15[y|c<<1].forEach(D);for(O15[c<<0].forEach(D);++h<t-1;){for(g=-1,c=r[h*e+e]>=m,p=r[h*e]>=m,O15[c<<1|p<<2].forEach(D);++g<e-1;)y=c,c=r[h*e+e+g+1]>=m,E=p,p=r[h*e+g+1]>=m,O15[y|c<<1|p<<2|E<<3].forEach(D);O15[c|p<<3].forEach(D);}for(g=-1,p=r[h*e]>=m,O15[p<<2].forEach(D);++g<e-1;)E=p,p=r[h*e+g+1]>=m,O15[p<<2|E<<3].forEach(D);O15[p<<3].forEach(D);function D(z){var b=[z[0][0]+g,z[0][1]+h],M=[z[1][0]+g,z[1][1]+h],C=u(b),U=u(M),v,w;(v=d[C])?(w=l[U])?(delete d[v.end],delete l[w.start],v===w?(v.ring.push(M),f(v.ring)):l[v.start]=d[w.end]={start:v.start,end:w.end,ring:v.ring.concat(w.ring)}):(delete d[v.end],v.ring.push(M),d[v.end=U]=v):(v=l[U])?(w=d[C])?(delete l[v.start],delete d[w.end],v===w?(v.ring.push(M),f(v.ring)):l[w.start]=d[v.end]={start:w.start,end:v.end,ring:w.ring.concat(v.ring)}):(delete l[v.start],v.ring.unshift(b),l[v.start=C]=v):l[C]=d[U]={start:C,end:U,ring:[b,M]};}}function u(r){return r[0]*2+r[1]*(e+1)*4;}function o(r,m,f){r.forEach(l=>{var d=l[0],g=l[1],h=d|0,y=g|0,c,p=m[y*e+h];d>0&&d<e&&h===d&&(c=m[y*e+h-1],l[0]=d+(f-c)/(p-c)-.5),g>0&&g<t&&y===g&&(c=m[(y-1)*e+h],l[1]=g+(f-c)/(p-c)-.5);});}return i.contour=a,i.size=function(r){if(!arguments.length)return[e,t];var m=Math.floor(r[0]),f=Math.floor(r[1]);return m>=0&&f>=0||b("invalid size"),e=m,t=f,i;},i.smooth=function(r){return arguments.length?(n=r?o:je6,i):n===o;},i;}function Re7(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i;}function Pe4(e,t){for(var n=-1,i=t.length,a;++n<i;)if(a=Ce5(e,t[n]))return a;return 0;}function Ce5(e,t){for(var n=t[0],i=t[1],a=-1,s=0,u=e.length,o=u-1;s<u;o=s++){var r=e[s],m=r[0],f=r[1],l=e[o],d=l[0],g=l[1];if(Ue5(r,l,t))return 0;f>i!==g>i&&n<(d-m)*(i-f)/(g-f)+m&&(a=-a);}return a;}function Ue5(e,t,n){var i;return Fe7(e,t,n)&&Ne6(e[i=+(e[0]===t[0])],n[i],t[i]);}function Fe7(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1]);}function Ne6(e,t,n){return e<=t&&t<=n||n<=t&&t<=e;}function ie8(e,t,n){return function(i){var a=Nn(i),s=n?Math.min(a[0],0):a[0],u=a[1],o=u-s,r=t?kn(s,u,e):o/(e+1);return ie(s+r,u,r);};}function k13(e){dt2.call(this,null,e);}k13.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Pn(k13,dt2,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,a=e.field||A1,s=re11().smooth(e.smooth!==!1),u=e.thresholds||Ge5(i,a,e),o=e.as===null?null:e.as||"contour",r=[];return i.forEach(m=>{const f=a(m),l=s.size([f.width,f.height])(f.values,w1(u)?u:u(f.values));$e6(l,f,m,e),l.forEach(d=>{r.push(nt2(m,W7(o!=null?{[o]:d}:d)));});}),this.value&&(n.rem=this.value),this.value=n.source=n.add=r,n;}});function Ge5(e,t,n){const i=ie8(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(a=>_4(t(a).values)));}function $e6(e,t,n,i){let a=i.scale||t.scale,s=i.translate||t.translate;if(O1(a)&&(a=a(n,i)),O1(s)&&(s=s(n,i)),(a===1||a==null)&&!s)return;const u=(V(a)?a:a[0])||1,o=(V(a)?a:a[1])||1,r=s&&s[0]||0,m=s&&s[1]||0;e.forEach(ae7(t,u,o,r,m));}function ae7(e,t,n,i,a){const s=e.x1||0,u=e.y1||0,o=t*n<0;function r(l){l.forEach(m);}function m(l){o&&l.reverse(),l.forEach(f);}function f(l){l[0]=(l[0]-s)*t+i,l[1]=(l[1]-u)*n+a;}return function(l){return l.coordinates.forEach(r),l;};}function oe10(e,t,n){const i=e>=0?e:Z7(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2);}function q19(e){return O1(e)?e:On(+e);}function se9(){var e=r=>r[0],t=r=>r[1],n=v,i=[-1,-1],a=960,s=500,u=2;function o(r,m){const f=oe10(i[0],r,e)>>u,l=oe10(i[1],r,t)>>u,d=f?f+2:0,g=l?l+2:0,h=2*d+(a>>u),y=2*g+(s>>u),c=new Float32Array(h*y),p=new Float32Array(h*y);let E=c;r.forEach(z=>{const b=d+(+e(z)>>u),M=g+(+t(z)>>u);b>=0&&b<h&&M>=0&&M<y&&(c[b+M*h]+=+n(z));}),f>0&&l>0?(R14(h,y,c,p,f),P17(h,y,p,c,l),R14(h,y,c,p,f),P17(h,y,p,c,l),R14(h,y,c,p,f),P17(h,y,p,c,l)):f>0?(R14(h,y,c,p,f),R14(h,y,p,c,f),R14(h,y,c,p,f),E=p):l>0&&(P17(h,y,c,p,l),P17(h,y,p,c,l),P17(h,y,c,p,l),E=p);const D=m?Math.pow(2,-2*u):1/de(E);for(let z=0,b=h*y;z<b;++z)E[z]*=D;return{values:E,scale:1<<u,width:h,height:y,x1:d,y1:g,x2:d+(a>>u),y2:g+(s>>u)};}return o.x=function(r){return arguments.length?(e=q19(r),o):e;},o.y=function(r){return arguments.length?(t=q19(r),o):t;},o.weight=function(r){return arguments.length?(n=q19(r),o):n;},o.size=function(r){if(!arguments.length)return[a,s];var m=+r[0],f=+r[1];return m>=0&&f>=0||b("invalid size"),a=m,s=f,o;},o.cellSize=function(r){return arguments.length?((r=+r)>=1||b("invalid cell size"),u=Math.floor(Math.log(r)/Math.LN2),o):1<<u;},o.bandwidth=function(r){return arguments.length?(r=p(r),r.length===1&&(r=[+r[0],+r[0]]),r.length!==2&&b("invalid bandwidth"),i=r,o):i;},o;}function R14(e,t,n,i,a){const s=(a<<1)+1;for(let u=0;u<t;++u)for(let o=0,r=0;o<e+a;++o)o<e&&(r+=n[o+u*e]),o>=a&&(o>=s&&(r-=n[o-s+u*e]),i[o-a+u*e]=r/Math.min(o+1,e-1+s-o,s));}function P17(e,t,n,i,a){const s=(a<<1)+1;for(let u=0;u<e;++u)for(let o=0,r=0;o<t+a;++o)o<t&&(r+=n[u+o*e]),o>=a&&(o>=s&&(r-=n[u+(o-s)*e]),i[u+(o-a)*e]=r/Math.min(o+1,t-1+s-o,s));}function T10(e){dt2.call(this,null,e);}T10.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Ae5=["x","y","weight","size","cellSize","bandwidth"];function ue8(e,t){return Ae5.forEach(n=>t[n]!=null?e[n](t[n]):0),e;}Pn(T10,dt2,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,a=Ie4(i,e.groupby),s=(e.groupby||[]).map(H1),u=ue8(se9(),e),o=e.as||"grid",r=[];function m(f,l){for(let d=0;d<s.length;++d)f[s[d]]=l[d];return f;}return r=a.map(f=>W7(m({[o]:u(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=r,n;}});function Ie4(e,t){var n=[],i=f=>f(o),a,s,u,o,r,m;if(t==null)n.push(e);else for(a={},s=0,u=e.length;s<u;++s)o=e[s],r=t.map(i),m=a[r],m||(a[r]=m=[],m.dims=r,n.push(m)),m.push(o);return n;}function B14(e){dt2.call(this,null,e);}B14.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Pn(B14,dt2,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=re11().smooth(e.smooth!==!1),a=e.values,s=e.thresholds||ie8(e.count||10,e.nice,!!a),u=e.size,o,r;return a||(a=t.materialize(t.SOURCE).source,o=ue8(se9(),e)(a,!0),r=ae7(o,o.scale||1,o.scale||1,0,0),u=[o.width,o.height],a=o.values),s=w1(s)?s:s(a),a=i.size(u)(a,s),r&&a.forEach(r),this.value&&(n.rem=this.value),this.value=n.source=n.add=(a||[]).map(W7),n;}});const H15="Feature",J16="FeatureCollection",Le4="MultiPoint";function K16(e){dt2.call(this,null,e);}K16.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Pn(K16,dt2,{transform(e,t){var n=this._features,i=this._points,a=e.fields,s=a&&a[0],u=a&&a[1],o=e.geojson||!a&&A1,r=t.ADD,m;m=e.modified()||t.changed(t.REM)||t.modified(R1(o))||s&&t.modified(R1(s))||u&&t.modified(R1(u)),(!this.value||m)&&(r=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(r,f=>n.push(o(f))),s&&u&&(t.visit(r,f=>{var l=s(f),d=u(f);l!=null&&d!=null&&(l=+l)===l&&(d=+d)===d&&i.push([l,d]);}),n=n.concat({type:H15,geometry:{type:Le4,coordinates:i}})),this.value={type:J16,features:n};}});function Q15(e){dt2.call(this,null,e);}Q15.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Pn(Q15,dt2,{transform(e,t){var n=t.fork(t.ALL),i=this.value,a=e.field||A1,s=e.as||"path",u=n.SOURCE;!i||e.modified()?(this.value=i=H14(e.projection),n.materialize().reflow()):u=a===A1||t.modified(a.fields)?n.ADD_MOD:n.ADD;const o=ke5(i,e.pointRadius);return n.visit(u,r=>r[s]=i(a(r))),i.pointRadius(o),n.modifies(s);}});function ke5(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n;}function V13(e){dt2.call(this,null,e);}V13.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Pn(V13,dt2,{transform(e,t){var n=e.projection,i=e.fields[0],a=e.fields[1],s=e.as||["x","y"],u=s[0],o=s[1],r;function m(f){const l=n([i(f),a(f)]);l?(f[u]=l[0],f[o]=l[1]):(f[u]=void 0,f[o]=void 0);}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,m):(r=t.modified(i.fields)||t.modified(a.fields),t.visit(r?t.ADD_MOD:t.ADD,m)),t.modifies(s);}});function W16(e){dt2.call(this,null,e);}W16.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Pn(W16,dt2,{transform(e,t){var n=t.fork(t.ALL),i=this.value,a=e.as||"shape",s=n.ADD;return(!i||e.modified())&&(this.value=i=qe5(H14(e.projection),e.field||z1("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,u=>u[a]=i),n.modifies(a);}});function qe5(e,t,n){const i=n==null?a=>e(t(a)):a=>{var s=e.pointRadius(),u=e.pointRadius(n)(t(a));return e.pointRadius(s),u;};return i.context=a=>(e.context(a),i),i;}function X16(e){dt2.call(this,[],e),this.generator=di2();}X16.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Pn(X16,dt2,{transform(e,t){var n=this.value,i=this.generator,a;if(!n.length||e.modified())for(const s in e)O1(i[s])&&i[s](e[s]);return a=i(),n.length?t.mod.push(At2(n[0],a)):t.add.push(W7(a)),n[0]=a,t;}});function Y16(e){dt2.call(this,null,e);}Y16.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Pn(Y16,dt2,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",a=e.field||A1,s=Be4(e.opacity,e),u=Te5(e.color,e),o=e.as||"image",r={$x:0,$y:0,$value:0,$max:i?_4(n.map(m=>_4(a(m).values))):0};return n.forEach(m=>{const f=a(m),l=J1({},m,r);i||(l.$max=_4(f.values||[])),m[o]=He5(f,l,u.dep?u:On(u(l)),s.dep?s:On(s(l)));}),t.reflow(!0).modifies(o);}});function Te5(e,t){let n;return O1(e)?(n=i=>Y9(e(i,t)),n.dep=fe7(e)):n=On(Y9(e||"#888")),n;}function Be4(e,t){let n;return O1(e)?(n=i=>e(i,t),n.dep=fe7(e)):e?n=On(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n;}function fe7(e){if(!O1(e))return!1;const t=Xn(R1(e));return t.$x||t.$y||t.$value||t.$max;}function He5(e,t,n,i){const a=e.width,s=e.height,u=e.x1||0,o=e.y1||0,r=e.x2||a,m=e.y2||s,f=e.values,l=f?c=>f[c]:y1,d=n1(r-u,m-o),g=d.getContext("2d"),h=g.getImageData(0,0,r-u,m-o),y=h.data;for(let c=o,p=0;c<m;++c){t.$y=c-o;for(let E=u,D=c*a;E<r;++E,p+=4){t.$x=E-u,t.$value=l(E+D);const z=n(t);y[p+0]=z.r,y[p+1]=z.g,y[p+2]=z.b,y[p+3]=~~(255*i(t));}}return g.putImageData(h,0,0),d;}function le8(e){dt2.call(this,null,e),this.modified(!0);}Pn(le8,dt2,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Ke5(e.type),c2.forEach(i=>{e[i]!=null&&me7(n,i,e[i]);})):c2.forEach(i=>{e.modified(i)&&me7(n,i,e[i]);}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Je5(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS);}});function Je5(e,t){const n=Qe7(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n);}function Ke5(e){const t=s3((e||"mercator").toLowerCase());return t||b("Unrecognized projection type: "+e),t();}function me7(e,t,n){O1(e[t])&&e[t](n);}function Qe7(e){return e=p(e),e.length===1?e[0]:{type:J16,features:e.reduce((t,n)=>t.concat(Ve4(n)),[])};}function Ve4(e){return e.type===J16?e.features:p(e).filter(t=>t!=null).map(t=>t.type===H15?t:{type:H15,geometry:t});}const mod4=function(){return{contour:B14,geojson:K16,geopath:Q15,geopoint:V13,geoshape:W16,graticule:X16,heatmap:Y16,isocontour:k13,kde2d:T10,projection:le8,default:null};}();function j18(e){const t=+this._x.call(null,e),i=+this._y.call(null,e);return k14(this.cover(t,i),t,i,e);}function k14(e,t,i,r){if(isNaN(t)||isNaN(i))return e;var n,s=e._root,h={data:r},a=e._x0,o=e._y0,l=e._x1,u=e._y1,f,_,c,y,g,x,v,N;if(!s)return e._root=h,e;for(;s.length;)if((g=t>=(f=(a+l)/2))?a=f:l=f,(x=i>=(_=(o+u)/2))?o=_:u=_,n=s,!(s=s[v=x<<1|g]))return n[v]=h,e;if(c=+e._x.call(null,s.data),y=+e._y.call(null,s.data),t===c&&i===y)return h.next=s,n?n[v]=h:e._root=h,e;do n=n?n[v]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+l)/2))?a=f:l=f,(x=i>=(_=(o+u)/2))?o=_:u=_;while((v=x<<1|g)===(N=(y>=_)<<1|c>=f))return n[N]=s,n[v]=h,e;}function Q16(e){var t,i,r=e.length,n,s,h=new Array(r),a=new Array(r),o=Infinity,l=Infinity,u=-Infinity,f=-Infinity;for(i=0;i<r;++i){if(isNaN(n=+this._x.call(null,t=e[i]))||isNaN(s=+this._y.call(null,t)))continue;h[i]=n,a[i]=s,n<o&&(o=n),n>u&&(u=n),s<l&&(l=s),s>f&&(f=s);}if(o>u||l>f)return this;for(this.cover(o,l).cover(u,f),i=0;i<r;++i)k14(this,h[i],a[i],e[i]);return this;}function P18(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,r=this._y0,n=this._x1,s=this._y1;if(isNaN(i))n=(i=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var h=n-i||1,a=this._root,o,l;i>e||e>=n||r>t||t>=s;){l=(t<r)<<1|e<i,o=new Array(4),o[l]=a,a=o,h*=2;switch(l){case 0:n=i+h,s=r+h;break;case 1:i=n-h,s=r+h;break;case 2:n=i+h,r=s-h;break;case 3:i=n-h,r=s-h;break;}}this._root&&this._root.length&&(this._root=a);}return this._x0=i,this._y0=r,this._x1=n,this._y1=s,this;}function X17(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e;}function Y17(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]];}function p8(e,t,i,r,n){this.node=e,this.x0=t,this.y0=i,this.x1=r,this.y1=n;}function B15(e,t,i){var r,n=this._x0,s=this._y0,h,a,o,l,u=this._x1,f=this._y1,_=[],c=this._root,y,g;for(c&&_.push(new p8(c,n,s,u,f)),i==null?i=Infinity:(n=e-i,s=t-i,u=e+i,f=t+i,i*=i);y=_.pop();){if(!(c=y.node)||(h=y.x0)>u||(a=y.y0)>f||(o=y.x1)<n||(l=y.y1)<s)continue;if(c.length){var x=(h+o)/2,v=(a+l)/2;_.push(new p8(c[3],x,v,o,l),new p8(c[2],h,v,x,l),new p8(c[1],x,a,o,v),new p8(c[0],h,a,x,v)),(g=(t>=v)<<1|e>=x)&&(y=_[_.length-1],_[_.length-1]=_[_.length-1-g],_[_.length-1-g]=y);}else{var N=e-+this._x.call(null,c.data),q=t-+this._y.call(null,c.data),b=N*N+q*q;if(b<i){var d=Math.sqrt(i=b);n=e-d,s=t-d,u=e+d,f=t+d,r=c.data;}}}return r;}function C16(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,i=this._root,r,n,s,h=this._x0,a=this._y0,o=this._x1,l=this._y1,u,f,_,c,y,g,x,v;if(!i)return this;if(i.length)for(;;){if((y=u>=(_=(h+o)/2))?h=_:o=_,(g=f>=(c=(a+l)/2))?a=c:l=c,!(t=i,i=i[x=g<<1|y]))return this;if(!i.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(r=t,v=x);}for(;i.data!==e;)if(!(n=i,i=i.next))return this;return(s=i.next)&&delete i.next,n?(s?n.next=s:delete n.next,this):t?(s?t[x]=s:delete t[x],(i=t[0]||t[1]||t[2]||t[3])&&i===(t[3]||t[2]||t[1]||t[0])&&!i.length&&(r?r[v]=i:this._root=i),this):(this._root=s,this);}function D10(e){for(var t=0,i=e.length;t<i;++t)this.remove(e[t]);return this;}function E16(){return this._root;}function F13(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e;}function G18(e){var t=[],i,r=this._root,n,s,h,a,o;for(r&&t.push(new p8(r,this._x0,this._y0,this._x1,this._y1));i=t.pop();)if(!e(r=i.node,s=i.x0,h=i.y0,a=i.x1,o=i.y1)&&r.length){var l=(s+a)/2,u=(h+o)/2;(n=r[3])&&t.push(new p8(n,l,u,a,o)),(n=r[2])&&t.push(new p8(n,s,u,l,o)),(n=r[1])&&t.push(new p8(n,l,h,a,u)),(n=r[0])&&t.push(new p8(n,s,h,l,u));}return this;}function H16(e){var t=[],i=[],r;for(this._root&&t.push(new p8(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var n=r.node;if(n.length){var s,h=r.x0,a=r.y0,o=r.x1,l=r.y1,u=(h+o)/2,f=(a+l)/2;(s=n[0])&&t.push(new p8(s,h,a,u,f)),(s=n[1])&&t.push(new p8(s,u,a,o,f)),(s=n[2])&&t.push(new p8(s,h,f,u,l)),(s=n[3])&&t.push(new p8(s,u,f,o,l));}i.push(r);}for(;r=i.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this;}function J17(e){return e[0];}function K17(e){return arguments.length?(this._x=e,this):this._x;}function L20(e){return e[1];}function O16(e){return arguments.length?(this._y=e,this):this._y;}function I18(e,t,i){var r=new A15(t??J17,i??L20,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e);}function A15(e,t,i,r,n,s){this._x=e,this._y=t,this._x0=i,this._y0=r,this._x1=n,this._y1=s,this._root=void 0;}function M12(e){for(var t={data:e.data},i=t;e=e.next;)i=i.next={data:e.data};return t;}var w14=I18.prototype=A15.prototype;w14.copy=function(){var e=new A15(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,i,r;if(!t)return e;if(!t.length)return e._root=M12(t),e;for(i=[{source:t,target:e._root=new Array(4)}];t=i.pop();)for(var n=0;n<4;++n)(r=t.source[n])&&(r.length?i.push({source:r,target:t.target[n]=new Array(4)}):t.target[n]=M12(r));return e;},w14.add=j18,w14.addAll=Q16,w14.cover=P18,w14.data=X17,w14.extent=Y17,w14.find=B15,w14.remove=C16,w14.removeAll=D10,w14.root=E16,w14.size=F13,w14.visit=G18,w14.visitAfter=H16,w14.x=K17,w14.y=O16;var a5={value:()=>{}};function l6(){for(var n=0,t=arguments.length,r={},e;n<t;++n){if(!(e=arguments[n]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[];}return new f8(r);}function f8(n){this._=n;}function h7(n,t){return n.trim().split(/^|\s+/).map(function(r){var e="",o=r.indexOf(".");if(o>=0&&(e=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:e};});}f8.prototype=l6.prototype={constructor:f8,on:function(n,t){var r=this._,e=h7(n+"",r),o,u=-1,i=e.length;if(arguments.length<2){for(;++u<i;)if((o=(n=e[u]).type)&&(o=w15(r[o],n.name)))return o;return;}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<i;)if(o=(n=e[u]).type)r[o]=s4(r[o],n.name,t);else if(t==null)for(o in r)r[o]=s4(r[o],n.name,null);return this;},copy:function(){var n={},t=this._;for(var r in t)n[r]=t[r].slice();return new f8(n);},call:function(n,t){if((o=arguments.length-2)>0)for(var r=new Array(o),e=0,o,u;e<o;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],e=0,o=u.length;e<o;++e)u[e].value.apply(t,r);},apply:function(n,t,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var e=this._[n],o=0,u=e.length;o<u;++o)e[o].value.apply(t,r);}};function w15(n,t){for(var r=0,e=n.length,o;r<e;++r)if((o=n[r]).name===t)return o.value;}function s4(n,t,r){for(var e=0,o=n.length;e<o;++e)if(n[e].name===t){n[e]=a5,n=n.slice(0,e).concat(n.slice(e+1));break;}return r!=null&&n.push({name:t,value:r}),n;}var o5=0,a6=0,l7=0,T11=1e3,p9,u6,h8=0,r=0,m6=0,c3=typeof performance=="object"&&performance.now?performance:Date,I19=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17);};function v12(){return r||(I19(A16),r=c3.now()+m6);}function A16(){r=0;}function s5(){this._call=this._time=this._next=null;}s5.prototype=F14.prototype={constructor:s5,restart:function(n,t,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?v12():+i)+(t==null?0:+t),!this._next&&u6!==this&&(u6?u6._next=this:p9=this,u6=this),this._call=n,this._time=i,k15();},stop:function(){this._call&&(this._call=null,this._time=Infinity,k15());}};function F14(n,t,i){var e=new s5;return e.restart(n,t,i),e;}function y11(){v12(),++o5;for(var n=p9,t;n;)(t=r-n._time)>=0&&n._call.call(void 0,t),n=n._next;--o5;}function b10(){r=(h8=c3.now())+m6,o5=a6=0;try{y11();}finally{o5=0,N17(),r=0;}}function D11(){var n=c3.now(),t=n-h8;t>T11&&(m6-=t,h8=n);}function N17(){for(var n,t=p9,i,e=Infinity;t;)t._call?(e>t._time&&(e=t._time),n=t,t=t._next):(i=t._next,t._next=null,t=n?n._next=i:p9=i);u6=n,k15(e);}function k15(n){if(o5)return;a6&&(a6=clearTimeout(a6));var t=n-r;t>24?(n<Infinity&&(a6=setTimeout(b10,n-c3.now()-m6)),l7&&(l7=clearInterval(l7))):(l7||(h8=c3.now(),l7=setInterval(D11,T11)),o5=1,I19(b10));}function E17(n,t,i){var e=new s5,w=t;return t==null?(e.restart(n,t,i),e):(e._restart=e.restart,e.restart=function(j,_,f){_=+_,f=f==null?v12():+f,e._restart(function q(x){x+=w,e._restart(q,w+=_,f),j(x);},_,f);},e.restart(n,t,i),e);}function F15(n,f){var a,y=1;n==null&&(n=0),f==null&&(f=0);function m(){var c,g=a.length,t,h=0,e=0;for(c=0;c<g;++c)t=a[c],h+=t.x,e+=t.y;for(h=(h/g-n)*y,e=(e/g-f)*y,c=0;c<g;++c)t=a[c],t.x-=h,t.y-=e;}return m.initialize=function(c){a=c;},m.x=function(c){return arguments.length?(n=+c,m):n;},m.y=function(c){return arguments.length?(f=+c,m):f;},m.strength=function(c){return arguments.length?(y=+c,m):y;},m;}function M13(n){return function(){return n;};}function O17(n){return(n()-.5)*1e-6;}function Q17(n){return n.x+n.vx;}function R15(n){return n.y+n.vy;}function b11(n){var f,a,y,m=1,c=1;typeof n!="function"&&(n=M13(n==null?1:+n));function g(){for(var e,v=f.length,A,p,o,x,i,r,u=0;u<c;++u)for(A=I18(f,Q17,R15).visitAfter(t),e=0;e<v;++e)p=f[e],i=a[p.index],r=i*i,o=p.x+p.vx,x=p.y+p.vy,A.visit(s);function s(d,l,N,j,D){var z=d.data,E=d.r,w=i+E;if(z){if(z.index>p.index){var B=o-z.x-z.vx,I=x-z.y-z.vy,S=B*B+I*I;S<w*w&&(B===0&&(B=O17(y),S+=B*B),I===0&&(I=O17(y),S+=I*I),S=(w-(S=Math.sqrt(S)))/S*m,p.vx+=(B*=S)*(w=(E*=E)/(r+E)),p.vy+=(I*=S)*w,z.vx-=B*(w=1-w),z.vy-=I*w);}return;}return l>o+w||j<o-w||N>x+w||D<x-w;}}function t(e){if(e.data)return e.r=a[e.data.index];for(var v=e.r=0;v<4;++v)e[v]&&e[v].r>e.r&&(e.r=e[v].r);}function h(){if(!f)return;var e,v=f.length,A;for(a=new Array(v),e=0;e<v;++e)A=f[e],a[A.index]=+n(A,e,f);}return g.initialize=function(e,v){f=e,y=v,h();},g.iterations=function(e){return arguments.length?(c=+e,g):c;},g.strength=function(e){return arguments.length?(m=+e,g):m;},g.radius=function(e){return arguments.length?(n=typeof e=="function"?e:M13(+e),h(),g):n;},g;}function G19(n){return n.index;}function $14(n,f){var a=n.get(f);if(!a)throw new Error("node not found: "+f);return a;}function J18(n){var f=G19,a=A,y,m=M13(30),c,g,t,h,e,v=1;n==null&&(n=[]);function A(r){return 1/Math.min(t[r.source.index],t[r.target.index]);}function p(r){for(var u=0,s=n.length;u<v;++u)for(var d=0,l,N,j,D,z,E,w;d<s;++d)l=n[d],N=l.source,j=l.target,D=j.x+j.vx-N.x-N.vx||O17(e),z=j.y+j.vy-N.y-N.vy||O17(e),E=Math.sqrt(D*D+z*z),E=(E-c[d])/E*r*y[d],D*=E,z*=E,j.vx-=D*(w=h[d]),j.vy-=z*w,N.vx+=D*(w=1-w),N.vy+=z*w;}function o(){if(!g)return;var r,u=g.length,s=n.length,d=new Map(g.map((N,j)=>[f(N,j,g),N])),l;for(r=0,t=new Array(u);r<s;++r)l=n[r],l.index=r,typeof l.source!="object"&&(l.source=$14(d,l.source)),typeof l.target!="object"&&(l.target=$14(d,l.target)),t[l.source.index]=(t[l.source.index]||0)+1,t[l.target.index]=(t[l.target.index]||0)+1;for(r=0,h=new Array(s);r<s;++r)l=n[r],h[r]=t[l.source.index]/(t[l.source.index]+t[l.target.index]);y=new Array(s),x(),c=new Array(s),i();}function x(){if(!g)return;for(var r=0,u=n.length;r<u;++r)y[r]=+a(n[r],r,n);}function i(){if(!g)return;for(var r=0,u=n.length;r<u;++r)c[r]=+m(n[r],r,n);}return p.initialize=function(r,u){g=r,e=u,o();},p.links=function(r){return arguments.length?(n=r,o(),p):n;},p.id=function(r){return arguments.length?(f=r,p):f;},p.iterations=function(r){return arguments.length?(v=+r,p):v;},p.strength=function(r){return arguments.length?(a=typeof r=="function"?r:M13(+r),x(),p):a;},p.distance=function(r){return arguments.length?(m=typeof r=="function"?r:M13(+r),i(),p):m;},p;}const K18=1664525,P19=1013904223,C17=4294967296;function U17(){let n=1;return()=>(n=(K18*n+P19)%C17)/4294967296;}function W17(n){return n.x;}function X18(n){return n.y;}var Z17=10,H17=Math.PI*(3-Math.sqrt(5));function V14(n){var f,a=1,y=.001,m=1-Math.pow(y,1/300),c=0,g=.6,t=new Map,h=F14(A),e=l6("tick","end"),v=U17();n==null&&(n=[]);function A(){p(),e.call("tick",f),a<y&&(h.stop(),e.call("end",f));}function p(i){var r,u=n.length,s;i===void 0&&(i=1);for(var d=0;d<i;++d)for(a+=(c-a)*m,t.forEach(function(l){l(a);}),r=0;r<u;++r)s=n[r],s.fx==null?s.x+=s.vx*=g:(s.x=s.fx,s.vx=0),s.fy==null?s.y+=s.vy*=g:(s.y=s.fy,s.vy=0);return f;}function o(){for(var i=0,r=n.length,u;i<r;++i){if(u=n[i],u.index=i,u.fx!=null&&(u.x=u.fx),u.fy!=null&&(u.y=u.fy),isNaN(u.x)||isNaN(u.y)){var s=Z17*Math.sqrt(.5+i),d=i*H17;u.x=s*Math.cos(d),u.y=s*Math.sin(d);}(isNaN(u.vx)||isNaN(u.vy))&&(u.vx=u.vy=0);}}function x(i){return i.initialize&&i.initialize(n,v),i;}return o(),f={tick:p,restart:function(){return h.restart(A),f;},stop:function(){return h.stop(),f;},nodes:function(i){return arguments.length?(n=i,o(),t.forEach(x),f):n;},alpha:function(i){return arguments.length?(a=+i,f):a;},alphaMin:function(i){return arguments.length?(y=+i,f):y;},alphaDecay:function(i){return arguments.length?(m=+i,f):+m;},alphaTarget:function(i){return arguments.length?(c=+i,f):c;},velocityDecay:function(i){return arguments.length?(g=1-i,f):1-g;},randomSource:function(i){return arguments.length?(v=i,t.forEach(x),f):v;},force:function(i,r){return arguments.length>1?(r==null?t.delete(i):t.set(i,x(r)),f):t.get(i);},find:function(i,r,u){var s=0,d=n.length,l,N,j,D,z;for(u==null?u=Infinity:u*=u,s=0;s<d;++s)D=n[s],l=i-D.x,N=r-D.y,j=l*l+N*N,j<u&&(z=D,u=j);return z;},on:function(i,r){return arguments.length>1?(e.on(i,r),f):e.on(i);}};}function q20(){var n,f,a,y,m=M13(-30),c,g=1,t=Infinity,h=.81;function e(o){var x,i=n.length,r=I18(n,W17,X18).visitAfter(A);for(y=o,x=0;x<i;++x)f=n[x],r.visit(p);}function v(){if(!n)return;var o,x=n.length,i;for(c=new Array(x),o=0;o<x;++o)i=n[o],c[i.index]=+m(i,o,n);}function A(o){var x=0,i,r,u=0,s,d,l;if(o.length){for(s=d=l=0;l<4;++l)(i=o[l])&&(r=Math.abs(i.value))&&(x+=i.value,u+=r,s+=r*i.x,d+=r*i.y);o.x=s/u,o.y=d/u;}else{i=o,i.x=i.data.x,i.y=i.data.y;do x+=c[i.data.index];while(i=i.next)}o.value=x;}function p(o,x,i,r){if(!o.value)return!0;var u=o.x-f.x,s=o.y-f.y,d=r-x,l=u*u+s*s;if(d*d/h<l)return l<t&&(u===0&&(u=O17(a),l+=u*u),s===0&&(s=O17(a),l+=s*s),l<g&&(l=Math.sqrt(g*l)),f.vx+=u*o.value*y/l,f.vy+=s*o.value*y/l),!0;if(o.length||l>=t)return;(o.data!==f||o.next)&&(u===0&&(u=O17(a),l+=u*u),s===0&&(s=O17(a),l+=s*s),l<g&&(l=Math.sqrt(g*l)));do o.data!==f&&(d=c[o.data.index]*y/l,f.vx+=u*d,f.vy+=s*d);while(o=o.next)}return e.initialize=function(o,x){n=o,a=x,v();},e.strength=function(o){return arguments.length?(m=typeof o=="function"?o:M13(+o),v(),e):m;},e.distanceMin=function(o){return arguments.length?(g=o*o,e):Math.sqrt(g);},e.distanceMax=function(o){return arguments.length?(t=o*o,e):Math.sqrt(t);},e.theta=function(o){return arguments.length?(h=o*o,e):Math.sqrt(h);},e;}function _16(n){var f=M13(.1),a,y,m;typeof n!="function"&&(n=M13(n==null?0:+n));function c(t){for(var h=0,e=a.length,v;h<e;++h)v=a[h],v.vx+=(m[h]-v.x)*y[h]*t;}function g(){if(!a)return;var t,h=a.length;for(y=new Array(h),m=new Array(h),t=0;t<h;++t)y[t]=isNaN(m[t]=+n(a[t],t,a))?0:+f(a[t],t,a);}return c.initialize=function(t){a=t,g();},c.strength=function(t){return arguments.length?(f=typeof t=="function"?t:M13(+t),g(),c):f;},c.x=function(t){return arguments.length?(n=typeof t=="function"?t:M13(+t),g(),c):n;},c;}function nn8(n){var f=M13(.1),a,y,m;typeof n!="function"&&(n=M13(n==null?0:+n));function c(t){for(var h=0,e=a.length,v;h<e;++h)v=a[h],v.vy+=(m[h]-v.y)*y[h]*t;}function g(){if(!a)return;var t,h=a.length;for(y=new Array(h),m=new Array(h),t=0;t<h;++t)y[t]=isNaN(m[t]=+n(a[t],t,a))?0:+f(a[t],t,a);}return c.initialize=function(t){a=t,g();},c.strength=function(t){return arguments.length?(f=typeof t=="function"?t:M13(+t),g(),c):f;},c.y=function(t){return arguments.length?(n=typeof t=="function"?t:M13(+t),g(),c):n;},c;}const y12={center:F15,collide:b11,nbody:q20,link:J18,x:_16,y:nn8},s6="forces",u7=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],C18=["static","iterations"],h9=["x","y","vx","vy"];function l8(e){dt2.call(this,null,e);}l8.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:h9}]},Pn(l8,dt2,{transform(e,t){var r=this.value,n=t.changed(t.ADD_REM),o=e.modified(u7),a=e.iterations||300;if(r?(n&&(t.modifies("index"),r.nodes(t.source)),(o||t.changed(t.MOD))&&g8(r,e,0,t)):(this.value=r=q21(t.source,e),r.on("tick",O18(t.dataflow,this)),e.static||(n=!0,r.tick()),t.modifies("index")),o||n||e.modified(C18)||t.changed()&&e.restart){if(r.alpha(Math.max(r.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(r.alphaMin(),1/a)),e.static)for(r.stop();--a>=0;)r.tick();else if(r.stopped()&&r.restart(),!n)return t.StopPropagation;}return this.finish(e,t);},finish(e,t){const r=t.dataflow;for(let i=this._argops,m=0,b=i.length,c;m<b;++m){if(c=i[m],c.name!==s6||c.op._argval.force!=="link")continue;for(var n=c.op._argops,o=0,a=n.length,f;o<a;++o)if(n[o].name==="links"&&(f=n[o].op.source)){r.pulse(f,r.changeset().reflow());break;}}return t.reflow(e.modified()).modifies(h9);}});function O18(e,t){return()=>e.touch(t).run();}function q21(e,t){const r=V14(e),n=r.stop,o=r.restart;let a=!1;return r.stopped=()=>a,r.restart=()=>(a=!1,o()),r.stop=()=>(a=!0,n()),g8(r,t,!0).on("end",()=>a=!0);}function g8(e,t,r,n){var o=p(t.forces),a,f,i,m;for(a=0,f=u7.length;a<f;++a)i=u7[a],i!==s6&&t.modified(i)&&e[i](t[i]);for(a=0,f=o.length;a<f;++a)m=s6+a,i=r||t.modified(s6,a)?L21(o[a]):n&&I20(o[a],n)?e.force(m):null,i&&e.force(m,i);for(f=e.numForces||0;a<f;++a)e.force(s6+a,null);return e.numForces=o.length,e;}function I20(e,t){var r,n;for(r in e)if(O1(n=e[r])&&t.modified(R1(n)))return 1;return 0;}function L21(e){var t,r;g(y12,e.force)||b("Unrecognized force: "+e.force),t=y12[e.force]();for(r in e)O1(t[r])&&S17(t[r],e[r],e);return t;}function S17(e,t,r){e(O1(t)?n=>t(n,r):t);}const mod5=function(){return{force:l8,default:null};}();function dn8(n,e){return n.parent===e.parent?1:2;}function pn8(n){return n.reduce(gn7,0)/n.length;}function gn7(n,e){return n+e.x;}function yn7(n){return 1+n.reduce(xn8,0);}function xn8(n,e){return Math.max(n,e.y);}function mn8(n){for(var e;e=n.children;)n=e[0];return n;}function vn7(n){for(var e;e=n.children;)n=e[e.length-1];return n;}function wn11(){var n=dn8,e=1,t=1,r=!1;function i(u){var l,s=0;u.eachAfter(function(a){var d=a.children;d?(a.x=pn8(d),a.y=yn7(d)):(a.x=l?s+=n(a,l):0,a.y=0,l=a);});var c=mn8(u),f=vn7(u),h=c.x-n(c,f)/2,o=f.x+n(f,c)/2;return u.eachAfter(r?function(a){a.x=(a.x-u.x)*e,a.y=(u.y-a.y)*t;}:function(a){a.x=(a.x-h)/(o-h)*e,a.y=(1-(u.y?a.y/u.y:1))*t;});}return i.separation=function(u){return arguments.length?(n=u,i):n;},i.size=function(u){return arguments.length?(r=!1,e=+u[0],t=+u[1],i):r?null:[e,t];},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],t=+u[1],i):r?[e,t]:null;},i;}function _n4(n){var e=0,t=n.children,r=t&&t.length;if(!r)e=1;else for(;--r>=0;)e+=t[r].value;n.value=e;}function zn5(){return this.eachAfter(_n4);}function An9(n,e){let t=-1;for(const r of this)n.call(e,r,++t,this);return this;}function Mn8(n,e){for(var t=this,r=[t],i,u,l=-1;t=r.pop();)if(n.call(e,t,++l,this),i=t.children)for(u=i.length-1;u>=0;--u)r.push(i[u]);return this;}function kn6(n,e){for(var t=this,r=[t],i=[],u,l,s,c=-1;t=r.pop();)if(i.push(t),u=t.children)for(l=0,s=u.length;l<s;++l)r.push(u[l]);for(;t=i.pop();)n.call(e,t,++c,this);return this;}function Rn9(n,e){let t=-1;for(const r of this)if(n.call(e,r,++t,this))return r;}function Sn8(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)t+=r[i].value;e.value=t;});}function qn7(n){return this.eachBefore(function(e){e.children&&e.children.sort(n);});}function In5(n){for(var e=this,t=Nn8(e,n),r=[e];e!==t;)e=e.parent,r.push(e);for(var i=r.length;n!==t;)r.splice(i,0,n),n=n.parent;return r;}function Nn8(n,e){if(n===e)return n;var t=n.ancestors(),r=e.ancestors(),i=null;for(n=t.pop(),e=r.pop();n===e;)i=n,n=t.pop(),e=r.pop();return i;}function En7(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e;}function Bn6(){return Array.from(this);}function Ln5(){var n=[];return this.eachBefore(function(e){e.children||n.push(e);}),n;}function bn5(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t});}),e;}function*Cn7(){var n=this,e,t=[n],r,i,u;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,r=n.children)for(i=0,u=r.length;i<u;++i)t.push(r[i]);while(t.length)}function O19(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=Dn4)):e===void 0&&(e=$n7);for(var t=new S18(n),r,i=[t],u,l,s,c;r=i.pop();)if((l=e(r.data))&&(c=(l=Array.from(l)).length))for(r.children=l,s=c-1;s>=0;--s)i.push(u=l[s]=new S18(l[s])),u.parent=r,u.depth=r.depth+1;return t.eachBefore(Z18);}function Tn6(){return O19(this).eachBefore(On5);}function $n7(n){return n.children;}function Dn4(n){return Array.isArray(n)?n[1]:null;}function On5(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data;}function Z18(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function S18(n){this.data=n,this.depth=this.height=0,this.parent=null;}S18.prototype=O19.prototype={constructor:S18,count:zn5,each:An9,eachAfter:kn6,eachBefore:Mn8,find:Rn9,sum:Sn8,sort:qn7,path:In5,ancestors:En7,descendants:Bn6,leaves:Ln5,links:bn5,copy:Tn6,[Symbol.iterator]:Cn7};function L22(n){return n==null?null:F16(n);}function F16(n){if(typeof n!="function")throw new Error;return n;}function q22(){return 0;}function N18(n){return function(){return n;};}const Vn5=1664525,Wn6=1013904223,G20=4294967296;function V15(){let n=1;return()=>(n=(Vn5*n+Wn6)%G20)/4294967296;}function Pn7(n){return typeof n=="object"&&"length"in n?n:Array.from(n);}function jn6(n,e){let t=n.length,r,i;for(;t;)i=e()*t--|0,r=n[t],n[t]=n[i],n[i]=r;return n;}function J19(n,e){for(var t=0,r=(n=jn6(Array.from(n),e)).length,i=[],u,l;t<r;)u=n[t],l&&Q18(l,u)?++t:(l=Yn5(i=Xn7(i,u)),t=0);return l;}function Xn7(n,e){var t,r;if(W18(e,n))return[e];for(t=0;t<n.length;++t)if(b12(e,n[t])&&W18(E18(n[t],e),n))return[n[t],e];for(t=0;t<n.length-1;++t)for(r=t+1;r<n.length;++r)if(b12(E18(n[t],n[r]),e)&&b12(E18(n[t],e),n[r])&&b12(E18(n[r],e),n[t])&&W18(U18(n[t],n[r],e),n))return[n[t],n[r],e];throw new Error;}function b12(n,e){var t=n.r-e.r,r=e.x-n.x,i=e.y-n.y;return t<0||t*t<r*r+i*i;}function Q18(n,e){var t=n.r-e.r+Math.max(n.r,e.r,1)*1e-9,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i;}function W18(n,e){for(var t=0;t<e.length;++t)if(!Q18(n,e[t]))return!1;return!0;}function Yn5(n){switch(n.length){case 1:return Hn6(n[0]);case 2:return E18(n[0],n[1]);case 3:return U18(n[0],n[1],n[2]);}}function Hn6(n){return{x:n.x,y:n.y,r:n.r};}function E18(n,e){var t=n.x,r=n.y,i=n.r,u=e.x,l=e.y,s=e.r,c=u-t,f=l-r,h=s-i,o=Math.sqrt(c*c+f*f);return{x:(t+u+c/o*h)/2,y:(r+l+f/o*h)/2,r:(o+i+s)/2};}function U18(n,e,t){var r=n.x,i=n.y,u=n.r,l=e.x,s=e.y,c=e.r,f=t.x,h=t.y,o=t.r,a=r-l,d=r-f,p=i-s,g=i-h,y=c-u,x=o-u,m=r*r+i*i-u*u,_=m-l*l-s*s+c*c,w=m-f*f-h*h+o*o,v=d*p-a*g,z=(p*w-g*_)/(v*2)-r,k=(g*y-p*x)/v,A=(d*_-a*w)/(v*2)-i,M=(a*x-d*y)/v,I=k*k+M*M-1,R=2*(u+z*k+A*M),H=z*z+A*A-u*u,D=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*H))/(2*I):H/R);return{x:r+z+k*D,y:i+A+M*D,r:D};}function nn9(n,e,t){var r=n.x-e.x,i,u,l=n.y-e.y,s,c,f=r*r+l*l;f?(u=e.r+t.r,u*=u,c=n.r+t.r,c*=c,u>c?(i=(f+c-u)/(2*f),s=Math.sqrt(Math.max(0,c/f-i*i)),t.x=n.x-i*r-s*l,t.y=n.y-i*l+s*r):(i=(f+u-c)/(2*f),s=Math.sqrt(Math.max(0,u/f-i*i)),t.x=e.x+i*r-s*l,t.y=e.y+i*l+s*r)):(t.x=e.x+t.r,t.y=e.y);}function en7(n,e){var t=n.r+e.r-1e-6,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i;}function tn8(n){var e=n._,t=n.next._,r=e.r+t.r,i=(e.x*t.r+t.x*e.r)/r,u=(e.y*t.r+t.y*e.r)/r;return i*i+u*u;}function C19(n){this._=n,this.next=null,this.previous=null;}function rn9(n,e){if(!(u=(n=Pn7(n)).length))return 0;var t,r,i,u,l,s,c,f,h,o,a;if(t=n[0],t.x=0,t.y=0,!(u>1))return t.r;if(r=n[1],t.x=-r.r,r.x=t.r,r.y=0,!(u>2))return t.r+r.r;nn9(r,t,i=n[2]),t=new C19(t),r=new C19(r),i=new C19(i),t.next=i.previous=r,r.next=t.previous=i,i.next=r.previous=t;n:for(c=3;c<u;++c){nn9(t._,r._,i=n[c]),i=new C19(i),f=r.next,h=t.previous,o=r._.r,a=t._.r;do if(o<=a){if(en7(f._,i._)){r=f,t.next=r,r.previous=t,--c;continue n;}o+=f._.r,f=f.next;}else{if(en7(h._,i._)){t=h,t.next=r,r.previous=t,--c;continue n;}a+=h._.r,h=h.previous;}while(f!==h.next)for(i.previous=t,i.next=r,t.next=r.previous=r=i,l=tn8(t);(i=i.next)!==r;)(s=tn8(i))<l&&(t=i,l=s);r=t.next;}for(t=[r._],i=r;(i=i.next)!==r;)t.push(i._);for(i=J19(t,e),c=0;c<u;++c)t=n[c],t.x-=i.x,t.y-=i.y;return i.r;}function Fn6(n){return Math.sqrt(n.value);}function Gn6(){var n=null,e=1,t=1,r=q22;function i(u){const l=V15();return u.x=e/2,u.y=t/2,n?u.eachBefore(un9(n)).eachAfter(P20(r,.5,l)).eachBefore(an9(1)):u.eachBefore(un9(Fn6)).eachAfter(P20(q22,1,l)).eachAfter(P20(r,u.r/Math.min(e,t),l)).eachBefore(an9(Math.min(e,t)/(2*u.r))),u;}return i.radius=function(u){return arguments.length?(n=L22(u),i):n;},i.size=function(u){return arguments.length?(e=+u[0],t=+u[1],i):[e,t];},i.padding=function(u){return arguments.length?(r=typeof u=="function"?u:N18(+u),i):r;},i;}function un9(n){return function(e){e.children||(e.r=Math.max(0,+n(e)||0));};}function P20(n,e,t){return function(r){if(i=r.children){var i,u,l=i.length,s=n(r)*e||0,c;if(s)for(u=0;u<l;++u)i[u].r+=s;if(c=rn9(i,t),s)for(u=0;u<l;++u)i[u].r-=s;r.r=c+s;}};}function an9(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y);};}function fn7(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1);}function B16(n,e,t,r,i){for(var u=n.children,l,s=-1,c=u.length,f=n.value&&(r-e)/n.value;++s<c;)l=u[s],l.y0=t,l.y1=i,l.x0=e,l.x1=e+=l.value*f;}function Jn6(){var n=1,e=1,t=0,r=!1;function i(l){var s=l.height+1;return l.x0=l.y0=t,l.x1=n,l.y1=e/s,l.eachBefore(u(e,s)),r&&l.eachBefore(fn7),l;}function u(l,s){return function(c){c.children&&B16(c,c.x0,l*(c.depth+1)/s,c.x1,l*(c.depth+2)/s);var f=c.x0,h=c.y0,o=c.x1-t,a=c.y1-t;o<f&&(f=o=(f+o)/2),a<h&&(h=a=(h+a)/2),c.x0=f,c.y0=h,c.x1=o,c.y1=a;};}return i.round=function(l){return arguments.length?(r=!!l,i):r;},i.size=function(l){return arguments.length?(n=+l[0],e=+l[1],i):[n,e];},i.padding=function(l){return arguments.length?(t=+l,i):t;},i;}var Qn5={depth:-1},ln9={},j19={};function Un6(n){return n.id;}function ne12(n){return n.parentId;}function ee11(){var n=Un6,e=ne12,t;function r(i){var u=Array.from(i),l=n,s=e,c,f,h,o,a,d,p,g,y=new Map;if(t!=null){const x=u.map((w,v)=>te11(t(w,v,i))),m=x.map(cn8),_=new Set(x).add("");for(const w of m)_.has(w)||(_.add(w),x.push(w),m.push(cn8(w)),u.push(j19));l=(w,v)=>x[v],s=(w,v)=>m[v];}for(h=0,c=u.length;h<c;++h)f=u[h],d=u[h]=new S18(f),(p=l(f,h,i))!=null&&(p+="")&&(g=d.id=p,y.set(g,y.has(g)?ln9:d)),(p=s(f,h,i))!=null&&(p+="")&&(d.parent=p);for(h=0;h<c;++h)if(d=u[h],p=d.parent){if(a=y.get(p),!a)throw new Error("missing: "+p);if(a===ln9)throw new Error("ambiguous: "+p);a.children?a.children.push(d):a.children=[d],d.parent=a;}else{if(o)throw new Error("multiple roots");o=d;}if(!o)throw new Error("no root");if(t!=null){for(;o.data===j19&&o.children.length===1;)o=o.children[0],--c;for(let x=u.length-1;x>=0&&!(d=u[x],d.data!==j19);--x)d.data=null;}if(o.parent=Qn5,o.eachBefore(function(x){x.depth=x.parent.depth+1,--c;}).eachBefore(Z18),o.parent=null,c>0)throw new Error("cycle");return o;}return r.id=function(i){return arguments.length?(n=L22(i),r):n;},r.parentId=function(i){return arguments.length?(e=L22(i),r):e;},r.path=function(i){return arguments.length?(t=L22(i),r):t;},r;}function te11(n){n=`${n}`;let e=n.length;return K19(n,e-1)&&!K19(n,e-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`;}function cn8(n){let e=n.length;if(e<2)return"";for(;--e>1&&!K19(n,e););return n.slice(0,e);}function K19(n,e){if(n[e]==="/"){let t=0;for(;e>0&&n[--e]==="\\";)++t;if((t&1)===0)return!0;}return!1;}function re12(n,e){return n.parent===e.parent?1:2;}function X19(n){var e=n.children;return e?e[0]:n.t;}function Y18(n){var e=n.children;return e?e[e.length-1]:n.t;}function ie9(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t;}function ue9(n){for(var e=0,t=0,r=n.children,i=r.length,u;--i>=0;)u=r[i],u.z+=e,u.m+=e,e+=u.s+(t+=u.c);}function ae8(n,e,t){return n.a.parent===e.parent?n.a:t;}function T12(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e;}T12.prototype=Object.create(S18.prototype);function fe8(n){for(var e=new T12(n,0),t,r=[e],i,u,l,s;t=r.pop();)if(u=t._.children)for(t.children=new Array(s=u.length),l=s-1;l>=0;--l)r.push(i=t.children[l]=new T12(u[l],l)),i.parent=t;return(e.parent=new T12(null,0)).children=[e],e;}function le9(){var n=re12,e=1,t=1,r=null;function i(f){var h=fe8(f);if(h.eachAfter(u),h.parent.m=-h.z,h.eachBefore(l),r)f.eachBefore(c);else{var o=f,a=f,d=f;f.eachBefore(function(m){m.x<o.x&&(o=m),m.x>a.x&&(a=m),m.depth>d.depth&&(d=m);});var p=o===a?1:n(o,a)/2,g=p-o.x,y=e/(a.x+p+g),x=t/(d.depth||1);f.eachBefore(function(m){m.x=(m.x+g)*y,m.y=m.depth*x;});}return f;}function u(f){var h=f.children,o=f.parent.children,a=f.i?o[f.i-1]:null;if(h){ue9(f);var d=(h[0].z+h[h.length-1].z)/2;a?(f.z=a.z+n(f._,a._),f.m=f.z-d):f.z=d;}else a&&(f.z=a.z+n(f._,a._));f.parent.A=s(f,a,f.parent.A||o[0]);}function l(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m;}function s(f,h,o){if(h){for(var a=f,d=f,p=h,g=a.parent.children[0],y=a.m,x=d.m,m=p.m,_=g.m,w;p=Y18(p),a=X19(a),p&&a;)g=X19(g),d=Y18(d),d.a=f,w=p.z+m-a.z-y+n(p._,a._),w>0&&(ie9(ae8(p,f,o),f,w),y+=w,x+=w),m+=p.m,y+=a.m,_+=g.m,x+=d.m;p&&!Y18(d)&&(d.t=p,d.m+=m-x),a&&!X19(g)&&(g.t=a,g.m+=y-_,o=f);}return o;}function c(f){f.x*=e,f.y=f.depth*t;}return i.separation=function(f){return arguments.length?(n=f,i):n;},i.size=function(f){return arguments.length?(r=!1,e=+f[0],t=+f[1],i):r?null:[e,t];},i.nodeSize=function(f){return arguments.length?(r=!0,e=+f[0],t=+f[1],i):r?[e,t]:null;},i;}function $15(n,e,t,r,i){for(var u=n.children,l,s=-1,c=u.length,f=n.value&&(i-t)/n.value;++s<c;)l=u[s],l.x0=e,l.x1=r,l.y0=t,l.y1=t+=l.value*f;}var hn7=(1+Math.sqrt(5))/2;function sn7(n,e,t,r,i,u){for(var l=[],s=e.children,c,f,h=0,o=0,a=s.length,d,p,g=e.value,y,x,m,_,w,v,z;h<a;){d=i-t,p=u-r;do y=s[o++].value;while(!y&&o<a)for(x=m=y,v=Math.max(p/d,d/p)/(g*n),z=y*y*v,w=Math.max(m/z,z/x);o<a;++o){if(y+=f=s[o].value,f<x&&(x=f),f>m&&(m=f),z=y*y*v,_=Math.max(m/z,z/x),_>w){y-=f;break;}w=_;}l.push(c={value:y,dice:d<p,children:s.slice(h,o)}),c.dice?B16(c,t,r,i,g?r+=p*y/g:u):$15(c,t,r,g?t+=d*y/g:i,u),g-=y,h=o;}return l;}var on8=function n(e){function t(r,i,u,l,s){sn7(e,r,i,u,l,s);}return t.ratio=function(r){return n((r=+r)>1?r:1);},t;}(hn7);function ce5(){var n=on8,e=!1,t=1,r=1,i=[0],u=q22,l=q22,s=q22,c=q22,f=q22;function h(a){return a.x0=a.y0=0,a.x1=t,a.y1=r,a.eachBefore(o),i=[0],e&&a.eachBefore(fn7),a;}function o(a){var d=i[a.depth],p=a.x0+d,g=a.y0+d,y=a.x1-d,x=a.y1-d;y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),a.x0=p,a.y0=g,a.x1=y,a.y1=x,a.children&&(d=i[a.depth+1]=u(a)/2,p+=f(a)-d,g+=l(a)-d,y-=s(a)-d,x-=c(a)-d,y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),n(a,p,g,y,x));}return h.round=function(a){return arguments.length?(e=!!a,h):e;},h.size=function(a){return arguments.length?(t=+a[0],r=+a[1],h):[t,r];},h.tile=function(a){return arguments.length?(n=F16(a),h):n;},h.padding=function(a){return arguments.length?h.paddingInner(a).paddingOuter(a):h.paddingInner();},h.paddingInner=function(a){return arguments.length?(u=typeof a=="function"?a:N18(+a),h):u;},h.paddingOuter=function(a){return arguments.length?h.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):h.paddingTop();},h.paddingTop=function(a){return arguments.length?(l=typeof a=="function"?a:N18(+a),h):l;},h.paddingRight=function(a){return arguments.length?(s=typeof a=="function"?a:N18(+a),h):s;},h.paddingBottom=function(a){return arguments.length?(c=typeof a=="function"?a:N18(+a),h):c;},h.paddingLeft=function(a){return arguments.length?(f=typeof a=="function"?a:N18(+a),h):f;},h;}function he6(n,e,t,r,i){var u=n.children,l,s=u.length,c,f=new Array(s+1);for(f[0]=c=l=0;l<s;++l)f[l+1]=c+=u[l].value;h(0,s,n.value,e,t,r,i);function h(o,a,d,p,g,y,x){if(o>=a-1){var m=u[o];m.x0=p,m.y0=g,m.x1=y,m.y1=x;return;}for(var _=f[o],w=d/2+_,v=o+1,z=a-1;v<z;){var k=v+z>>>1;f[k]<w?v=k+1:z=k;}w-f[v-1]<f[v]-w&&o+1<v&&--v;var A=f[v]-_,M=d-A;if(y-p>x-g){var I=d?(p*M+y*A)/d:y;h(o,v,A,p,g,I,x),h(v,a,M,I,g,y,x);}else{var R=d?(g*M+x*A)/d:x;h(o,v,A,p,g,y,R),h(v,a,M,p,R,y,x);}}}function se10(n,e,t,r,i){(n.depth&1?$15:B16)(n,e,t,r,i);}var oe11=function n(e){function t(r,i,u,l,s){if((c=r._squarify)&&c.ratio===e)for(var c,f,h,o,a=-1,d,p=c.length,g=r.value;++a<p;){for(f=c[a],h=f.children,o=f.value=0,d=h.length;o<d;++o)f.value+=h[o].value;f.dice?B16(f,i,u,l,g?u+=(s-u)*f.value/g:s):$15(f,i,u,g?i+=(l-i)*f.value/g:l,s),g-=f.value;}else r._squarify=c=sn7(e,r,i,u,l,s),c.ratio=e;}return t.ratio=function(r){return n((r=+r)>1?r:1);},t;}(hn7);function h10(e,t,n){const s={};return e.each(a=>{const r=a.data;n(r)&&(s[t(r)]=a);}),e.lookup=s,e;}function g9(e){dt2.call(this,null,e);}g9.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const _17=e=>e.values;Pn(g9,dt2,{transform(e,t){t.source||b("Nest transform requires an upstream data source.");var n=e.generate,s=e.modified(),a=t.clone(),r=this.value;return(!r||s||t.changed())&&(r&&r.each(i=>{i.children&&Et(i.data)&&a.rem.push(i.data);}),this.value=r=O19({values:p(e.keys).reduce((i,o)=>(i.key(o),i),ee12()).entries(a.source)},_17),n&&r.each(i=>{i.children&&(i=W7(i.data),a.add.push(i),a.source.push(i));}),h10(r,d4,d4)),a.source.root=r,a;}});function ee12(){const e=[],t={entries:a=>s(n(a,0),0),key:a=>(e.push(a),t)};function n(a,r){if(r>=e.length)return a;const i=a.length,o=e[r++],d={},x={};let U=-1,p,y,w;for(;++U<i;)p=o(y=a[U])+"",(w=d[p])?w.push(y):d[p]=[y];for(p in d)x[p]=n(d[p],r);return x;}function s(a,r){if(++r>e.length)return a;const i=[];for(const o in a)i.push({key:o,values:s(a[o],r)});return i;}return t;}function u8(e){dt2.call(this,null,e);}const te12=(e,t)=>e.parent===t.parent?1:2;Pn(u8,dt2,{transform(e,t){(!t.source||!t.source.root)&&b(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),s=this.fields,a=t.source.root,r=e.as||s;e.field?a.sum(e.field):a.count(),e.sort&&a.sort(Mt1(e.sort,i=>i.data)),ae9(n,this.params,e),n.separation&&n.separation(e.separation!==!1?te12:v);try{this.value=n(a);}catch(i){b(i);}return a.each(i=>re13(i,s,r)),t.reflow(e.modified()).modifies(r).modifies("leaf");}});function ae9(e,t,n){for(let s,a=0,r=t.length;a<r;++a)s=t[a],s in n&&e[s](n[s]);}function re13(e,t,n){const s=e.data,a=t.length-1;for(let r=0;r<a;++r)s[n[r]]=e[t[r]];s[n[a]]=e.children?e.children.length:0;}const k16=["x","y","r","depth","children"];function v13(e){u8.call(this,e);}v13.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:k16.length,default:k16}]},Pn(v13,u8,{layout:Gn6,params:["radius","size","padding"],fields:k16});const b13=["x0","y0","x1","y1","depth","children"];function z15(e){u8.call(this,e);}z15.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:b13.length,default:b13}]},Pn(z15,u8,{layout:Jn6,params:["size","round","padding"],fields:b13});function D12(e){dt2.call(this,null,e);}D12.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Pn(D12,dt2,{transform(e,t){t.source||b("Stratify transform requires an upstream data source.");let n=this.value;const s=e.modified(),a=t.fork(t.ALL).materialize(t.SOURCE),r=!n||s||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return a.source=a.source.slice(),r&&(n=a.source.length?h10(ee11().id(e.key).parentId(e.parentKey)(a.source),e.key,_1):h10(ee11()([{}]),e.key,e.key)),a.source.root=this.value=n,a;}});const E19={tidy:le9,cluster:wn11},T13=["x","y","depth","children"];function q23(e){u8.call(this,e);}q23.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:T13.length,default:T13}]},Pn(q23,u8,{layout(e){const t=e||"tidy";if(g(E19,t))return E19[t]();b("Unrecognized Tree layout method: "+t);},params:["size","nodeSize"],fields:T13});function O20(e){dt2.call(this,[],e);}O20.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Pn(O20,dt2,{transform(e,t){const n=this.value,s=t.source&&t.source.root,a=t.fork(t.NO_SOURCE),r={};return s||b("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(a.rem=n,t.visit(t.SOURCE,i=>r[d4(i)]=1),s.each(i=>{const o=i.data,d=i.parent&&i.parent.data;d&&r[d4(o)]&&r[d4(d)]&&a.add.push(W7({source:d,target:o}));}),this.value=a.add):t.changed(t.MOD)&&(t.visit(t.MOD,i=>r[d4(i)]=1),n.forEach(i=>{(r[d4(i.source)]||r[d4(i.target)])&&a.mod.push(i);})),a;}});const B17={binary:he6,dice:B16,slice:$15,slicedice:se10,squarify:on8,resquarify:oe11},S19=["x0","y0","x1","y1","depth","children"];function L23(e){u8.call(this,e);}L23.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:S19.length,default:S19}]},Pn(L23,u8,{layout(){const e=ce5();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t));},e.method=t=>{g(B17,t)?e.tile(B17[t]):b("Unrecognized Treemap layout method: "+t);},e;},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:S19});const mod6=function(){return{nest:g9,pack:v13,partition:z15,stratify:D12,tree:q23,treelinks:O20,treemap:L23,default:null};}();const Q19=4278190080;function me8(e,i){const f=e.bitmap();return(i||[]).forEach(l=>f.set(e(l.boundary[0]),e(l.boundary[3]))),[f,void 0];}function ce6(e,i,f,l,a){const n=e.width,t=e.height,m=l||a,M=n1(n,t).getContext("2d"),r=n1(n,t).getContext("2d"),s=m&&n1(n,t).getContext("2d");f.forEach(y=>G21(M,y,!1)),G21(r,i,!1),m&&G21(s,i,!0);const d=V16(M,n,t),o=V16(r,n,t),u=m&&V16(s,n,t),c=e.bitmap(),b=m&&e.bitmap();let g,v,x,p,w,k,z,h;for(v=0;v<t;++v)for(g=0;g<n;++g)w=v*n+g,k=d[w]&Q19,h=o[w]&Q19,z=m&&u[w]&Q19,(k||z||h)&&(x=e(g),p=e(v),!a&&(k||h)&&c.set(x,p),m&&(k||z)&&b.set(x,p));return[c,b];}function V16(e,i,f){return new Uint32Array(e.getImageData(0,0,i,f).data.buffer);}function G21(e,i,f){if(!i.length)return;const l=i[0].mark.marktype;l==="group"?i.forEach(a=>{a.items.forEach(n=>G21(e,n.items,f));}):O13[l].draw(e,{items:f?i.map(de8):i});}function de8(e){const i=nt2(e,{});return i.stroke&&i.strokeOpacity!==0||i.fill&&i.fillOpacity!==0?{...i,strokeOpacity:1,stroke:"#000",fillOpacity:0}:i;}const L24=5,j20=32,C20=new Uint32Array(j20+1),S20=new Uint32Array(j20+1);S20[0]=0,C20[0]=~S20[0];for(let e=1;e<=32;++e)S20[e]=S20[e-1]<<1|1,C20[e]=~S20[e];function he7(e,i){const f=new Uint32Array(~~((e*i+32)/32));function l(n,t){f[n]|=t;}function a(n,t){f[n]&=t;}return{array:f,get:(n,t)=>{const m=t*e+n;return f[m>>>5]&1<<(m&31);},set:(n,t)=>{const m=t*e+n;l(m>>>5,1<<(m&31));},clear:(n,t)=>{const m=t*e+n;a(m>>>5,~(1<<(m&31)));},getRange:(n,t,m,M)=>{let r=M,s,d,o,u;for(;r>=t;--r)if(s=r*e+n,d=r*e+m,o=s>>>L24,u=d>>>L24,o===u){if(f[o]&C20[s&31]&S20[(d&31)+1])return!0;}else{if(f[o]&C20[s&31])return!0;if(f[u]&S20[(d&31)+1])return!0;for(let c=o+1;c<u;++c)if(f[c])return!0;}return!1;},setRange:(n,t,m,M)=>{let r,s,d,o,u;for(;t<=M;++t)if(r=t*e+n,s=t*e+m,d=r>>>L24,o=s>>>L24,d===o)l(d,C20[r&31]&S20[(s&31)+1]);else for(l(d,C20[r&31]),l(o,S20[(s&31)+1]),u=d+1;u<o;++u)l(u,4294967295);},clearRange:(n,t,m,M)=>{let r,s,d,o,u;for(;t<=M;++t)if(r=t*e+n,s=t*e+m,d=r>>>L24,o=s>>>L24,d===o)a(d,S20[r&31]|C20[(s&31)+1]);else for(a(d,S20[r&31]),a(o,C20[(s&31)+1]),u=d+1;u<o;++u)a(u,0);},outOfBounds:(n,t,m,M)=>n<0||t<0||M>=i||m>=e};}function ye6(e,i,f){const l=Math.max(1,Math.sqrt(e*i/1e6)),a=~~((e+2*f+l)/l),n=~~((i+2*f+l)/l),t=m=>~~((m+f)/l);return t.invert=m=>m*l-f,t.bitmap=()=>he7(a,n),t.ratio=l,t.padding=f,t.width=e,t.height=i,t;}function xe5(e,i,f,l){const a=e.width,n=e.height;return function(t){const m=t.datum.datum.items[l].items,M=m.length,r=t.datum.fontSize,s=W12.width(t.datum,t.datum.text);let d=0,o,u,c,b,g,v,x;for(let p=0;p<M;++p)o=m[p].x,c=m[p].y,u=m[p].x2===void 0?o:m[p].x2,b=m[p].y2===void 0?c:m[p].y2,g=(o+u)/2,v=(c+b)/2,x=Math.abs(u-o+b-c),x>=d&&(d=x,t.x=g,t.y=v);return g=s/2,v=r/2,o=t.x-g,u=t.x+g,c=t.y-v,b=t.y+v,t.align="center",o<0&&u<=a?t.align="left":0<=o&&a<u&&(t.align="right"),t.baseline="middle",c<0&&b<=n?t.baseline="top":0<=c&&n<b&&(t.baseline="bottom"),!0;};}function H18(e,i,f,l,a,n){let t=f/2;return e-t<0||e+t>a||i-(t=l/2)<0||i+t>n;}function U19(e,i,f,l,a,n,t,m){const M=a*n/(l*2),r=e(i-M),s=e(i+M),d=e(f-(n=n/2)),o=e(f+n);return t.outOfBounds(r,d,s,o)||t.getRange(r,d,s,o)||m&&m.getRange(r,d,s,o);}function ge7(e,i,f,l){const a=e.width,n=e.height,t=i[0],m=i[1];function M(r,s,d,o,u){const c=e.invert(r),b=e.invert(s);let g=d,v=n,x;if(!H18(c,b,o,u,a,n)&&!U19(e,c,b,u,o,g,t,m)&&!U19(e,c,b,u,o,u,t,null)){for(;v-g>=1;)x=(g+v)/2,U19(e,c,b,u,o,x,t,m)?v=x:g=x;if(g>d)return[c,b,g,!0];}}return function(r){const s=r.datum.datum.items[l].items,d=s.length,o=r.datum.fontSize,u=W12.width(r.datum,r.datum.text);let c=f?o:0,b=!1,g=!1,v=0,x,p,w,k,z,h,y,E,A,O,R,B,P,I,D,F,q;for(let W=0;W<d;++W){for(x=s[W].x,w=s[W].y,p=s[W].x2===void 0?x:s[W].x2,k=s[W].y2===void 0?w:s[W].y2,x>p&&(q=x,x=p,p=q),w>k&&(q=w,w=k,k=q),A=e(x),R=e(p),O=~~((A+R)/2),B=e(w),I=e(k),P=~~((B+I)/2),y=O;y>=A;--y)for(E=P;E>=B;--E)F=M(y,E,c,u,o),F&&([r.x,r.y,c,b]=F);for(y=O;y<=R;++y)for(E=P;E<=I;++E)F=M(y,E,c,u,o),F&&([r.x,r.y,c,b]=F);!b&&!f&&(D=Math.abs(p-x+k-w),z=(x+p)/2,h=(w+k)/2,D>=v&&!H18(z,h,u,o,a,n)&&!U19(e,z,h,o,u,o,t,null)&&(v=D,r.x=z,r.y=h,g=!0));}return b||g?(z=u/2,h=o/2,t.setRange(e(r.x-z),e(r.y-h),e(r.x+z),e(r.y+h)),r.align="center",r.baseline="middle",!0):!1;};}const pe7=[-1,-1,1,1],be6=[-1,1,-1,1];function ve7(e,i,f,l){const a=e.width,n=e.height,t=i[0],m=i[1],M=e.bitmap();return function(r){const s=r.datum.datum.items[l].items,d=s.length,o=r.datum.fontSize,u=W12.width(r.datum,r.datum.text),c=[];let b=f?o:0,g=!1,v=!1,x=0,p,w,k,z,h,y,E,A,O,R,B,P;for(let I=0;I<d;++I){for(p=s[I].x,k=s[I].y,w=s[I].x2===void 0?p:s[I].x2,z=s[I].y2===void 0?k:s[I].y2,c.push([e((p+w)/2),e((k+z)/2)]);c.length;){if([E,A]=c.pop(),t.get(E,A)||m.get(E,A)||M.get(E,A))continue;M.set(E,A);for(let D=0;D<4;++D)h=E+pe7[D],y=A+be6[D],M.outOfBounds(h,y,h,y)||c.push([h,y]);if(h=e.invert(E),y=e.invert(A),O=b,R=n,!H18(h,y,u,o,a,n)&&!U19(e,h,y,o,u,O,t,m)&&!U19(e,h,y,o,u,o,t,null)){for(;R-O>=1;)B=(O+R)/2,U19(e,h,y,o,u,B,t,m)?R=B:O=B;O>b&&(r.x=h,r.y=y,b=O,g=!0);}}!g&&!f&&(P=Math.abs(w-p+z-k),h=(p+w)/2,y=(k+z)/2,P>=x&&!H18(h,y,u,o,a,n)&&!U19(e,h,y,o,u,o,t,null)&&(x=P,r.x=h,r.y=y,v=!0));}return g||v?(h=u/2,y=o/2,t.setRange(e(r.x-h),e(r.y-y),e(r.x+h),e(r.y+y)),r.align="center",r.baseline="middle",!0):!1;};}const Me7=["right","center","left"],Ae6=["bottom","middle","top"];function we8(e,i,f,l){const a=e.width,n=e.height,t=i[0],m=i[1],M=l.length;return function(r){const s=r.boundary,d=r.datum.fontSize;if(s[2]<0||s[5]<0||s[0]>a||s[3]>n)return!1;let o=r.textWidth??0,u,c,b,g,v,x,p,w,k,z,h,y,E,A,O;for(let R=0;R<M;++R){if(u=(f[R]&3)-1,c=(f[R]>>>2&3)-1,b=u===0&&c===0||l[R]<0,g=u&&c?Math.SQRT1_2:1,v=l[R]<0?-1:1,x=s[1+u]+l[R]*u*g,h=s[4+c]+v*d*c/2+l[R]*c*g,w=h-d/2,k=h+d/2,y=e(x),A=e(w),O=e(k),!o)if(ie10(y,y,A,O,t,m,x,x,w,k,s,b))o=W12.width(r.datum,r.datum.text);else continue;if(z=x+v*o*u/2,x=z-o/2,p=z+o/2,y=e(x),E=e(p),ie10(y,E,A,O,t,m,x,p,w,k,s,b))return r.x=u?u*v<0?p:x:z,r.y=c?c*v<0?k:w:h,r.align=Me7[u*v+1],r.baseline=Ae6[c*v+1],t.setRange(y,A,E,O),!0;}return!1;};}function ie10(e,i,f,l,a,n,t,m,M,r,s,d){return!(a.outOfBounds(e,f,i,l)||(d&&n||a).getRange(e,f,i,l));}const X20=0,J20=4,Y19=8,Z19=0,_18=1,$16=2,ke6={"top-left":X20+Z19,top:X20+_18,"top-right":X20+$16,left:J20+Z19,middle:J20+_18,right:J20+$16,"bottom-left":Y19+Z19,bottom:Y19+_18,"bottom-right":Y19+$16},ze6={naive:xe5,"reduced-search":ge7,floodfill:ve7};function Re8(e,i,f,l,a,n,t,m,M,r,s){if(!e.length)return e;const d=Math.max(l.length,a.length),o=Ee4(l,d),u=Oe2(a,d),c=Te6(e[0].datum),b=c==="group"&&e[0].datum.items[M].marktype,g=b==="area",v=Ie5(c,b,m,M),x=r===null||r===Infinity,p=g&&s==="naive";let w=-1,k=-1;const z=e.map(A=>{const O=x?W12.width(A,A.text):void 0;return w=Math.max(w,O),k=Math.max(k,A.fontSize),{datum:A,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(A),textWidth:O};});r=r===null||r===Infinity?Math.max(w,k)+Math.max(...l):r;const h=ye6(i[0],i[1],r);let y;if(!p){f&&z.sort((R,B)=>f(R.datum,B.datum));let A=!1;for(let R=0;R<u.length&&!A;++R)A=u[R]===5||o[R]<0;const O=(c&&t||g)&&e.map(R=>R.datum);y=n.length||O?ce6(h,O||[],n,A,g):me8(h,t&&z);}const E=g?ze6[s](h,y,t,M):we8(h,y,u,o);return z.forEach(A=>A.opacity=+E(A)),z;}function Ee4(e,i){const f=new Float64Array(i),l=e.length;for(let a=0;a<l;++a)f[a]=e[a]||0;for(let a=l;a<i;++a)f[a]=f[l-1];return f;}function Oe2(e,i){const f=new Int8Array(i),l=e.length;for(let a=0;a<l;++a)f[a]|=ke6[e[a]];for(let a=l;a<i;++a)f[a]=f[l-1];return f;}function Te6(e){return e&&e.mark&&e.mark.marktype;}function Ie5(e,i,f,l){const a=n=>[n.x,n.x,n.x,n.y,n.y,n.y];return e?e==="line"||e==="area"?n=>a(n.datum):i==="line"?n=>{const t=n.datum.items[l].items;return a(t.length?t[f==="start"?0:t.length-1]:{x:NaN,y:NaN});}:n=>{const t=n.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2];}:a;}const ee13=["x","y","opacity","align","baseline"],ae10=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function te13(e){dt2.call(this,null,e);}te13.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:ae10},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:ee13.length,default:ee13}]},Pn(te13,dt2,{transform(e,i){function f(n){const t=e[n];return O1(t)&&i.modified(t.fields);}const l=e.modified();if(!(l||i.changed(i.ADD_REM)||f("sort")))return;(!e.size||e.size.length!==2)&&b("Size parameter should be specified as a [width, height] array.");const a=e.as||ee13;return Re8(i.materialize(i.SOURCE).source||[],e.size,e.sort,p(e.offset==null?1:e.offset),p(e.anchor||ae10),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(n=>{const t=n.datum;t[a[0]]=n.x,t[a[1]]=n.y,t[a[2]]=n.opacity,t[a[3]]=n.align,t[a[4]]=n.baseline;}),i.reflow(l).modifies(a);}});const mod7=function(){return{label:te13,default:null};}();function L25(e,r){var t=[],g=function(l){return l(i);},u,o,a,i,n,s;if(r==null)t.push(e);else for(u={},o=0,a=e.length;o<a;++o)i=e[o],n=r.map(g),s=u[n],s||(u[n]=s=[],s.dims=n,t.push(s)),s.push(i);return t;}function b14(e){dt2.call(this,null,e);}b14.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Pn(b14,dt2,{transform(e,r){const t=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||e.modified()){const g=r.materialize(r.SOURCE).source,u=L25(g,e.groupby),o=(e.groupby||[]).map(H1),a=o.length,i=e.as||[H1(e.x),H1(e.y)],n=[];u.forEach(s=>{Re1(s,e.x,e.y,e.bandwidth||.3).forEach(l=>{const d={};for(let m=0;m<a;++m)d[o[m]]=s.dims[m];d[i[0]]=l[0],d[i[1]]=l[1],n.push(W7(d));});}),this.value&&(t.rem=this.value),this.value=t.add=t.source=n;}return t;}});const E20={constant:re4,linear:oe3,log:Fe1,exp:Se1,pow:ke1,quad:le2,poly:Ie1},V17=(e,r)=>e==="poly"?r:e==="quad"?2:1;function O21(e){dt2.call(this,null,e);}O21.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(E20)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Pn(O21,dt2,{transform(e,r){const t=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||e.modified()){const g1=r.materialize(r.SOURCE).source,u=L25(g1,e.groupby),o=(e.groupby||[]).map(H1),a=e.method||"linear",i=e.order==null?3:e.order,n=V17(a,i),s=e.as||[H1(e.x),H1(e.y)],l=E20[a],d=[];let m=e.extent;g(E20,a)||b("Invalid regression method: "+a),m!=null&&a==="log"&&m[0]<=0&&(r.dataflow.warn("Ignoring extent with values <= 0 for log regression."),m=null),u.forEach(p=>{const k=p.length;if(k<=n){r.dataflow.warn("Skipping regression with more parameters than data points.");return;}const h=l(p,e.x,e.y,i);if(e.params){d.push(W7({keys:p.dims,coef:h.coef,rSquared:h.rSquared}));return;}const S=m||Nn(p,e.x),q=c=>{const y={};for(let v=0;v<o.length;++v)y[o[v]]=p.dims[v];y[s[0]]=c[0],y[s[1]]=c[1],d.push(W7(y));};a==="linear"||a==="constant"?S.forEach(c=>q([c,h.predict(c)])):Ue1(h.predict,S,25,200).forEach(q);}),this.value&&(t.rem=this.value),this.value=t.add=t.source=d;}return t;}});const mod8=function(){return{loess:b14,regression:O21,default:null};}();const rt8=11102230246251565e-32,b15=134217729,_n5=(3+8*rt8)*rt8;function it8(I,J,V,S,R){let K,j,D,E,e=J[0],f=S[0],a=0,r=0;f>e===f>-e?(K=e,e=J[++a]):(K=f,f=S[++r]);let i=0;if(a<I&&r<V)for(f>e===f>-e?(j=e+K,D=K-(j-e),e=J[++a]):(j=f+K,D=K-(j-f),f=S[++r]),K=j,D!==0&&(R[i++]=D);a<I&&r<V;)f>e===f>-e?(j=K+e,E=j-K,D=K-(j-E)+(e-E),e=J[++a]):(j=K+f,E=j-K,D=K-(j-E)+(f-E),f=S[++r]),K=j,D!==0&&(R[i++]=D);for(;a<I;)j=K+e,E=j-K,D=K-(j-E)+(e-E),e=J[++a],K=j,D!==0&&(R[i++]=D);for(;r<V;)j=K+f,E=j-K,D=K-(j-E)+(f-E),f=S[++r],K=j,D!==0&&(R[i++]=D);return(K!==0||i===0)&&(R[i++]=K),i;}function Mn9(I,J){let V=J[0];for(let S=1;S<I;S++)V+=J[S];return V;}function N19(I){return new Float64Array(I);}const Bc=(3+16*11102230246251565e-32)*11102230246251565e-32,Qc=(2+12*11102230246251565e-32)*11102230246251565e-32,gc=(9+64*11102230246251565e-32)*11102230246251565e-32*11102230246251565e-32,kt7=N19(4),cc=N19(8),sc=N19(12),oc=N19(16),$t7=N19(4);function Dc(I,J,V,S,R,K,j){let D,E,e,f,a,r,i,v,t,o,l,C,M,Q,d,F,$,A;const H=I-R,O=V-R,U=J-K,P=S-K;Q=H*P,r=b15*H,i=r-(r-H),v=H-i,r=b15*P,t=r-(r-P),o=P-t,d=v*o-(Q-i*t-v*t-i*o),F=U*O,r=b15*U,i=r-(r-U),v=U-i,r=b15*O,t=r-(r-O),o=O-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,kt7[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,kt7[1]=M-(l+a)+(a-F),A=C+l,a=A-C,kt7[2]=C-(A-a)+(l-a),kt7[3]=A;let Y=Mn9(4,kt7),n=Qc*j;if(Y>=n||-Y>=n)return Y;if(a=I-H,D=I-(H+a)+(a-R),a=V-O,e=V-(O+a)+(a-R),a=J-U,E=J-(U+a)+(a-K),a=S-P,f=S-(P+a)+(a-K),D===0&&E===0&&e===0&&f===0)return Y;if(n=gc*j+_n5*Math.abs(Y),Y+=H*f+P*D-(U*e+O*E),Y>=n||-Y>=n)return Y;Q=D*P,r=b15*D,i=r-(r-D),v=D-i,r=b15*P,t=r-(r-P),o=P-t,d=v*o-(Q-i*t-v*t-i*o),F=E*O,r=b15*E,i=r-(r-E),v=E-i,r=b15*O,t=r-(r-O),o=O-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,$t7[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,$t7[1]=M-(l+a)+(a-F),A=C+l,a=A-C,$t7[2]=C-(A-a)+(l-a),$t7[3]=A;const u=it8(4,kt7,4,$t7,cc);Q=H*f,r=b15*H,i=r-(r-H),v=H-i,r=b15*f,t=r-(r-f),o=f-t,d=v*o-(Q-i*t-v*t-i*o),F=U*e,r=b15*U,i=r-(r-U),v=U-i,r=b15*e,t=r-(r-e),o=e-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,$t7[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,$t7[1]=M-(l+a)+(a-F),A=C+l,a=A-C,$t7[2]=C-(A-a)+(l-a),$t7[3]=A;const h=it8(u,cc,4,$t7,sc);Q=D*f,r=b15*D,i=r-(r-D),v=D-i,r=b15*f,t=r-(r-f),o=f-t,d=v*o-(Q-i*t-v*t-i*o),F=E*e,r=b15*E,i=r-(r-E),v=E-i,r=b15*e,t=r-(r-e),o=e-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,$t7[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,$t7[1]=M-(l+a)+(a-F),A=C+l,a=A-C,$t7[2]=C-(A-a)+(l-a),$t7[3]=A;const q=it8(h,sc,4,$t7,oc);return oc[q-1];}function Fc(I,J,V,S,R,K){const j=(J-K)*(V-R),D=(I-R)*(S-K),E=j-D;if(j===0||D===0||j>0!==D>0)return E;const e=Math.abs(j+D);return Math.abs(E)>=Bc*e?E:-Dc(I,J,V,S,R,K,e);}N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(8),N19(8),N19(8),N19(4),N19(8),N19(8),N19(8),N19(12);N19(192),N19(192);N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(8),N19(8),N19(8),N19(8),N19(8),N19(8),N19(8),N19(8),N19(8),N19(4),N19(4),N19(4),N19(8),N19(16),N19(16),N19(16),N19(32),N19(32),N19(48),N19(64);N19(1152),N19(1152);N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(4),N19(24),N19(24),N19(24),N19(24),N19(24),N19(24),N19(24),N19(24),N19(24),N19(24),N19(1152),N19(1152),N19(1152),N19(1152),N19(1152),N19(2304),N19(2304),N19(3456),N19(5760),N19(8),N19(8),N19(8),N19(16),N19(24),N19(48),N19(48),N19(96),N19(192),N19(384),N19(384),N19(384),N19(768);N19(96),N19(96),N19(96),N19(1152);const F17=Math.pow(2,-52),q24=new Uint32Array(512);class Y20{static from(t,i=Q20,l=V18){const r=t.length,h=new Float64Array(r*2);for(let n=0;n<r;n++){const o=t[n];h[2*n]=i(o),h[2*n+1]=l(o);}return new Y20(h);}constructor(t){const i=t.length>>1;if(i>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const l=Math.max(2*i-5,0);this._triangles=new Uint32Array(l*3),this._halfedges=new Int32Array(l*3),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update();}update(){const{coords:t,_hullPrev:i,_hullNext:l,_hullTri:r,_hullHash:h}=this,n=t.length>>1;let o=Infinity,_=Infinity,f=-Infinity,x=-Infinity;for(let s=0;s<n;s++){const c=t[2*s],g=t[2*s+1];c<o&&(o=c),g<_&&(_=g),c>f&&(f=c),g>x&&(x=g),this._ids[s]=s;}const m=(o+f)/2,b=(_+x)/2;let d=Infinity,u,y,p;for(let s=0;s<n;s++){const c=C21(m,b,t[2*s],t[2*s+1]);c<d&&(u=s,d=c);}const T=t[2*u],U=t[2*u+1];d=Infinity;for(let s=0;s<n;s++){if(s===u)continue;const c=C21(T,U,t[2*s],t[2*s+1]);c<d&&c>0&&(y=s,d=c);}let k=t[2*y],L=t[2*y+1],G=Infinity;for(let s=0;s<n;s++){if(s===u||s===y)continue;const c=Z20(T,U,k,L,t[2*s],t[2*s+1]);c<G&&(p=s,G=c);}let E=t[2*p],N=t[2*p+1];if(G===Infinity){for(let g=0;g<n;g++)this._dists[g]=t[2*g]-t[0]||t[2*g+1]-t[1];v14(this._ids,this._dists,0,n-1);const s=new Uint32Array(n);let c=0;for(let g=0,w=-Infinity;g<n;g++){const A=this._ids[g];this._dists[A]>w&&(s[c++]=A,w=this._dists[A]);}this.hull=s.subarray(0,c),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return;}if(Fc(T,U,k,L,E,N)<0){const s=y,c=k,g=L;y=p,k=E,L=N,p=s,E=c,N=g;}const D=B18(T,U,k,L,E,N);this._cx=D.x,this._cy=D.y;for(let s=0;s<n;s++)this._dists[s]=C21(t[2*s],t[2*s+1],D.x,D.y);v14(this._ids,this._dists,0,n-1),this._hullStart=u;let P=3;l[u]=i[p]=y,l[y]=i[u]=p,l[p]=i[y]=u,r[u]=0,r[y]=1,r[p]=2,h.fill(-1),h[this._hashKey(T,U)]=u,h[this._hashKey(k,L)]=y,h[this._hashKey(E,N)]=p,this.trianglesLen=0,this._addTriangle(u,y,p,-1,-1,-1);for(let s=0,c,g;s<this._ids.length;s++){const w=this._ids[s],A=t[2*w],M=t[2*w+1];if(s>0&&Math.abs(A-c)<=F17&&Math.abs(M-g)<=F17)continue;if(c=A,g=M,w===u||w===y||w===p)continue;let I=0;for(let H=0,J=this._hashKey(A,M);H<this._hashSize&&!(I=h[(J+H)%this._hashSize],I!==-1&&I!==l[I]);H++);I=i[I];let a=I,S;for(;S=l[a],Fc(A,M,t[2*a],t[2*a+1],t[2*S],t[2*S+1])>=0;)if(a=S,a===I){a=-1;break;}if(a===-1)continue;let K=this._addTriangle(a,w,l[a],-1,-1,r[a]);r[w]=this._legalize(K+2),r[a]=K,P++;let z=l[a];for(;S=l[z],Fc(A,M,t[2*z],t[2*z+1],t[2*S],t[2*S+1])<0;)K=this._addTriangle(z,w,S,r[w],-1,r[z]),r[w]=this._legalize(K+2),l[z]=z,P--,z=S;if(a===I)for(;S=i[a],Fc(A,M,t[2*S],t[2*S+1],t[2*a],t[2*a+1])<0;)K=this._addTriangle(S,w,a,-1,r[a],r[S]),this._legalize(K+2),r[S]=K,l[a]=a,P--,a=S;this._hullStart=i[w]=a,l[a]=i[z]=w,l[w]=z,h[this._hashKey(A,M)]=w,h[this._hashKey(t[2*a],t[2*a+1])]=a;}this.hull=new Uint32Array(P);for(let s=0,c=this._hullStart;s<P;s++)this.hull[s]=c,c=l[c];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen);}_hashKey(t,i){return Math.floor(O22(t-this._cx,i-this._cy)*this._hashSize)%this._hashSize;}_legalize(t){const{_triangles:i,_halfedges:l,coords:r}=this;let h=0,n=0;for(;;){const o=l[t],_=t-t%3;if(n=_+(t+2)%3,o===-1){if(h===0)break;t=q24[--h];continue;}const f=o-o%3,x=_+(t+1)%3,m=f+(o+2)%3,b=i[n],d=i[t],u=i[x],y=i[m],p=R16(r[2*b],r[2*b+1],r[2*d],r[2*d+1],r[2*u],r[2*u+1],r[2*y],r[2*y+1]);if(p){i[t]=y,i[o]=b;const T=l[m];if(T===-1){let k=this._hullStart;do{if(this._hullTri[k]===m){this._hullTri[k]=t;break;}k=this._hullPrev[k];}while(k!==this._hullStart)}this._link(t,T),this._link(o,l[n]),this._link(n,m);const U=f+(o+1)%3;h<q24.length&&(q24[h++]=U);}else{if(h===0)break;t=q24[--h];}}return n;}_link(t,i){this._halfedges[t]=i,i!==-1&&(this._halfedges[i]=t);}_addTriangle(t,i,l,r,h,n){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=i,this._triangles[o+2]=l,this._link(o,r),this._link(o+1,h),this._link(o+2,n),this.trianglesLen+=3,o;}}function O22(e,t){const i=e/(Math.abs(e)+Math.abs(t));return(t>0?3-i:1+i)/4;}function C21(e,t,i,l){const r=e-i,h=t-l;return r*r+h*h;}function R16(e,t,i,l,r,h,n,o){const _=e-n,f=t-o,x=i-n,m=l-o,b=r-n,d=h-o,u=_*_+f*f,y=x*x+m*m,p=b*b+d*d;return _*(m*p-y*d)-f*(x*p-y*b)+u*(x*d-m*b)<0;}function Z20(e,t,i,l,r,h){const n=i-e,o=l-t,_=r-e,f=h-t,x=n*n+o*o,m=_*_+f*f,b=.5/(n*f-o*_),d=(f*x-o*m)*b,u=(n*m-_*x)*b;return d*d+u*u;}function B18(e,t,i,l,r,h){const n=i-e,o=l-t,_=r-e,f=h-t,x=n*n+o*o,m=_*_+f*f,b=.5/(n*f-o*_),d=e+(f*x-o*m)*b,u=t+(n*m-_*x)*b;return{x:d,y:u};}function v14(e,t,i,l){if(l-i<=20)for(let r=i+1;r<=l;r++){const h=e[r],n=t[h];let o=r-1;for(;o>=i&&t[e[o]]>n;)e[o+1]=e[o--];e[o+1]=h;}else{const r=i+l>>1;let h=i+1,n=l;j21(e,r,h),t[e[i]]>t[e[l]]&&j21(e,i,l),t[e[h]]>t[e[l]]&&j21(e,h,l),t[e[i]]>t[e[h]]&&j21(e,i,h);const o=e[h],_=t[o];for(;;){do h++;while(t[e[h]]<_)do n--;while(t[e[n]]>_)if(n<h)break;j21(e,h,n);}e[i+1]=e[n],e[n]=o,l-h+1>=n-i?(v14(e,t,h,l),v14(e,t,i,n-1)):(v14(e,t,i,n-1),v14(e,t,h,l));}}function j21(e,t,i){const l=e[t];e[t]=e[i],e[i]=l;}function Q20(e){return e[0];}function V18(e){return e[1];}class y13{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._="";}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`;}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z");}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`;}arc(t,e,n){t=+t,e=+e,n=+n;const i=t+n,s=e;if(n<0)throw new Error("negative radius");if(this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+i+","+s),!n)return;this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=s}`;}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`;}value(){return this._||null;}}class S21{constructor(){this._=[];}moveTo(t,e){this._.push([t,e]);}closePath(){this._.push(this._[0].slice());}lineTo(t,e){this._.push([t,e]);}value(){return this._.length?this._:null;}}class Y21{constructor(t,[e,n,i,s]=[0,0,960,500]){if(!((i=+i)>=(e=+e))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=e,this.ymax=s,this.ymin=n,this._init();}update(){return this.delaunay.update(),this._init(),this;}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:i}=this;let s,l;const r=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let d=0,m=0,b=n.length,p,k;d<b;d+=3,m+=2){const H=n[d]*2,L=n[d+1]*2,N=n[d+2]*2,T=t[H],$=t[H+1],Z=t[L],q=t[L+1],B=t[N],C=t[N+1],I=Z-T,A=q-$,w=B-T,x=C-$,E=(I*x-A*w)*2;if(Math.abs(E)<1e-9){if(s===void 0){s=l=0;for(const j of e)s+=t[j*2],l+=t[j*2+1];s/=e.length,l/=e.length;}const M=1e9*Math.sign((s-T)*x-(l-$)*w);p=(T+B)/2-M*x,k=($+C)/2+M*w;}else{const M=1/E,j=I*I+A*A,O=w*w+x*x;p=T+(x*j-A*O)*M,k=$+(I*O-w*j)*M;}r[m]=p,r[m+1]=k;}let h=e[e.length-1],o,a=h*4,u,c=t[2*h],f,g=t[2*h+1];i.fill(0);for(let d=0;d<e.length;++d)h=e[d],o=a,u=c,f=g,a=h*4,c=t[2*h],g=t[2*h+1],i[o+2]=i[a]=f-g,i[o+3]=i[a+1]=c-u;}render(t){const e=t==null?t=new y13:void 0,{delaunay:{halfedges:n,inedges:i,hull:s},circumcenters:l,vectors:r}=this;if(s.length<=1)return null;for(let a=0,u=n.length;a<u;++a){const c=n[a];if(c<a)continue;const f=Math.floor(a/3)*2,g=Math.floor(c/3)*2,d=l[f],m=l[f+1],b=l[g],p=l[g+1];this._renderSegment(d,m,b,p,t);}let h,o=s[s.length-1];for(let a=0;a<s.length;++a){h=o,o=s[a];const u=Math.floor(i[o]/3)*2,c=l[u],f=l[u+1],g=h*4,d=this._project(c,f,r[g+2],r[g+3]);d&&this._renderSegment(c,f,d[0],d[1],t);}return e&&e.value();}renderBounds(t){const e=t==null?t=new y13:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value();}renderCell(t,e){const n=e==null?e=new y13:void 0,i=this._clip(t);if(i===null||!i.length)return;e.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let l=2;l<s;l+=2)(i[l]!==i[l-2]||i[l+1]!==i[l-1])&&e.lineTo(i[l],i[l+1]);return e.closePath(),n&&n.value();}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const i=this.cellPolygon(e);i&&(i.index=e,yield i);}}cellPolygon(t){const e=new S21;return this.renderCell(t,e),e.value();}_renderSegment(t,e,n,i,s){let l;const r=this._regioncode(t,e),h=this._regioncode(n,i);r===0&&h===0?(s.moveTo(t,e),s.lineTo(n,i)):(l=this._clipSegment(t,e,n,i,r,h))&&(s.moveTo(l[0],l[1]),s.lineTo(l[2],l[3]));}contains(t,e,n){return(e=+e,e!==e)||(n=+n,n!==n)?!1:this.delaunay._step(t,e,n)===t;}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const i=this._clip(n);if(i){t:for(let s=0,l=e.length;s<l;s+=2)for(let r=0,h=i.length;r<h;r+=2)if(e[s]===i[r]&&e[s+1]===i[r+1]&&e[(s+2)%l]===i[(r+h-2)%h]&&e[(s+3)%l]===i[(r+h-1)%h]){yield n;break t;}}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:s}}=this,l=n[t];if(l===-1)return null;const r=[];let h=l;do{const o=Math.floor(h/3);if(r.push(e[o*2],e[o*2+1]),h=h%3===2?h-2:h+1,s[h]!==t)break;h=i[h];}while(h!==l&&h!==-1)return r;}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(e===null)return null;const{vectors:n}=this,i=t*4;return this._simplify(n[i]||n[i+1]?this._clipInfinite(t,e,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(t,e));}_clipFinite(t,e){const n=e.length;let i=null,s,l,r=e[n-2],h=e[n-1],o,a=this._regioncode(r,h),u,c=0;for(let f=0;f<n;f+=2)if(s=r,l=h,r=e[f],h=e[f+1],o=a,a=this._regioncode(r,h),o===0&&a===0)u=c,c=0,i?i.push(r,h):i=[r,h];else{let g,d,m,b,p;if(o===0){if((g=this._clipSegment(s,l,r,h,o,a))===null)continue;[d,m,b,p]=g;}else{if((g=this._clipSegment(r,h,s,l,a,o))===null)continue;[b,p,d,m]=g,u=c,c=this._edgecode(d,m),u&&c&&this._edge(t,u,c,i,i.length),i?i.push(d,m):i=[d,m];}u=c,c=this._edgecode(b,p),u&&c&&this._edge(t,u,c,i,i.length),i?i.push(b,p):i=[b,p];}if(i)u=c,c=this._edgecode(i[0],i[1]),u&&c&&this._edge(t,u,c,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i;}_clipSegment(t,e,n,i,s,l){const r=s<l;for(r&&([t,e,n,i,s,l]=[n,i,t,e,l,s]);;){if(s===0&&l===0)return r?[n,i,t,e]:[t,e,n,i];if(s&l)return null;let h,o,a=s||l;a&8?(h=t+(n-t)*(this.ymax-e)/(i-e),o=this.ymax):a&4?(h=t+(n-t)*(this.ymin-e)/(i-e),o=this.ymin):a&2?(o=e+(i-e)*(this.xmax-t)/(n-t),h=this.xmax):(o=e+(i-e)*(this.xmin-t)/(n-t),h=this.xmin),s?(t=h,e=o,s=this._regioncode(t,e)):(n=h,i=o,l=this._regioncode(n,i));}}_clipInfinite(t,e,n,i,s,l){let r=Array.from(e),h;if((h=this._project(r[0],r[1],n,i))&&r.unshift(h[0],h[1]),(h=this._project(r[r.length-2],r[r.length-1],s,l))&&r.push(h[0],h[1]),r=this._clipFinite(t,r))for(let o=0,a=r.length,u,c=this._edgecode(r[a-2],r[a-1]);o<a;o+=2)u=c,c=this._edgecode(r[o],r[o+1]),u&&c&&(o=this._edge(t,u,c,r,o),a=r.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(r=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return r;}_edge(t,e,n,i,s){for(;e!==n;){let l,r;switch(e){case 5:e=4;continue;case 4:e=6,l=this.xmax,r=this.ymin;break;case 6:e=2;continue;case 2:e=10,l=this.xmax,r=this.ymax;break;case 10:e=8;continue;case 8:e=9,l=this.xmin,r=this.ymax;break;case 9:e=1;continue;case 1:e=5,l=this.xmin,r=this.ymin;break;}(i[s]!==l||i[s+1]!==r)&&this.contains(t,l,r)&&(i.splice(s,0,l,r),s+=2);}return s;}_project(t,e,n,i){let s=Infinity,l,r,h;if(i<0){if(e<=this.ymin)return null;(l=(this.ymin-e)/i)<s&&(h=this.ymin,r=t+(s=l)*n);}else if(i>0){if(e>=this.ymax)return null;(l=(this.ymax-e)/i)<s&&(h=this.ymax,r=t+(s=l)*n);}if(n>0){if(t>=this.xmax)return null;(l=(this.xmax-t)/n)<s&&(r=this.xmax,h=e+(s=l)*i);}else if(n<0){if(t<=this.xmin)return null;(l=(this.xmin-t)/n)<s&&(r=this.xmin,h=e+(s=l)*i);}return[r,h];}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0);}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0);}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,i=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[i]||t[e+1]===t[n+1]&&t[n+1]===t[i+1])&&(t.splice(n,2),e-=2);}t.length||(t=null);}return t;}}const z16=2*Math.PI,v15=Math.pow;function D13(_){return _[0];}function G22(_){return _[1];}function R17(_){const{triangles:t,coords:e}=_;for(let n=0;n<t.length;n+=3){const i=2*t[n],s=2*t[n+1],l=2*t[n+2],r=(e[l]-e[i])*(e[s+1]-e[i+1])-(e[s]-e[i])*(e[l+1]-e[i+1]);if(r>1e-10)return!1;}return!0;}function J21(_,t,e){return[_+Math.sin(_+t)*e,t+Math.cos(_-t)*e];}class F18{static from(t,e=D13,n=G22,i){return new F18("length"in t?K20(t,e,n,i):Float64Array.from(P21(t,e,n,i)));}constructor(t){this._delaunator=new Y20(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init();}update(){return this._delaunator.update(),this._init(),this;}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&R17(t)){this.collinear=Int32Array.from({length:e.length/2},(c,f)=>f).sort((c,f)=>e[2*c]-e[2*f]||e[2*c+1]-e[2*f+1]);const h=this.collinear[0],o=this.collinear[this.collinear.length-1],a=[e[2*h],e[2*h+1],e[2*o],e[2*o+1]],u=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let c=0,f=e.length/2;c<f;++c){const g=J21(e[2*c],e[2*c+1],u);e[2*c]=g[0],e[2*c+1]=g[1];}this._delaunator=new Y20(e);}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),r=this._hullIndex.fill(-1);for(let h=0,o=n.length;h<o;++h){const a=s[h%3===2?h-2:h+1];(n[h]===-1||l[a]===-1)&&(l[a]=h);}for(let h=0,o=i.length;h<o;++h)r[i[h]]=h;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],l[i[0]]=1,i.length===2&&(l[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]));}voronoi(t){return new Y21(this,t);}*neighbors(t){const{inedges:e,hull:n,_hullIndex:i,halfedges:s,triangles:l,collinear:r}=this;if(r){const u=r.indexOf(t);u>0&&(yield r[u-1]),u<r.length-1&&(yield r[u+1]);return;}const h=e[t];if(h===-1)return;let o=h,a=-1;do{if(yield a=l[o],o=o%3===2?o-2:o+1,l[o]!==t)return;if(o=s[o],o===-1){const u=n[(i[t]+1)%n.length];u!==a&&(yield u);return;}}while(o!==h)}find(t,e,n=0){if((t=+t,t!==t)||(e=+e,e!==e))return-1;const i=n;let s;for(;(s=this._step(n,t,e))>=0&&s!==n&&s!==i;)n=s;return s;}_step(t,e,n){const{inedges:i,hull:s,_hullIndex:l,halfedges:r,triangles:h,points:o}=this;if(i[t]===-1||!o.length)return(t+1)%(o.length>>1);let a=t,u=v15(e-o[t*2],2)+v15(n-o[t*2+1],2);const c=i[t];let f=c;do{let g=h[f];const d=v15(e-o[g*2],2)+v15(n-o[g*2+1],2);if(d<u&&(u=d,a=g),f=f%3===2?f-2:f+1,h[f]!==t)break;if(f=r[f],f===-1){if(f=s[(l[t]+1)%s.length],f!==g&&v15(e-o[f*2],2)+v15(n-o[f*2+1],2)<u)return f;break;}}while(f!==c)return a;}render(t){const e=t==null?t=new y13:void 0,{points:n,halfedges:i,triangles:s}=this;for(let l=0,r=i.length;l<r;++l){const h=i[l];if(h<l)continue;const o=s[l]*2,a=s[h]*2;t.moveTo(n[o],n[o+1]),t.lineTo(n[a],n[a+1]);}return this.renderHull(t),e&&e.value();}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;const n=t==null?t=new y13:void 0,{points:i}=this;for(let s=0,l=i.length;s<l;s+=2){const r=i[s],h=i[s+1];t.moveTo(r+e,h),t.arc(r,h,e,0,z16);}return n&&n.value();}renderHull(t){const e=t==null?t=new y13:void 0,{hull:n,points:i}=this,s=n[0]*2,l=n.length;t.moveTo(i[s],i[s+1]);for(let r=1;r<l;++r){const h=2*n[r];t.lineTo(i[h],i[h+1]);}return t.closePath(),e&&e.value();}hullPolygon(){const t=new S21;return this.renderHull(t),t.value();}renderTriangle(t,e){const n=e==null?e=new y13:void 0,{points:i,triangles:s}=this,l=s[t*=3]*2,r=s[t+1]*2,h=s[t+2]*2;return e.moveTo(i[l],i[l+1]),e.lineTo(i[r],i[r+1]),e.lineTo(i[h],i[h+1]),e.closePath(),n&&n.value();}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e);}trianglePolygon(t){const e=new S21;return this.renderTriangle(t,e),e.value();}}function K20(_,t,e,n){const i=_.length,s=new Float64Array(i*2);for(let l=0;l<i;++l){const r=_[l];s[l*2]=t.call(n,r,l,_),s[l*2+1]=e.call(n,r,l,_);}return s;}function*P21(_,t,e,n){let i=0;for(const s of _)yield t.call(n,s,i,_),yield e.call(n,s,i,_),++i;}function l9(e){dt2.call(this,null,e);}l9.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const y14=[-1e5,-1e5,1e5,1e5];Pn(l9,dt2,{transform(e,n){const r=e.as||"path",t=n.source;if(!t||!t.length)return n;let o=e.size;o=o?[0,0,o[0],o[1]]:(o=e.extent)?[o[0][0],o[0][1],o[1][0],o[1][1]]:y14;const m=this.value=F18.from(t,e.x,e.y).voronoi(o);for(let i=0,d=t.length;i<d;++i){const a=m.cellPolygon(i);t[i][r]=a&&!h11(a)?g10(a):null;}return n.reflow(e.modified()).modifies(r);}});function g10(e){const n=e[0][0],r=e[0][1];let t=e.length-1;for(;e[t][0]===n&&e[t][1]===r;--t);return"M"+e.slice(0,t+1).join("L")+"Z";}function h11(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1];}const mod9=function(){return{voronoi:l9,default:null};}();var E21=Math.PI/180,D14=1<<11>>5,q25=1<<11;function _19(){var e=[256,256],t,o,m,s,x,a,h,p=Q21,v=[],f=Math.random,i={};i.layout=function(){for(var r=l(n1()),n=at9((e[0]>>5)*e[1]),u=null,b=v.length,z=-1,S=[],w=v.map(c=>({text:t(c),font:o(c),style:s(c),weight:x(c),rotate:a(c),size:~~(m(c)+1e-14),padding:h(c),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:c})).sort((c,d)=>d.size-c.size);++z<b;){var y=w[z];y.x=e[0]*(f()+.5)>>1,y.y=e[1]*(f()+.5)>>1,tt7(r,y,w,z),y.hasText&&g(n,y,u)&&(S.push(y),u?rt9(u,y):u=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=e[0]>>1,y.y-=e[1]>>1);}return S;};function l(r){r.width=r.height=1;var n=Math.sqrt(r.getContext("2d").getImageData(0,0,1,1).data.length>>2);r.width=(D14<<5)/n,r.height=q25/n;var u=r.getContext("2d");return u.fillStyle=u.strokeStyle="red",u.textAlign="center",{context:u,ratio:n};}function g(r,n,u){for(var b=n.x,z=n.y,S=Math.hypot(e[0],e[1]),w=p(e),y=f()<.5?1:-1,c=-y,d,T,W;(d=w(c+=y))&&!(T=~~d[0],W=~~d[1],Math.min(Math.abs(T),Math.abs(W))>=S);){if(n.x=b+T,n.y=z+W,n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])continue;if((!u||!et9(n,r,e[0]))&&(!u||nt7(n,u))){for(var C=n.sprite,R=n.width>>5,I=e[0]>>5,N=n.x-(R<<4),V=N&127,B=32-V,L=n.y1-n.y0,j=(n.y+n.y0)*I+(N>>5),O,U=0;U<L;U++){O=0;for(var k=0;k<=R;k++)r[j+k]|=O<<B|(k<R?(O=C[U*R+k])>>>V:0);j+=I;}return n.sprite=null,!0;}}return!1;}return i.words=function(r){return arguments.length?(v=r,i):v;},i.size=function(r){return arguments.length?(e=[+r[0],+r[1]],i):e;},i.font=function(r){return arguments.length?(o=M14(r),i):o;},i.fontStyle=function(r){return arguments.length?(s=M14(r),i):s;},i.fontWeight=function(r){return arguments.length?(x=M14(r),i):x;},i.rotate=function(r){return arguments.length?(a=M14(r),i):a;},i.text=function(r){return arguments.length?(t=M14(r),i):t;},i.spiral=function(r){return arguments.length?(p=ot8[r]||r,i):p;},i.fontSize=function(r){return arguments.length?(m=M14(r),i):m;},i.padding=function(r){return arguments.length?(h=M14(r),i):h;},i.random=function(r){return arguments.length?(f=r,i):f;},i;}function tt7(e,t,o,m){if(t.sprite)return;var s=e.context,x=e.ratio;s.clearRect(0,0,(D14<<5)/x,q25/x);var a=0,h=0,p=0,v=o.length,f,i,l,g,r;for(--m;++m<v;){if(t=o[m],s.save(),s.font=t.style+" "+t.weight+" "+~~((t.size+1)/x)+"px "+t.font,f=s.measureText(t.text+"m").width*x,l=t.size<<1,t.rotate){var n=Math.sin(t.rotate*E21),u=Math.cos(t.rotate*E21),b=f*u,z=f*n,S=l*u,w=l*n;f=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,l=~~Math.max(Math.abs(z+S),Math.abs(z-S));}else f=f+31>>5<<5;if(l>p&&(p=l),a+f>=D14<<5&&(a=0,h+=p,p=0),h+l>=q25)break;s.translate((a+(f>>1))/x,(h+(l>>1))/x),t.rotate&&s.rotate(t.rotate*E21),s.fillText(t.text,0,0),t.padding&&(s.lineWidth=2*t.padding,s.strokeText(t.text,0,0)),s.restore(),t.width=f,t.height=l,t.xoff=a,t.yoff=h,t.x1=f>>1,t.y1=l>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=f;}for(var y=s.getImageData(0,0,(D14<<5)/x,q25/x).data,c=[];--m>=0;){if(t=o[m],!t.hasText)continue;for(f=t.width,i=f>>5,l=t.y1-t.y0,g=0;g<l*i;g++)c[g]=0;if(a=t.xoff,a==null)return;h=t.yoff;var d=0,T=-1;for(r=0;r<l;r++){for(g=0;g<f;g++){var W=i*r+(g>>5),C=y[(h+r)*(D14<<5)+(a+g)<<2]?1<<31-g%32:0;c[W]|=C,d|=C;}d?T=r:(t.y0++,l--,r--,h++);}t.y1=t.y0+T,t.sprite=c.slice(0,(t.y1-t.y0)*i);}}function et9(e,t,o){o>>=5;for(var m=e.sprite,s=e.width>>5,x=e.x-(s<<4),a=x&127,h=32-a,p=e.y1-e.y0,v=(e.y+e.y0)*o+(x>>5),f,i=0;i<p;i++){f=0;for(var l=0;l<=s;l++)if((f<<h|(l<s?(f=m[i*s+l])>>>a:0))&t[v+l])return!0;v+=o;}return!1;}function rt9(e,t){var o=e[0],m=e[1];t.x+t.x0<o.x&&(o.x=t.x+t.x0),t.y+t.y0<o.y&&(o.y=t.y+t.y0),t.x+t.x1>m.x&&(m.x=t.x+t.x1),t.y+t.y1>m.y&&(m.y=t.y+t.y1);}function nt7(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y;}function Q21(e){var t=e[0]/e[1];return function(o){return[t*(o*=.1)*Math.cos(o),o*Math.sin(o)];};}function it9(e){var t=4,o=t*e[0]/e[1],m=0,s=0;return function(x){var a=x<0?-1:1;switch(Math.sqrt(1+4*a*x)-a&3){case 0:m+=o;break;case 1:s+=t;break;case 2:m-=o;break;default:s-=t;break;}return[m,s];};}function at9(e){for(var t=[],o=-1;++o<e;)t[o]=0;return t;}function M14(e){return typeof e=="function"?e:function(){return e;};}var ot8={archimedean:Q21,rectangular:it9};const X21=["x","y","font","fontSize","fontStyle","fontWeight","angle"],st8=["text","font","rotate","fontSize","fontStyle","fontWeight"];function G23(e){dt2.call(this,_19(),e);}G23.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:X21}]},Pn(G23,dt2,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&b("Wordcloud size dimensions must be non-zero.");function o(r){const n=e[r];return O1(n)&&t.modified(n.fields);}const m=e.modified();if(!(m||t.changed(t.ADD_REM)||st8.some(o)))return;const s=t.materialize(t.SOURCE).source,x=this.value,a=e.as||X21;let h=e.fontSize||14,p;if(O1(h)?p=e.fontSizeRange:h=On(h),p){const r=h,n=b7("sqrt")().domain(Nn(s,r)).range(p);h=u=>n(r(u));}s.forEach(r=>{r[a[0]]=NaN,r[a[1]]=NaN,r[a[3]]=0;});const v=x.words(s).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(h).random(N8).layout(),f=x.size(),i=f[0]>>1,l=f[1]>>1,g=v.length;for(let r=0,n,u;r<g;++r)n=v[r],u=n.datum,u[a[0]]=n.x+i,u[a[1]]=n.y+l,u[a[2]]=n.font,u[a[3]]=n.size,u[a[4]]=n.style,u[a[5]]=n.weight,u[a[6]]=n.rotate;return t.reflow(m).modifies(a);}});const mod10=function(){return{wordcloud:G23,default:null};}();const P22=e=>new Uint8Array(e),S22=e=>new Uint16Array(e),b16=e=>new Uint32Array(e);function T14(){let e=8,t=[],r=b16(0),o=k17(0,e),l=k17(0,e);return{data:()=>t,seen:()=>r=_20(r,t.length),add(s){for(let a=0,f=t.length,d=s.length,n;a<d;++a)n=s[a],n._index=f++,t.push(n);},remove(s,a){const f=t.length,d=Array(f-s),n=t;let h,i,c;for(i=0;!a[i]&&i<f;++i)d[i]=t[i],n[i]=i;for(c=i;i<f;++i)h=t[i],a[i]?n[i]=-1:(n[i]=c,o[c]=o[i],l[c]=l[i],d[c]=h,h._index=c++),o[i]=0;return t=d,n;},size:()=>t.length,curr:()=>o,prev:()=>l,reset:s=>l[s]=o[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,a){o[s]|=a;},clear(s,a){o[s]&=~a;},resize(s,a){const f=o.length;(s>f||a>e)&&(e=Math.max(a,e),o=k17(s,e,o),l=k17(s,e));}};}function _20(e,t,r){return e.length>=t?e:(r=r||new e.constructor(t),r.set(e),r);}function k17(e,t,r){const o=(t<257?P22:t<65537?S22:b16)(e);return r&&o.set(r),o;}function U20(e,t,r){const o=1<<t;return{one:o,zero:~o,range:r.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(l,s){const a=this,f=a.bisect(a.range,l.value),d=l.index,n=f[0],h=f[1],i=d.length;let c;for(c=0;c<n;++c)s[d[c]]|=o;for(c=h;c<i;++c)s[d[c]]|=o;return a;}};}function R18(){let e=b16(0),t=[],r=0;function o(f,d,n){if(!d.length)return[];const h=r,i=d.length,c=b16(i);let u=Array(i),g,p,m;for(m=0;m<i;++m)u[m]=f(d[m]),c[m]=m;if(u=E22(u,c),h)g=t,p=e,t=Array(h+i),e=b16(h+i),W19(n,g,p,h,u,c,i,t,e);else{if(n>0)for(m=0;m<i;++m)c[m]+=n;t=u,e=c;}return r=h+i,{index:c,value:u};}function l(f,d){const n=r;let h,i,c;for(i=0;!d[e[i]]&&i<n;++i);for(c=i;i<n;++i)d[h=e[i]]||(e[c]=h,t[c]=t[i],++c);r=n-f;}function s(f){for(let d=0,n=r;d<n;++d)e[d]=f[e[d]];}function a(f,d){let n;return d?n=d.length:(d=t,n=r),[An1(d,f[0],0,n),U2(d,f[1],0,n)];}return{insert:o,remove:l,bisect:a,reindex:s,index:()=>e,size:()=>r};}function E22(e,t){return e.sort.call(t,(r,o)=>{const l=e[r],s=e[o];return l<s?-1:l>s?1:0;}),un1(e,t);}function W19(e,t,r,o,l,s,a,f,d){let n=0,h=0,i;for(i=0;n<o&&h<a;++i)t[n]<l[h]?(f[i]=t[n],d[i]=r[n++]):(f[i]=l[h],d[i]=s[h++]+e);for(;n<o;++n,++i)f[i]=t[n],d[i]=r[n];for(;h<a;++h,++i)f[i]=l[h],d[i]=s[h]+e;}function j22(e){dt2.call(this,T14(),e),this._indices=null,this._dims=null;}j22.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Pn(j22,dt2,{transform(e,t){if(this._dims){var r=e.modified("fields")||e.fields.some(o=>t.modified(o.fields));return r?this.reinit(e,t):this.eval(e,t);}else return this.init(e,t);},init(e,t){const r=e.fields,o=e.query,l=this._indices={},s=this._dims=[],a=o.length;let f=0,d,n;for(;f<a;++f)d=r[f].fname,n=l[d]||(l[d]=R18()),s.push(U20(n,f,o[f]));return this.eval(e,t);},reinit(e,t){const r=t.materialize().fork(),o=e.fields,l=e.query,s=this._indices,a=this._dims,f=this.value,d=f.curr(),n=f.prev(),h=f.all(),i=r.rem=r.add,c=r.mod,u=l.length,g={};let p,m,y,v,D,q,x,z,A;if(n.set(d),t.rem.length&&(D=this.remove(e,t,r)),t.add.length&&f.add(t.add),t.mod.length)for(q={},v=t.mod,x=0,z=v.length;x<z;++x)q[v[x]._index]=1;for(x=0;x<u;++x)A=o[x],(!a[x]||e.modified("fields",x)||t.modified(A.fields))&&(y=A.fname,(p=g[y])||(s[y]=m=R18(),g[y]=p=m.insert(A,t.source,0)),a[x]=U20(m,x,l[x]).onAdd(p,d));for(x=0,z=f.data().length;x<z;++x){if(D[x])continue;n[x]!==d[x]?i.push(x):q[x]&&d[x]!==h&&c.push(x);}return f.mask=(1<<u)-1,r;},eval(e,t){const r=t.materialize().fork(),o=this._dims.length;let l=0;return t.rem.length&&(this.remove(e,t,r),l|=(1<<o)-1),e.modified("query")&&!e.modified("fields")&&(l|=this.update(e,t,r)),t.add.length&&(this.insert(e,t,r),l|=(1<<o)-1),t.mod.length&&(this.modify(t,r),l|=(1<<o)-1),this.value.mask=l,r;},insert(e,t,r){const o=t.add,l=this.value,s=this._dims,a=this._indices,f=e.fields,d={},n=r.add,h=l.size()+o.length,i=s.length;let c=l.size(),u,g,p;l.resize(h,i),l.add(o);const m=l.curr(),y=l.prev(),v=l.all();for(u=0;u<i;++u)g=f[u].fname,p=d[g]||(d[g]=a[g].insert(f[u],o,c)),s[u].onAdd(p,m);for(;c<h;++c)y[c]=v,m[c]!==v&&n.push(c);},modify(e,t){const r=t.mod,o=this.value,l=o.curr(),s=o.all(),a=e.mod;let f,d,n;for(f=0,d=a.length;f<d;++f)n=a[f]._index,l[n]!==s&&r.push(n);},remove(e,t,r){const o=this._indices,l=this.value,s=l.curr(),a=l.prev(),f=l.all(),d={},n=r.rem,h=t.rem;let i,c,u,g;for(i=0,c=h.length;i<c;++i)u=h[i]._index,d[u]=1,a[u]=g=s[u],s[u]=f,g!==f&&n.push(u);for(u in o)o[u].remove(c,d);return this.reindex(t,c,d),d;},reindex(e,t,r){const o=this._indices,l=this.value;e.runAfter(()=>{const s=l.remove(t,r);for(const a in o)o[a].reindex(s);});},update(e,t,r){const o=this._dims,l=e.query,s=t.stamp,a=o.length;let f=0,d,n;for(r.filters=0,n=0;n<a;++n)e.modified("query",n)&&(d=n,++f);if(f===1)f=o[d].one,this.incrementOne(o[d],l[d],r.add,r.rem);else for(n=0,f=0;n<a;++n){if(!e.modified("query",n))continue;f|=o[n].one,this.incrementAll(o[n],l[n],s,r.add),r.rem=r.add;}return f;},incrementAll(e,t,r,o){const l=this.value,s=l.seen(),a=l.curr(),f=l.prev(),d=e.index(),n=e.bisect(e.range),h=e.bisect(t),i=h[0],c=h[1],u=n[0],g=n[1],p=e.one;let m,y,v;if(i<u)for(m=i,y=Math.min(u,c);m<y;++m)v=d[m],s[v]!==r&&(f[v]=a[v],s[v]=r,o.push(v)),a[v]^=p;else if(i>u)for(m=u,y=Math.min(i,g);m<y;++m)v=d[m],s[v]!==r&&(f[v]=a[v],s[v]=r,o.push(v)),a[v]^=p;if(c>g)for(m=Math.max(i,g),y=c;m<y;++m)v=d[m],s[v]!==r&&(f[v]=a[v],s[v]=r,o.push(v)),a[v]^=p;else if(c<g)for(m=Math.max(u,c),y=g;m<y;++m)v=d[m],s[v]!==r&&(f[v]=a[v],s[v]=r,o.push(v)),a[v]^=p;e.range=t.slice();},incrementOne(e,t,r,o){const l=this.value,s=l.curr(),a=e.index(),f=e.bisect(e.range),d=e.bisect(t),n=d[0],h=d[1],i=f[0],c=f[1],u=e.one;let g,p,m;if(n<i)for(g=n,p=Math.min(i,h);g<p;++g)m=a[g],s[m]^=u,r.push(m);else if(n>i)for(g=i,p=Math.min(n,c);g<p;++g)m=a[g],s[m]^=u,o.push(m);if(h>c)for(g=Math.max(n,c),p=h;g<p;++g)m=a[g],s[m]^=u,r.push(m);else if(h<c)for(g=Math.max(i,h),p=c;g<p;++g)m=a[g],s[m]^=u,o.push(m);e.range=t.slice();}});function w16(e){dt2.call(this,null,e);}w16.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Pn(w16,dt2,{transform(e,t){const r=~(e.ignore||0),o=e.filter,l=o.mask;if((l&r)===0)return t.StopPropagation;const s=t.fork(t.ALL),a=o.data(),f=o.curr(),d=o.prev(),n=h=>f[h]&r?null:a[h];return s.filter(s.MOD,n),l&l-1?(s.filter(s.ADD,h=>{const i=f[h]&r,c=!i&&i^d[h]&r;return c?a[h]:null;}),s.filter(s.REM,h=>{const i=f[h]&r,c=i&&!(i^(i^d[h]&r));return c?a[h]:null;})):(s.filter(s.ADD,n),s.filter(s.REM,h=>(f[h]&r)===l?a[h]:null)),s.filter(s.SOURCE,h=>n(h._index));}});const mod11=function(){return{crossfilter:j22,resolvefilter:w16,default:null};}();const au="RawCode",su="Literal",Au="Property",ou="Identifier",Fu="ArrayExpression",Cu="BinaryExpression",cu="CallExpression",lu="ConditionalExpression",Du="LogicalExpression",Bu="MemberExpression",Eu="ObjectExpression",fu="UnaryExpression";function m7(u){this.type=u;}m7.prototype.visit=function(u){let e,t,n;if(u(this))return 1;for(e=Nu(this),t=0,n=e.length;t<n;++t)if(e[t].visit(u))return 1;};function Nu(u){switch(u.type){case Fu:return u.elements;case Cu:case Du:return[u.left,u.right];case cu:return[u.callee].concat(u.arguments);case lu:return[u.test,u.consequent,u.alternate];case Bu:return[u.object,u.property];case Eu:return u.properties;case Au:return[u.key,u.value];case fu:return[u.argument];case ou:case su:case au:default:return[];}}var w17,i2,r1,p10,F19,_21=1,N20=2,L26=3,S23=4,K21=5,U21=6,g11=7,O23=8,Ou=9;w17={},w17[_21]="Boolean",w17[N20]="<end>",w17[L26]="Identifier",w17[S23]="Keyword",w17[K21]="Null",w17[U21]="Numeric",w17[g11]="Punctuator",w17[O23]="String",w17[Ou]="RegularExpression";var Ru="ArrayExpression",Pu="BinaryExpression",ju="CallExpression",Gu="ConditionalExpression",pu="Identifier",qu="Literal",Hu="LogicalExpression",_u="MemberExpression",Ku="ObjectExpression",Qu="Property",zu="UnaryExpression",D15="Unexpected token %0",Vu="Unexpected number",Xu="Unexpected string",$u="Unexpected identifier",Wu="Unexpected reserved word",Yu="Unexpected end of input",W20="Invalid regular expression",Y22="Invalid regular expression: missing /",xu="Octal literals are not allowed in strict mode.",Ju="Duplicate data property in object literal not allowed in strict mode",f9="ILLEGAL",R19="Disabled.",Zu=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),u0=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Q22(u,e){if(!u)throw new Error("ASSERT: "+e);}function v16(u){return u>=48&&u<=57;}function J22(u){return"0123456789abcdefABCDEF".includes(u);}function P23(u){return"01234567".includes(u);}function e0(u){return u===32||u===9||u===11||u===12||u===160||u>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(u);}function j23(u){return u===10||u===13||u===8232||u===8233;}function G24(u){return u===36||u===95||u>=65&&u<=90||u>=97&&u<=122||u===92||u>=128&&Zu.test(String.fromCharCode(u));}function z17(u){return u===36||u===95||u>=65&&u<=90||u>=97&&u<=122||u>=48&&u<=57||u===92||u>=128&&u0.test(String.fromCharCode(u));}const t0={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function du(){for(;r1<p10;){const u=i2.charCodeAt(r1);if(e0(u)||j23(u))++r1;else break;}}function Z21(u){var e,t,n,a=0;for(t=u==="u"?4:2,e=0;e<t;++e)r1<p10&&J22(i2[r1])?(n=i2[r1++],a=a*16+"0123456789abcdef".indexOf(n.toLowerCase())):o6({},D15,f9);return String.fromCharCode(a);}function r0(){var u,e,t,n;for(u=i2[r1],e=0,u==="}"&&o6({},D15,f9);r1<p10&&!(u=i2[r1++],!J22(u));)e=e*16+"0123456789abcdef".indexOf(u.toLowerCase());return(e>1114111||u!=="}")&&o6({},D15,f9),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,n=(e-65536&1023)+56320,String.fromCharCode(t,n));}function hu(){var u,e;for(u=i2.charCodeAt(r1++),e=String.fromCharCode(u),u===92&&(i2.charCodeAt(r1)!==117&&o6({},D15,f9),++r1,u=Z21("u"),(!u||u==="\\"||!G24(u.charCodeAt(0)))&&o6({},D15,f9),e=u);r1<p10&&!(u=i2.charCodeAt(r1),!z17(u));)++r1,e+=String.fromCharCode(u),u===92&&(e=e.substr(0,e.length-1),i2.charCodeAt(r1)!==117&&o6({},D15,f9),++r1,u=Z21("u"),(!u||u==="\\"||!z17(u.charCodeAt(0)))&&o6({},D15,f9),e+=u);return e;}function n0(){var u,e;for(u=r1++;r1<p10;){if(e=i2.charCodeAt(r1),e===92)return r1=u,hu();if(z17(e))++r1;else break;}return i2.slice(u,r1);}function i0(){var u,e,t;return u=r1,e=i2.charCodeAt(r1)===92?hu():n0(),e.length===1?t=L26:t0.hasOwnProperty(e)?t=S23:e==="null"?t=K21:e==="true"||e==="false"?t=_21:t=L26,{type:t,value:e,start:u,end:r1};}function uu(){var u=r1,e=i2.charCodeAt(r1),t,n=i2[r1],a,A,C;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++r1,{type:g11,value:String.fromCharCode(e),start:u,end:r1};default:if(t=i2.charCodeAt(r1+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return r1+=2,{type:g11,value:String.fromCharCode(e)+String.fromCharCode(t),start:u,end:r1};case 33:case 61:return r1+=2,i2.charCodeAt(r1)===61&&++r1,{type:g11,value:i2.slice(u,r1),start:u,end:r1};}}if(C=i2.substr(r1,4),C===">>>=")return r1+=4,{type:g11,value:C,start:u,end:r1};if(A=C.substr(0,3),A===">>>"||A==="<<="||A===">>=")return r1+=3,{type:g11,value:A,start:u,end:r1};if(a=A.substr(0,2),n===a[1]&&"+-<>&|".includes(n)||a==="=>")return r1+=2,{type:g11,value:a,start:u,end:r1};if(a==="//"&&o6({},D15,f9),"<>=!+-*%&|^/".includes(n))return++r1,{type:g11,value:n,start:u,end:r1};o6({},D15,f9);}function a0(u){let e="";for(;r1<p10&&J22(i2[r1]);)e+=i2[r1++];return e.length===0&&o6({},D15,f9),G24(i2.charCodeAt(r1))&&o6({},D15,f9),{type:U21,value:parseInt("0x"+e,16),start:u,end:r1};}function s0(u){let e="0"+i2[r1++];for(;r1<p10&&P23(i2[r1]);)e+=i2[r1++];return(G24(i2.charCodeAt(r1))||v16(i2.charCodeAt(r1)))&&o6({},D15,f9),{type:U21,value:parseInt(e,8),octal:!0,start:u,end:r1};}function gu(){var u,e,t;if(t=i2[r1],Q22(v16(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=r1,u="",t!=="."){if(u=i2[r1++],t=i2[r1],u==="0"){if(t==="x"||t==="X")return++r1,a0(e);if(P23(t))return s0(e);t&&v16(t.charCodeAt(0))&&o6({},D15,f9);}for(;v16(i2.charCodeAt(r1));)u+=i2[r1++];t=i2[r1];}if(t==="."){for(u+=i2[r1++];v16(i2.charCodeAt(r1));)u+=i2[r1++];t=i2[r1];}if(t==="e"||t==="E")if(u+=i2[r1++],t=i2[r1],(t==="+"||t==="-")&&(u+=i2[r1++]),v16(i2.charCodeAt(r1)))for(;v16(i2.charCodeAt(r1));)u+=i2[r1++];else o6({},D15,f9);return G24(i2.charCodeAt(r1))&&o6({},D15,f9),{type:U21,value:parseFloat(u),start:e,end:r1};}function A01(){var u="",e,t,n,a,A=!1;for(e=i2[r1],Q22(e==="'"||e==='"',"String literal must starts with a quote"),t=r1,++r1;r1<p10;)if(n=i2[r1++],n===e){e="";break;}else if(n==="\\")if(n=i2[r1++],!n||!j23(n.charCodeAt(0)))switch(n){case"u":case"x":i2[r1]==="{"?(++r1,u+=r0()):u+=Z21(n);break;case"n":u+=`
`;break;case"r":u+="\r";break;case"t":u+="	";break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:P23(n)?(a="01234567".indexOf(n),a!==0&&(A=!0),r1<p10&&P23(i2[r1])&&(A=!0,a=a*8+"01234567".indexOf(i2[r1++]),"0123".includes(n)&&r1<p10&&P23(i2[r1])&&(a=a*8+"01234567".indexOf(i2[r1++]))),u+=String.fromCharCode(a)):u+=n;break;}else n==="\r"&&i2[r1]===`
`&&++r1;else{if(j23(n.charCodeAt(0)))break;u+=n;}return e!==""&&o6({},D15,f9),{type:O23,value:u,octal:A,start:t,end:r1};}function o0(u,e){let t=u;e.includes("u")&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(n,a)=>{if(parseInt(a,16)<=1114111)return"x";o6({},W20);}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t);}catch(n){o6({},W20);}try{return new RegExp(u,e);}catch(n){return null;}}function F01(){var u,e,t,n,a;for(u=i2[r1],Q22(u==="/","Regular expression literal must start with a slash"),e=i2[r1++],t=!1,n=!1;r1<p10;)if(u=i2[r1++],e+=u,u==="\\")u=i2[r1++],j23(u.charCodeAt(0))&&o6({},Y22),e+=u;else if(j23(u.charCodeAt(0)))o6({},Y22);else if(t)u==="]"&&(t=!1);else if(u==="/"){n=!0;break;}else u==="["&&(t=!0);return n||o6({},Y22),a=e.substr(1,e.length-2),{value:a,literal:e};}function C0(){var u,e,t;for(e="",t="";r1<p10&&!(u=i2[r1],!z17(u.charCodeAt(0)));)++r1,u==="\\"&&r1<p10?o6({},D15,f9):(t+=u,e+=u);return t.search(/[^gimuy]/g)>=0&&o6({},W20,t),{value:t,literal:e};}function c0(){var u,e,t,n;return F19=null,du(),u=r1,e=F01(),t=C0(),n=o0(e.value,t.value),{literal:e.literal+t.literal,value:n,regex:{pattern:e.value,flags:t.value},start:u,end:r1};}function l0(u){return u.type===L26||u.type===S23||u.type===_21||u.type===K21;}function yu(){if(du(),r1>=p10)return{type:N20,start:r1,end:r1};const u=i2.charCodeAt(r1);return G24(u)?i0():u===40||u===41||u===59?uu():u===39||u===34?A01():u===46?v16(i2.charCodeAt(r1+1))?gu():uu():v16(u)?gu():uu();}function y15(){const u=F19;return r1=u.end,F19=yu(),r1=u.end,u;}function mu(){const u=r1;F19=yu(),r1=u;}function D0(u){const e=new m7(Ru);return e.elements=u,e;}function bu(u,e,t){const n=new m7(u==="||"||u==="&&"?Hu:Pu);return n.operator=u,n.left=e,n.right=t,n;}function B0(u,e){const t=new m7(ju);return t.callee=u,t.arguments=e,t;}function E0(u,e,t){const n=new m7(Gu);return n.test=u,n.consequent=e,n.alternate=t,n;}function eu(u){const e=new m7(pu);return e.name=u,e;}function q26(u){const e=new m7(qu);return e.value=u.value,e.raw=i2.slice(u.start,u.end),u.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=u.regex),e;}function wu(u,e,t){const n=new m7(_u);return n.computed=u==="[",n.object=e,n.property=t,n.computed||(t.member=!0),n;}function f0(u){const e=new m7(Ku);return e.properties=u,e;}function vu(u,e,t){const n=new m7(Qu);return n.key=e,n.value=t,n.kind=u,n;}function p01(u,e){const t=new m7(zu);return t.operator=u,t.argument=e,t.prefix=!0,t;}function o6(u,e){var t,n=Array.prototype.slice.call(arguments,2),a=e.replace(/%(\d)/g,(A,C)=>(Q22(C<n.length,"Message reference must be in range"),n[C]));throw t=new Error(a),t.index=r1,t.description=a,t;}function V19(u){u.type===N20&&o6(u,Yu),u.type===U21&&o6(u,Vu),u.type===O23&&o6(u,Xu),u.type===L26&&o6(u,$u),u.type===S23&&o6(u,Wu),o6(u,D15,u.value);}function x13(u){const e=y15();(e.type!==g11||e.value!==u)&&V19(e);}function c4(u){return F19.type===g11&&F19.value===u;}function tu(u){return F19.type===S23&&F19.value===u;}function x0(){const u=[];for(r1=F19.start,x13("[");!c4("]");)c4(",")?(y15(),u.push(null)):(u.push(I21()),c4("]")||x13(","));return y15(),D0(u);}function Mu(){r1=F19.start;const u=y15();return u.type===O23||u.type===U21?(u.octal&&o6(u,xu),q26(u)):eu(u.value);}function d0(){var u,e,t,n;if(r1=F19.start,u=F19,u.type===L26)return t=Mu(),x13(":"),n=I21(),vu("init",t,n);if(u.type===N20||u.type===g11)V19(u);else return e=Mu(),x13(":"),n=I21(),vu("init",e,n);}function h0(){var u=[],e,t,n,a={},A=String;for(r1=F19.start,x13("{");!c4("}");)e=d0(),e.key.type===pu?t=e.key.name:t=A(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?o6({},Ju):a[n]=!0,u.push(e),c4("}")||x13(",");return x13("}"),f0(u);}function g0(){x13("(");const u=ru();return x13(")"),u;}const y0={if:1};function m0(){var u,e,t;if(c4("("))return g0();if(c4("["))return x0();if(c4("{"))return h0();if(u=F19.type,r1=F19.start,u===L26||y0[F19.value])t=eu(y15().value);else if(u===O23||u===U21)F19.octal&&o6(F19,xu),t=q26(y15());else{if(u===S23)throw new Error(R19);u===_21?(e=y15(),e.value=e.value==="true",t=q26(e)):u===K21?(e=y15(),e.value=null,t=q26(e)):c4("/")||c4("/=")?(t=q26(c0()),mu()):V19(y15());}return t;}function b0(){const u=[];if(x13("("),!c4(")"))for(;r1<p10&&!(u.push(I21()),c4(")"));)x13(",");return x13(")"),u;}function w0(){r1=F19.start;const u=y15();return l0(u)||V19(u),eu(u.value);}function v0(){return x13("."),w0();}function M0(){x13("[");const u=ru();return x13("]"),u;}function k0(){var u,e,t;for(u=m0();;)if(c4("."))t=v0(),u=wu(".",u,t);else if(c4("("))e=b0(),u=B0(u,e);else if(c4("["))t=M0(),u=wu("[",u,t);else break;return u;}function ku(){const u=k0();if(F19.type===g11&&(c4("++")||c4("--")))throw new Error(R19);return u;}function X22(){var u,e;if(F19.type!==g11&&F19.type!==S23)e=ku();else{if(c4("++")||c4("--"))throw new Error(R19);if(c4("+")||c4("-")||c4("~")||c4("!"))u=y15(),e=X22(),e=p01(u.value,e);else{if(tu("delete")||tu("void")||tu("typeof"))throw new Error(R19);e=ku();}}return e;}function Su(u){let e=0;if(u.type!==g11&&u.type!==S23)return 0;switch(u.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break;}return e;}function S0(){var u,e,t,n,a,A,C,B,d,h;if(u=F19,d=X22(),n=F19,a=Su(n),a===0)return d;for(n.prec=a,y15(),e=[u,F19],C=X22(),A=[d,n,C];(a=Su(F19))>0;){for(;A.length>2&&a<=A[A.length-2].prec;)C=A.pop(),B=A.pop().value,d=A.pop(),e.pop(),t=bu(B,d,C),A.push(t);n=y15(),n.prec=a,A.push(n),e.push(F19),t=X22(),A.push(t);}for(h=A.length-1,t=A[h],e.pop();h>1;)e.pop(),t=bu(A[h-1].value,A[h-2],t),h-=2;return t;}function I21(){var u,e,t;return u=S0(),c4("?")&&(y15(),e=I21(),x13(":"),t=I21(),u=E0(u,e,t)),u;}function ru(){const u=I21();if(c4(","))throw new Error(R19);return u;}function L0(u){i2=u,r1=0,p10=i2.length,F19=null,mu();const e=ru();if(F19.type!==N20)throw new Error("Unexpect token after expression.");return e;}var Lu={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Uu(u){function e(C,B,d,h){let b=u(B[0]);return d&&(b=d+"("+b+")",d.lastIndexOf("new ",0)===0&&(b="("+b+")")),b+"."+C+(h<0?"":h===0?"()":"("+B.slice(1).map(u).join(",")+")");}function t(C,B,d){return h=>e(C,h,B,d);}const n="new Date",a="String",A="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(C){C.length<3&&b("Missing arguments to clamp function."),C.length>3&&b("Too many arguments to clamp function.");const B=C.map(u);return"Math.max("+B[1]+", Math.min("+B[2]+","+B[0]+"))";},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",a,0),lower:t("toLowerCase",a,0),substring:t("substring",a),split:t("split",a),trim:t("trim",a,0),regexp:A,test:t("test",A),if:function(C){C.length<3&&b("Missing arguments to if function."),C.length>3&&b("Too many arguments to if function.");const B=C.map(u);return"("+B[0]+"?"+B[1]+":"+B[2]+")";}};}function U0(u){const e=u&&u.length-1;return e&&(u[0]==='"'&&u[e]==='"'||u[0]==="'"&&u[e]==="'")?u.slice(1,-1):u;}function I01(u){u=u||{};const e=u.allowed?Xn(u.allowed):{},t=u.forbidden?Xn(u.forbidden):{},n=u.constants||Lu,a=(u.functions||Uu)(E),A=u.globalvar,C=u.fieldvar,B=O1(A)?A:s=>`${A}["${s}"]`;let d={},h={},b1=0;function E(s){if(X1(s))return s;const l=Iu[s.type];return l==null&&b("Unsupported type: "+s.type),l(s);}const Iu={Literal:s=>s.raw,Identifier:s=>{const l=s.name;return b1>0?l:g(t,l)?b("Illegal identifier: "+l):g(n,l)?n[l]:g(e,l)?l:(d[l]=1,B(l));},MemberExpression:s=>{const l=!s.computed,T=E(s.object);l&&(b1+=1);const M=E(s.property);return T===C&&(h[U0(M)]=1),l&&(b1-=1),T+(l?"."+M:"["+M+"]");},CallExpression:s=>{s.callee.type!=="Identifier"&&b("Illegal callee type: "+s.callee.type);const l=s.callee.name,T=s.arguments,M=g(a,l)&&a[l];return M||b("Unrecognized function: "+l),O1(M)?M(T):M+"("+T.map(E).join(",")+")";},ArrayExpression:s=>"["+s.elements.map(E).join(",")+"]",BinaryExpression:s=>"("+E(s.left)+" "+s.operator+" "+E(s.right)+")",UnaryExpression:s=>"("+s.operator+E(s.argument)+")",ConditionalExpression:s=>"("+E(s.test)+"?"+E(s.consequent)+":"+E(s.alternate)+")",LogicalExpression:s=>"("+E(s.left)+s.operator+E(s.right)+")",ObjectExpression:s=>"{"+s.properties.map(E).join(",")+"}",Property:s=>{b1+=1;const l=E(s.key);return b1-=1,l+":"+E(s.value);}};function $(s){const l={code:E(s),globals:Object.keys(d),fields:Object.keys(h)};return d={},h={},l;}return $.functions=a,$.constants=n,$;}const U22=Symbol("vega_selection_getter");function S24(t){return(!t.getter||!t.getter[U22])&&(t.getter=z1(t.field),t.getter[U22]=!0),t.getter;}const j24="intersect",V20="union",K22="vlMulti",Z22="vlPoint",C22="or",b17="and",g12="_vgsid_",R20=z1(g12),ee14="E",te14="R",ie11="R-E",ne13="R-LE",re14="R-RE",T15="index:unit";function F20(t,i){for(var n=i.fields,e=i.values,u=n.length,r=0,s,f;r<u;++r)if(f=n[r],s=S24(f)(t),K1(s)&&(s=L2(s)),K1(e[r])&&(e[r]=L2(e[r])),w1(e[r])&&K1(e[r][0])&&(e[r]=e[r].map(L2)),f.type===ee14){if(w1(e[r])?e[r].indexOf(s)<0:s!==e[r])return!1;}else if(f.type===te14){if(!Rn(s,e[r]))return!1;}else if(f.type===re14){if(!Rn(s,e[r],!0,!1))return!1;}else if(f.type===ie11){if(!Rn(s,e[r],!1,!1))return!1;}else if(f.type===ne13&&!Rn(s,e[r],!1,!0))return!1;return!0;}function se11(t,i,n){for(var e=this.context.data[t],u=e?e.values.value:[],r=e?e[T15]&&e[T15].value:void 0,s=n===j24,f=u.length,d=0,c,m,p,l,o;d<f;++d)if(c=u[d],r&&s){if(m=m||{},p=m[l=c.unit]||0,p===-1)continue;if(o=F20(i,c),m[l]=o?-1:++p,o&&r.size===1)return!0;if(!o&&p===r.get(l).count)return!1;}else if(o=F20(i,c),s^o)return o;return f&&s;}const w18=G4(R20),fe9=w18.left,ue10=w18.right;function oe12(t,i,n){const e=this.context.data[t],u=e?e.values.value:[],r=e?e[T15]&&e[T15].value:void 0,s=n===j24,f=R20(i),d=fe9(u,f);if(d===u.length)return!1;if(R20(u[d])!==f)return!1;if(r&&s){if(r.size===1)return!0;if(ue10(u,f)-d<r.size)return!1;}return!0;}function le10(t,i){return t.map(n=>J1(i.fields?{values:i.fields.map(e=>S24(e)(n.datum))}:{[g12]:R20(n.datum)},i));}function de9(t,i,n,e){for(var u=this.context.data[t],r=u?u.values.value:[],s={},f={},d={},c,m,p1,l,o,N,E,v,A,Y,M=r.length,I=0,x,k;I<M;++I)if(c=r[I],l=c.unit,m=c.fields,p1=c.values,m&&p1){for(x=0,k=m.length;x<k;++x)o=m[x],E=s[o.field]||(s[o.field]={}),v=E[l]||(E[l]=[]),d[o.field]=A=o.type.charAt(0),Y=$17[`${A}_union`],E[l]=Y(v,p(p1[x]));n&&(v=f[l]||(f[l]=[]),v.push(p(p1).reduce((h,a,y)=>(h[m[y].field]=a,h),{})));}else o=g12,N=R20(c),E=s[o]||(s[o]={}),v=E[l]||(E[l]=[]),v.push(N),n&&(v=f[l]||(f[l]=[]),v.push({[g12]:N}));if(i=i||V20,s[g12]?s[g12]=$17[`${g12}_${i}`](...Object.values(s[g12])):Object.keys(s).forEach(h=>{s[h]=Object.keys(s[h]).map(a=>s[h][a]).reduce((a,y)=>a===void 0?y:$17[`${d[h]}_${i}`](a,y));}),r=Object.keys(f),n&&r.length){const h=e?Z22:K22;s[h]=i===V20?{[C22]:r.reduce((a,y)=>(a.push(...f[y]),a),[])}:{[b17]:r.map(a=>({[C22]:f[a]}))};}return s;}var $17={[`${g12}_union`]:Ne,[`${g12}_intersect`]:Ae,E_union:function(t,i){if(!t.length)return i;for(var n=0,e=i.length;n<e;++n)t.indexOf(i[n])<0&&t.push(i[n]);return t;},E_intersect:function(t,i){return t.length?t.filter(n=>i.indexOf(n)>=0):i;},R_union:function(t,i){var n=L2(i[0]),e=L2(i[1]);return n>e&&(n=i[1],e=i[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<e&&(t[1]=e),t):[n,e];},R_intersect:function(t,i){var n=L2(i[0]),e=L2(i[1]);return n>e&&(n=i[1],e=i[0]),t.length?e<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>e&&(t[1]=e),t):[n,e];}};const ae11=":",ce7="@";function me9(t,i,n,e){i[0].type!==su&&b("First argument to selection functions must be a string literal.");const u=i[0].value,r=i.length>=2&&a(i).value,s="unit",f=ce7+s,d=ae11+u;r===j24&&!g(e,f)&&(e[f]=n.getData(u).indataRef(n,s)),g(e,d)||(e[d]=n.getData(u).tuplesRef());}function I22(t){const e=this.context.data[t];return e?e.values.value:[];}function K23(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i&&i.count;}function J23(t,e){const n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(_1).insert(e)),1;}function _22(t,e,n){if(t){const r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e));}return n!==void 0?n:t;}const x14=t=>function(e,n){const r=this.context.dataflow.locale();return e===null?"null":r[t](n)(e);},tt8=x14("format"),q27=x14("timeFormat"),et10=x14("utcFormat"),nt8=x14("timeParse"),rt10=x14("utcParse"),E23=new Date(2e3,0,1);function P24(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(E23.setYear(2e3),E23.setMonth(t),E23.setDate(e),q27.call(this,E23,n));}function it10(t){return P24.call(this,t,1,"%B");}function ot9(t){return P24.call(this,t,1,"%b");}function at10(t){return P24.call(this,0,2+t,"%A");}function st9(t){return P24.call(this,0,2+t,"%a");}const ct10=":",ut8="@",A17="%",G25="$";function z18(t,e,n,r){e[0].type!==su&&b("First argument to data functions must be a string literal.");const i=e[0].value,o=ct10+i;if(!g(o,r))try{r[o]=n.getData(i).tuplesRef();}catch(a){}}function ft8(t,e,n,r){e[0].type!==su&&b("First argument to indata must be a string literal."),e[1].type!==su&&b("Second argument to indata must be a string literal.");const i=e[0].value,o=e[1].value,a=ut8+o;g(a,r)||(r[a]=n.getData(i).indataRef(n,o));}function f10(t,e,n,r){if(e[0].type===su)lt8(n,r,e[0].value);else for(t in n.scales)lt8(n,r,t);}function lt8(t,e,n){const r=A17+n;if(!g(e,r))try{e[r]=t.scaleRef(n);}catch(i){}}function m8(t,e){if(O1(t))return t;if(X1(t)){const n=e.scales[t];return n&&Rn5(n.value)?n.value:void 0;}return;}function Sn9(t,e,n){e.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=f10,n._range=f10,n._scale=f10;const r=i=>"_["+(i.type===su?Z1(A17+i.value):Z1(A17)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${t(i[1])})`};}function L27(t,e){return function(n,r,i){if(n){const o=m8(n,(i||this).context);return o&&o.path[t](r);}else return e(r);};}const dt7=L27("area",Ui),mt6=L27("bounds",Vi1),pt7=L27("centroid",re10);function gt6(t,e){const n=m8(t,(e||this).context);return n&&n.scale();}function ht7(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break;}t=t.mark.group;}return n;}function B19(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)));}catch(r){t.warn(r);}return n[n.length-1];}function vt6(){return B19(this.context.dataflow,"warn",arguments);}function xt7(){return B19(this.context.dataflow,"info",arguments);}function wt5(){return B19(this.context.dataflow,"debug",arguments);}function V21(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);}function F21(t){const e=Y9(t),n=V21(e.r),r=V21(e.g),i=V21(e.b);return .2126*n+.7152*r+.0722*i;}function yt6(t,e){const n=F21(t),r=F21(e),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05);}function bt7(){const t=[].slice.call(arguments);return t.unshift({}),J1(...t);}function St6(t,e){return t===e||t!==t&&e!==e?!0:w1(t)?w1(e)&&t.length===e.length?Nn9(t,e):!1:M1(t)&&M1(e)?Nt7(t,e):!1;}function Nn9(t,e){for(let n=0,r=t.length;n<r;++n)if(!St6(t[n],e[n]))return!1;return!0;}function Nt7(t,e){for(const n in t)if(!St6(t[n],e[n]))return!1;return!0;}function Et5(t){return e=>Nt7(t,e);}function Pt6(t,e,n,r,i,o){const a=this.context.dataflow,u=this.context.data[t],c=u.input,l=a.stamp();let d=u.changes,g,j;if(a._trigger===!1||!(c.value.length||e||r))return 0;if((!d||d.stamp<l)&&(u.changes=d=a.changeset(),d.stamp=l,a.runAfter(()=>{u.modified=!0,a.pulse(c,d).run();},!0,1)),n&&(g=n===!0?_1:w1(n)||Et(n)?n:Et5(n),d.remove(g)),e&&d.insert(e),r&&(g=Et5(r),c.value.some(g)?d.remove(g):d.insert(r)),i)for(j in o)d.modify(i,j,o[j]);return 1;}function At8(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.hypot(n,r);}function zt6(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX);}const Ft5={};function Mt7(t,e){const n=Ft5[e]||(Ft5[e]=z1(e));return w1(t)?t.map(n):n(t);}function O24(t){return w1(t)||ArrayBuffer.isView(t)?t:null;}function Y23(t){return O24(t)||(X1(t)?t:null);}function jt7(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return O24(t).join(...n);}function $t8(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y23(t).indexOf(...n);}function Rt7(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y23(t).lastIndexOf(...n);}function Tt8(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y23(t).slice(...n);}function Dt6(t,e,n){return O1(n)&&b("Function argument passed to replace."),String(t).replace(e,n);}function It5(t){return O24(t).slice().reverse();}function qt7(t,e,n){return H10(t||0,e||0,n||0);}function Gt5(t,e){const n=m8(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0;}function Lt7(t,e){const n=m8(t,(e||this).context);return n?n.copy():void 0;}function Bt6(t,e){const n=m8(t,(e||this).context);return n?n.domain():[];}function Vt6(t,e,n){const r=m8(t,(n||this).context);return r?w1(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0;}function Ot5(t,e){const n=m8(t,(e||this).context);return n&&n.range?n.range():[];}function Yt7(t,e,n){const r=m8(t,(n||this).context);return r?r(e):void 0;}function Ct6(t,e,n,r,i){t=m8(t,(i||this).context);const o=br1(e,n);let a1=t.domain(),u=a1[0],c=a(a1),l=A1;return c-u?l=zn2(t,u,c):t=(t.interpolator?b7("sequential")().interpolator(t.interpolator()):b7("linear")().interpolate(t.interpolate()).range(t.range())).domain([u=0,c=1]),t.ticks&&(a1=t.ticks(+r||15),u!==a1[0]&&a1.unshift(u),c!==a(a1)&&a1.push(c)),a1.forEach(d=>o.stop(l(d),t(d))),o;}function Xt7(t,e,n){const r=m8(t,(n||this).context);return function(i){return r?r.path.context(i)(e):"";};}function kt8(t){let e=null;return function(n){return n?Lt4(n,e=e||dt4(t)):t;};}const Ut6=t=>t.data;function Ht5(t,e){const n=I22.call(e,t);return n.root&&n.root.lookup||{};}function Qt6(t,e,n){const r=Ht5(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(Ut6):void 0;}function Wt6(t,e){const n=Ht5(t,this)[e];return n?n.ancestors().map(Ut6):void 0;}const Zt8=()=>typeof window!="undefined"&&window||null;function Kt7(){const t=Zt8();return t?t.screen:{};}function Jt6(){const t=Zt8();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0];}function _t5(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0];}function te15(t,e,n){if(!t)return[];const[r,i]=t,o=new E14().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return Qo(a,o,En8(e));}function En8(t){let e=null;if(t){const n=p(t.marktype),r=p(t.markname);e=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o));}return e;}function Pn8(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=p(t);const i=t[t.length-1];return i===void 0||Math.hypot(i[0]-e,i[1]-n)>r?[...t,[e,n]]:t;}function An10(t){return p(t).reduce((e,n,r)=>{let[i,o]=n;return e+=r==0?`M ${i},${o} `:r===t.length-1?" Z":`L ${i},${o} `;},"");}function zn6(t,e,n){const{x:r,y:i,mark:o}=n,a=new E14().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,l]of e)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);a.translate(r,i);const u=te15([[a.x1,a.y1],[a.x2,a.y2]],t,o);return u.filter(c=>Fn7(c.x,c.y,e));}function Fn7(t,e,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[a,u]=n[o],[c,l]=n[i];l>e!=u>e&&t<(a-c)*(e-l)/(u-l)+c&&r++;}return r&1;}const w19={random(){return N8();},cumulativeNormal:z9,cumulativeLogNormal:$5,cumulativeUniform:ne5,densityNormal:H6,densityLogNormal:V6,densityUniform:ee4,quantileNormal:P7,quantileLogNormal:_9,quantileUniform:te4,sampleNormal:j11,sampleLogNormal:O8,sampleUniform:x6,isArray:w1,isBoolean:In,isDate:K1,isDefined(t){return t!==void 0;},isNumber:V,isObject:M1,isRegExp:$n,isString:X1,isTuple:Et,isValid(t){return t!=null&&t===t;},toBoolean:xn,toDate(t){return Kn(t);},toNumber:L2,toString:Vn,indexof:$t8,join:jt7,lastindexof:Rt7,replace:Dt6,reverse:It5,slice:Tt8,flush:Ln,lerp:Fn,merge:bt7,pad:Gn,peek:a,pluck:Mt7,span:Wn,inrange:Rn,truncate:Zn,rgb:Y9,lab:ae3,hcl:se3,hsl:Q7,luminance:F21,contrast:yt6,sequence:ie,format:tt8,utcFormat:et10,utcParse:rt10,utcOffset:Zt,utcSequence:ee1,timeFormat:q27,timeParse:nt8,timeOffset:Vt,timeSequence:te1,timeUnitSpecifier:$t,monthFormat:it10,monthAbbrevFormat:ot9,dayFormat:at10,dayAbbrevFormat:st9,quarter:pn,utcquarter:mn,week:jt,utcweek:Rt,dayofyear:xt,utcdayofyear:At,warn:vt6,info:xt7,debug:wt5,extent(t){return Nn(t);},inScope:ht7,intersect:te15,clampRange:bn,pinchDistance:At8,pinchAngle:zt6,screen:Kt7,containerSize:_t5,windowSize:Jt6,bandspace:qt7,setdata:J23,pathShape:kt8,panLinear:un,panLog:cn,panPow:sn,panSymlog:ln,zoomLinear:fn,zoomLog:gn,zoomPow:an,zoomSymlog:hn,encode:_22,modify:Pt6,lassoAppend:Pn8,lassoPath:An10,intersectLasso:zn6},Mn10=["view","item","group","xy","x","y"],jn7="event.vega.",ee15="this.",C23={},X23={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${Z1(G25+t)}]`,functions:$n8,constants:Lu,visitors:C23},M15=I01(X23);function $n8(t){const e=Uu(t);Mn10.forEach(n=>e[n]=jn7+n);for(const n in w19)e[n]=ee15+n;return J1(e,Sn9(t,w19,C23)),e;}function s7(t,e,n){return arguments.length===1?w19[t]:(w19[t]=e,n&&(C23[t]=n),M15&&(M15.functions[t]=ee15+t),this);}s7("bandwidth",Gt5,f10),s7("copy",Lt7,f10),s7("domain",Bt6,f10),s7("range",Ot5,f10),s7("invert",Vt6,f10),s7("scale",Yt7,f10),s7("gradient",Ct6,f10),s7("geoArea",dt7,f10),s7("geoBounds",mt6,f10),s7("geoCentroid",pt7,f10),s7("geoShape",Xt7,f10),s7("geoScale",gt6,f10),s7("indata",K23,ft8),s7("data",I22,z18),s7("treePath",Qt6,z18),s7("treeAncestors",Wt6,z18),s7("vlSelectionTest",se11,me9),s7("vlSelectionIdTest",oe12,me9),s7("vlSelectionResolve",de9,me9),s7("vlSelectionTuples",le10);function Rn10(t,e){const n={};let r;try{t=X1(t)?t:Z1(t)+"",r=L0(t);}catch(o){b("Expression parse error: "+t);}r.visit(o=>{if(o.type!==cu)return;const a=o.callee.name,u=X23.visitors[a];u&&u(a,o.arguments,e,n);});const i=M15(r);return i.globals.forEach(o=>{const a=G25+o;!g(n,a)&&e.getSignal(o)&&(n[a]=e.signalRef(o));}),{$expr:J1({code:i.code},e.options.ast?{ast:r}:null),$fields:i.fields,$params:n};}function z19(t){const e=this,r=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),r.forEach(n=>e.parseOperator(n)),r.forEach(n=>e.parseOperatorParameters(n)),(t.streams||[]).forEach(n=>e.parseStream(n)),(t.updates||[]).forEach(n=>e.parseUpdate(n)),e.resolve();}const U23=Xn(["rule"]),v17=Xn(["group","image","rect"]);function D16(t,e){let r="";return U23[e]||(t.x2&&(t.x?(v17[e]&&(r+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),r+="o.width=o.x2-o.x;"):r+="o.x=o.x2-(o.width||0);"),t.xc&&(r+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(v17[e]&&(r+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),r+="o.height=o.y2-o.y;"):r+="o.y=o.y2-(o.height||0);"),t.yc&&(r+="o.y=o.yc-(o.height||0)/2;")),r;}function c5(t){return(t+"").toLowerCase();}function F22(t){return c5(t)==="operator";}function I23(t){return c5(t)==="collect";}function f11(t,e,r){r.endsWith(";")||(r="return("+r+");");const n=Function(...e.concat(r));return t&&t.functions?n.bind(t.functions):n;}function T16(t,e,r,n){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${r}
  : (u > v || v == null) && u != null ? ${n}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${r}
  : v !== v && u === u ? ${n} : `;}var q28={operator:(t,e)=>f11(t,["_"],e.code),parameter:(t,e)=>f11(t,["datum","_"],e.code),event:(t,e)=>f11(t,["event"],e.code),handler:(t,e)=>{const r=`var datum=event.item&&event.item.datum;return ${e.code};`;return f11(t,["_","event"],r);},encode:(t,e)=>{const{marktype:r,channels:n}=e;let o="var o=item,datum=o.datum,m=0,$;";for(const a in n){const s="o["+Z1(a)+"]";o+=`$=${n[a].code};if(${s}!==$)${s}=$,m=1;`;}return o+=D16(n,r),o+="return m;",f11(t,["item","_"],o);},codegen:{get(t){const e=`[${t.map(Z1).join("][")}]`,r=Function("_",`return _${e};`);return r.path=e,r;},comparator(t,e){let r;const n=(a,s)=>{const i=e[s];let u,l;return a.path?(u=`a${a.path}`,l=`b${a.path}`):((r=r||{})["f"+s]=a,u=`this.f${s}(a)`,l=`this.f${s}(b)`),T16(u,l,-i,i);},o=Function("a","b","var u, v; return "+t.map(n).join("")+"0;");return r?o.bind(r):o;}}};function W21(t){const e=this;F22(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type);}function A18(t){const e=this;if(t.params){const r=e.get(t.id);r||b("Invalid operator id: "+t.id),e.dataflow.connect(r,r.parameters(e.parseParameters(t.params),t.react,t.initonly));}}function J24(t,e){e=e||{};const r=this;for(const n in t){const o=t[n];e[n]=w1(o)?o.map(a=>x15(a,r,e)):x15(o,r,e);}return e;}function x15(t,e,r){if(!t||!M1(t))return t;for(let n=0,o=y16.length,a;n<o;++n)if(a=y16[n],g(t,a.key))return a.parse(t,e,r);return t;}var y16=[{key:"$ref",parse:K24},{key:"$key",parse:R21},{key:"$expr",parse:L28},{key:"$field",parse:M16},{key:"$encode",parse:V22},{key:"$compare",parse:N21},{key:"$context",parse:B20},{key:"$subflow",parse:G26},{key:"$tupleid",parse:H19}];function K24(t,e){return e.get(t.$ref)||b("Operator not defined: "+t.$ref);}function L28(t,e,r){t.$params&&e.parseParameters(t.$params,r);const n="e:"+t.$expr.code;return e.fn[n]||(e.fn[n]=f(e.parameterExpression(t.$expr),t.$fields));}function R21(t,e){const r="k:"+t.$key+"_"+!!t.$flat;return e.fn[r]||(e.fn[r]=qn(t.$key,t.$flat,e.expr.codegen));}function M16(t,e){if(!t.$field)return null;const r="f:"+t.$field+"_"+t.$name;return e.fn[r]||(e.fn[r]=z1(t.$field,t.$name,e.expr.codegen));}function N21(t,e){const r="c:"+t.$compare+"_"+t.$order,n=p(t.$compare).map(o=>o&&o.$tupleid?d4:o);return e.fn[r]||(e.fn[r]=Mn(n,t.$order,e.expr.codegen));}function V22(t,e){const r=t.$encode,n={};for(const o in r){const a=r[o];n[o]=f(e.encodeExpression(a.$expr),a.$fields),n[o].output=a.$output;}return n;}function B20(t,e){return e;}function G26(t,e){const r=t.$subflow;return function(n,o,a){const s=e.fork().parse(r),i=s.get(r.operators[0].id),u=s.signals.parent;return u&&u.set(a),i.detachSubflow=()=>e.detach(s),i;};}function H19(){return d4;}function Q23(t){var e=this,r=t.filter!=null?e.eventExpression(t.filter):void 0,n=t.stream!=null?e.get(t.stream):void 0,o;t.source?n=e.events(t.source,t.type,r):t.merge&&(o=t.merge.map(a=>e.get(a)),n=o[0].merge.apply(o[0],o.slice(1))),t.between&&(o=t.between.map(a=>e.get(a)),n=n.between(o[0],o[1])),t.filter&&(n=n.filter(r)),t.throttle!=null&&(n=n.throttle(+t.throttle)),t.debounce!=null&&(n=n.debounce(+t.debounce)),n==null&&b("Invalid stream definition: "+JSON.stringify(t)),t.consume&&n.consume(!0),e.stream(t,n);}function X24(t){var e=this,r=M1(r=t.source)?r.$ref:r,n=e.get(r),o=null,a=t.update,s=void 0;n||b("Source not defined: "+t.source),o=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),a&&a.$expr&&(a.$params&&(s=e.parseParameters(a.$params)),a=e.handlerExpression(a.$expr)),e.update(t,n,o,a,s);}const Y24={skip:!0};function Z23(t){var e=this,r={};if(t.signals){var n=r.signals={};Object.keys(e.signals).forEach(a=>{const s=e.signals[a];t.signals(a,s)&&(n[a]=s.value);});}if(t.data){var o=r.data={};Object.keys(e.data).forEach(a=>{const s=e.data[a];t.data(a,s)&&(o[a]=s.input.value);});}return e.subcontext&&t.recurse!==!1&&(r.subcontext=e.subcontext.map(a=>a.getState(t))),r;}function _23(t){var e=this,r=e.dataflow,n=t.data,o=t.signals;Object.keys(o||{}).forEach(a=>{r.update(e.signals[a],o[a],Y24);}),Object.keys(n||{}).forEach(a=>{r.pulse(e.data[a].input,r.changeset().remove(_1).insert(n[a]));}),(t.subcontext||[]).forEach((a,s)=>{const i=e.subcontext[s];i&&i.setState(a);});}function tt9(t,e,r,n){return new b18(t,e,r,n);}function b18(t,e,r,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=n||q28,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},r&&(this.functions=Object.create(r),this.functions.context=this);}function k18(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this);}b18.prototype=k18.prototype={fork(){const t=new k18(this);return(this.subcontext||(this.subcontext=[])).push(t),t;},detach(t){this.subcontext=this.subcontext.filter(r=>r!==t);const e=Object.keys(t.nodes);for(const r of e)t.nodes[r]._targets=null;for(const r of e)t.nodes[r].detach();t.nodes=null;},get(t){return this.nodes[t];},set(t,e){return this.nodes[t]=e;},add(t,e){const r=this,n=r.dataflow,o=t.value;if(r.set(t.id,e),I23(t.type)&&o&&(o.$ingest?n.ingest(e,o.$ingest,o.$format):o.$request?n.preload(e,o.$request,o.$format):n.pulse(e,n.changeset().insert(o))),t.root&&(r.root=e),t.parent){let a=r.get(t.parent.$ref);a?(n.connect(a,[e]),e.targets().add(a)):(r.unresolved=r.unresolved||[]).push(()=>{a=r.get(t.parent.$ref),n.connect(a,[e]),e.targets().add(a);});}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(const a in t.data){const s=r.data[a]||(r.data[a]={});t.data[a].forEach(i=>s[i]=e);}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this;},operator(t,e){this.add(t,this.dataflow.add(t.value,e));},transform(t,e){this.add(t,this.dataflow.add(this.transforms[c5(e)]));},stream(t,e){this.set(t.id,e);},update(t,e,r,n,o){this.dataflow.on(e,r,n,o,t.options);},operatorExpression(t){return this.expr.operator(this,t);},parameterExpression(t){return this.expr.parameter(this,t);},eventExpression(t){return this.expr.event(this,t);},handlerExpression(t){return this.expr.handler(this,t);},encodeExpression(t){return this.expr.encode(this,t);},parse:z19,parseOperator:W21,parseOperatorParameters:A18,parseParameters:J24,parseStream:Q23,parseUpdate:X24,getState:Z23,setState:_23};function ye7(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),w20(t,e.description()));}function w20(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t));}function Ce6(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background});}const A19="default";function Le5(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:A19,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,a=i?X1(i)?i:i.user:A19,s=r.item&&r.item.cursor||null;return i&&a===i.user&&s==i.item?i:{user:a,item:s};}),e.add(null,function(n){let r=n.cursor,i=this.value;return X1(r)||(i=r.item,r=r.user),T17(e,r&&r!==A19?r:i||r),i;},{cursor:t});}function T17(e,t){const n=e.globalCursor()?typeof document!="undefined"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t;}function v18(e,t){var n=e._runtime.data;return g(n,t)||b("Unrecognized data set: "+t),n[t];}function xe6(e,t){return arguments.length<2?v18(this,e).values.value:z20.call(this,e,C6().remove(_1).insert(t));}function z20(e,t){it2(t)||b("Second argument to changes must be a changeset.");const n=v18(this,e);return n.modified=!0,this.pulse(n.input,t);}function Ee5(e,t){return z20.call(this,e,C6().insert(t));}function Re9(e,t){return z20.call(this,e,C6().remove(t));}function I24(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right);}function V23(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom);}function b19(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]];}function Se5(e){var t=b19(e),n=I24(e),r=V23(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r);}catch(a){e.error(a);}});}function Ae7(e,t,n){var r=e._renderer,i=r&&r.canvas(),a,s,o;return i&&(o=b19(e),s=t.changedTouches?t.changedTouches[0]:t,a=je4(s,i),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=Te7(e,n,a),t;}function Te7(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var o=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break;}}return o&&o.mark&&o.mark.interactive?o:{};}function a(s){if(!s)return n;X1(s)&&(s=i(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o;}return{view:On(e),item:On(t||{}),group:i,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]};}const G27="view",De4="timer",je7="window",Oe3={trap:!1};function Ue6(e){const t=J1({defaults:{}},e),n=(r,i)=>{i.forEach(a=>{w1(r[a])&&(r[a]=Xn(r[a]));});};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t;}function B21(e,t,n,r){e._eventListeners.push({type:n,sources:p(t),handler:r});}function Me8(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault();}function k19(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||M1(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0;}function Pe5(e,t,n){var r=this,i=new B6(n),a=function(u,c){r.runAsync(null,()=>{e===G27&&Me8(r,t)&&u.preventDefault(),i.receive(Ae7(r,u,c));});},s;if(e===De4)k19(r,"timer",t)&&r.timer(a,t);else if(e===G27)k19(r,"view",t)&&r.addEventListener(t,a,Oe3);else if(e===je7?k19(r,"window",t)&&typeof window!="undefined"&&(s=[window]):typeof document!="undefined"&&k19(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);B21(r,s,t,a);}return i;}function q29(e){return e.item;}function N22(e){return e.item.mark.source;}function F23(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e);};}function We5(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",q29),N22,F23(e)),this.on(this.events("view","pointerout",q29),N22,F23(t)),this;}function He6(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,a,s,o,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,o=n[i].handler,this._handler.off(l,o);return this;}function d8(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r;}const we9="vega-bind",Ie6="vega-bind-name",Ve5="vega-bind-radio";function Ge6(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s);});}},r.debounce&&(i.update=Dn(r.debounce,i.update)));const a=r.input==null&&r.element?Be5:Ne7;return a(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal));}),i.active=!0),i;}function Be5(e,t,n,r){const i=n.event||"input",a=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,a),B21(r,t,i,a),e.set=s=>{t.value=s,t.dispatchEvent(qe6(i));};}function qe6(e){return typeof Event!="undefined"?new Event(e):{type:e};}function Ne7(e,t,n,r){const i=r.signal(n.signal),a=d8("div",{class:we9}),s=n.input==="radio"?a:a.appendChild(d8("label"));s.appendChild(d8("span",{class:Ie6},n.name||n.signal)),t.appendChild(a);let o=Fe8;switch(n.input){case"checkbox":o=Qe8;break;case"select":o=$e7;break;case"radio":o=Je6;break;case"range":o=Ye5;break;}o(e,s,n,i);}function Fe8(e,t,n,r){const i=d8("input");for(const a in n)a!=="signal"&&a!=="element"&&i.setAttribute(a==="input"?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=a=>i.value=a;}function Qe8(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const a=d8("input",i);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null;}function $e7(e,t,n,r){const i=d8("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};y17(s,r)&&(l.selected=!0),i.appendChild(d8("option",l,(a[o]||s)+""));}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex]);}),e.elements=[i],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(y17(n.options[o],s)){i.selectedIndex=o;return;}};}function Je6(e,t,n,r){const i=d8("span",{class:Ve5}),a=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};y17(s,r)&&(l.checked=!0);const u=d8("input",l);u.addEventListener("change",()=>e.update(s));const c=d8("label",{},(a[o]||s)+"");return c.prepend(u),i.appendChild(c),u;}),e.set=s=>{const o=e.elements,l=o.length;for(let u=0;u<l;++u)y17(o[u].value,s)&&(o[u].checked=!0);};}function Ye5(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,s=n.step||kn(a,i,100),o=d8("input",{type:"range",name:n.signal,min:a,max:i,step:s});o.value=r;const l=d8("span",{},+r);t.appendChild(o),t.appendChild(l);const u=()=>{l.textContent=o.value,e.update(+o.value);};o.addEventListener("input",u),o.addEventListener("change",u),e.elements=[o],e.set=c=>{o.value=c,l.textContent=c;};}function y17(e,t){return e===t||e+""===t+"";}function Q24(e,t,n,r,i,a){return t=t||new r(e.loader()),t.initialize(n,I24(e),V23(e),b19(e),i,a).background(e.background());}function D17(e,t){return t?function(){try{t.apply(this,arguments);}catch(n){e.error(n);}}:null;}function Ke6(e,t,n,r){const i=new r(e.loader(),D17(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,b19(e),e);return t&&t.handlers().forEach(a=>{i.on(a.type,a.handler);}),i;}function Xe5(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,a=Zo(r);e=n._el=e?j25(n,e,!0):null,ye7(n),a||n.error("Unrecognized renderer type: "+r);const s=a.handler||Fe4,o=e?a.renderer:a.headless;return n._renderer=o?Q24(n,n._renderer,e,o):null,n._handler=Ke6(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=j25(n,t,!0):e.appendChild(d8("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=j25(n,l.param.element,!!l.param.input));}),n._bind.forEach(l=>{Ge6(n,l.element||t,l);})),n;}function j25(e,t,n){if(typeof t=="string")if(typeof document!="undefined"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null;}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent="";}catch(r){t=null,e.error(r);}return t;}const p11=e=>+e||0,Ze4=e=>({top:e,bottom:e,left:e,right:e});function $18(e){return M1(e)?{top:p11(e.top),bottom:p11(e.bottom),left:p11(e.left),right:p11(e.right)}:Ze4(p11(e));}async function O25(e,t,n,r){const i=Zo(t),a=i&&i.headless;return a||b("Unrecognized renderer type: "+t),await e.runAsync(),Q24(e,null,null,a,n,r).renderAsync(e._scenegraph.root);}async function et11(e,t){e!==Ko.Canvas&&e!==Ko.SVG&&e!==Ko.PNG&&b("Unrecognized image type: "+e);const n=await O25(this,e,t);return e===Ko.SVG?tt10(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png");}function tt10(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n);}async function nt9(e,t){const n=await O25(this,Ko.Canvas,e,t);return n.canvas();}async function rt11(e){const t=await O25(this,Ko.SVG,e);return t.svg();}function it11(e,t,n){return tt9(e,Y6,w19,n).parse(t);}function st10(e){var t=this._runtime.scales;return g(t,e)||b("Unrecognized scale or projection: "+e),t[e].value;}var J25="width",Y25="height",U24="padding",K25={skip:!0};function X25(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===U24?r.left+r.right:0);}function Z24(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===U24?r.top+r.bottom:0);}function at11(e){var t=e._signals,n=t[J25],r=t[Y25],i=t[U24];function a(){e._autosize=e._resize=1;}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=X25(e,o.size),a();},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=Z24(e,o.size),a();},{size:r});const s=e.add(null,a,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1;}function ot10(e,t,n,r,i,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(J25,n,K25),s._resizeWidth.skip(!0)),s.height()!==r&&(o=1,s.signal(Y25,r,K25),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),o&&s.run("enter"),a&&s.runAfter(l=>l.resize());},!1,1);}function lt9(e){return this._runtime.getState(e||{data:ut9,signals:dt8,recurse:!0});}function ut9(e,t){return t.modified&&w1(t.input.value)&&!e.startsWith("_:vega:_");}function dt8(e,t){return!(e==="parent"||t instanceof Y6.proxy);}function ct11(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e);},t=>{t._trigger=!0;}),this;}function ht8(e,t){function n(r){e({timestamp:Date.now(),elapsed:r});}this._timers.push(E17(n,t));}function ft9(e,t,n,r){const i=e.element();i&&i.setAttribute("title",gt7(r));}function gt7(e){return e==null?"":w1(e)?ee16(e):M1(e)&&!K1(e)?pt8(e):e+"";}function pt8(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(w1(n)?ee16(n):te16(n));}).join(`
`);}function ee16(e){return"["+e.map(te16).join(", ")+"]";}function te16(e){return w1(e)?"[…]":M1(e)&&!K1(e)?"{…}":e;}function mt7(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t);},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync();};t();}}function ne14(e,t){const n=this;if(t=t||{},ct3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=J1({},e.locale,t.locale);n.locale(lt1(a.number,a.time));}n._el=null,n._elBind=null,n._renderType=t.renderer||Ko.Canvas,n._scenegraph=new _o;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||ft9,n._redraw=!0,n._handler=new Fe4().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Ue6(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=it11(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:J1({},a)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=X25(n,n._width),n._viewHeight=Z24(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,at11(n),Ce6(n),Le5(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio();}function C24(e,t){return g(e._signals,t)?e._signals[t]:b("Unrecognized signal name: "+Z1(t));}function re15(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null;}function ie12(e,t,n,r){let i=re15(n,r);return i||(i=D17(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e;}function se12(e,t,n){const r=re15(t,n);return r&&t._targets.remove(r),e;}Pn(ne14,ct3,{async evaluate(e,t,n){if(await ct3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Se5(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1;}catch(r){this.error(r);}return n&&I8(this,n),this;},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e);},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&w20(this._el,this._desc=t),this;}return this._desc;},container(){return this._el;},scenegraph(){return this._scenegraph;},origin(){return this._origin.slice();},signal(e,t,n){const r=C24(this,e);return arguments.length===1?r.value:this.update(r,t,n);},width(e){return arguments.length?this.signal("width",e):this.signal("width");},height(e){return arguments.length?this.signal("height",e):this.signal("height");},padding(e){return arguments.length?this.signal("padding",$18(e)):$18(this.signal("padding"));},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize");},background(e){return arguments.length?this.signal("background",e):this.signal("background");},renderer(e){return arguments.length?(Zo(e)||b("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType;},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip;},loader(e){return arguments.length?(e!==this._loader&&(ct3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader;},resize(){return this._autosize=1,this.touch(C24(this,"autosize"));},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind));},_resizeView:ot10,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=D17(this,t),r.raw=t),this._handler.on(e,r),this;},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,a;--r>=0;)if(a=n[r].type,i=n[r].handler,e===a&&(t===i||t===i.raw)){this._handler.off(a,i);break;}return this;},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this;},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this;},addSignalListener(e,t){return ie12(this,e,C24(this,e),t);},removeSignalListener(e,t){return se12(this,C24(this,e),t);},addDataListener(e,t){return ie12(this,e,v18(this,e).values,t);},removeDataListener(e,t){return se12(this,v18(this,e).values,t);},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=T17(this,null);this._globalCursor=!!e,t&&T17(this,t);}return this;}else return this._globalCursor;},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault;},timer:ht8,events:Pe5,finalize:He6,hover:We5,data:xe6,change:z20,insert:Ee5,remove:Re9,scale:st10,initialize:Xe5,toImageURL:et11,toCanvas:nt9,toSVG:rt11,getState:lt9,setState:ct11,_watchPixelRatio:mt7});const y18="view",h12="[",m9="]",s8="{",w21="}",A20=":",g13=",",x16="@",R22=">",L29=/[[\]{}]/,k20={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let b20,d9;function v19(e,t,n){return b20=t||y18,d9=n||k20,E24(e.trim()).map(p12);}function M17(e){return d9[e];}function f12(e,t,n,i,o){const c=e.length;let l=0,r;for(;t<c;++t){if(r=e[t],!l&&r===n)return t;o&&o.indexOf(r)>=0?--l:i&&i.indexOf(r)>=0&&++l;}return t;}function E24(e){const t=[],n=e.length;let i=0,o=0;for(;o<n;)o=f12(e,o,g13,h12+s8,m9+w21),t.push(e.substring(i,o).trim()),i=++o;if(t.length===0)throw"Empty event selector: "+e;return t;}function p12(e){return e[0]==="["?O26(e):S25(e);}function O26(e){const t=e.length;let n=1,i;if(n=f12(e,n,m9,h12,m9),n===t)throw"Empty between selector: "+e;if(i=E24(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==R22)throw"Expected '>' after between selector: "+e;i=i.map(p12);const o=p12(e.slice(1).trim());return o.between?{between:i,stream:o}:(o.between=i,o);}function S25(e){const t={source:b20},n=[];let i=[0,0],o=0,c=0,l=e.length,r=0,u,a;if(e[l-1]===w21){if(r=e.lastIndexOf(s8),r>=0){try{i=B22(e.substring(r+1,l-1));}catch(U){throw"Invalid throttle specification: "+e;}e=e.slice(0,r).trim(),l=e.length;}else throw"Unmatched right brace: "+e;r=0;}if(!l)throw e;if(e[0]===x16&&(o=++r),u=f12(e,r,A20),u<l&&(n.push(e.substring(c,u).trim()),c=r=++u),r=f12(e,r,h12),r===l)n.push(e.substring(c,l).trim());else if(n.push(e.substring(c,r).trim()),a=[],c=++r,c===l)throw"Unmatched left bracket: "+e;for(;r<l;){if(r=f12(e,r,m9),r===l)throw"Unmatched left bracket: "+e;if(a.push(e.substring(c,r).trim()),r<l-1&&e[++r]!==h12)throw"Expected left bracket: "+e;c=++r;}if(!(l=n.length)||L29.test(n[l-1]))throw"Invalid event selector: "+e;return l>1?(t.type=n[1],o?t.markname=n[0].slice(1):M17(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),a!=null&&(t.filter=a),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t;}function B22(e){const t=e.split(g13);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i;});}function vn8(t){return M1(t)?t:{type:t||"pad"};}const gt8=t=>+t||0,En9=t=>({top:t,bottom:t,left:t,right:t});function On6(t){return M1(t)?t.signal?t:{top:gt8(t.top),bottom:gt8(t.bottom),left:gt8(t.left),right:gt8(t.right)}:En9(gt8(t));}const z21=t=>M1(t)&&!w1(t)?J1({},t):{value:t};function ce8(t,e,n,i){if(n!=null){const a=M1(n)&&!w1(n)||w1(n)&&n.length&&M1(n[0]);return a?t.update[e]=n:t[i||"enter"][e]={value:n},1;}else return 0;}function L30(t,e,n){for(const i in e)ce8(t,i,e[i]);for(const i in n)ce8(t,i,n[i],"update");}function nt10(t,e,n){for(const i in e){if(n&&g(n,i))continue;t[i]=J1(t[i]||{},e[i]);}return t;}function it12(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t]);}const St7="mark",$t9="frame",Rt8="scope",he8="axis",me10="axis-domain",ye8="axis-grid",pe8="axis-label",be7="axis-tick",xe7="axis-title",ke7="legend",zn7="legend-band",Se6="legend-entry",Dn5="legend-gradient",Ut7="legend-label",$e8="legend-symbol",Re10="legend-title",Ln6="title",wn12="title-text",Pn9="title-subtitle";function jn8(t,e,n,i,a){const l={},r={};let o,s,u,f;s="lineBreak",e==="text"&&a[s]!=null&&!it12(s,t)&&Vt7(l,s,a[s]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===$t9?a.group:n===St7?J1({},a.mark,a[e]):null;for(s in f)u=it12(s,t)||(s==="fill"||s==="stroke")&&(it12("fill",t)||it12("stroke",t)),u||Vt7(l,s,f[s]);p(i).forEach(d=>{const c=a.style&&a.style[d];for(const m in c)it12(m,t)||Vt7(l,m,c[m]);}),t=J1({},t);for(s in l)f=l[s],f.signal?(o=o||{})[s]=f:r[s]=f;return t.enter=J1(r,t.enter),o&&(t.update=J1(o,t.update)),t;}function Vt7(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n};}const ve8=t=>X1(t)?Z1(t):t.signal?`(${t.signal})`:Ee6(t);function vt7(t){if(t.gradient!=null)return Wn7(t);let e=t.signal?`(${t.signal})`:t.color?Tn7(t.color):t.field!=null?Ee6(t.field):t.value!==void 0?Z1(t.value):void 0;return t.scale!=null&&(e=Fn8(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${Ot6(t.exponent)})`),t.mult!=null&&(e+=`*${Ot6(t.mult)}`),t.offset!=null&&(e+=`+${Ot6(t.offset)}`),t.round&&(e=`round(${e})`),e;}const Et6=(t,e,n,i)=>`(${t}(${[e,n,i].map(vt7).join(",")})+'')`;function Tn7(t){return t.c?Et6("hcl",t.h,t.c,t.l):t.h||t.s?Et6("hsl",t.h,t.s,t.l):t.l||t.a?Et6("lab",t.l,t.a,t.b):t.r||t.g||t.b?Et6("rgb",t.r,t.g,t.b):null;}function Wn7(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:Z1(n));for(;e.length&&a(e)==null;)e.pop();return e.unshift(ve8(t.gradient)),`gradient(${e.join(",")})`;}function Ot6(t){return M1(t)?"("+vt7(t)+")":t;}function Ee6(t){return Oe4(M1(t)?t:{datum:t});}function Oe4(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group;}else t.datum?(e="datum",i=t.datum):b("Invalid field reference: "+Z1(t));return t.signal||(i=X1(i)?N1(i).map(Z1).join("]["):Oe4(i)),e+"["+i+"]";}function Fn8(t,e){const n=ve8(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band===1?"":"*"+Ot6(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e;}function Cn8(t){let e="";return t.forEach(n=>{const i=vt7(n);e+=n.test?`(${n.test})?${i}:`:i;}),a(e)===":"&&(e+="null"),e;}function ze7(t,e,n,i,a,l){const r={};l=l||{},l.encoders={$encode:r},t=jn8(t,e,n,i,a.config);for(const o in t)r[o]=An11(t[o],e,l,a);return l;}function An11(t,e,n,i){const a={},l={};for(const r in t)t[r]!=null&&(a[r]=Bn7(Mn11(t[r]),i,n,l));return{$expr:{marktype:e,channels:a},$fields:Object.keys(l),$output:Object.keys(t)};}function Mn11(t){return w1(t)?Cn8(t):vt7(t);}function Bn7(t,e,n,i){const a=Rn10(t,e);return a.$fields.forEach(l=>i[l]=1),J1(n,a.$params),a.$expr;}const Un7="outer",Vn6=["value","update","init","react","bind"];function De5(t,e){b(t+' for "outer" push: '+Z1(e));}function Gt6(t,e){const n=t.name;if(t.push===Un7)e.signals[n]||De5("No prior signal definition",n),Vn6.forEach(i=>{t[i]!==void 0&&De5("Invalid property ",i);});else{const i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind);}}function It6(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i);}function zt7(t,e,n,i){return new It6(t,e,n,i);}function Dt7(t,e){return zt7("operator",t,e);}function g14(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e;}function ct12(t,e){return e?{$field:t,$name:e}:{$field:t};}const Ht6=ct12("key");function Le6(t,e){return{$compare:t,$order:e};}function Gn7(t,e){const n={$key:t};return e&&(n.$flat=!0),n;}const In6="ascending",Hn7="descending";function Xn8(t){return M1(t)?(t.order===Hn7?"-":"+")+Lt8(t.op,t.field):"";}function Lt8(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"");}const Xt8="scope",qt8="view";function O27(t){return t&&t.signal;}function qn8(t){return t&&t.expr;}function wt6(t){if(O27(t))return!0;if(M1(t)){for(const e in t)if(wt6(t[e]))return!0;}return!1;}function V24(t,e){return t??e;}function Z25(t){return t&&t.signal||t;}const we10="timer";function at12(t,e){const n=t.merge?Kn5:t.stream?Nn10:t.type?Jn7:b("Invalid stream specification: "+Z1(t));return n(t,e);}function Yn6(t){return t===Xt8?qt8:t||qt8;}function Kn5(t,e){const n=t.merge.map(a=>at12(a,e)),i=Yt8({merge:n},t,e);return e.addStream(i).id;}function Nn10(t,e){const n=at12(t.stream,e),i=Yt8({stream:n},t,e);return e.addStream(i).id;}function Jn7(t,e){let n;t.type===we10?(n=e.event(we10,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(Yn6(t.source),t.type);const i=Yt8({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id;}function Yt8(t,e,n){let i=e.between;return i&&(i.length!==2&&b('Stream "between" parameter must have 2 entries: '+Z1(e)),t.between=[at12(i[0],n),at12(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push(Qn6(e.marktype,e.markname,e.markrole)),e.source===Xt8&&i.push("inScope(event.item)"),i.length&&(t.filter=Rn10("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t;}function Qn6(t,e,n){const i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"");}const Zn4={code:"_.$value",ast:{type:"Identifier",value:"value"}};function _n6(t,e,n){const i=t.encode,a={target:n};let l=t.events,r=t.update,o=[];l||b("Signal update missing events specification."),X1(l)&&(l=v19(l,e.isSubscope()?Xt8:qt8)),l=p(l).filter(s=>s.signal||s.scale?(o.push(s),0):1),o.length>1&&(o=[ei4(o)]),l.length&&o.push(l.length>1?{merge:l}:l[0]),i!=null&&(r&&b("Signal encode and update are mutually exclusive."),r="encode(item(),"+Z1(i)+")"),a.update=X1(r)?Rn10(r,e):r.expr!=null?Rn10(r.expr,e):r.value!=null?r.value:r.signal!=null?{$expr:Zn4,$params:{$value:e.signalRef(r.signal)}}:b("Invalid signal update specification."),t.force&&(a.options={force:!0}),o.forEach(s=>e.addUpdate(J1(ti4(s,e),a)));}function ti4(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):at12(t,e)};}function ei4(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"};}function Pe6(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?b("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=Rn10(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(a=>_n6(a,e,n.id));}const x17=t=>(e,n,i)=>zt7(t,n,e||void 0,i),je8=x17("aggregate"),ni4=x17("axisticks"),Te8=x17("bound"),G28=x17("collect"),We6=x17("compare"),ii4=x17("datajoin"),Fe9=x17("encode"),ai4=x17("expression"),li4=x17("facet"),ri4=x17("field"),oi4=x17("key"),si4=x17("legendentries"),ui4=x17("load"),fi4=x17("mark"),di3=x17("multiextent"),gi3=x17("multivalues"),ci2=x17("overlap"),hi4=x17("params"),Ce7=x17("prefacet"),mi3=x17("projection"),yi4=x17("proxy"),pi4=x17("relay"),Ae8=x17("render"),bi3=x17("scale"),_24=x17("sieve"),xi3=x17("sortitems"),Me9=x17("viewlayout"),ki2=x17("values");let Si2=0;const Be6={min:"min",max:"max",count:"sum"};function $i2(t,e){const n=t.type||"linear";ce2(n)||b("Unrecognized scale type: "+Z1(n)),e.addScale(t.name,{type:n,domain:void 0});}function Ri2(t,e){const n=e.getScale(t.name).params;let i;n.domain=Ue7(t.domain,t,e),t.range!=null&&(n.range=Ge7(t,e,n)),t.interpolate!=null&&Ti2(t.interpolate,n),t.nice!=null&&(n.nice=ji1(t.nice,e)),t.bins!=null&&(n.bins=Pi2(t.bins,e));for(i in t){if(g(n,i)||i==="name")continue;n[i]=A21(t[i],e);}}function A21(t,e){return M1(t)?t.signal?e.signalRef(t.signal):b("Unsupported object: "+Z1(t)):t;}function Pt7(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>A21(n,e));}function jt8(t){b("Can not find data set: "+Z1(t));}function Ue7(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&b("No scale domain defined for domainMin/domainMax to override.");return;}return t.signal?n.signalRef(t.signal):(w1(t)?vi3:t.fields?Oi2:Ei2)(t,e,n);}function vi3(t,e,n){return t.map(i=>A21(i,n));}function Ei2(t,e,n){const i=n.getData(t.data);return i||jt8(t.data),de4(e.type)?i.valuesRef(n,t.field,Ve6(t.sort,!1)):Bn3(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field);}function Oi2(t,e,n){const i=t.data,a=t.fields.reduce((l,r)=>(r=X1(r)?{data:i,field:r}:w1(r)||r.signal?zi2(r,n):r,l.push(r),l),[]);return(de4(e.type)?Di2:Bn3(e.type)?Li2:wi2)(t,n,a);}function zi2(t,e){const n="_:vega:_"+Si2++,i=G28({});if(w1(t))i.value={$ingest:t};else if(t.signal){const a="setdata("+Z1(n)+","+t.signal+")";i.params.input=e.signalRef(a);}return e.addDataPipeline(n,[i,_24({})]),{data:n,field:"data"};}function Di2(t,e,n){const i=Ve6(t.sort,!0);let a,l;const r=n.map(u=>{const f=e.getData(u.data);return f||jt8(u.data),f.countsRef(e,u.field,i);}),o={groupby:Ht6,pulse:r};i&&(a=i.op||"count",l=i.field?Lt8(a,i.field):"count",o.ops=[Be6[a]],o.fields=[e.fieldRef(l)],o.as=[l]),a=e.add(je8(o));const s=e.add(G28({pulse:g14(a)}));return l=e.add(ki2({field:Ht6,sort:e.sortRef(i),pulse:g14(s)})),g14(l);}function Ve6(t,e){return t&&(!t.field&&!t.op?M1(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?b("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!Be6[t.op]&&b("Multiple domain scales can not be sorted using "+t.op)),t;}function Li2(t,e,n){const i=n.map(a=>{const l=e.getData(a.data);return l||jt8(a.data),l.domainRef(e,a.field);});return g14(e.add(gi3({values:i})));}function wi2(t,e,n){const i=n.map(a=>{const l=e.getData(a.data);return l||jt8(a.data),l.extentRef(e,a.field);});return g14(e.add(di3({extents:i})));}function Pi2(t,e){return t.signal||w1(t)?Pt7(t,e):e.objectProperty(t);}function ji1(t,e){return t.signal?e.signalRef(t.signal):M1(t)?{interval:A21(t.interval),step:A21(t.step)}:A21(t);}function Ti2(t,e){e.interpolate=A21(t.type||t),t.gamma!=null&&(e.interpolateGamma=A21(t.gamma));}function Ge7(t,e,n){const i=e.config.range;let a=t.range;if(a.signal)return e.signalRef(a.signal);if(X1(a)){if(i&&g(i,a))return t=J1({},t,{range:i[a]}),Ge7(t,e,n);a==="width"?a=[0,{signal:"width"}]:a==="height"?a=de4(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:b("Unrecognized scale range value: "+Z1(a));}else if(a.scheme){n.scheme=w1(a.scheme)?Pt7(a.scheme,e):A21(a.scheme,e),a.extent&&(n.schemeExtent=Pt7(a.extent,e)),a.count&&(n.schemeCount=A21(a.count,e));return;}else if(a.step){n.rangeStep=A21(a.step,e);return;}else{if(de4(t.type)&&!w1(a))return Ue7(a,t,e);w1(a)||b("Unsupported range type: "+Z1(a));}return a.map(l=>(w1(l)?Pt7:A21)(l,e));}function Wi1(t,e){const n=e.config.projection||{},i={};for(const a in t){if(a==="name")continue;i[a]=Kt8(t[a],a,e);}for(const a in n)i[a]==null&&(i[a]=Kt8(n[a],a,e));e.addProjection(t.name,i);}function Kt8(t,e,n){return w1(t)?t.map(i=>Kt8(i,e,n)):M1(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:b("Unsupported parameter object: "+Z1(t)):t;}const I25="top",lt10="left",rt12="right",J26="bottom",Ie7="center",Fi1="vertical",Ci2="start",Ai2="middle",Mi2="end",Nt8="index",Jt7="label",Bi2="offset",ot11="perc",Ui1="perc2",M18="value",ht9="guide-label",Qt7="guide-title",Vi2="group-title",Gi2="group-subtitle",He7="symbol",Tt9="gradient",Zt9="discrete",_t6="size",Ii2="shape",Hi2="fill",Xi1="stroke",qi2="strokeWidth",Yi1="strokeDash",Ki1="opacity",te17=[_t6,Ii2,Hi2,Xi1,qi2,Yi1,Ki1],mt8={name:1,style:1,interactive:1},b21={value:0},B23={value:1},Wt7="group",Xe6="rect",ee17="rule",Ni2="symbol",tt11="text";function yt7(t){return t.type=Wt7,t.interactive=t.interactive||!1,t;}function T18(t,e){const n=(i,a)=>V24(t[i],V24(e[i],a));return n.isVertical=i=>Fi1===V24(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>V24(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>V24(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>V24(t.columns,V24(e.columns,+n.isVertical(!0))),n;}function qe7(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null;}function Ji1(t,e,n){const i=e.config.style[n];return i&&i[t];}function Ft6(t,e,n){return`item.anchor === '${Ci2}' ? ${t} : item.anchor === '${Mi2}' ? ${e} : ${n}`;}const ne15=Ft6(Z1(lt10),Z1(rt12),Z1(Ie7));function Qi1(t){const e=t("tickBand");let n=t("tickOffset"),i,a;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},a={signal:`(${e.signal}) === 'extent'`},M1(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,a=!0,n=0):(i=.5,a=!1):(i=t("bandPosition"),a=t("tickExtra")),{extra:a,band:i,offset:n};}function Ye6(t,e){return e?t?M1(t)?Object.assign({},t,{offset:Ye6(t.offset,e)}):{value:t,offset:e}:e:t;}function C25(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=nt10(t.encode,e,mt8)):t.interactive=!1,t;}function Zi1(t,e,n,i){const a=T18(t,n),l=a.isVertical(),r=a.gradientThickness(),o=a.gradientLength();let s,u,f,d,c;l?(u=[0,1],f=[0,0],d=r,c=o):(u=[0,0],f=[1,0],d=o,c=r);const m={enter:s={opacity:b21,x:b21,y:b21,width:z21(d),height:z21(c)},update:J1({},s,{opacity:B23,fill:{gradient:e,start:u,stop:f}}),exit:{opacity:b21}};return L30(m,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),C25({type:Xe6,role:Dn5,encode:m},i);}function _i3(t,e,n,i,a){const l=T18(t,n),r=l.isVertical(),o=l.gradientThickness(),s=l.gradientLength();let u,f,d,c,m="";r?(u="y",d="y2",f="x",c="width",m="1-"):(u="x",d="x2",f="y",c="height");const h={opacity:b21,fill:{scale:e,field:M18}};h[u]={signal:m+"datum."+ot11,mult:s},h[f]=b21,h[d]={signal:m+"datum."+Ui1,mult:s},h[c]=z21(o);const k={enter:h,update:J1({},h,{opacity:B23}),exit:{opacity:b21}};return L30(k,{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),C25({type:Xe6,role:zn7,key:M18,from:a,encode:k},i);}const ta1=`datum.${ot11}<=0?"${lt10}":datum.${ot11}>=1?"${rt12}":"${Ie7}"`,ea1=`datum.${ot11}<=0?"${J26}":datum.${ot11}>=1?"${I25}":"${Ai2}"`;function Ke7(t,e,n,i){const a=T18(t,e),l=a.isVertical(),r=z21(a.gradientThickness()),o=a.gradientLength();let s=a("labelOverlap"),u,f,d,c,m="";const h={enter:u={opacity:b21},update:f={opacity:B23,text:{field:Jt7}},exit:{opacity:b21}};return L30(h,{fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:V24(t.labelLimit,e.gradientLabelLimit)}),l?(u.align={value:"left"},u.baseline=f.baseline={signal:ea1},d="y",c="x",m="1-"):(u.align=f.align={signal:ta1},u.baseline={value:"top"},d="x",c="y"),u[d]=f[d]={signal:m+"datum."+ot11,mult:o},u[c]=f[c]=r,r.offset=V24(t.labelOffset,e.gradientLabelOffset)||0,s=s?{separation:a("labelSeparation"),method:s,order:"datum."+Nt8}:void 0,C25({type:tt11,role:Ut7,style:ht9,key:M18,from:i,encode:h,overlap:s},n);}function na(t,e,n,i,a){const l=T18(t,e),r=n.entries,o=!!(r&&r.interactive),s=r?r.name:void 0,u=l("clipHeight"),f=l("symbolOffset"),d={data:"value"},c=`(${a}) ? datum.${Bi2} : datum.${_t6}`,m=u?z21(u):{field:_t6},h=`datum.${Nt8}`,k=`max(1, ${a})`;let S,E,$,P,K;m.mult=.5,S={enter:E={opacity:b21,x:{signal:c,mult:.5,offset:f},y:m},update:$={opacity:B23,x:E.x,y:E.y},exit:{opacity:b21}};let X=null,W=null;t.fill||(X=e.symbolBaseFillColor,W=e.symbolBaseStrokeColor),L30(S,{fill:l("symbolFillColor",X),shape:l("symbolType"),size:l("symbolSize"),stroke:l("symbolStrokeColor",W),strokeDash:l("symbolDash"),strokeDashOffset:l("symbolDashOffset"),strokeWidth:l("symbolStrokeWidth")},{opacity:l("symbolOpacity")}),te17.forEach(xt=>{t[xt]&&($[xt]=E[xt]={scale:t[xt],field:M18});});const N=C25({type:Ni2,role:$e8,key:M18,from:d,clip:u?!0:void 0,encode:S},n.symbols),U=z21(f);U.offset=l("labelOffset"),S={enter:E={opacity:b21,x:{signal:c,offset:U},y:m},update:$={opacity:B23,text:{field:Jt7},x:E.x,y:E.y},exit:{opacity:b21}},L30(S,{align:l("labelAlign"),baseline:l("labelBaseline"),fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:l("labelLimit")});const pn=C25({type:tt11,role:Ut7,style:ht9,key:M18,from:d,encode:S},n.labels);return S={enter:{noBound:{value:!u},width:b21,height:u?z21(u):b21,opacity:b21},exit:{opacity:b21},update:$={opacity:B23,row:{signal:null},column:{signal:null}}},l.isVertical(!0)?(P=`ceil(item.mark.items.length / ${k})`,$.row.signal=`${h}%${P}`,$.column.signal=`floor(${h} / ${P})`,K={field:["row",h]}):($.row.signal=`floor(${h} / ${k})`,$.column.signal=`${h} % ${k}`,K={field:h}),$.column.signal=`(${a})?${$.column.signal}:${h}`,i={facet:{data:i,name:"value",groupby:Nt8}},yt7({role:Rt8,from:i,encode:nt10(S,r,mt8),marks:[N,pn],name:s,interactive:o,sort:K});}function ia1(t,e){const n=T18(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}};}const ie13='item.orient === "left"',ae12='item.orient === "right"',Ct7=`(${ie13} || ${ae12})`,aa=`datum.vgrad && ${Ct7}`,la=Ft6('"top"','"bottom"','"middle"'),ra1=Ft6('"right"','"left"','"center"'),oa=`datum.vgrad && ${ae12} ? (${ra1}) : (${Ct7} && !(datum.vgrad && ${ie13})) ? "left" : ${ne15}`,sa=`item._anchor || (${Ct7} ? "middle" : "start")`,ua=`${aa} ? (${ie13} ? -90 : 90) : 0`,fa=`${Ct7} ? (datum.vgrad ? (${ae12} ? "bottom" : "top") : ${la}) : "top"`;function da(t,e,n,i){const a=T18(t,e),l={enter:{opacity:b21},update:{opacity:B23,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:b21}};return L30(l,{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:sa},angle:{signal:ua},align:{signal:oa},baseline:{signal:fa},text:t.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),C25({type:tt11,role:Re10,style:Qt7,from:i,encode:l},n);}function ga(t,e){let n;return M1(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+Ne8(t.path)+")":t.sphere&&(n="geoShape("+Ne8(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t;}function Ne8(t){return M1(t)&&t.signal?t.signal:Z1(t);}function Je7(t){const e=t.role||"";return e.startsWith("axis")||e.startsWith("legend")||e.startsWith("title")?e:t.type===Wt7?Rt8:e||St7;}function ca(t){return{marktype:t.type,name:t.name||void 0,role:t.role||Je7(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description};}function ha(t,e){return t&&t.signal?e.signalRef(t.signal):!(t===!1);}function le11(t,e){const n=he1(t.type);n||b("Unrecognized transform type: "+Z1(t.type));const i=zt7(n.type.toLowerCase(),null,Qe9(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i;}function Qe9(t,e,n){const i={},a=t.params.length;for(let l=0;l<a;++l){const r=t.params[l];i[r.name]=ma(r,e,n);}return i;}function ma(t,e,n){const i=t.type,a=e[t.name];if(i==="index")return ya(t,e,n);if(a===void 0){t.required&&b("Missing required "+Z1(e.type)+" parameter: "+Z1(t.name));return;}else{if(i==="param")return pa(t,e,n);if(i==="projection")return n.projectionRef(e[t.name]);}return t.array&&!O27(a)?a.map(l=>Ze5(t,l,n)):Ze5(t,a,n);}function Ze5(t,e,n){const i=t.type;if(O27(e))return tn9(i)?b("Expression references can not be signals."):re16(i)?n.fieldRef(e):en8(i)?n.compareRef(e):n.signalRef(e.signal);{const a=t.expr||re16(i);return a&&ba(e)?n.exprRef(e.expr,e.as):a&&xa(e)?ct12(e.field,e.as):tn9(i)?Rn10(e,n):ka(i)?g14(n.getData(e).values):re16(i)?ct12(e):en8(i)?n.compareRef(e):e;}}function ya(t,e,n){return X1(e.from)||b('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key);}function pa(t,e,n){const i=e[t.name];return t.array?(w1(i)||b("Expected an array of sub-parameters. Instead: "+Z1(i)),i.map(a=>_e5(t,a,n))):_e5(t,i,n);}function _e5(t,e,n){const i=t.params.length;let a;for(let r=0;r<i;++r){a=t.params[r];for(const o in a.key)if(a.key[o]!==e[o]){a=null;break;}if(a)break;}a||b("Unsupported parameter: "+Z1(e));const l=J1(Qe9(a,e,n),a.key);return g14(n.add(hi4(l)));}const ba=t=>t&&t.expr,xa=t=>t&&t.field,ka=t=>t==="data",tn9=t=>t==="expr",re16=t=>t==="field",en8=t=>t==="compare";function Sa(t,e,n){let i,a,l,r,o;return t?(i=t.facet)&&(e||b("Only group marks can be faceted."),i.field!=null?r=o=At9(i,n):(t.data?o=g14(n.getData(t.data).aggregate):(l=le11(J1({type:"aggregate",groupby:p(i.groupby)},i.aggregate),n),l.params.key=n.keyRef(i.groupby),l.params.pulse=At9(i,n),r=o=g14(n.add(l))),a=n.keyRef(i.groupby,!0))):r=g14(n.add(G28(null,[{}]))),r||(r=At9(t,n)),{key:a,pulse:r,parent:o};}function At9(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:g14(e.getData(t.data).output);}function Q25(t,e,n,i,a){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=a,this.index={};}Q25.fromEntries=function(t,e){const n=e.length,i=e[n-1],a=e[n-2];let l=e[0],r=null,o=1;for(l&&l.type==="load"&&(l=e[1]),t.add(e[0]);o<n;++o)e[o].params.pulse=g14(e[o-1]),t.add(e[o]),e[o].type==="aggregate"&&(r=e[o]);return new Q25(t,l,a,i,r);};function nn10(t){return X1(t)?t:null;}function an10(t,e,n){const i=Lt8(n.op,n.field);let a;if(e.ops){for(let l=0,r=e.as.length;l<r;++l)if(e.as[l]===i)return;}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((a=n.op.signal)?t.signalRef(a):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i));}function pt9(t,e,n,i,a,l,r){const o=e[n]||(e[n]={}),s=Xn8(l);let u=nn10(a),f,d;if(u!=null&&(t=e.scope,u=u+(s?"|"+s:""),f=o[u]),!f){const c=l?{field:Ht6,pulse:e.countsRef(t,a,l)}:{field:t.fieldRef(a),pulse:g14(e.output)};s&&(c.sort=t.sortRef(l)),d=t.add(zt7(i,void 0,c)),r&&(e.index[a]=d),f=g14(d),u!=null&&(o[u]=f);}return f;}Q25.prototype={countsRef(t,e,n){const i=this,a=i.counts||(i.counts={}),l=nn10(e);let r,o,s;return l!=null&&(t=i.scope,r=a[l]),r?n&&n.field&&an10(t,r.agg.params,n):(s={groupby:t.fieldRef(e,"key"),pulse:g14(i.output)},n&&n.field&&an10(t,s,n),o=t.add(je8(s)),r=t.add(G28({pulse:g14(o)})),r={agg:o,ref:g14(r)},l!=null&&(a[l]=r)),r.ref;},tuplesRef(){return g14(this.values);},extentRef(t,e){return pt9(t,this,"extent","extent",e,!1);},domainRef(t,e){return pt9(t,this,"domain","values",e,!1);},valuesRef(t,e,n){return pt9(t,this,"vals","values",e,n||!0);},lookupRef(t,e){return pt9(t,this,"lookup","tupleindex",e,!1);},indataRef(t,e){return pt9(t,this,"indata","tupleindex",e,!0,!0);}};function $a(t,e,n){const i=t.from.facet,a=i.name,l=At9(i,e);let r;i.name||b("Facet must have a name: "+Z1(i)),i.data||b("Facet must reference a data set: "+Z1(i)),i.field?r=e.add(Ce7({field:e.fieldRef(i.field),pulse:l})):i.groupby?r=e.add(li4({key:e.keyRef(i.groupby),group:g14(e.proxy(n.parent)),pulse:l})):b("Facet must specify groupby or field: "+Z1(i));const o=e.fork(),s=o.add(G28()),u=o.add(_24({pulse:g14(s)}));o.addData(a,new Q25(o,s,s,u)),o.addSignal("parent",null),r.params.subflow={$subflow:o.parse(t).toRuntime()};}function Ra(t,e,n){const i=e.add(Ce7({pulse:n.pulse})),a=e.fork();a.add(_24()),a.addSignal("parent",null),i.params.subflow={$subflow:a.parse(t).toRuntime()};}function ln10(t,e,n){const i=t.remove,a=t.insert,l=t.toggle,r=t.modify,o=t.values,s=e.add(Dt7()),u="if("+t.trigger+',modify("'+n+'",'+[a,i,l,r,o].map(d=>d??"null").join(",")+"),0)",f=Rn10(u,e);s.update=f.$expr,s.params=f.$params;}function Mt8(t,e){const n=Je7(t),i=t.type===Wt7,a=t.from&&t.from.facet,l=t.overlap;let r=t.layout||n===Rt8||n===$t9,o,s,u,f,d,c,m;const h=n===St7||r||a,k=Sa(t.from,i,e);s=e.add(ii4({key:k.key||(t.key?ct12(t.key):void 0),pulse:k.pulse,clean:!i}));const S=g14(s);s=u=e.add(G28({pulse:S})),s=e.add(fi4({markdef:ca(t),interactive:ha(t.interactive,e),clip:ga(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:g14(s)}));const E=g14(s);s=f=e.add(Fe9(ze7(t.encode,t.type,n,t.style,e,{mod:!1,pulse:E}))),s.params.parent=e.encode(),t.transform&&t.transform.forEach(W=>{const N=le11(W,e),U=N.metadata;(U.generates||U.changes)&&b("Mark transforms should not generate new data."),U.nomod||(f.params.mod=!0),N.params.pulse=g14(s),e.add(s=N);}),t.sort&&(s=e.add(xi3({sort:e.compareRef(t.sort),pulse:g14(s)})));const $=g14(s);(a||r)&&(r=e.add(Me9({layout:e.objectProperty(t.layout),legends:e.legends,mark:E,pulse:$})),c=g14(r));const P=e.add(Te8({mark:E,pulse:c||$}));m=g14(P),i&&(h&&(o=e.operators,o.pop(),r&&o.pop()),e.pushState($,c||m,S),a?$a(t,e,k):h?Ra(t,e,k):e.parse(t),e.popState(),h&&(r&&o.push(r),o.push(P))),l&&(m=va(l,m,e));const K=e.add(Ae8({pulse:m})),X=e.add(_24({pulse:g14(K)},void 0,e.parent()));t.name!=null&&(d=t.name,e.addData(d,new Q25(e,u,K,X)),t.on&&t.on.forEach(W=>{(W.insert||W.remove||W.toggle)&&b("Marks only support modify triggers."),ln10(W,e,d);}));}function va(t,e,n){const i=t.method,a=t.bound,l=t.separation,r={separation:O27(l)?n.signalRef(l.signal):l,method:O27(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(r.sort=n.compareRef({field:t.order})),a){const o=a.tolerance;r.boundTolerance=O27(o)?n.signalRef(o.signal):+o,r.boundScale=n.scaleRef(a.scale),r.boundOrient=a.orient;}return g14(n.add(ci2(r)));}function Ea(t,e){const n=e.config.legend,i=t.encode||{},a=T18(t,n),l=i.legend||{},r=l.name||void 0,o=l.interactive,s=l.style,u={};let f=0,d,c,m;te17.forEach(P=>t[P]?(u[P]=t[P],f=f||t[P]):0),f||b("Missing valid scale for legend.");const h=Oa(t,e.scaleType(f)),k={title:t.title!=null,scales:u,type:h,vgrad:h!=="symbol"&&a.isVertical()},S=g14(e.add(G28(null,[k]))),E={enter:{x:{value:0},y:{value:0}}},$=g14(e.add(si4(c={type:h,scale:e.scaleRef(f),count:e.objectProperty(a("tickCount")),limit:e.property(a("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return h===Tt9?(m=[Zi1(t,f,n,i.gradient),Ke7(t,n,i.labels,$)],c.count=c.count||e.signalRef(`max(2,2*floor((${Z25(a.gradientLength())})/100))`)):h===Zt9?m=[_i3(t,f,n,i.gradient,$),Ke7(t,n,i.labels,$)]:(d=ia1(t,n),m=[na(t,n,i,$,Z25(d.columns))],c.size=La(t,e,m[0].marks)),m=[yt7({role:Se6,from:S,encode:E,marks:m,layout:d,interactive:o})],k.title&&m.push(da(t,n,i.title,S)),Mt8(yt7({role:ke7,from:S,encode:nt10(Da(a,t,n),l,mt8),marks:m,aria:a("aria"),description:a("description"),zindex:a("zindex"),name:r,interactive:o,style:s}),e);}function Oa(t,e){let n=t.type||He7;return!t.type&&za(t)===1&&(t.fill||t.stroke)&&(n=qn4(e)?Tt9:re7(e)?Zt9:He7),n!==Tt9?n:re7(e)?Zt9:Tt9;}function za(t){return te17.reduce((e,n)=>e+(t[n]?1:0),0);}function Da(t,e,n){const i={enter:{},update:{}};return L30(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i;}function La(t,e,n){const i=Z25(rn10("size",t,n)),a=Z25(rn10("strokeWidth",t,n)),l=Z25(wa(n[1].encode,e,ht9));return Rn10(`max(ceil(sqrt(${i})+${a}),${l})`,e);}function rn10(t,e,n){return e[t]?`scale("${e[t]}",datum)`:qe7(t,n[0].encode);}function wa(t,e,n){return qe7("fontSize",t)||Ji1("fontSize",e,n);}const Pa=`item.orient==="${lt10}"?-90:item.orient==="${rt12}"?90:0`;function ja(t,e){t=X1(t)?{text:t}:t;const n=T18(t,e.config.title),i=t.encode||{},a=i.group||{},l=a.name||void 0,r=a.interactive,o=a.style,s=[],u={},f=g14(e.add(G28(null,[u])));return s.push(Fa(t,n,Ta(t),f)),t.subtitle&&s.push(Ca(t,n,i.subtitle,f)),Mt8(yt7({role:Ln6,from:f,encode:Wa(n,a),marks:s,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:l,interactive:r,style:o}),e);}function Ta(t){const e=t.encode;return e&&e.title||J1({name:t.name,interactive:t.interactive,style:t.style},e);}function Wa(t,e){const n={enter:{},update:{}};return L30(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:ne15},angle:{signal:Pa},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),nt10(n,e,mt8);}function Fa(t,e,n,i){const a={value:0},l=t.text,r={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return L30(r,{text:l,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),C25({type:tt11,role:wn12,style:Vi2,from:i,encode:r},n);}function Ca(t,e,n,i){const a={value:0},l=t.subtitle,r={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return L30(r,{text:l,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),C25({type:tt11,role:Pn9,style:Gi2,from:i,encode:r},n);}function Aa(t,e){const n=[];t.transform&&t.transform.forEach(i=>{n.push(le11(i,e));}),t.on&&t.on.forEach(i=>{ln10(i,e,t.name);}),e.addDataPipeline(t.name,Ma(t,e,n));}function Ma(t,e,n){const i=[];let a=null,l=!1,r=!1,o,s,u,f,d;for(t.values?O27(t.values)||wt6(t.format)?(i.push(on9(e,t)),i.push(a=et12())):i.push(a=et12({$ingest:t.values,$format:t.format})):t.url?wt6(t.url)||wt6(t.format)?(i.push(on9(e,t)),i.push(a=et12())):i.push(a=et12({$request:t.url,$format:t.format})):t.source&&(a=o=p(t.source).map(c=>g14(e.getData(c).output)),i.push(null)),s=0,u=n.length;s<u;++s)f=n[s],d=f.metadata,!a&&!d.source&&i.push(a=et12()),i.push(f),d.generates&&(r=!0),d.modifies&&!r&&(l=!0),d.source?a=f:d.changes&&(a=null);return o&&(u=o.length-1,i[0]=pi4({derive:l,pulse:u?o:o[0]}),(l||u)&&i.splice(1,0,et12())),a||i.push(et12()),i.push(_24({})),i;}function et12(t){const e=G28({},t);return e.metadata={source:!0},e;}function on9(t,e){return ui4({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)});}const sn8=t=>t===J26||t===I25,Bt7=(t,e,n)=>O27(t)?Ga(t.signal,e,n):t===lt10||t===I25?e:n,D18=(t,e,n)=>O27(t)?Ua(t.signal,e,n):sn8(t)?e:n,H20=(t,e,n)=>O27(t)?Va(t.signal,e,n):sn8(t)?n:e,un10=(t,e,n)=>O27(t)?Ia(t.signal,e,n):t===I25?{value:e}:{value:n},Ba=(t,e,n)=>O27(t)?Ha(t.signal,e,n):t===rt12?{value:e}:{value:n},Ua=(t,e,n)=>fn8(`${t} === '${I25}' || ${t} === '${J26}'`,e,n),Va=(t,e,n)=>fn8(`${t} !== '${I25}' && ${t} !== '${J26}'`,e,n),Ga=(t,e,n)=>oe13(`${t} === '${lt10}' || ${t} === '${I25}'`,e,n),Ia=(t,e,n)=>oe13(`${t} === '${I25}'`,e,n),Ha=(t,e,n)=>oe13(`${t} === '${rt12}'`,e,n),fn8=(t,e,n)=>(e=e!=null?z21(e):e,n=n!=null?z21(n):n,dn9(e)&&dn9(n)?(e=e?e.signal||Z1(e.value):null,n=n?n.signal||Z1(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[J1({test:t},e)].concat(n||[])),dn9=t=>t==null||Object.keys(t).length===1,oe13=(t,e,n)=>({signal:`${t} ? (${st11(e)}) : (${st11(n)})`}),Xa=(t,e,n,i,a)=>({signal:(i!=null?`${t} === '${lt10}' ? (${st11(i)}) : `:"")+(n!=null?`${t} === '${J26}' ? (${st11(n)}) : `:"")+(a!=null?`${t} === '${rt12}' ? (${st11(a)}) : `:"")+(e!=null?`${t} === '${I25}' ? (${st11(e)}) : `:"")+"(null)"}),st11=t=>O27(t)?t.signal:t==null?null:Z1(t),qa=(t,e)=>e===0?0:O27(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},ut10=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t;};function ft10(t,e,n,i){let a;if(e&&g(e,t))return e[t];if(g(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":a="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":a=t[5].toLowerCase()+t.slice(6);}return i[Qt7][a];}else if(t.startsWith("label")){switch(t){case"labelColor":a="fill";break;case"labelFont":case"labelFontSize":a=t[5].toLowerCase()+t.slice(6);}return i[ht9][a];}return null;}function gn8(t){const e={};for(const n of t){if(!n)continue;for(const i in n)e[i]=1;}return Object.keys(e);}function Ya(t,e){var n=e.config,i=n.style,a=n.axis,l=e.scaleType(t.scale)==="band"&&n.axisBand,r=t.orient,o,s,u;if(O27(r)){const d=gn8([n.axisX,n.axisY]),c=gn8([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(u of d)o[u]=D18(r,ft10(u,n.axisX,a,i),ft10(u,n.axisY,a,i));s={};for(u of c)s[u]=Xa(r.signal,ft10(u,n.axisTop,a,i),ft10(u,n.axisBottom,a,i),ft10(u,n.axisLeft,a,i),ft10(u,n.axisRight,a,i));}else o=r===I25||r===J26?n.axisX:n.axisY,s=n["axis"+r[0].toUpperCase()+r.slice(1)];const f=o||s||l?J1({},a,o,s,l):a;return f;}function Ka(t,e,n,i){const a=T18(t,e),l=t.orient;let r,o;const s={enter:r={opacity:b21},update:o={opacity:B23},exit:{opacity:b21}};L30(s,{stroke:a("domainColor"),strokeCap:a("domainCap"),strokeDash:a("domainDash"),strokeDashOffset:a("domainDashOffset"),strokeWidth:a("domainWidth"),strokeOpacity:a("domainOpacity")});const u=cn9(t,0),f=cn9(t,1);return r.x=o.x=D18(l,u,b21),r.x2=o.x2=D18(l,f),r.y=o.y=H20(l,u,b21),r.y2=o.y2=H20(l,f),C25({type:ee17,role:me10,from:i,encode:s},n);}function cn9(t,e){return{scale:t.scale,range:e};}function Na(t,e,n,i,a){const l=T18(t,e),r=t.orient,o=t.gridScale,s=Bt7(r,1,-1),u=Ja(t.offset,s);let f,d,c;const m={enter:f={opacity:b21},update:c={opacity:B23},exit:d={opacity:b21}};L30(m,{stroke:l("gridColor"),strokeCap:l("gridCap"),strokeDash:l("gridDash"),strokeDashOffset:l("gridDashOffset"),strokeOpacity:l("gridOpacity"),strokeWidth:l("gridWidth")});const h={scale:t.scale,field:M18,band:a.band,extra:a.extra,offset:a.offset,round:l("tickRound")},k=D18(r,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:s,offset:u}:{value:0,offset:u},E=o?{scale:o,range:1,mult:s,offset:u}:J1(k,{mult:s,offset:u});return f.x=c.x=D18(r,h,S),f.y=c.y=H20(r,h,S),f.x2=c.x2=H20(r,E),f.y2=c.y2=D18(r,E),d.x=D18(r,h),d.y=H20(r,h),C25({type:ee17,role:ye8,key:M18,from:i,encode:m},n);}function Ja(t,e){if(!(e===1))if(!M1(t))t=O27(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=J1({},t);for(;n.mult!=null;)if(M1(n.mult))n=n.mult=J1({},n.mult);else return n.mult=O27(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e;}return t;}function Qa(t,e,n,i,a,l){const r=T18(t,e),o=t.orient,s=Bt7(o,-1,1);let u,f,d;const c={enter:u={opacity:b21},update:d={opacity:B23},exit:f={opacity:b21}};L30(c,{stroke:r("tickColor"),strokeCap:r("tickCap"),strokeDash:r("tickDash"),strokeDashOffset:r("tickDashOffset"),strokeOpacity:r("tickOpacity"),strokeWidth:r("tickWidth")});const m=z21(a);m.mult=s;const h={scale:t.scale,field:M18,band:l.band,extra:l.extra,offset:l.offset,round:r("tickRound")};return d.y=u.y=D18(o,b21,h),d.y2=u.y2=D18(o,m),f.x=D18(o,h),d.x=u.x=H20(o,b21,h),d.x2=u.x2=H20(o,m),f.y=H20(o,h),C25({type:ee17,role:be7,key:M18,from:i,encode:c},n);}function se13(t,e,n,i,a){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+a+")"};}function Za(t,e,n,i,a,l){const r=T18(t,e),o=t.orient,s=t.scale,u=Bt7(o,-1,1),f=Z25(r("labelFlush")),d=Z25(r("labelFlushOffset")),c=r("labelAlign"),m=r("labelBaseline");let h=f===0||!!f,k;const S=z21(a);S.mult=u,S.offset=z21(r("labelPadding")||0),S.offset.mult=u;const E={scale:s,field:M18,band:.5,offset:Ye6(l.offset,r("labelOffset"))},$=D18(o,h?se13(s,f,'"left"','"right"','"center"'):{value:"center"},Ba(o,"left","right")),P=D18(o,un10(o,"bottom","top"),h?se13(s,f,'"top"','"bottom"','"middle"'):{value:"middle"}),K=se13(s,f,`-(${d})`,d,0);h=h&&d;const X={opacity:b21,x:D18(o,E,S),y:H20(o,E,S)},W={enter:X,update:k={opacity:B23,text:{field:Jt7},x:X.x,y:X.y,align:$,baseline:P},exit:{opacity:b21,x:X.x,y:X.y}};L30(W,{dx:!c&&h?D18(o,K):null,dy:!m&&h?H20(o,K):null}),L30(W,{angle:r("labelAngle"),fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontWeight:r("labelFontWeight"),fontStyle:r("labelFontStyle"),limit:r("labelLimit"),lineHeight:r("labelLineHeight")},{align:c,baseline:m});const N=r("labelBound");let U=r("labelOverlap");return U=U||N?{separation:r("labelSeparation"),method:U,order:"datum.index",bound:N?{scale:s,orient:o,tolerance:N}:null}:void 0,k.align!==$&&(k.align=ut10(k.align,$)),k.baseline!==P&&(k.baseline=ut10(k.baseline,P)),C25({type:tt11,role:pe8,style:ht9,key:M18,from:i,encode:W,overlap:U},n);}function _a(t,e,n,i){const a=T18(t,e),l=t.orient,r=Bt7(l,-1,1);let o,s;const u={enter:o={opacity:b21,anchor:z21(a("titleAnchor",null)),align:{signal:ne15}},update:s=J1({},o,{opacity:B23,text:z21(t.title)}),exit:{opacity:b21}},f={signal:`lerp(range("${t.scale}"), ${Ft6(0,1,.5)})`};return s.x=D18(l,f),s.y=H20(l,f),o.angle=D18(l,b21,qa(r,90)),o.baseline=D18(l,un10(l,J26,I25),{value:J26}),s.angle=o.angle,s.baseline=o.baseline,L30(u,{fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),angle:a("titleAngle"),baseline:a("titleBaseline")}),tl(a,l,u,n),u.update.align=ut10(u.update.align,o.align),u.update.angle=ut10(u.update.angle,o.angle),u.update.baseline=ut10(u.update.baseline,o.baseline),C25({type:tt11,role:xe7,style:Qt7,from:i,encode:u},n);}function tl(t,e,n,i){const a=(o,s)=>o!=null?(n.update[s]=ut10(z21(o),n.update[s]),!1):!it12(s,i),l=a(t("titleX"),"x"),r=a(t("titleY"),"y");n.enter.auto=r===l?z21(r):D18(e,z21(r),z21(l));}function el(t,e){const n=Ya(t,e),i=t.encode||{},a=i.axis||{},l=a.name||void 0,r=a.interactive,o=a.style,s=T18(t,n),u=Qi1(s),f={scale:t.scale,ticks:!!s("ticks"),labels:!!s("labels"),grid:!!s("grid"),domain:!!s("domain"),title:t.title!=null},d=g14(e.add(G28({},[f]))),c=g14(e.add(ni4({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),m=[];let h;return f.grid&&m.push(Na(t,n,i.grid,c,u)),f.ticks&&(h=s("tickSize"),m.push(Qa(t,n,i.ticks,c,h,u))),f.labels&&(h=f.ticks?h:0,m.push(Za(t,n,i.labels,c,h,u))),f.domain&&m.push(Ka(t,n,i.domain,d)),f.title&&m.push(_a(t,n,i.title,d)),Mt8(yt7({role:he8,from:d,encode:nt10(nl(s,t),a,mt8),marks:m,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:l,interactive:r,style:o}),e);}function nl(t,e){const n={enter:{},update:{}};return L30(n,{orient:t("orient"),offset:t("offset")||0,position:V24(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n;}function hn8(t,e,n){const i=p(t.signals),a=p(t.scales);return n||i.forEach(l=>Gt6(l,e)),p(t.projections).forEach(l=>Wi1(l,e)),a.forEach(l=>$i2(l,e)),p(t.data).forEach(l=>Aa(l,e)),a.forEach(l=>Ri2(l,e)),(n||i).forEach(l=>Pe6(l,e)),p(t.axes).forEach(l=>el(l,e)),p(t.marks).forEach(l=>Mt8(l,e)),p(t.legends).forEach(l=>Ea(l,e)),t.title&&ja(t.title,e),e.parseLambdas(),e;}const il=t=>nt10({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function al(t,e){const n=e.config,i=g14(e.root=e.add(Dt7())),a=ll(t,n);a.forEach(u=>Gt6(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const l=e.add(G28()),r=e.add(Fe9(ze7(il(t.encode),Wt7,$t9,t.style,e,{pulse:g14(l)}))),o=e.add(Me9({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:g14(r)}));e.operators.pop(),e.pushState(g14(r),g14(o),null),hn8(t,e,a),e.operators.push(o);let s=e.add(Te8({mark:i,pulse:g14(o)}));return s=e.add(Ae8({pulse:g14(s)})),s=e.add(_24({pulse:g14(s)})),e.addData("root",new Q25(e,l,l,s)),e;}function bt8(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e};}function ll(t,e){const n=r=>V24(t[r],e[r]),i=[bt8("background",n("background")),bt8("autosize",vn8(n("autosize"))),bt8("padding",On6(n("padding"))),bt8("width",n("width")||0),bt8("height",n("height")||0)],a=i.reduce((r,o)=>(r[o.name]=o,r),{}),l={};return p(t.signals).forEach(r=>{g(a,r.name)?r=J1(a[r.name],r):i.push(r),l[r.name]=r;}),p(e.signals).forEach(r=>{!g(l,r.name)&&!g(a,r.name)&&i.push(r);}),i;}function ue11(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[];}function mn9(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath;}ue11.prototype=mn9.prototype={parse(t){return hn8(t,this);},fork(){return new mn9(this);},isSubscope(){return this._subid>0;},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale};},id(){return(this._subid?this._subid+":":0)+this._id++;},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id;}),t.refs=null),t;},proxy(t){const e=t instanceof It6?g14(t):t;return this.add(yi4({value:e}));},addStream(t){return this.streams.push(t),t.id=this.id(),t;},addUpdate(t){return this.updates.push(t),t;},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,a,l){let r,o;i&&(r=i.data||(i.data={}),o=r[a]||(r[a]=[]),o.push(l));}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i);}return this;},pushState(t,e,n){this._encode.push(g14(this.add(_24({pulse:t})))),this._parent.push(e),this._lookup.push(n?g14(this.proxy(n)):null),this._markpath.push(-1);},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop();},parent(){return a(this._parent);},encode(){return a(this._encode);},lookup(){return a(this._lookup);},markpath(){const t=this._markpath;return++t[t.length-1];},fieldRef(t,e){if(X1(t))return ct12(t,e);t.signal||b("Unsupported field reference: "+Z1(t));const n=t.signal;let i=this.field[n];if(!i){const a={name:this.signalRef(n)};e&&(a.as=e),this.field[n]=i=g14(this.add(ri4(a)));}return i;},compareRef(t){let e=!1;const n=l=>O27(l)?(e=!0,this.signalRef(l.signal)):qn8(l)?(e=!0,this.exprRef(l.expr)):l,i=p(t.field).map(n),a=p(t.order).map(n);return e?g14(this.add(We6({fields:i,orders:a}))):Le6(i,a);},keyRef(t,e){let n=!1;const i=l=>O27(l)?(n=!0,g14(a[l.signal])):l,a=this.signals;return t=p(t).map(i),n?g14(this.add(oi4({fields:t,flat:e}))):Gn7(t,e);},sortRef(t){if(!t)return t;const e=Lt8(t.op,t.field),n=t.order||In6;return n.signal?g14(this.add(We6({fields:e,orders:this.signalRef(n.signal)}))):Le6(e,n);},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i;}return this.events[n];},hasOwnSignal(t){return g(this.signals,t);},addSignal(t,e){this.hasOwnSignal(t)&&b("Duplicate signal name: "+Z1(t));const n=e instanceof It6?e:this.add(Dt7(e));return this.signals[t]=n;},getSignal(t){return this.signals[t]||b("Unrecognized signal name: "+Z1(t)),this.signals[t];},signalRef(t){return this.signals[t]?g14(this.signals[t]):(g(this.lambdas,t)||(this.lambdas[t]=this.add(Dt7(null))),g14(this.lambdas[t]));},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const i=t[e],a=Rn10(i,this),l=this.lambdas[i];l.params=a.$params,l.update=a.$expr;}},property(t){return t&&t.signal?this.signalRef(t.signal):t;},objectProperty(t){return!t||!M1(t)?t:this.signalRef(t.signal||fe10(t));},exprRef(t,e){const n={expr:Rn10(t,this)};return e&&(n.expr.$name=e),g14(this.add(ai4(n)));},addBinding(t,e){this.bindings||b("Nested signals do not support binding: "+Z1(t)),this.bindings.push(J1({signal:t},e));},addScaleProj(t,e){g(this.scales,t)&&b("Duplicate scale or projection name: "+Z1(t)),this.scales[t]=this.add(e);},addScale(t,e){this.addScaleProj(t,bi3(e));},addProjection(t,e){this.addScaleProj(t,mi3(e));},getScale(t){return this.scales[t]||b("Unrecognized scale name: "+Z1(t)),this.scales[t];},scaleRef(t){return g14(this.getScale(t));},scaleType(t){return this.getScale(t).params.type;},projectionRef(t){return this.scaleRef(t);},projectionType(t){return this.scaleType(t);},addData(t,e){return g(this.data,t)&&b("Duplicate data set name: "+Z1(t)),this.data[t]=e;},getData(t){return this.data[t]||b("Undefined data set name: "+Z1(t)),this.data[t];},addDataPipeline(t,e){return g(this.data,t)&&b("Duplicate data set name: "+Z1(t)),this.addData(t,Q25.fromEntries(this,e));}};function fe10(t){return(w1(t)?rl:ol)(t);}function rl(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const a=t[i];n+=(i>0?",":"")+(M1(a)?a.signal||fe10(a):Z1(a));}return n+"]";}function ol(t){let e="{",n=0,i,a;for(i in t)a=t[i],e+=(++n>1?",":"")+Z1(i)+":"+(M1(a)?a.signal||fe10(a):Z1(a));return e+"}";}function yn8(){const t="sans-serif",i="#4c78a8",a="#000",l="#888",r="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:a},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:a,font:t,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:a,font:t,fontSize:10},"guide-title":{fill:a,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:a,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:a,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:r},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:l,grid:!1,gridWidth:1,gridColor:r,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:l,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:r,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:l,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};}function sl(t,e,n){return M1(t)||b("Input Vega specification must be an object."),e=rn(yn8(),e,t.config),al(t,new ue11(e,n)).toRuntime();}var f13="5.30.0";J1(Y6,mod,mod2,mod3,mod4,mod5,mod7,mod6,mod8,mod9,mod10,mod11);const __default=null;const mod12=function(){return{default:null,Dataflow:ct3,EventStream:B6,MultiPulse:G8,Operator:g4,Parameters:U7,Pulse:F6,Transform:dt2,changeset:C6,definition:he1,ingest:W7,isTuple:Et,transform:pt1,transforms:Y6,tupleid:d4,interpolate:se4,interpolateColors:oe6,interpolateRange:On1,quantizeInterpolator:Pn3,scale:b7,scheme:ge3,projection:s3,View:ne14,defaultLocale:w6,formatLocale:l3,locale:lt1,resetDefaultLocale:dt1,timeFormatLocale:d2,expressionFunction:s7,parse:sl,runtimeContext:tt9,codegenExpression:I01,parseExpression:L0,parseSelector:v19,version:f13,bandwidthNRD:Z7,bin:pe1,bootstrapCI:de1,cumulativeLogNormal:$5,cumulativeNormal:z9,cumulativeUniform:ne5,densityLogNormal:V6,densityNormal:H6,densityUniform:ee4,dotbin:me1,quantileLogNormal:_9,quantileNormal:P7,quantileUniform:te4,quantiles:K7,quartiles:W8,random:N8,randomInteger:Ne1,randomKDE:ye1,randomLCG:be1,randomLogNormal:Ye1,randomMixture:Ae1,randomNormal:J5,randomUniform:Le,regressionConstant:re4,regressionExp:Se1,regressionLinear:oe3,regressionLoess:Re1,regressionLog:Fe1,regressionPoly:Ie1,regressionPow:ke1,regressionQuad:le2,sampleCurve:Ue1,sampleLogNormal:O8,sampleNormal:j11,sampleUniform:x6,setRandom:Me1,DATE:g1,DAY:l2,DAYOFYEAR:U5,HOURS:M3,MILLISECONDS:h3,MINUTES:T2,MONTH:f2,QUARTER:D3,SECONDS:y4,TIME_UNITS:V3,WEEK:s,YEAR:a2,dayofyear:xt,timeBin:ue1,timeFloor:Pt,timeInterval:G6,timeOffset:Vt,timeSequence:te1,timeUnitSpecifier:$t,timeUnits:Z5,utcFloor:Kt,utcInterval:Q4,utcOffset:Zt,utcSequence:ee1,utcdayofyear:At,utcweek:Rt,week:jt,format:P6,formats:z8,inferType:xr,inferTypes:wr,loader:vn1,read:_n1,responseType:Un1,typeParsers:O7,path:L11,Bounds:E14,CanvasHandler:Fe4,CanvasRenderer:ie6,Gradient:br1,GroupItem:be4,Handler:We2,HybridHandler:Oi,HybridRenderer:sn4,Item:we5,Marks:O13,RenderType:Ko,Renderer:Ct3,ResourceLoader:Sn5,SVGHandler:gi1,SVGRenderer:rn6,SVGStringRenderer:mi1,Scenegraph:_o,boundClip:ea,boundContext:_t2,boundItem:Ge2,boundMark:ti2,boundStroke:tt3,domChild:w10,domClear:S14,domCreate:Y12,domFind:Ve2,font:Xt4,fontFamily:Tt4,fontSize:N14,intersect:Qo,intersectBoxLine:ht3,intersectPath:Ae3,intersectPoint:Ee2,intersectRule:Hn3,lineHeight:U14,markup:nn5,multiLineOffset:oo,pathCurves:pe5,pathEqual:Vi,pathParse:dt4,pathRectangle:zn3,pathRender:Lt4,pathSymbols:Rn6,pathTrail:An6,point:je4,renderModule:Zo,resetSVGClipId:Pn4,resetSVGDefIds:ra,sceneEqual:an5,sceneFromJSON:ni2,scenePickVisit:Bt4,sceneToJSON:ei2,sceneVisit:m4,sceneZOrder:Pe2,serializeXML:Ri,setHybridRendererOptions:Fo,textMetrics:W12,Debug:4,Error:1,Info:3,None:0,Warn:2,accessor:f,accessorFields:R1,accessorName:H1,array:p,ascending:P1,clampRange:bn,compare:Mn,constant:On,debounce:Dn,error:b,extend:J1,extent:Nn,extentIndex:zn,falsy:nn,fastmap:Sn,field:z1,flush:Ln,hasOwnProperty:g,id:k1,identity:A1,inherits:Pn,inrange:Rn,isArray:w1,isBoolean:In,isDate:K1,isFunction:O1,isIterable:Cn,isNumber:V,isObject:M1,isRegExp:$n,isString:X1,key:qn,lerp:Fn,logger:en,lruCache:Un,merge:Bn,mergeConfig:rn,one:v,pad:Gn,panLinear:un,panLog:cn,panPow:sn,panSymlog:ln,peek:a,quarter:pn,repeat:m1,span:Wn,splitAccessPath:N1,stringValue:Z1,toBoolean:xn,toDate:Kn,toNumber:L2,toSet:Xn,toString:Vn,truncate:Zn,truthy:_1,utcquarter:mn,visitArray:Hn,writeConfig:S1,zero:y1,zoomLinear:fn,zoomLog:gn,zoomPow:an,zoomSymlog:hn};}();function g15(e,t,n){let a;t.x2&&(t.x?(n&&e.x>e.x2&&(a=e.x,e.x=e.x2,e.x2=a),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(a=e.y,e.y=e.y2,e.y2=a),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2);}var m10={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},x18={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},M19={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const y19=Array.prototype.slice,u9=(e,t,n)=>{const a=n?n(t[0]):t[0];return a[e].apply(a,y19.call(t,1));},w22=(e,t,n,a,r,o,s)=>new Date(e,t||0,n??1,a||0,r||0,o||0,s||0);var D19={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:w22,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return u9("join",arguments);},indexof:function(){return u9("indexOf",arguments);},lastindexof:function(){return u9("lastIndexOf",arguments);},slice:function(){return u9("slice",arguments);},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return u9("substring",arguments,String);},split:function(){return u9("split",arguments,String);},replace:function(){return u9("replace",arguments,String);},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const E25=["view","item","group","xy","x","y"],h13=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&h13.add(setImmediate);const b22={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:m10[n]||e.params["$"+n];},MemberExpression:(e,t)=>{const n=!t.computed,a=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),h13.has(a[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return;}return a[r];},CallExpression:(e,t)=>{const n=t.arguments;let a=t.callee.name;return a.startsWith("_")&&(a=a.slice(1)),a==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[a]||D19[a]).apply(e.fn,n.map(e));},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>x18[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>M19[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,a)=>{e.memberDepth+=1;const r=e(a.key);return e.memberDepth-=1,h13.has(e(a.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(a.value),n;},{})};function c6(e,t,n,a,r,o){const s=i=>b22[i.type](s,i);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=a,s.event=r,s.item=o,E25.forEach(i=>s.fn[i]=function(){return r.vega[i](...arguments);}),s(e);}var v20={operator(e,t){const n=t.ast,a=e.functions;return r=>c6(n,a,r);},parameter(e,t){const n=t.ast,a=e.functions;return(r,o)=>c6(n,a,o,r);},event(e,t){const n=t.ast,a=e.functions;return r=>c6(n,a,void 0,void 0,r);},handler(e,t){const n=t.ast,a=e.functions;return(r,o)=>{const s=o.item&&o.item.datum;return c6(n,a,r,s,o);};},encode(e,t){const{marktype:n,channels:a}=t,r=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,i)=>{const d=s.datum;let f=0,l;for(const p in a)l=c6(a[p].ast,r,i,d,void 0,s),s[p]!==l&&(s[p]=l,f=1);return n!=="rule"&&g15(s,a,o),f;};}};const Xf="vega-lite",Yf='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Kf="5.20.1",Qf=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Zf="https://vega.github.io/vega-lite/",Jf="Vega-Lite is a concise high-level language for interactive visualization.",ed=["vega","chart","visualization"],td="build/vega-lite.js",nd="build/vega-lite.min.js",id="build/vega-lite.min.js",rd="build/src/index",sd="build/src/index.d.ts",od={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},ad=["bin","build","src","vega-lite*","tsconfig.json"],cd={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},ud={type:"git",url:"https://github.com/vega/vega-lite.git"},ld="BSD-3-Clause",fd={url:"https://github.com/vega/vega-lite/issues"},dd={"@babel/core":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.13.0","@typescript-eslint/parser":"^7.13.0",ajv:"^8.16.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.2",puppeteer:"^15.0.0","release-it":"17.2.1",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.1","ts-jest":"^29.1.4","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},pd={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},gd={vega:"^5.24.0"},hd={node:">=18"},md="yarn@1.22.19";var yd={name:Xf,author:Yf,version:Kf,collaborators:Qf,homepage:Zf,description:Jf,keywords:ed,main:td,unpkg:nd,jsdelivr:id,module:rd,types:sd,bin:od,files:ad,scripts:cd,repository:ud,license:ld,bugs:fd,devDependencies:dd,dependencies:pd,peerDependencies:gd,engines:hd,packageManager:md};function Ir3(e){return!!e.or;}function Lr4(e){return!!e.and;}function Mr3(e){return!!e.not;}function wi3(e,t){if(Mr3(e))wi3(e.not,t);else if(Lr4(e))for(const n of e.and)wi3(n,t);else if(Ir3(e))for(const n of e.or)wi3(n,t);else t(e);}function un11(e,t){return Mr3(e)?{not:un11(e.not,t)}:Lr4(e)?{and:e.and.map(n=>un11(n,t))}:Ir3(e)?{or:e.or.map(n=>un11(n,t))}:t(e);}const C26=structuredClone;function ra2(e){throw new Error(e);}function ln11(e,t){const n={};for(const i of t)g(e,i)&&(n[i]=e[i]);return n;}function pe9(e,t){const n={...e};for(const i of t)delete n[i];return n;}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>D20(e)).join(",")})`;};function P25(e){if(V(e))return e;const t=X1(e)?e:D20(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n;}return n;}function Dr4(e){return e===!1||e===null;}function A22(e,t){return e.includes(t);}function fn9(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1;}function jr3(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0;}function sa1(e,...t){for(const n of t)bd(e,n??{});return e;}function bd(e,t){for(const n of b23(t))S1(e,n,t[n],!0);}function je9(e,t){const n=[],i={};let r;for(const s of e){if(r=t(s),r in i)continue;i[r]=1,n.push(s);}return n;}function xd(e,t){const n=b23(e),i=b23(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0;}function oa1(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0;}function Ur2(e,t){for(const n of e)if(t.has(n))return!0;return!1;}function Br3(e){const t=new Set;for(const n of e){const i=N1(n),r=i.map((o,a)=>a===0?o:`[${o}]`),s=r.map((o,a)=>r.slice(0,a+1).join(""));for(const o of s)t.add(o);}return t;}function Wr4(e,t){return e===void 0||t===void 0?!0:Ur2(Br3(e),Br3(t));}function M20(e){return b23(e).length===0;}const b23=Object.keys,ie14=Object.values,bt9=Object.entries;function Bn8(e){return e===!0||e===!1;}function W22(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t;}function Wn8(e,t){return Mr3(e)?`!(${Wn8(e.not,t)})`:Lr4(e)?`(${e.and.map(n=>Wn8(n,t)).join(") && (")})`:Ir3(e)?`(${e.or.map(n=>Wn8(n,t)).join(") || (")})`:t(e);}function $i3(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&$i3(e[n],t)&&delete e[n],M20(e);}function Hn8(e){return e.charAt(0).toUpperCase()+e.substr(1);}function Hr3(e,t="datum"){const n=N1(e),i=[];for(let r=1;r<=n.length;r++){const s=`[${n.slice(0,r).map(Z1).join("][")}]`;i.push(`${t}${s}`);}return i.join(" && ");}function aa1(e,t="datum"){return`${t}[${Z1(N1(e).join("."))}]`;}function Sd(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1");}function we11(e){return`${N1(e).map(Sd).join("\\.")}`;}function Lt9(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n);}function dn10(e){return`${N1(e).join(".")}`;}function pn9(e){return e?N1(e).length:0;}function X26(...e){for(const t of e)if(t!==void 0)return t;return;}let ca1=42;function ua1(e){const t=++ca1;return e?String(e)+t:t;}function vd(){ca1=42;}function la1(e){return fa1(e)?e:`__${e}`;}function fa1(e){return e.startsWith("__");}function qn9(e){return e===void 0?void 0:(e%360+360)%360;}function Ei3(e){return V(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e));}const da1=Object.getPrototypeOf(structuredClone({}));function be8(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!be8(e[i],t[i]))return!1;return!0;}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!be8(i[1],t.get(i[0])))return!1;return!0;}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0;}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0;}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==da1.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==da1.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!be8(e[s],t[s]))return!1;}return!0;}return e!==e&&t!==t;}function D20(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,s;if(Array.isArray(i)){for(s="[",r=0;r<i.length;r++)r&&(s+=","),s+=n(i[r])||"null";return s+"]";}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const o=t.push(i)-1,a=Object.keys(i).sort();for(s="",r=0;r<a.length;r++){const c=a[r],u=n(i[c]);if(!u)continue;s&&(s+=","),s+=JSON.stringify(c)+":"+u;}return t.splice(o,1),`{${s}}`;}(e);}const tt12="row",nt11="column",_i4="facet",H21="x",Q26="y",Ce8="x2",Ue8="y2",xt8="xOffset",gn9="yOffset",Fe10="radius",it13="radius2",$e9="theta",rt13="theta2",Ne9="latitude",Te9="longitude",Ae9="latitude2",Ee7="longitude2",ge8="color",Be7="fill",We7="stroke",he9="shape",st12="size",Mt9="angle",ot12="opacity",St8="fillOpacity",vt8="strokeOpacity",wt7="strokeWidth",$t10="strokeDash",Gn8="text",hn9="order",Vn7="detail",ki3="key",Dt8="tooltip",Ci3="href",Fi2="url",Ni3="description",wd={x:1,y:1,x2:1,y2:1},pa1={theta:1,theta2:1,radius:1,radius2:1};function ga1(e){return e in pa1;}const qr4={longitude:1,longitude2:1,latitude:1,latitude2:1};function ha1(e){switch(e){case Ne9:return"y";case Ae9:return"y2";case Te9:return"x";case Ee7:return"x2";}}function ma1(e){return e in qr4;}const $d=b23(qr4),Gr3={...wd,...pa1,...qr4,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function mn10(e){return e===ge8||e===Be7||e===We7;}const ya1={row:1,column:1,facet:1},_e6=b23(ya1),Vr4={...Gr3,...ya1},Ed=b23(Vr4),{order:XS,detail:YS,tooltip:KS,..._d}=Vr4,{row:QS,column:ZS,facet:JS,...kd}=_d;function Cd(e){return!!kd[e];}function ba1(e){return!!Vr4[e];}const Fd=[Ce8,Ue8,Ae9,Ee7,rt13,it13];function xa1(e){const t=jt9(e);return t!==e;}function jt9(e){switch(e){case Ce8:return H21;case Ue8:return Q26;case Ae9:return Ne9;case Ee7:return Te9;case rt13:return $e9;case it13:return Fe10;}return e;}function Et7(e){if(ga1(e))switch(e){case $e9:return"startAngle";case rt13:return"endAngle";case Fe10:return"outerRadius";case it13:return"innerRadius";}return e;}function He8(e){switch(e){case H21:return Ce8;case Q26:return Ue8;case Ne9:return Ae9;case Te9:return Ee7;case $e9:return rt13;case Fe10:return it13;}return;}function me11(e){switch(e){case H21:case Ce8:return"width";case Q26:case Ue8:return"height";}return;}function Sa1(e){switch(e){case H21:return"xOffset";case Q26:return"yOffset";case Ce8:return"x2Offset";case Ue8:return"y2Offset";case $e9:return"thetaOffset";case Fe10:return"radiusOffset";case rt13:return"theta2Offset";case it13:return"radius2Offset";}return;}function Ti3(e){switch(e){case H21:return"xOffset";case Q26:return"yOffset";}return;}function Nd(e){switch(e){case"xOffset":return"x";case"yOffset":return"y";}}const Td=b23(Gr3),{x:ev,y:tv,x2:nv,y2:iv,xOffset:rv,yOffset:sv,latitude:ov,longitude:av,latitude2:cv,longitude2:uv,theta:lv,theta2:fv,radius:dv,radius2:pv,...Xr4}=Gr3,Ad=b23(Xr4),Yr4={x:1,y:1},at13=b23(Yr4);function Y26(e){return e in Yr4;}const Kr4={theta:1,radius:1},Od=b23(Kr4);function Ai3(e){return e==="width"?H21:Q26;}const va1={xOffset:1,yOffset:1};function Xn9(e){return e in va1;}const{text:gv,tooltip:hv,href:mv,url:yv,description:bv,detail:xv,key:Sv,order:vv,...wa1}=Xr4,Pd=b23(wa1);function zd(e){return!!Xr4[e];}function Rd(e){switch(e){case ge8:case Be7:case We7:case st12:case he9:case ot12:case wt7:case $t10:return!0;case St8:case vt8:case Mt9:return!1;}}const $a1={...Yr4,...Kr4,...va1,...wa1},Qr4=b23($a1);function qe8(e){return!!$a1[e];}function Id(e,t){return Md(e)[t];}const Ea1={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:wv,...Ld}=Ea1;function Md(e){switch(e){case ge8:case Be7:case We7:case Ni3:case Vn7:case ki3:case Dt8:case Ci3:case hn9:case ot12:case St8:case vt8:case wt7:case _i4:case tt12:case nt11:return Ea1;case H21:case Q26:case xt8:case gn9:case Ne9:case Te9:return Ld;case Ce8:case Ue8:case Ae9:case Ee7:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case st12:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case $t10:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case he9:return{point:"always",geoshape:"always"};case Gn8:return{text:"always"};case Mt9:return{point:"always",square:"always",text:"always"};case Fi2:return{image:"always"};case $e9:return{text:"always",arc:"always"};case Fe10:return{text:"always",arc:"always"};case rt13:case it13:return{arc:"always"};}}function Zr4(e){switch(e){case H21:case Q26:case $e9:case Fe10:case xt8:case gn9:case st12:case Mt9:case wt7:case ot12:case St8:case vt8:case Ce8:case Ue8:case rt13:case it13:return;case _i4:case tt12:case nt11:case he9:case $t10:case Gn8:case Dt8:case Ci3:case Fi2:case Ni3:return"discrete";case ge8:case Be7:case We7:return"flexible";case Ne9:case Te9:case Ae9:case Ee7:case Vn7:case ki3:case hn9:return;}}const Dd={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},jd={count:1,min:1,max:1};function ct13(e){return!!e&&!!e.argmin;}function _t7(e){return!!e&&!!e.argmax;}function Jr4(e){return X1(e)&&!!Dd[e];}const Ud=new Set(["count","valid","missing","distinct"]);function Oi3(e){return X1(e)&&Ud.has(e);}function Bd(e){return X1(e)&&A22(["min","max"],e);}const Wd=new Set(["count","sum","distinct","valid","missing"]),Hd=new Set(["mean","average","median","q1","q3","min","max"]);function _a1(e){return In(e)&&(e=Zi2(e,void 0)),"bin"+b23(e).map(t=>Pi3(e[t])?W22(`_${t}_${bt9(e[t])}`):W22(`_${t}_${e[t]}`)).join("");}function U25(e){return e===!0||Ut8(e)&&!e.binned;}function re17(e){return e==="binned"||Ut8(e)&&e.binned===!0;}function Ut8(e){return M1(e);}function Pi3(e){return e?.param;}function ka1(e){switch(e){case tt12:case nt11:case st12:case ge8:case Be7:case We7:case wt7:case ot12:case St8:case vt8:case he9:return 6;case $t10:return 4;default:return 10;}}function Yn7(e){return!!e?.expr;}function oe14(e,{level:t}={level:0}){const n=b23(e||{}),i={};for(const r of n)i[r]=t===0?xe8(e[r]):oe14(e[r],{level:t-1});return i;}function Ca1(e){const{anchor:t,frame:n,offset:i,orient:r,angle:s,limit:o,color:a,subtitleColor:c,subtitleFont:u,subtitleFontSize:l,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...c?{subtitleColor:c}:{},...u?{subtitleFont:u}:{},...l?{subtitleFontSize:l}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...p?{subtitleLineHeight:p}:{},...h?{subtitlePadding:h}:{}},k=ln11(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:k,nonMarkTitleProperties:y,subtitle:v};}function kt9(e){return X1(e)||w1(e)&&X1(e[0]);}function $19(e){return!!e?.signal;}function Ct8(e){return!!e.step;}function qd(e){return w1(e)?!1:"fields"in e&&!("data"in e);}function Gd(e){return w1(e)?!1:"fields"in e&&"data"in e;}function ut11(e){return w1(e)?!1:"field"in e&&"data"in e;}const Vd={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Xd=b23(Vd),Yd={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},es1=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Fa1(e){const t=w1(e.condition)?e.condition.map(Na1):Na1(e.condition);return{...xe8(e),condition:t};}function xe8(e){if(Yn7(e)){const{expr:t,...n}=e;return{signal:t,...n};}return e;}function Na1(e){if(Yn7(e)){const{expr:t,...n}=e;return{signal:t,...n};}return e;}function B24(e){if(Yn7(e)){const{expr:t,...n}=e;return{signal:t,...n};}return $19(e)?e:e!==void 0?{value:e}:void 0;}function ts1(e){return $19(e)?e.signal:Z1(e);}function Ta1(e){return $19(e)?e.signal:Z1(e.value);}function Oe5(e){return $19(e)?e.signal:e==null?null:Z1(e);}function Kd(e,t,n){for(const i of n){const r=Ge8(i,t.markDef,t.config);r!==void 0&&(e[i]=B24(r));}return e;}function Aa1(e){return[].concat(e.type,e.style??[]);}function R23(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:s}=i;return r&&t[r]!==void 0?t[r]:t[e]!==void 0?t[e]:s&&(!r||r===e)?void 0:Ge8(e,t,n,i);}function Ge8(e,t,n,{vgChannel:i}={}){return X26(i?zi3(e,t,n.style):void 0,zi3(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e]);}function zi3(e,t,n){return Oa1(e,Aa1(t),n);}function Oa1(e,t,n){t=p(t);let i;for(const r of t){const s=n[r];s&&s[e]!==void 0&&(i=s[e]);}return i;}function Pa1(e,t){return p(e).reduce((n,i)=>(n.field.push(w23(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]});}function za1(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(be8(r,i))return;n.push(i);}),n;}function Ra1(e,t){return be8(e,t)||!t?e:e?[...p(e),...p(t)].join(", "):t;}function Ia1(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((kt9(n)||$19(n))&&(kt9(i)||$19(i)))return{explicit:e.explicit,value:Ra1(n,i)};if(kt9(n)||$19(n))return{explicit:e.explicit,value:n};if(kt9(i)||$19(i))return{explicit:e.explicit,value:i};if(!kt9(n)&&!$19(n)&&!kt9(i)&&!$19(i))return{explicit:e.explicit,value:za1(n,i)};throw new Error("It should never reach here");}function ns1(e){return`Invalid specification ${D20(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`;}const Qd='Autosize "fit" only works for single views and layered views.';function La1(e){const t=e=="width"?"Width":"Height";return`${t} "container" only works for single views and layered views.`;}function Ma1(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`;}function Da1(e){return e?`Dropping "fit-${e}" because spec has discrete ${me11(e)}.`:'Dropping "fit" because spec has discrete size.';}function is1(e){return`Unknown field for ${e}. Cannot calculate view size.`;}function ja1(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`;}function Zd(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`;}function Jd(e){return`The "nearest" transform is not supported for ${e} marks.`;}function Ua1(e){return`Selection not supported for ${e} yet.`;}function ep(e){return`Cannot find a selection named "${e}".`;}const tp="Scale bindings are currently only supported for scales with unbinned, continuous domains.",np="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",ip="Legend bindings are only supported for selections over an individual field or encoding channel.";function rp(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`;}function sp(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`;}const op="The same selection must be used to override scale domains in a layered view.",ap='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function cp(e){return`Unknown repeated value "${e}".`;}function Ba1(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`;}const up="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function lp(e){return`Unrecognized parse "${e}".`;}function Wa1(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`;}const fp="Attempt to add the same child twice.";function dp(e){return`Ignoring an invalid transform: ${D20(e)}.`;}const pp='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Ha1(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`;}function gp(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${D20(t)} is overridden by a child projection ${D20(n)}.`;}const hp="Arc marks uses theta channel rather than angle, replacing angle with theta.";function mp(e){return`${e}Offset dropped because ${e} is continuous`;}function yp(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${D20(n)}}.`;}function qa1(e){return`Invalid field type "${e}".`;}function bp(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`;}function xp(e){return`Invalid aggregation operator "${e}".`;}function Ga1(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`;}function Sp(e){return`Position range does not support relative band size for ${e}.`;}function rs1(e,t){return`Dropping ${D20(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`;}const vp="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ri3(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`;}function wp(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`;}function $p(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`;}function Ep(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`;}function _p(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`;}function ss1(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`;}function kp(e){return`The ${e} for range marks cannot be an expression`;}function Cp(e,t){const n=e&&t?"x2 and y2":e?"x2":"y2";return`Line mark is for continuous lines and thus cannot be used with ${n}. We will use the rule mark (line segments) instead.`;}function Fp(e,t){return`Specified orient "${e}" overridden with "${t}".`;}function Np(e){return`Cannot use the scale property "${e}" with non-color channel.`;}function Tp(e){return`Cannot use the relative band size with ${e} scale.`;}function Ap(e){return`Using unaggregated domain with raw field has no effect (${D20(e)}).`;}function Op(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`;}function Pp(e){return`Unaggregated domain is currently unsupported for log scale (${D20(e)}).`;}function zp(e){return`Cannot apply size to non-oriented mark "${e}".`;}function Rp(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`;}function Ip(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`;}function Va1(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`;}function Xa1(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`;}function Lp(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${D20(n)} and ${D20(i)}). Using ${D20(n)}.`;}function Mp(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${D20(n)} and ${D20(i)}). Using the union of the two domains.`;}function Dp(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`;}function jp(e){return`Dropping sort property ${D20(e)} as unioned domains only support boolean or op "count", "min", and "max".`;}const Ya1="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Up="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Bp="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Wp="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Hp(e){return`Cannot stack "${e}" if there is already "${e}2".`;}function qp(e){return`Stack is applied to a non-linear scale (${e}).`;}function Gp(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`;}function Ii3(e,t){return`Invalid ${e}: ${D20(t)}.`;}function Vp(e){return`Dropping day from datetime ${D20(e)} as day cannot be combined with other units.`;}function Xp(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`;}function Yp(e,t,n){return`${e} is not usually used with ${t} for ${n}.`;}function Kp(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`;}function Ka1(e){return`1D error band does not support ${e}.`;}function Qa1(e){return`Channel ${e} is required for "binned" bin.`;}function Qp(e){return`Channel ${e} should not be used with "binned" bin.`;}function Zp(e){return`Domain for ${e} is required for threshold scale.`;}const Za1=en(2);let yn9=Za1;function Jp(e){return yn9=e,yn9;}function eg(){return yn9=Za1,yn9;}function x19(...e){yn9.warn(...e);}function tg(...e){yn9.debug(...e);}function Bt8(e){if(e&&M1(e)){for(const t of as1)if(t in e)return!0;}return!1;}const Ja1=["january","february","march","april","may","june","july","august","september","october","november","december"],ng=Ja1.map(e=>e.substr(0,3)),ec=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],ig=ec.map(e=>e.substr(0,3));function rg(e){if(Ei3(e)&&(e=+e),V(e))return e>4&&x19(Ii3("quarter",e)),e-1;throw new Error(Ii3("quarter",e));}function sg(e){if(Ei3(e)&&(e=+e),V(e))return e-1;{const t=e.toLowerCase(),n=Ja1.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=ng.indexOf(i);if(r!==-1)return r;throw new Error(Ii3("month",e));}}function og(e){if(Ei3(e)&&(e=+e),V(e))return e%7;{const t=e.toLowerCase(),n=ec.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=ig.indexOf(i);if(r!==-1)return r;throw new Error(Ii3("day",e));}}function os1(e,t){const n=[];if(t&&e.day!==void 0&&b23(e).length>1&&(x19(Vp(e)),e=C26(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?sg(e.month):e.month;n.push(i);}else if(e.quarter!==void 0){const i=t?rg(e.quarter):e.quarter;n.push(V(i)?i*3:`${i}*3`);}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?og(e.day):e.day;n.push(V(i)?i+1:`${i}+1`);}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r=="undefined"?0:r);}return n;}function Wt8(e){const t=os1(e,!0),n=t.join(", ");return e.utc?`utc(${n})`:`datetime(${n})`;}function ag(e){const t=os1(e,!1),n=t.join(", ");return e.utc?`utc(${n})`:`datetime(${n})`;}function cg(e){const t=os1(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t);}const tc={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},as1=b23(tc);function ug(e){return!!tc[e];}function Ht7(e){return M1(e)?e.binned:nc(e);}function nc(e){return e&&e.startsWith("binned");}function cs1(e){return e.startsWith("utc");}function lg(e){return e.substring(3);}const fg={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Li3(e){return as1.filter(t=>rc(e,t));}function ic(e){const t=Li3(e);return t[t.length-1];}function rc(e,t){const n=e.indexOf(t);return n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"?!1:!(n>0&&t==="year"&&e.charAt(n-1)==="f");}function dg(e,t,{end:n}={end:!1}){const i=Hr3(t),r=cs1(e)?"utc":"";function s(c){return c==="quarter"?`(${r}quarter(${i})-1)`:`${r}${c}(${i})`;}let o;const a={};for(const c of as1)rc(e,c)&&(a[c]=s(c),o=c);return n&&(a[o]+="+1"),ag(a);}function sc1(e){if(!e)return;const t=Li3(e);return`timeUnitSpecifier(${D20(t)}, ${D20(fg)})`;}function pg(e,t,n){if(!e)return;const i=sc1(e),r=n||cs1(e);return`${r?"utc":"time"}Format(${t}, ${i})`;}function Z26(e){if(!e)return;let t;return X1(e)?nc(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:M1(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),cs1(t.unit)&&(t.utc=!0,t.unit=lg(t.unit)),t;}function gg(e){const{utc:t,...n}=Z26(e);return n.unit?(t?"utc":"")+b23(n).map(i=>W22(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+b23(n).map(i=>W22(`_${i}_${n[i]}`)).join("");}function oc1(e,t=n=>n){const n=Z26(e),i=ic(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=ac(i,n.step),a={...r,[o]:+r[o]+s};return`${t(Wt8(a))} - ${t(Wt8(r))}`;}return;}const hg={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function mg(e){return!!hg[e];}function ac(e,t=1){if(mg(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7};}}function yg(e){return e?.param;}function us1(e){return!!e?.field&&e.equal!==void 0;}function ls1(e){return!!e?.field&&e.lt!==void 0;}function fs1(e){return!!e?.field&&e.lte!==void 0;}function ds1(e){return!!e?.field&&e.gt!==void 0;}function ps1(e){return!!e?.field&&e.gte!==void 0;}function gs1(e){if(e?.field){if(w1(e.range)&&e.range.length===2)return!0;if($19(e.range))return!0;}return!1;}function hs1(e){return!!e?.field&&(w1(e.oneOf)||w1(e.in));}function bg(e){return!!e?.field&&e.valid!==void 0;}function cc1(e){return hs1(e)||us1(e)||gs1(e)||ls1(e)||ds1(e)||fs1(e)||ps1(e);}function Ve7(e,t){return Ji2(e,{timeUnit:t,wrapTime:!0});}function xg(e,t){return e.map(n=>Ve7(n,t));}function uc(e,t=!0){const{field:n}=e,i=Z26(e.timeUnit),{unit:r,binned:s}=i||{},o=w23(e,{expr:"datum"}),a=r?`time(${s?o:dg(r,n)})`:o;if(us1(e))return`${a}===${Ve7(e.equal,r)}`;if(ls1(e)){const c=e.lt;return`${a}<${Ve7(c,r)}`;}else if(ds1(e)){const c=e.gt;return`${a}>${Ve7(c,r)}`;}else if(fs1(e)){const c=e.lte;return`${a}<=${Ve7(c,r)}`;}else if(ps1(e)){const c=e.gte;return`${a}>=${Ve7(c,r)}`;}else{if(hs1(e))return`indexof([${xg(e.oneOf,r).join(",")}], ${a}) !== -1`;if(bg(e))return Mi3(a,e.valid);if(gs1(e)){const{range:c}=e,u=$19(c)?{signal:`${c.signal}[0]`}:c[0],l=$19(c)?{signal:`${c.signal}[1]`}:c[1];if(u!==null&&l!==null&&t)return"inrange("+a+", ["+Ve7(u,r)+", "+Ve7(l,r)+"])";const f=[];return u!==null&&f.push(`${a} >= ${Ve7(u,r)}`),l!==null&&f.push(`${a} <= ${Ve7(l,r)}`),f.length>0?f.join(" && "):"true";}}throw new Error(`Invalid field predicate: ${D20(e)}`);}function Mi3(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`;}function Sg(e){return cc1(e)&&e.timeUnit?{...e,timeUnit:Z26(e.timeUnit)}:e;}const Kn6={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function vg(e){return e==="quantitative"||e==="temporal";}function lc(e){return e==="ordinal"||e==="nominal";}const qt9=Kn6.quantitative,ms1=Kn6.ordinal,bn6=Kn6.temporal,ys1=Kn6.nominal,xn9=Kn6.geojson;function wg(e){if(e){e=e.toLowerCase();switch(e){case"q":case qt9:return"quantitative";case"t":case bn6:return"temporal";case"o":case ms1:return"ordinal";case"n":case ys1:return"nominal";case xn9:return"geojson";}}return;}const se14={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},bs1={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function $g(e,t){const n=bs1[e],i=bs1[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time";}const Eg={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function fc(e){return Eg[e];}const dc=new Set(["linear","log","pow","sqrt","symlog"]),pc=new Set([...dc,"time","utc"]);function gc1(e){return dc.has(e);}const hc=new Set(["quantile","quantize","threshold"]),_g=new Set([...pc,...hc,"sequential","identity"]),kg=new Set(["ordinal","bin-ordinal","point","band"]);function J27(e){return kg.has(e);}function Pe7(e){return _g.has(e);}function Xe7(e){return pc.has(e);}function Sn10(e){return hc.has(e);}const Cg={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Fg(e){return!X1(e)&&!!e.name;}function mc(e){return e?.param;}function Ng(e){return e?.unionWith;}function Tg(e){return M1(e)&&"field"in e;}const Ag={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:_v,domain:kv,range:Cv,rangeMax:Fv,rangeMin:Nv,scheme:Tv,...Og}=Ag,Pg=b23(Og);function xs1(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Xe7(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Xe7(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Xe7(e);case"nice":return Xe7(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Pe7(e)&&!A22(["log","time","utc","threshold","quantile"],e);}}function yc(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return mn10(e)?void 0:Np(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return;}}function zg(e,t){return A22([ms1,ys1],t)?e===void 0||J27(e):t===bn6?A22([se14.TIME,se14.UTC,void 0],e):t===qt9?gc1(e)||Sn10(e)||e===void 0:!0;}function Rg(e,t,n=!1){if(!qe8(e))return!1;switch(e){case H21:case Q26:case xt8:case gn9:case $e9:case Fe10:return Xe7(t)||t==="band"?!0:t==="point"?!n:!1;case st12:case wt7:case ot12:case St8:case vt8:case Mt9:return Xe7(t)||Sn10(t)||A22(["band","point","ordinal"],t);case ge8:case Be7:case We7:return t!=="band";case $t10:case he9:return t==="ordinal"||Sn10(t);}}function Ig(e){return M1(e)&&"value"in e;}const le12={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},bc=le12.arc,Di3=le12.area,ji2=le12.bar,Lg=le12.image,Ui2=le12.line,Bi3=le12.point,Mg=le12.rect,Wi2=le12.rule,xc=le12.text,Ss1=le12.tick,Dg=le12.trail,vs1=le12.circle,ws1=le12.square,Sc=le12.geoshape;function Ft7(e){return["line","area","trail"].includes(e);}function Qn7(e){return["rect","bar","image","arc"].includes(e);}const jg=new Set(b23(le12));function Ye7(e){return e.type;}const Ug=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Bg=["fill","fillOpacity"],Wg=[...Ug,...Bg],Hg={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},vc=b23(Hg),qg={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Gg={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Vg={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},wc=b23(Vg);function Gt7(e){return e&&e.band!=null;}const Xg={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},$c=5,Yg={binSpacing:1,continuousBandSize:$c,minBandSize:.25,timeUnitBandPosition:.5},Kg={binSpacing:0,continuousBandSize:$c,minBandSize:.25,timeUnitBandPosition:.5},Qg={thickness:1};function Zg(e){return Ye7(e)?e.type:e;}function Ec(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e;}function $s1({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!Pe7(i)||r)return"always-valid";const s=Ec(R23("invalid",e,t),{isPath:Ft7(e.type)}),o=t.scale?.invalid?.[n];return o!==void 0?"show":s;}function Jg(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains";}function _c({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,s=`peek(${i})`,o=t.domainHasZero();if(o==="definitely")return{scale:e,value:0};if(o==="maybe"){const a=n==="zeroOrMin"?r:s;return{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${a})`};}else return{signal:`scale('${e}', ${n==="zeroOrMin"?r:s})`};}function kc({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:s}){const o=n?.get("type"),a=Ie8(t),c=Oi3(a?.aggregate),u=$s1({scaleChannel:e,markDef:r,config:s,scaleType:o,isCountAggregate:c});if(a&&u==="show"){const l=s.scale.invalid?.[e]??"zero-or-min";return{test:Mi3(w23(a,{expr:"datum"}),!1),...eh(l,n,i)};}return;}function eh(e,t,n){if(Ig(e)){const{value:i}=e;return $19(i)?{signal:i.signal}:{value:i};}return _c({scale:t,scaleName:n,mode:"zeroOrMin"});}function Es1(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:s,config:o}=e,a=jt9(t),c=_s1(e),u=kc({scaleChannel:a,channelDef:n,scale:r,scaleName:s,markDef:i,config:o});return u!==void 0?[u,c]:c;}function th(e){const{datum:t}=e;return Bt8(t)?Wt8(t):`${D20(t)}`;}function Vt8(e,t,n,i){const r={};if(t&&(r.scale=t),Ke8(e)){const{datum:s}=e;Bt8(s)?r.signal=Wt8(s):$19(s)?r.signal=s.signal:Yn7(s)?r.signal=s.expr:r.value=s;}else r.field=w23(e,n);if(i){const{offset:s,band:o}=i;s&&(r.offset=s),o&&(r.band=o);}return r;}function Hi3({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:s="end",bandPosition:o=.5}){const a=!$19(o)&&0<o&&o<1?"datum":void 0,c=w23(t,{expr:a,suffix:r}),u=n!==void 0?w23(n,{expr:a}):w23(t,{suffix:s,expr:a}),l={};if(o===0||o===1){l.scale=e;const f=o===0?c:u;l.field=f;}else{const f=$19(o)?`(1-${o.signal}) * ${c} + ${o.signal} * ${u}`:`${1-o} * ${c} + ${o} * ${u}`;l.signal=`scale("${e}", ${f})`;}return i&&(l.offset=i),l;}function nh({scaleName:e,fieldDef:t}){const n=w23(t,{expr:"datum"}),i=w23(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`;}function _s1({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:c,defaultRef:u,bandPosition:l}){if(t){if(F24(t)){const f=o?.get("type");if(fe11(t)){l??(l=Nt9({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:d,timeUnit:p,type:h}=t;if(U25(d)||l&&p&&h===bn6)return a?.impute?Vt8(t,s,{binSuffix:"mid"},{offset:c}):l&&!J27(f)?Hi3({scaleName:s,fieldOrDatumDef:t,bandPosition:l,offset:c}):Vt8(t,s,ii5(t,e)?{binSuffix:"range"}:{},{offset:c});if(re17(d)){if(S26(n))return Hi3({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:l,offset:c});{const g=e===H21?Ce8:Ue8;x19(Qa1(g));}}}return Vt8(t,s,J27(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?l??t.bandPosition??.5:void 0});}else if(Re11(t)){const f=t.value,d=c?{offset:c}:{};return{...Zn5(e,f),...d};}}return O1(u)&&(u=u()),u&&{...u,...c?{offset:c}:{}};}function Zn5(e,t){return A22(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:A22(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:B24(t);}function Xt9(e){return e&&e!=="number"&&e!=="time";}function Cc(e,t,n){return`${e}(${t}${n?`, ${D20(n)}`:""})`;}const ih=" – ";function ks1({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s}){if(Xt9(n))return ze8({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:s});const o=Fc1(e,i,r),a=vn9(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(r&&s.normalizedNumberFormatType)return ze8({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:i,config:s});if(s.numberFormatType)return ze8({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:i,config:s});}if(a==="temporal"&&s.timeFormatType&&S26(e)&&e.timeUnit===void 0)return ze8({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:i,config:s});}if(_n7(e)){const c=sh({field:o,timeUnit:S26(e)?Z26(e.timeUnit)?.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Yt9(e)&&e.scale?.type===se14.UTC});return c?{signal:c}:void 0;}if(t=Cs1({type:a,specifiedFormat:t,config:s,normalizeStack:r}),S26(e)&&U25(e.bin)){const c=w23(e,{expr:i,binSuffix:"end"});return{signal:Jn8(o,c,t,n,s)};}else return t||vn9(e)==="quantitative"?{signal:`${Ac(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`};}function Fc1(e,t,n){return S26(e)?n?`${w23(e,{expr:t,suffix:"end"})}-${w23(e,{expr:t,suffix:"start"})}`:w23(e,{expr:t}):th(e);}function ze8({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s,field:o}){if(o??(o=Fc1(e,i,r)),o!=="datum.value"&&S26(e)&&U25(e.bin)){const a=w23(e,{expr:i,binSuffix:"end"});return{signal:Jn8(o,a,t,n,s)};}return{signal:Cc(n,o,t)};}function Nc(e,t,n,i,r,s){if(X1(i)&&Xt9(i))return;if(n===void 0&&i===void 0&&r.customFormatTypes&&vn9(e)==="quantitative"){if(r.normalizedNumberFormatType&&wn13(e)&&e.stack==="normalize")return;if(r.numberFormatType)return;}if(wn13(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return Cs1({type:"quantitative",config:r,normalizeStack:!0});if(_n7(e)){const o=S26(e)?Z26(e.timeUnit)?.unit:void 0;return o===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:rh({specifiedFormat:n,timeUnit:o,config:r,omitTimeFormatConfig:s});}return Cs1({type:t,specifiedFormat:n,config:r});}function Tc(e,t,n){return e&&($19(e)||e==="number"||e==="time")?e:_n7(t)&&n!=="time"&&n!=="utc"?S26(t)&&Z26(t?.timeUnit)?.utc?"utc":"time":void 0;}function Cs1({type:e,specifiedFormat:t,config:n,normalizeStack:i}){return X1(t)?t:e===qt9?i?n.normalizedNumberFormat:n.numberFormat:void 0;}function rh({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:sc1(t)}:i?void 0:n.timeFormat);}function Ac(e,t){return`format(${e}, "${t||""}")`;}function Oc(e,t,n,i){return Xt9(n)?Cc(n,e,t):Ac(e,(X1(t)?t:void 0)??i.numberFormat);}function Jn8(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return Jn8(e,t,r.numberFormat,r.numberFormatType,r);const s=Oc(e,n,i,r),o=Oc(t,n,i,r);return`${Mi3(e,!1)} ? "null" : ${s} + "${ih}" + ${o}`;}function sh({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:s}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=X1(n)?n:r,`${s?"utc":"time"}Format(${e}, '${n}')`):pg(t,e,s);}const qi3="min",oh={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Pc(e){return e in oh;}function ah(e){return!!e?.encoding;}function lt11(e){return e&&(e.op==="count"||!!e.field);}function zc(e){return e&&w1(e);}function ei5(e){return"row"in e||"column"in e;}function Fs1(e){return!!e&&"header"in e;}function Gi3(e){return"facet"in e;}function ch(e){return e.param;}function uh(e){return e&&!X1(e)&&"repeat"in e;}function Rc(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t};}function Ns1(e){return"sort"in e;}function Nt9({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(F24(e)&&e.bandPosition!==void 0)return e.bandPosition;if(S26(e)){const{timeUnit:r,bin:s}=e;if(r&&!t)return Ge8("timeUnitBandPosition",n,i);if(U25(s))return .5;}return;}function Ic({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:s,useVlSizeChannel:o}){const a=me11(e),c=R23(o?"size":a,i,r,{vgChannel:a});if(c!==void 0)return c;if(S26(t)){const{timeUnit:u,bin:l}=t;if(u&&!n)return{band:Ge8("timeUnitBandSize",i,r)};if(U25(l)&&!J27(s))return{band:1};}return Qn7(i.type)?s?J27(s)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize:void 0;}function Lc(e,t,n,i){return U25(e.bin)||e.timeUnit&&fe11(e)&&e.type==="temporal"?Nt9({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1;}function Mc(e){return e&&!!e.sort&&!e.field;}function ti5(e){return e&&"condition"in e;}function Vi3(e){const t=e?.condition;return!!t&&!w1(t)&&S26(t);}function ni5(e){const t=e?.condition;return!!t&&!w1(t)&&F24(t);}function lh(e){const t=e?.condition;return!!t&&(w1(t)||Re11(t));}function S26(e){return e&&(!!e.field||e.aggregate==="count");}function vn9(e){return e?.type;}function Ke8(e){return e&&"datum"in e;}function Tt10(e){return fe11(e)&&!Yi2(e)||Xi2(e);}function Dc1(e){return fe11(e)&&e.type==="quantitative"&&!e.bin||Xi2(e);}function Xi2(e){return Ke8(e)&&V(e.datum);}function F24(e){return S26(e)||Ke8(e);}function fe11(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e;}function Re11(e){return e&&"value"in e&&"value"in e;}function Yt9(e){return e&&("scale"in e||"sort"in e);}function wn13(e){return e&&("axis"in e||"stack"in e||"impute"in e);}function jc(e){return e&&"legend"in e;}function Uc(e){return e&&("format"in e||"formatType"in e);}function fh(e){return pe9(e,["legend","axis","header","scale"]);}function dh(e){return"op"in e;}function w23(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,s="";if(gh(e))n=la1("count");else{let o;if(!t.nofn)if(dh(e))o=e.op;else{const{bin:a,aggregate:c,timeUnit:u}=e;U25(a)?(o=_a1(a),r=(t.binSuffix??"")+(t.suffix??"")):c?_t7(c)?(s=`["${n}"]`,n=`argmax_${c.argmax}`):ct13(c)?(s=`["${n}"]`,n=`argmin_${c.argmin}`):o=String(c):u&&!Ht7(u)&&(o=gg(u),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""));}o&&(n=n?`${o}_${n}`:o);}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?dn10(n):t.expr?aa1(n,t.expr)+s:we11(n)+s;}function Yi2(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return S26(e)&&!!e.bin;case"temporal":return!1;}throw new Error(qa1(e.type));}function ph(e){return Yt9(e)&&Sn10(e.scale?.type);}function gh(e){return e.aggregate==="count";}function hh(e,t){const{field:n,bin:i,timeUnit:r,aggregate:s}=e;if(s==="count")return t.countTitle;if(U25(i))return`${n} (binned)`;if(r&&!Ht7(r)){const o=Z26(r)?.unit;if(o)return`${n} (${Li3(o).join("-")})`;}else if(s)return _t7(s)?`${n} for max ${s.argmax}`:ct13(s)?`${n} for min ${s.argmin}`:`${Hn8(s)} of ${n}`;return n;}function mh(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(_t7(t))return`${r} for argmax(${t.argmax})`;if(ct13(t))return`${r} for argmin(${t.argmin})`;const s=i&&!Ht7(i)?Z26(i):void 0,o=t||s?.unit||s?.maxbins&&"timeunit"||U25(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r;}const Bc1=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return mh(e);default:return hh(e,t);}};let Wc=Bc1;function Hc(e){Wc=e;}function yh(){Hc(Bc1);}function $n9(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=Ts1(e)?.title;if(!S26(e))return r??e.title;const s=e,o=i?As1(s,t):void 0;return n?X26(r,s.title,o):r??s.title??o;}function Ts1(e){return wn13(e)&&e.axis?e.axis:jc(e)&&e.legend?e.legend:Fs1(e)&&e.header?e.header:void 0;}function As1(e,t){return Wc(e,t);}function Ki2(e){if(Uc(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n};}else{const t=Ts1(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i};}}function bh(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal";}if(Ns1(e)&&w1(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!_t7(n)&&!ct13(n))return"quantitative";if(Yt9(e)&&e.scale?.type)switch(bs1[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal";}return"nominal";}function Ie8(e){return S26(e)?e:Vi3(e)?e.condition:void 0;}function K26(e){return F24(e)?e:ni5(e)?e.condition:void 0;}function qc(e,t,n,i={}){if(X1(e)||V(e)||In(e)){const r=X1(e)?"string":V(e)?"number":"boolean";return x19(yp(t,r,e)),{value:e};}return F24(e)?Qi2(e,t,n,i):ni5(e)?{...e,condition:Qi2(e.condition,t,n,i)}:e;}function Qi2(e,t,n,i){if(Uc(e)){const{format:r,formatType:s,...o}=e;if(Xt9(s)&&!n.customFormatTypes)return x19(Ha1(t)),Qi2(o,t,n,i);}else{const r=wn13(e)?"axis":jc(e)?"legend":Fs1(e)?"header":null;if(r&&e[r]){const{format:s,formatType:o,...a}=e[r];if(Xt9(o)&&!n.customFormatTypes)return x19(Ha1(t)),Qi2({...e,[r]:a},t,n,i);}}return S26(e)?Os1(e,t,i):xh(e);}function xh(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=V(n)?"quantitative":X1(n)?"nominal":Bt8(n)?"temporal":void 0,{...e,type:t};}function Os1(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:s,field:o}=e,a={...e};if(!n&&i&&!Jr4(i)&&!_t7(i)&&!ct13(i)&&(x19(xp(i)),delete a.aggregate),r&&(a.timeUnit=Z26(r)),o&&(a.field=`${o}`),U25(s)&&(a.bin=Zi2(s,t)),re17(s)&&!Y26(t)&&x19(Qp(t)),fe11(a)){const{type:c}=a,u=wg(c);c!==u&&(a.type=u),c!=="quantitative"&&Oi3(i)&&(x19(bp(c,i)),a.type="quantitative");}else if(!xa1(t)){const c=bh(a,t);a.type=c;}if(fe11(a)){const{compatible:c,warning:u}=Sh(a,t)||{};c===!1&&x19(u);}if(Ns1(a)&&X1(a.sort)){const{sort:c}=a;if(Pc(c))return{...a,sort:{encoding:c}};const u=c.substr(1);if(c.charAt(0)==="-"&&Pc(u))return{...a,sort:{encoding:u,order:"descending"}};}if(Fs1(a)){const{header:c}=a;if(c){const{orient:u,...l}=c;if(u)return{...a,header:{...l,labelOrient:c.labelOrient||u,titleOrient:c.titleOrient||u}};}}return a;}function Zi2(e,t){return In(e)?{maxbins:ka1(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:ka1(t)}:e;}const En10={compatible:!0};function Sh(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case tt12:case nt11:case _i4:return Yi2(e)?En10:{compatible:!1,warning:$p(t)};case H21:case Q26:case xt8:case gn9:case ge8:case Be7:case We7:case Gn8:case Vn7:case ki3:case Dt8:case Ci3:case Fi2:case Mt9:case $e9:case Fe10:case Ni3:return En10;case Te9:case Ee7:case Ne9:case Ae9:return n!==qt9?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:En10;case ot12:case St8:case vt8:case wt7:case st12:case rt13:case it13:case Ce8:case Ue8:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:En10;case he9:case $t10:return!Yi2(e)&&!ph(e)?{compatible:!1,warning:Ep(t)}:En10;case hn9:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:En10;}}function _n7(e){const{formatType:t}=Ki2(e);return t==="time"||!t&&vh(e);}function vh(e){return e&&(e.type==="temporal"||S26(e)&&!!e.timeUnit);}function Ji2(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const s=t&&Z26(t)?.unit;let o=s||n==="temporal",a;return Yn7(e)?a=e.expr:$19(e)?a=e.signal:Bt8(e)?(o=!0,a=Wt8(e)):(X1(e)||V(e))&&o&&(a=`datetime(${D20(e)})`,ug(s)&&(V(e)&&e<1e4||X1(e)&&isNaN(Date.parse(e)))&&(a=Wt8({[s]:e}))),a?i&&o?`time(${a})`:a:r?void 0:D20(e);}function Gc(e,t){const{type:n}=e;return t.map(i=>{const r=S26(e)&&!Ht7(e.timeUnit)?e.timeUnit:void 0,s=Ji2(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i;});}function ii5(e,t){return U25(e.bin)?qe8(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1);}const Vc={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ri5(e){return e?.condition;}const Xc=["domain","grid","labels","ticks","title"],wh={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Yc={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},$h={...Yc,style:1,labelExpr:1,encoding:1};function Kc(e){return!!$h[e];}const Eh={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Qc1=b23(Eh);function ft11(e){return"mark"in e;}class er2{constructor(t,n){this.name=t,this.run=n;}hasMatchingType(t){return ft11(t)?Zg(t.mark)===this.name:!1;}}function Kt9(e,t){const n=e&&e[t];return n?w1(n)?fn9(n,i=>!!i.field):S26(n)||Vi3(n):!1;}function Zc(e,t){const n=e&&e[t];return n?w1(n)?fn9(n,i=>!!i.field):S26(n)||Ke8(n)||ni5(n):!1;}function Jc(e,t){if(Y26(t)){const n=e[t];if((S26(n)||Ke8(n))&&(lc(n.type)||S26(n)&&n.timeUnit)){const i=Ti3(t);return Zc(e,i);}}return!1;}function eu1(e){return fn9(Ed,t=>{if(Kt9(e,t)){const n=e[t];if(w1(n))return fn9(n,i=>!!i.aggregate);{const i=Ie8(n);return i&&!!i.aggregate;}}return!1;});}function tu1(e,t){const n=[],i=[],r=[],s=[],o={};return Ps1(e,(a,c)=>{if(S26(a)){const{field:u,aggregate:l,bin:f,timeUnit:d,...p}=a;if(l||d||f){const h=Ts1(a),g=h?.title;let m=w23(a,{forAs:!0});const y={...g?[]:{title:$n9(a,t,{allowDisabling:!0})},...p,field:m};if(l){let v;if(_t7(l)?(v="argmax",m=w23({op:"argmax",field:l.argmax},{forAs:!0}),y.field=`${m}.${u}`):ct13(l)?(v="argmin",m=w23({op:"argmin",field:l.argmin},{forAs:!0}),y.field=`${m}.${u}`):l!=="boxplot"&&l!=="errorbar"&&l!=="errorband"&&(v=l),v){const k={op:v,as:m};u&&(k.field=u),s.push(k);}}else if(n.push(m),fe11(a)&&U25(f)){if(i.push({bin:f,field:u,as:m}),n.push(w23(a,{binSuffix:"end"})),ii5(a,c)&&n.push(w23(a,{binSuffix:"range"})),Y26(c)){const v={field:`${m}_end`};o[`${c}2`]=v;}y.bin="binned",xa1(c)||(y.type=qt9);}else if(d&&!Ht7(d)){r.push({timeUnit:d,field:u,as:m});const v=fe11(a)&&a.type!==bn6&&"time";v&&(c===Gn8||c===Dt8?y.formatType=v:zd(c)?y.legend={formatType:v,...y.legend}:Y26(c)&&(y.axis={formatType:v,...y.axis}));}o[c]=y;}else n.push(u),o[c]=e[c];}else o[c]=e[c];}),{bins:i,timeUnits:r,aggregate:s,groupby:n,encoding:o};}function _h(e,t,n){const i=Id(t,n);if(i){if(i==="binned"){const r=e[t===Ce8?H21:Q26];return!!(S26(r)&&S26(e[t])&&re17(r.bin));}}else return!1;return!0;}function kh(e,t,n,i){const r={};for(const s of b23(e))ba1(s)||x19(wp(s));for(let s of Td){if(!e[s])continue;const o=e[s];if(Xn9(s)){const a=Nd(s),c=r[a];if(S26(c)&&vg(c.type)&&S26(o)&&!c.timeUnit){x19(mp(a));continue;}}if(s==="angle"&&t==="arc"&&!e.theta&&(x19(hp),s=$e9),!_h(e,s,t)){x19(Ri3(s,t));continue;}if(s===st12&&t==="line"){const a=Ie8(e[s]);if(a?.aggregate){x19(vp);continue;}}if(s===ge8&&(n?"fill"in e:"stroke"in e)){x19(Ga1("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue;}if(s===Vn7||s===hn9&&!w1(o)&&!Re11(o)||s===Dt8&&w1(o)){if(o){if(s===hn9){const a=e[s];if(Mc(a)){r[s]=a;continue;}}r[s]=p(o).reduce((a,c)=>(S26(c)?a.push(Os1(c,s)):x19(rs1(c,s)),a),[]);}}else{if(s===Dt8&&o===null)r[s]=null;else if(!S26(o)&&!Ke8(o)&&!Re11(o)&&!ti5(o)&&!$19(o)){x19(rs1(o,s));continue;}r[s]=qc(o,s,i);}}return r;}function tr3(e,t){const n={};for(const i of b23(e)){const r=qc(e[i],i,t,{compositeMark:!0});n[i]=r;}return n;}function Ch(e){const t=[];for(const n of b23(e))if(Kt9(e,n)){const i=e[n],r=p(i);for(const s of r)S26(s)?t.push(s):Vi3(s)&&t.push(s.condition);}return t;}function Ps1(e,t,n){if(!e)return;for(const i of b23(e)){const r=e[i];if(w1(r))for(const s of r)t.call(n,s,i);else t.call(n,r,i);}}function Fh(e,t,n,i){return e?b23(e).reduce((r,s)=>{const o=e[s];return w1(o)?o.reduce((a,c)=>t.call(i,a,c,s),r):t.call(i,r,o,s);},n):n;}function nu(e,t){return b23(t).reduce((n,i)=>{switch(i){case H21:case Q26:case Ci3:case Ni3:case Fi2:case Ce8:case Ue8:case xt8:case gn9:case $e9:case rt13:case Fe10:case it13:case Ne9:case Te9:case Ae9:case Ee7:case Gn8:case he9:case Mt9:case Dt8:return n;case hn9:if(e==="line"||e==="trail")return n;case Vn7:case ki3:{const r=t[i];if(w1(r)||S26(r))for(const s of p(r))s.aggregate||n.push(w23(s,{}));return n;}case st12:if(e==="trail")return n;case ge8:case Be7:case We7:case ot12:case St8:case vt8:case $t10:case wt7:{const r=Ie8(t[i]);return r&&!r.aggregate&&n.push(w23(r,{})),n;}}},[]);}function Nh(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(w1(t)){for(const s of t)s.aggregate?(i||(i=[]),i.push(s)):(r||(r=[]),r.push(s));i&&(n.tooltip=i);}else t.aggregate?n.tooltip=t:r=t;return w1(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n};}function zs1(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:o,titlePrefix:a})=>{const c=i?` of ${Rs1(t)}`:"";return{field:o+t.field,type:t.type,title:$19(a)?{signal:`${a}"${escape(c)}"`}:a+c};}),s=Ch(n).map(fh);return{tooltip:[...r,...je9(s,P25)]};}function Rs1(e){const{title:t,field:n}=e;return X26(t,n);}function Is1(e,t,n,i,r){const{scale:s,axis:o}=n;return({partName:a,mark:c,positionPrefix:u,endPositionPrefix:l=void 0,extraEncoding:f={}})=>{const d=Rs1(n);return iu(e,a,r,{mark:c,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...X1(l)?{[`${t}2`]:{field:`${l}_${n.field}`}}:{},...i,...f}});};}function iu(e,t,n,i){const{clip:r,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Ye7(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(t)}`,...In(e[t])?{}:e[t]}}]:[];}function ru1(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",s=i[r],o=i[`${r}2`],a=i[`${r}Error`],c=i[`${r}Error2`];return{continuousAxisChannelDef:nr2(s,n),continuousAxisChannelDef2:nr2(o,n),continuousAxisChannelDefError:nr2(a,n),continuousAxisChannelDefError2:nr2(c,n),continuousAxis:r};}function nr2(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&x19(Kp(n,t)),i;}else return e;}function su1(e,t){const{mark:n,encoding:i}=e,{x:r,y:s}=i;if(Ye7(n)&&n.orient)return n.orient;if(Tt10(r)){if(Tt10(s)){const o=S26(r)&&r.aggregate,a=S26(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return _n7(s)&&!_n7(r)?"horizontal":"vertical";}return"horizontal";}else{if(Tt10(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`);}}const ir2="boxplot",Th=["box","median","outliers","rule","ticks"],Ah=new er2(ir2,au1);function ou1(e){return V(e)?"tukey":e;}function au1(e,{config:t}){e={...e,encoding:tr3(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:s,...o}=e,a=Ye7(n)?n:{type:n};r&&x19(Ua1("boxplot"));const c=a.extent??t.boxplot.extent,u=R23("size",a,t),l=a.invalid,f=ou1(c),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:k,ticksOrient:_,boxOrient:T,customTooltipWithoutAggregatedField:L}=Oh(e,c,t),ue=dn10(g.field),{color:ne,size:mt,...de}=k,yt=jf=>Is1(a,m,g,jf,t.boxplot),sn=yt(de),hi=yt(k),mi=(M1(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",yi=yt({...de,...mt?{size:mt}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...ne||{value:mi}}}}),jn=zs1([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,k),Bo={type:"tick",color:"black",opacity:1,orient:_,invalid:l,aria:!1},bi=f==="min-max"?jn:zs1([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,k),Wo=[...sn({partName:"rule",mark:{type:"rule",invalid:l,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:bi}),...sn({partName:"rule",mark:{type:"rule",invalid:l,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:bi}),...sn({partName:"ticks",mark:Bo,positionPrefix:"lower_whisker",extraEncoding:bi}),...sn({partName:"ticks",mark:Bo,positionPrefix:"upper_whisker",extraEncoding:bi})],Ho=[...f!=="tukey"?Wo:[],...hi({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:T,invalid:l,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:jn}),...yi({partName:"median",mark:{type:"tick",invalid:l,...M1(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:jn})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(h),layer:Ho};const qo=`datum["lower_box_${g.field}"]`,Go=`datum["upper_box_${g.field}"]`,Vo=`(${Go} - ${qo})`,Xo=`${qo} - ${c} * ${Vo}`,Yo=`${Go} + ${c} * ${Vo}`,xi=`datum["${g.field}"]`,Lf={joinaggregate:cu1(g.field),groupby:y},Ko={transform:[{filter:`(${Xo} <= ${xi}) && (${xi} <= ${Yo})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${ue}`},{op:"max",field:g.field,as:`upper_whisker_${ue}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${ue}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${ue}`},...v],groupby:y}],layer:Wo},{tooltip:WS,...Mf}=de,{scale:Qo,axis:Df}=g,Zo=Rs1(g),Jo=pe9(Df,["title"]),ea=iu(a,"outliers",t.boxplot,{transform:[{filter:`(${xi} < ${Xo}) || (${xi} > ${Yo})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...Zo!==void 0?{title:Zo}:{},...Qo!==void 0?{scale:Qo}:{},...M20(Jo)?{}:{axis:Jo}},...Mf,...ne?{color:ne}:{},...L?{tooltip:L}:{}}})[0];let Si;const ta=[...d,...p,Lf];return ea?Si={transform:ta,layer:[ea,Ko]}:(Si=Ko,Si.transform.unshift(...ta)),{...o,layer:[Si,{transform:h,layer:Ho}]};}function cu1(e){const t=dn10(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}];}function Oh(e,t,n){const i=su1(e,ir2),{continuousAxisChannelDef:r,continuousAxis:s}=ru1(e,i,ir2),o=r.field,a=dn10(o),c=ou1(t),u=[...cu1(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(c==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(c==="min-max"?"upper_whisker_":"max_")+a}],l=c==="min-max"||c==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:p,filteredEncoding:h}=Nh(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:k}=tu1(h,n),_=i==="vertical"?"horizontal":"vertical",T=i,L=[...g,...m,{aggregate:[...y,...u],groupby:v},...l];return{bins:g,timeUnits:m,transform:L,groupby:v,aggregate:y,continuousAxisChannelDef:r,continuousAxis:s,encodingWithoutContinuousAxis:k,ticksOrient:_,boxOrient:T,customTooltipWithoutAggregatedField:p};}const Ls1="errorbar",Ph=["ticks","rule"],zh=new er2(Ls1,uu1);function uu1(e,{config:t}){e={...e,encoding:tr3(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:c,tooltipEncoding:u}=lu1(e,Ls1,t);delete s.size;const l=Is1(a,r,i,s,t.errorbar),f=a.thickness,d=a.size,p={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},h=[...l({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:u}),...l({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:u}),...l({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...c,transform:n,...h.length>1?{layer:h}:{...h[0]}};}function Rh(e,t){const{encoding:n}=e;if(Ih(n))return{orient:su1(e,t),inputType:"raw"};const i=Lh(n),r=Mh(n),s=n.x,o=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,c=n.y2;if(F24(a)&&F24(c))throw new Error(`${t} cannot have both x2 and y2`);if(F24(a)){if(Tt10(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`);}else if(F24(c)){if(Tt10(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`);}throw new Error("No ranged axis");}else{const a=n.xError,c=n.xError2,u=n.yError,l=n.yError2;if(F24(c)&&!F24(a))throw new Error(`${t} cannot have xError2 without xError`);if(F24(l)&&!F24(u))throw new Error(`${t} cannot have yError2 without yError`);if(F24(a)&&F24(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(F24(a)){if(Tt10(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative");}else if(F24(u)){if(Tt10(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative");}throw new Error("No ranged axis");}}function Ih(e){return(F24(e.x)||F24(e.y))&&!F24(e.x2)&&!F24(e.y2)&&!F24(e.xError)&&!F24(e.xError2)&&!F24(e.yError)&&!F24(e.yError2);}function Lh(e){return F24(e.x2)||F24(e.y2);}function Mh(e){return F24(e.xError)||F24(e.xError2)||F24(e.yError)||F24(e.yError2);}function lu1(e,t,n){const{mark:i,encoding:r,params:s,projection:o,...a}=e,c=Ye7(i)?i:{type:i};s&&x19(Ua1(t));const{orient:u,inputType:l}=Rh(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:g}=ru1(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:k}=Dh(c,f,d,p,h,l,t,n),{[g]:_,[g==="x"?"x2":"y2"]:T,[g==="x"?"xError":"yError"]:L,[g==="x"?"xError2":"yError2"]:ue,...ne}=r,{bins:mt,timeUnits:de,aggregate:yt,groupby:sn,encoding:hi}=tu1(ne,n),mi=[...yt,...m],yi=l!=="raw"?[]:sn,jn=zs1(v,f,hi,k);return{transform:[...a.transform??[],...mt,...de,...mi.length===0?[]:[{aggregate:mi,groupby:yi}],...y],groupby:yi,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:hi,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:a,tooltipEncoding:jn};}function Dh(e,t,n,i,r,s,o,a){let c=[],u=[];const l=t.field;let f,d=!1;if(s==="raw"){const p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!==(h==="iqr")&&x19(Yp(p,h,o)),h==="stderr"||h==="stdev")c=[{op:h,field:l,as:`extent_${l}`},{op:p,field:l,as:`center_${l}`}],u=[{calculate:`datum["center_${l}"] + datum["extent_${l}"]`,as:`upper_${l}`},{calculate:`datum["center_${l}"] - datum["extent_${l}"]`,as:`lower_${l}`}],f=[{fieldPrefix:"center_",titlePrefix:Hn8(p)},{fieldPrefix:"upper_",titlePrefix:fu1(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:fu1(p,h,"-")}],d=!0;else{let g,m,y;h==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),c=[{op:m,field:l,as:`lower_${l}`},{op:y,field:l,as:`upper_${l}`},{op:g,field:l,as:`center_${l}`}],f=[{fieldPrefix:"upper_",titlePrefix:$n9({field:l,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:$n9({field:l,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:$n9({field:l,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}];}}else{(e.center||e.extent)&&x19(Xp(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${l}`},{calculate:`datum["${l}"]`,as:`lower_${l}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:l}],u=[{calculate:`datum["${l}"] + datum["${i.field}"]`,as:`upper_${l}`}],r?u.push({calculate:`datum["${l}"] + datum["${r.field}"]`,as:`lower_${l}`}):u.push({calculate:`datum["${l}"] - datum["${i.field}"]`,as:`lower_${l}`}));for(const p of u)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:Lt9(Lt9(p.calculate,'datum["',""),'"]',"")});}return{postAggregateCalculates:u,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d};}function fu1(e,t,n){return`${Hn8(e)} ${n} ${t}`;}const Ms1="errorband",jh=["band","borders"],Uh=new er2(Ms1,du1);function du1(e,{config:t}){e={...e,encoding:tr3(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:c}=lu1(e,Ms1,t),u=o,l=Is1(u,r,i,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},p={type:f?"line":"rule"};const h={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...h,ariaRoleDescription:"errorband"},p={...p,...h,aria:!1}):u.interpolate?x19(Ka1("interpolate")):u.tension&&x19(Ka1("tension")),{...a,transform:n,layer:[...l({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...l({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...l({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]};}const pu1={};function Ds1(e,t,n){const i=new er2(e,t);pu1[e]={normalizer:i,parts:n};}function Bh(){return b23(pu1);}Ds1(ir2,au1,Th),Ds1(Ls1,uu1,Ph),Ds1(Ms1,du1,jh);const Wh=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],gu1={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},hu1={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Hh=b23(gu1),qh=b23(hu1),Gh={header:1,headerRow:1,headerColumn:1,headerFacet:1},mu1=b23(Gh),yu1=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Vh={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Xh={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Le7="_vgsid_",Yh={point:{on:"click",fields:[Le7],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function js1(e){return e==="legend"||!!e?.legend;}function Us1(e){return js1(e)&&M1(e);}function Bs1(e){return!!e?.select;}function bu1(e){const t=[];for(const n of e||[]){if(Bs1(n))continue;const{expr:i,bind:r,...s}=n;if(r&&i){const o={...s,bind:r,init:i};t.push(o);}else{const o={...s,...i?{update:i}:{},...r?{bind:r}:{}};t.push(o);}}return t;}function Kh(e){return rr3(e)||Hs1(e)||Ws1(e);}function Ws1(e){return"concat"in e;}function rr3(e){return"vconcat"in e;}function Hs1(e){return"hconcat"in e;}function xu1({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position";}function Qe10(e){return M1(e)&&e.step!==void 0;}function Su1(e){return e.view||e.width||e.height;}const Qh={align:1,bounds:1,center:1,columns:1,spacing:1},Zh=b23(Qh);function Jh(e,t,n){const i=n[t],r={},{spacing:s,columns:o}=i;s!==void 0&&(r.spacing=s),o!==void 0&&(Gi3(e)&&!ei5(e.facet)||Ws1(e))&&(r.columns=o),rr3(e)&&(r.columns=1);for(const a of Zh)if(e[a]!==void 0)if(a==="spacing"){const c=e[a];r[a]=V(c)?c:{row:c.row??s,column:c.column??s};}else r[a]=e[a];return r;}function qs1(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"];}function sr2(e,t){const n=or3(e,t);return Qe10(n)?n.step:wu1;}function or3(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return X26(n,{step:e.step});}const wu1=20,em={continuousWidth:200,continuousHeight:200,step:wu1},tm={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:em,mark:Gg,arc:{},area:{},bar:Yg,circle:{},geoshape:{},image:{},line:{},point:{},rect:Kg,rule:{color:"black"},square:{},text:{color:"black"},tick:Qg,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Cg,projection:{},legend:Vh,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Yh,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},dt9=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],$u1={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Eu1={blue:dt9[0],orange:dt9[1],red:dt9[2],teal:dt9[3],green:dt9[4],yellow:dt9[5],purple:dt9[6],pink:dt9[7],brown:dt9[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function nm(e={}){return{signals:[{name:"color",value:M1(e)?{...Eu1,...e}:Eu1}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}};}function im(e){return{signals:[{name:"fontSize",value:M1(e)?{...$u1,...e}:$u1}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}};}function rm(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}};}function _u1(e){const t=b23(e||{}),n={};for(const i of t){const r=e[i];n[i]=ri5(r)?Fa1(r):xe8(r);}return n;}function sm(e){const t=b23(e),n={};for(const i of t)n[i]=_u1(e[i]);return n;}const om=[...wc,...Qc1,...mu1,"background","padding","legend","lineBreak","scale","style","title","view"];function ku1(e={}){const{color:t,font:n,fontSize:i,selection:r,...s}=e,o=rn({},C26(tm),n?rm(n):{},t?nm(t):{},i?im(i):{},s||{});r&&S1(o,"selection",r,!0);const a=pe9(o,om);for(const c of["background","lineBreak","padding"])o[c]&&(a[c]=xe8(o[c]));for(const c of wc)o[c]&&(a[c]=oe14(o[c]));for(const c of Qc1)o[c]&&(a[c]=_u1(o[c]));for(const c of mu1)o[c]&&(a[c]=oe14(o[c]));if(o.legend&&(a.legend=oe14(o.legend)),o.scale){const{invalid:c,...u}=o.scale,l=oe14(c,{level:1});a.scale={...oe14(u),...b23(l).length>0?{invalid:l}:{}};}return o.style&&(a.style=sm(o.style)),o.title&&(a.title=oe14(o.title)),o.view&&(a.view=oe14(o.view)),a;}const am=new Set(["view",...jg]),cm=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],um={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...qg};function lm(e){e=C26(e);for(const t of cm)delete e[t];if(e.axis)for(const t in e.axis)ri5(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Wh)delete e.legend[t];if(e.mark){for(const t of vc)delete e.mark[t];e.mark.tooltip&&M1(e.mark.tooltip)&&delete e.mark.tooltip;}e.params&&(e.signals=(e.signals||[]).concat(bu1(e.params)),delete e.params);for(const t of am){for(const i of vc)delete e[t][i];const n=um[t];if(n)for(const i of n)delete e[t][i];dm(e,t);}for(const t of Bh())delete e[t];fm(e);for(const t in e)M1(e[t])&&M20(e[t])&&delete e[t];return M20(e)?void 0:e;}function fm(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=Ca1(e.title);M20(t)||(e.style["group-title"]={...e.style["group-title"],...t}),M20(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),M20(i)?delete e.title:e.title=i;}function dm(e,t,n,i){const r=i?e[t][i]:e[t];t==="view"&&(n="cell");const s={...r,...e.style[n??t]};M20(s)||(e.style[n??t]=s),i||delete e[t];}function ar2(e){return"layer"in e;}function pm(e){return"repeat"in e;}function gm(e){return!w1(e.repeat)&&e.repeat.layer;}class Gs1{map(t,n){return Gi3(t)?this.mapFacet(t,n):pm(t)?this.mapRepeat(t,n):Hs1(t)?this.mapHConcat(t,n):rr3(t)?this.mapVConcat(t,n):Ws1(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n);}mapLayerOrUnit(t,n){if(ar2(t))return this.mapLayer(t,n);if(ft11(t))return this.mapUnit(t,n);throw new Error(ns1(t));}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))};}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))};}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))};}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(s=>this.map(s,n))};}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)};}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)};}}const hm={zero:1,center:1,normalize:1};function mm(e){return e in hm;}const ym=new Set([bc,ji2,Di3,Wi2,Bi3,vs1,ws1,Ui2,xc,Ss1]),bm=new Set([ji2,Di3,bc]);function kn7(e){return S26(e)&&vn9(e)==="quantitative"&&!e.bin;}function Cu1(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(i),o=e[t],a=e[r];if(S26(o)&&S26(a))if(kn7(o)&&kn7(a)){if(o.stack)return t;if(a.stack)return r;const c=S26(o)&&!!o.aggregate,u=S26(a)&&!!a.aggregate;if(c!==u)return c?t:r;if(s){if(n==="vertical")return r;if(n==="horizontal")return t;}}else{if(kn7(o))return t;if(kn7(a))return r;}else{if(kn7(o))return s&&n==="vertical"?void 0:t;if(kn7(a))return s&&n==="horizontal"?void 0:r;}return;}function xm(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta";}}function Fu1(e,t){const n=Ye7(e)?e:{type:e},i=n.type;if(!ym.has(i))return null;const r=Cu1(t,"x",n)||Cu1(t,"theta",n);if(!r)return null;const s=t[r],o=S26(s)?w23(s,{}):void 0,a=xm(r),c=[],u=new Set;if(t[a]){const g=t[a],m=S26(g)?w23(g,{}):void 0;m&&m!==o&&(c.push(a),u.add(m));}const l=a==="x"?"xOffset":"yOffset",f=t[l],d=S26(f)?w23(f,{}):void 0;d&&d!==o&&(c.push(l),u.add(d));const p1=Ad.reduce((g,m)=>{if(m!=="tooltip"&&Kt9(t,m)){const y=t[m];for(const v of p(y)){const k=Ie8(v);if(k.aggregate)continue;const _=w23(k,{});(!_||!u.has(_))&&g.push({channel:m,fieldDef:k});}}return g;},[]);let h;return s.stack!==void 0?In(s.stack)?h=s.stack?"zero":null:h=s.stack:bm.has(i)&&(h="zero"),!h||!mm(h)||eu1(t)&&p1.length===0?null:(s?.scale?.type&&s?.scale?.type!==se14.LINEAR&&s?.stack&&x19(qp(s.scale.type)),F24(t[He8(r)])?(s.stack!==void 0&&x19(Hp(r)),null):(S26(s)&&s.aggregate&&!Wd.has(s.aggregate)&&x19(Gp(s.aggregate)),{groupbyChannels:c,groupbyFields:u,fieldChannel:r,impute:s.impute===null?!1:Ft7(i),stackBy:p1,offset:h}));}function Nu1(e,t,n){const i=oe14(e),r=R23("orient",i,n);if(i.orient=$m(i.type,t,r),r!==void 0&&r!==i.orient&&x19(Fp(i.orient,r)),i.type==="bar"&&i.orient){const c=R23("cornerRadiusEnd",i,n);if(c!==void 0){const u=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:Xg[i.orient];for(const l of u)i[l]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd;}}const s=R23("opacity",i,n),o=R23("fillOpacity",i,n);s===void 0&&o===void 0&&(i.opacity=vm(i.type,t));const a=R23("cursor",i,n);return a===void 0&&(i.cursor=Sm(i,t,n)),i;}function Sm(e,t,n){return t.href||e.href||R23("href",e,n)?"pointer":e.cursor;}function vm(e,t){return A22([Bi3,Ss1,vs1,ws1],e)&&!eu1(t)?.7:void 0;}function wm(e,t,{graticule:n}){if(n)return!1;const i=Ge8("filled",e,t),r=e.type;return X26(i,r!==Bi3&&r!==Ui2&&r!==Wi2);}function $m(e,t,n){switch(e){case Bi3:case vs1:case ws1:case xc:case Mg:case Lg:return;}const{x:i,y:r,x2:s,y2:o}=t;switch(e){case ji2:if(S26(i)&&(re17(i.bin)||S26(r)&&r.aggregate&&!i.aggregate))return"vertical";if(S26(r)&&(re17(r.bin)||S26(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(S26(i)&&i.type===qt9&&!U25(i.bin)||Xi2(i))&&S26(r)&&re17(r.bin)?"horizontal":"vertical";if(!o)return(S26(r)&&r.type===qt9&&!U25(r.bin)||Xi2(r))&&S26(i)&&re17(i.bin)?"vertical":"horizontal";}case Wi2:if(s&&!(S26(i)&&re17(i.bin))&&o&&!(S26(r)&&re17(r.bin)))return;case Di3:if(o)return S26(r)&&re17(r.bin)?"horizontal":"vertical";if(s)return S26(i)&&re17(i.bin)?"vertical":"horizontal";if(e===Wi2){if(i&&!r)return"vertical";if(r&&!i)return"horizontal";}case Ui2:case Ss1:{const a=Dc1(i),c=Dc1(r);if(n)return n;if(a&&!c)return e!=="tick"?"horizontal":"vertical";if(!a&&c)return e!=="tick"?"vertical":"horizontal";if(a&&c)return"vertical";{const u=fe11(i)&&i.type===bn6,l=fe11(r)&&r.type===bn6;if(u&&!l)return"vertical";if(!u&&l)return"horizontal";}return;}}return"vertical";}function Em(e){const{point:t,line:n,...i}=e;return b23(i).length>1?i:i.type;}function _m(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:pe9(e[t],["point","line"])});return e;}function Vs1(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?M1(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?M1(t.point)?t.point:{}:void 0;}function Tu(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0;}class km{constructor(){this.name="path-overlay";}hasMatchingType(t,n){if(ft11(t)){const{mark:i,encoding:r}=t,s=Ye7(i)?i:{type:i};switch(s.type){case"line":case"rule":case"trail":return!!Vs1(s,n[s.type],r);case"area":return!!Vs1(s,n[s.type],r)||!!Tu(s,n[s.type]);}}return!1;}run(t,n,i){const{config:r}=n,{params:s,projection:o,mark:a,name:c,encoding:u,...l}=t,f=tr3(u,r),d=Ye7(a)?a:{type:a},p=Vs1(d,r[d.type],f),h=d.type==="area"&&Tu(d,r[d.type]),g=[{name:c,...s?{params:s}:{},mark:Em({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:pe9(f,["shape"])}],m=Fu1(Nu1(d,f,r),f);let y=f;if(m){const{fieldChannel:v,offset:k}=m;y={...f,[v]:{...f[v],...k?{stack:k}:{}}};}return y=pe9(y,["y2","x2"]),h&&g.push({...o?{projection:o}:{},mark:{type:"line",...ln11(d,["clip","interpolate","tension","tooltip"]),...h},encoding:y}),p&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...ln11(d,["clip","tooltip"]),...p},encoding:y}),i({...l,layer:g},{...n,config:_m(r)});}}function Cm(e,t){return t?ei5(e)?zu1(e,t):Au1(e,t):e;}function Xs1(e,t){return t?zu1(e,t):e;}function Ys1(e,t,n){const i=t[e];if(uh(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};x19(cp(i.repeat));return;}return t;}function Au1(e,t){if(e=Ys1("field",e,t),e===void 0)return;if(e===null)return null;if(Ns1(e)&&lt11(e.sort)){const n=Ys1("field",e.sort,t);e={...e,...n?{sort:n}:{}};}return e;}function Ou1(e,t){if(S26(e))return Au1(e,t);{const n=Ys1("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n;}}function Pu1(e,t){if(F24(e)){const n=Ou1(e,t);if(n)return n;if(ti5(e))return{condition:e.condition};}else{if(ni5(e)){const n=Ou1(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r;}}return e;}return;}function zu1(e,t){const n={};for(const i in e)if(g(e,i)){const r=e[i];if(w1(r))n[i]=r.map(s=>Pu1(s,t)).filter(s=>s);else{const s=Pu1(r,t);s!==void 0&&(n[i]=s);}}return n;}class Fm{constructor(){this.name="RuleForRangedLine";}hasMatchingType(t){if(ft11(t)){const{encoding:n,mark:i}=t;if(i==="line"||Ye7(i)&&i.type==="line")for(const r of Fd){const s=jt9(r),o=n[s];if(n[r]&&(S26(o)&&!re17(o.bin)||Ke8(o)))return!0;}}return!1;}run(t,n,i){const{encoding:r,mark:s}=t;return x19(Cp(!!r.x2,!!r.y2)),i({...t,mark:M1(s)?{...s,type:"rule"}:"rule"},n);}}class Nm extends Gs1{constructor(){super(...arguments);this.nonFacetUnitNormalizers=[Ah,zh,Uh,new km,new Fm];}map(t,n){if(ft11(t)){const i=Kt9(t.encoding,tt12),r=Kt9(t.encoding,nt11),s=Kt9(t.encoding,_i4);if(i||r||s)return this.mapFacetedUnit(t,n);}return super.map(t,n);}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,s=Xs1(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{},...s?{encoding:s}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(o,n.config))return c.run(o,n,a);return o;}mapRepeat(t,n){return gm(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n);}mapLayerRepeat(t,n){const{repeat:i,spec:r,...s}=t,{row:o,column:a,layer:c}=i,{repeater:u={},repeaterPrefix:l=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:c},spec:r}},n):{...s,layer:c.map(f=>{const d={...u,layer:f},p=`${(r.name?`${r.name}_`:"")+l}child__layer_${W22(f)}`,h=this.mapLayerOrUnit(r,{...n,repeater:d,repeaterPrefix:p});return h.name=p,h;})};}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:s,...o}=t;!w1(i)&&t.columns&&(t=pe9(t,["columns"]),x19(Ba1("repeat")));const a=[],{repeater:c={},repeaterPrefix:u=""}=n,l=!w1(i)&&i.row||[c?c.row:null],f=!w1(i)&&i.column||[c?c.column:null],d=w1(i)&&i||[c?c.repeat:null];for(const h of d)for(const g of l)for(const m of f){const y={repeat:h,row:g,column:m,layer:c.layer},v=(r.name?`${r.name}_`:"")+u+"child__"+(w1(i)?`${W22(h)}`:(i.row?`row_${W22(g)}`:"")+(i.column?`column_${W22(m)}`:"")),k=this.map(r,{...n,repeater:y,repeaterPrefix:v});k.name=v,a.push(pe9(k,["data"]));}const p=w1(i)?t.columns:i.column?i.column.length:1;return{data:r.data??s,align:"all",...o,columns:p,concat:a};}mapFacet(t,n){const{facet:i}=t;return ei5(i)&&t.columns&&(t=pe9(t,["columns"]),x19(Ba1("facet"))),super.mapFacet(t,n);}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:s,parentProjection:o,config:a}=n,c=Iu({parentProjection:o,projection:r}),u=Ru1({parentEncoding:s,encoding:Xs1(i,n.repeater)});return this.mapUnit({...t,...c?{projection:c}:{},...u?{encoding:u}:{}},{config:a});}mapFacetedUnit(t,n){const{row:i,column:r,facet:s,...o}=t.encoding,{mark:a,width:c,projection:u,height:l,view:f,params:d,encoding:p,...h}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:i,column:r,facet:s},n),y=Xs1(o,n.repeater);return this.mapFacet({...h,...m,facet:g,spec:{...c?{width:c}:{},...l?{height:l}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n);}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:s}=t;if(i||r){s&&x19(_p([...i?[tt12]:[],...r?[nt11]:[]]));const o={},a={};for(const c of[tt12,nt11]){const u=t[c];if(u){const{align:l,center:f,spacing:d,columns:p,...h}=u;o[c]=h;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][c]=u[g]);}}return{facetMapping:o,layout:a};}else{const{align:o,center:a,spacing:c,columns:u,...l}=s;return{facetMapping:Cm(l,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...c?{spacing:c}:{},...u?{columns:u}:{}}};}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:s,projection:o,...a}=t,c={...r,parentEncoding:Ru1({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Iu({parentProjection:i,projection:o})};return super.mapLayer({...a,...t.name?{name:[c.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},c);}}function Ru1({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...b23(e),...b23(t)]);for(const s of r){const o=t[s],a=e[s];if(F24(o)){const c={...a,...o};i[s]=c;}else ni5(o)?i[s]={...o,condition:{...a,...o.condition}}:o||o===null?i[s]=o:(n||Re11(a)||$19(a)||F24(a)||w1(a))&&(i[s]=a);}}else i=t;return!i||M20(i)?void 0:i;}function Iu(e){const{parentProjection:t,projection:n}=e;return t&&n&&x19(gp({parentProjection:t,projection:n})),n??t;}function Ks1(e){return"filter"in e;}function Tm(e){return e?.stop!==void 0;}function Lu1(e){return"lookup"in e;}function Am(e){return"data"in e;}function Om(e){return"param"in e;}function Pm(e){return"pivot"in e;}function zm(e){return"density"in e;}function Rm(e){return"quantile"in e;}function Im(e){return"regression"in e;}function Lm(e){return"loess"in e;}function Mm(e){return"sample"in e;}function Dm(e){return"window"in e;}function jm(e){return"joinaggregate"in e;}function Um(e){return"flatten"in e;}function Bm(e){return"calculate"in e;}function Mu1(e){return"bin"in e;}function Wm(e){return"impute"in e;}function Hm(e){return"timeUnit"in e;}function qm(e){return"aggregate"in e;}function Gm(e){return"stack"in e;}function Vm(e){return"fold"in e;}function Xm(e){return"extent"in e&&!("density"in e)&&!("regression"in e);}function Ym(e){return e.map(t=>Ks1(t)?{filter:un11(t.filter,Sg)}:t);}class Km extends Gs1{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Du1(t,n),super.map(t,n);}mapLayerOrUnit(t,n){if(t=Du1(t,n),t.encoding){const i={};for(const[r,s]of bt9(t.encoding))i[r]=ju1(s,n);t={...t,encoding:i};}return super.mapLayerOrUnit(t,n);}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:bt9(i).map(([s,o])=>{const{init:a,bind:c,empty:u,...l}=o;l.type==="single"?(l.type="point",l.toggle=!1):l.type==="multi"&&(l.type="point"),n.emptySelections[s]=u!=="none";for(const f of ie14(n.selectionPredicates[s]??{}))f.empty=u!=="none";return{name:s,value:a,select:l,bind:c};})}:t;}}function Du1(e,t){const{transform:n,...i}=e;if(n){const r=n.map(s=>{if(Ks1(s))return{filter:Qs1(s,t)};if(Mu1(s)&&Ut8(s.bin))return{...s,bin:Uu1(s.bin)};if(Lu1(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s;}return s;});return{...i,transform:r};}return e;}function ju1(e,t){const n=C26(e);if(S26(n)&&Ut8(n.bin)&&(n.bin=Uu1(n.bin)),Yt9(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}};}if(ti5(n))if(w1(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:s,test:o,...a}=i;return s?i:{...a,test:Qs1(i,t)};});else{const{selection:i,param:r,test:s,...o}=ju1(n.condition,t);n.condition=r?n.condition:{...o,test:Qs1(n.condition,t)};}return n;}function Uu1(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}};}return e;}function Qs1(e,t){const n=i=>un11(i,r=>{var s;const o=t.emptySelections[r]??!0,a={param:r,empty:o};return(s=t.selectionPredicates)[r]??(s[r]=[]),t.selectionPredicates[r].push(a),a;});return e.selection?n(e.selection):un11(e.test||e.filter,i=>i.selection?n(i.selection):i);}class Zs1 extends Gs1{map(t,n){const i=n.selections??[];if(t.params&&!ft11(t)){const r=[];for(const s of t.params)Bs1(s)?i.push(s):r.push(s);t.params=r;}return n.selections=i,super.map(t,n);}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),s=[];for(const o of i)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(X1(a)&&(a===t.name||r.includes(a))||w1(a)&&a.map(c=>r.indexOf(c)).every((c,u,l)=>c!==-1&&(u===0||c>l[u-1])))&&s.push(o);return s.length&&(t.params=s),t;}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Zs1.prototype[e];Zs1.prototype[e]=function(n,i){return t.call(this,n,Qm(n,i));};}function Qm(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t;}function Bu1(e,t){t===void 0&&(t=ku1(e.config));const n=ty(e,t),{width:i,height:r}=e,s=ny(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}};}const Zm=new Nm,Jm=new Km,ey=new Zs1;function ty(e,t={}){const n={config:t};return ey.map(Zm.map(Jm.map(e,n),n),n);}function Wu1(e){return X1(e)?{type:e}:e??{};}function ny(e,t,n){let{width:i,height:r}=t;const s=ft11(e)||ar2(e),o={};s?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(x19(La1("width")),i=void 0),r=="container"&&(x19(La1("height")),r=void 0));const a={type:"pad",...o,...n?Wu1(n.autosize):{},...Wu1(e.autosize)};return a.type==="fit"&&!s&&(x19(Qd),a.type="pad"),i=="container"&&!(a.type=="fit"||a.type=="fit-x")&&x19(Ma1("width")),r=="container"&&!(a.type=="fit"||a.type=="fit-y")&&x19(Ma1("height")),be8(a,{type:"pad"})?void 0:a;}function iy(e){return e==="fit"||e==="fit-x"||e==="fit-y";}function ry(e){return e?`fit-${Ai3(e)}`:"fit";}const sy=["background","padding"];function Hu1(e,t){const n={};for(const i of sy)e&&e[i]!==void 0&&(n[i]=xe8(e[i]));return t&&(n.params=e.params),n;}class pt10{constructor(t={},n={}){this.explicit=t,this.implicit=n;}clone(){return new pt10(C26(this.explicit),C26(this.implicit));}combine(){return{...this.explicit,...this.implicit};}get(t){return X26(this.explicit[t],this.implicit[t]);}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0};}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i);}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this;}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1);}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0);}copyAll(t){for(const n of b23(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i);}}}function Ze6(e){return{explicit:!0,value:e};}function Se7(e){return{explicit:!1,value:e};}function qu1(e){return(t,n,i,r)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:cr2(t,n,i,r);};}function cr2(e,t,n,i){return e.explicit&&t.explicit&&x19(Lp(n,i,e.value,t.value)),e;}function At10(e,t,n,i,r=cr2){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:be8(e.value,t.value)?e:r(e,t,n,i);}class oy extends pt10{constructor(t={},n={},i=!1){super(t,n);this.explicit=t,this.implicit=n,this.parseNothing=i;}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t;}}function Cn9(e){return"url"in e;}function si5(e){return"values"in e;}function Gu1(e){return"name"in e&&!Cn9(e)&&!si5(e)&&!Ot7(e);}function Ot7(e){return e&&(Vu1(e)||Xu1(e)||Js1(e));}function Vu1(e){return"sequence"in e;}function Xu1(e){return"sphere"in e;}function Js1(e){return"graticule"in e;}var G29;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid";})(G29||(G29={}));function Yu1({invalid:e,isPath:t}){const n=Ec(e,{isPath:t});switch(n){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"};}}function ay(e){const{marks:t,scales:n}=Yu1(e);return t===n?G29.Main:n==="include-invalid-values"?G29.PreFilterInvalid:G29.PostFilterInvalid;}function Ku1(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=we11(r.field),r;}function Qt8(e,t=!0,n=A1){if(w1(e)){const i=e.map(r=>Qt8(r,t,n));return t?`[${i.join(", ")}]`:i;}else if(Bt8(e))return n(t?Wt8(e):cg(e));return t?n(D20(e)):e;}function cy(e,t){for(const n of ie14(e.component.selection??{})){const i=n.name;let r=`${i}${zt8}, ${n.resolve==="global"?"true":`{unit: ${Jt8(e)}}`}`;for(const s of hr2){if(!s.defined(n))continue;s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(r=s.modifyExpr(e,n,r));}t.push({name:i+My,on:[{events:{signal:n.name+zt8},update:`modify(${Z1(n.name+Zt10)}, ${r})`}]});}return eo1(t);}function uy(e,t){if(e.component.selection&&b23(e.component.selection).length){const n=Z1(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:v19("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]});}return eo1(t);}function ly(e,t){let n=!1;for(const i of ie14(e.component.selection??{})){const r=i.name,s=Z1(r+Zt10),o=t.filter(a=>a.name===r);if(o.length===0){const a=i.resolve==="global"?"union":i.resolve,c=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${_l}(${s}, ${Z1(a)}${c}`});}n=!0;for(const a of hr2)a.defined(i)&&a.topLevelSignals&&(t=a.topLevelSignals(e,i,t));}if(n){const i=t.filter(r=>r.name==="unit");i.length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]});}return eo1(t);}function fy(e,t){const n=[...t],i=Jt8(e,{escape:!1});for(const r of ie14(e.component.selection??{})){const s={name:r.name+Zt10};if(r.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Le7}}]),r.init){const a=r.project.items.map(Ku1);s.values=r.project.hasSelectionId?r.init.map(c=>({unit:i,[Le7]:Qt8(c,!1)[0]})):r.init.map(c=>({unit:i,fields:a,values:Qt8(c,!1)}));}const o=n.filter(a=>a.name===r.name+Zt10);o.length||n.push(s);}return n;}function Qu1(e,t){for(const n of ie14(e.component.selection??{}))for(const i of hr2)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t;}function dy(e,t){for(const n of e.children)q30(n)&&(t=Qu1(n,t));return t;}function py(e,t,n,i){const r=Tl(e,t.param,t);return{signal:Pe7(n.get("type"))&&w1(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r};}function eo1(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t));}class I26{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t);}clone(){throw new Error("Cannot clone node");}get parent(){return this._parent;}set parent(t){this._parent=t,t&&t.addChild(this);}get children(){return this._children;}numChildren(){return this._children.length;}addChild(t,n){if(this._children.includes(t)){x19(fp);return;}n!==void 0?this._children.splice(n,0,t):this._children.push(t);}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n;}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++);}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this;}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this;}}class ye9 extends I26{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t;}constructor(t,n,i,r){super(t,n);this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0);}dependentFields(){return new Set;}producedFields(){return new Set;}hash(){return this._hash===void 0&&(this._hash=`Output ${ua1()}`),this._hash;}getSource(){return this.refCounts[this._name]++,this._source;}isRequired(){return!!this.refCounts[this._name];}setSource(t){this._source=t;}}function to2(e){return e.as!==void 0;}function Zu1(e){return`${e}_end`;}class Je8 extends I26{clone(){return new Je8(null,C26(this.timeUnits));}constructor(t,n){super(t);this.timeUnits=n;}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s,o)=>{const{field:a,timeUnit:c}=s;if(c){let u;if(Ht7(c)){if(q30(n)){const{mark:l,markDef:f,config:d}=n,p=Nt9({fieldDef:s,markDef:f,config:d});(Qn7(l)||!!p)&&(u={timeUnit:Z26(c),field:a});}}else u={as:w23(s,{forAs:!0}),field:a,timeUnit:c};if(q30(n)){const{mark:l,markDef:f,config:d}=n,p=Nt9({fieldDef:s,markDef:f,config:d});Qn7(l)&&Y26(o)&&p!==.5&&(u.rectBandPosition=p);}u&&(r[P25(u)]=u);}return r;},{});return M20(i)?null:new Je8(t,i);}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},s=Z26(i),o={...r,timeUnit:s};return new Je8(t,{[P25(o)]:o});}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove();}removeFormulas(t){const n={};for(const[i,r]of bt9(this.timeUnits)){const s=to2(r)?r.as:`${r.field}_end`;t.has(s)||(n[i]=r);}this.timeUnits=n;}producedFields(){return new Set(ie14(this.timeUnits).map(t=>to2(t)?t.as:Zu1(t.field)));}dependentFields(){return new Set(ie14(this.timeUnits).map(t=>t.field));}hash(){return`TimeUnit ${P25(this.timeUnits)}`;}assemble(){const t=[];for(const n of ie14(this.timeUnits)){const{rectBandPosition:i}=n,r=Z26(n.timeUnit);if(to2(n)){const{field:s,as:o}=n,{unit:a,utc:c,...u}=r,l=[o,`${o}_end`];t.push({field:we11(s),type:"timeunit",...a?{units:Li3(a)}:{},...c?{timezone:"utc"}:{},...u,as:l}),t.push(...el1(l,i,r));}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=Ju1({timeUnit:r,field:o}),c=Zu1(o);t.push({type:"formula",expr:a,as:c}),t.push(...el1([o,c],i,r));}}return t;}}const ur2="offsetted_rect_start",lr3="offsetted_rect_end";function Ju1({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,s=ic(i),{part:o,step:a}=ac(s,e.step),c=r?"utcOffset":"timeOffset",u=`${c}('${o}', datum['${t}'], ${n?-a:a})`;return u;}function el1([e,t],n,i){if(n!==void 0&&n!==.5){const r=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:tl1([Ju1({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${ur2}`},{type:"formula",expr:tl1([r,s],n+.5),as:`${e}_${lr3}`}];}return[];}function tl1([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`;}const oi5="_tuple_fields";class gy{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1;}}const hy={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new gy),s={},o={},a=new Set,c=(h,g)=>{const m=g==="visual"?h.channel:h.field;let y=W22(`${i}_${m}`);for(let v=1;a.has(y);v++)y=W22(`${i}_${m}_${v}`);return a.add(y),{[g]:y};},u=t.type,l=e.config.selection[u],f=n.value!==void 0?p(n.value):null;let{fields:d,encodings:p1}=M1(n.select)?n.select:{};if(!d&&!p1&&f)for(const h of f){if(!M1(h))continue;for(const g of b23(h))Cd(g)?(p1||(p1=[])).push(g):u==="interval"?(x19(ap),p1=l.encodings):(d??(d=[])).push(g);}!d&&!p1&&(p1=l.encodings,"fields"in l&&(d=l.fields));for(const h of p1??[]){const g=e.fieldDef(h);if(g){let m=g.field;if(g.aggregate){x19(Zd(h,g.aggregate));continue;}else if(!m){x19(ja1(h));continue;}if(g.timeUnit&&!Ht7(g.timeUnit)){m=e.vgField(h);const y={timeUnit:g.timeUnit,as:m,field:g.field};o[P25(y)]=y;}if(!s[m]){const y=u==="interval"&&qe8(h)&&Pe7(e.getScaleComponent(h).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:h,type:y,index:r.items.length};v.signals={...c(v,"data"),...c(v,"visual")},r.items.push(s[m]=v),r.hasField[m]=s[m],r.hasSelectionId=r.hasSelectionId||m===Le7,ma1(h)?(v.geoChannel=h,v.channel=ha1(h),r.hasChannel[v.channel]=s[m]):r.hasChannel[h]=s[m];}}else x19(ja1(h));}for(const h of d??[]){if(r.hasField[h])continue;const g={type:"E",field:h,index:r.items.length};g.signals={...c(g,"data")},r.items.push(g),r.hasField[h]=g,r.hasSelectionId=r.hasSelectionId||h===Le7;}f&&(t.init=f.map(h=>r.items.map(g=>M1(h)?h[g.geoChannel||g.channel]!==void 0?h[g.geoChannel||g.channel]:h[g.field]:h))),M20(o)||(r.timeUnit=new Je8(null,o));},signals:(e,t,n)=>{const i=t.name+oi5,r=n.filter(s=>s.name===i);return r.length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(Ku1)});}},gt9={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!qe8(r))continue;const s=e.getScaleComponent(r),o=s?s.get("type"):void 0;if(o=="sequential"&&x19(np),!s||!Pe7(o)){x19(tp);continue;}s.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i);}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||io1(e)||i.length===0)return n;const r=n.find(o=>o.name===t.name);let s=r.update;if(s.includes(_l))r.update=`{${i.map(o=>`${Z1(we11(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const a=`${Z1(we11(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`);}r.update=s;}return n.concat(i.map(o=>({name:o.signals.data})));},signals:(e,t,n)=>{if(e.parent&&!io1(e))for(const i of t.scales){const r=n.find(s=>s.name===i.signals.data);r.push="outer",delete r.value,delete r.update;}return n;}};function no2(e,t){const n=Z1(e.scaleName(t));return`domain(${n})`;}function io1(e){return e.parent&&Mn12(e.parent)&&(!e.parent.parent??io1(e.parent.parent));}const Fn9="_brush",nl1="_scale_trigger",ai5="geo_interval_init_tick",il1="_init",my="_center",yy={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...M1(n.select)?n.select:{}};r.fields=[Le7],r.encodings||(r.encodings=n.value?b23(n.value):[Te9,Ne9]),n.select={type:"interval",...r};}if(t.translate&&!gt9.defined(t)){const r=`!event.item || event.item.mark.name !== ${Z1(t.name+Fn9)}`;for(const s of t.events){if(!s.between){x19(`${s} is not an ordered event stream for interval selections.`);continue;}const o=p((i=s.between[0]).filter??(i.filter=[]));o.includes(r)||o.push(r);}}},signals:(e,t,n)=>{const i=t.name,r=i+zt8,s=ie14(t.project.hasChannel).filter(a=>a.channel===H21||a.channel===Q26),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,c)=>a.concat(by(e,t,c,o&&o[c.index])),[])),e.hasProjection){const a=Z1(e.projectionName()),c=e.projectionName()+my,{x:u,y:l}=t.project.hasChannel,f=u&&u.signals.visual,d=l&&l.signals.visual,p=u?o&&o[u.index]:`${c}[0]`,h=l?o&&o[l.index]:`${c}[1]`,g=T=>e.getSizeSignalRef(T).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;if(o&&(n.unshift({name:i+il1,init:`[scale(${a}, [${u?p[0]:p}, ${l?h[0]:h}]), scale(${a}, [${u?p[1]:p}, ${l?h[1]:h}])]`}),!u||!l)){const T=n.find(L=>L.name===c);T||n.unshift({name:c,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`});}const y=`intersect(${m}, {markname: ${Z1(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Jt8(e)}}`,k=`vlSelectionTuples(${y}, ${v})`,_=s.map(T=>T.signals.visual);return n.concat({name:r,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:ai5}]:[]],update:k}]});}else{if(!gt9.defined(t)){const u=i+nl1,l=s.map(f=>{const d=f.channel,{data:p,visual:h}=f.signals,g=Z1(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=Pe7(m)?"+":"";return`(!isArray(${p}) || (${y}invert(${g}, ${h})[0] === ${y}${p}[0] && ${y}invert(${g}, ${h})[1] === ${y}${p}[1]))`;});l.length&&n.push({name:u,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:l.join(" && ")+` ? ${u} : {}`}]});}const a=s.map(u=>u.signals.data),c=`unit: ${Jt8(e)}, fields: ${i+oi5}, values`;return n.concat({name:r,...o?{init:`{${c}: ${Qt8(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${c}: [${a}]} : null`}]}:{}});}},topLevelSignals:(e,t,n)=>{if(q30(e)&&e.hasProjection&&t.init){const i=n.filter(r=>r.name===ai5);i.length||n.unshift({name:ai5,value:null,on:[{events:"timer{1}",update:`${ai5} === null ? {} : ${ai5}`}]});}return n;},marks:(e,t,n)=>{const i=t.name,{x:r,y:s}=t.project.hasChannel,o=r?.signals.visual,a=s?.signals.visual,c=`data(${Z1(t.name+Zt10)})`;if(gt9.defined(t)||!r&&!s)return n;const u={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of b23(u))u[m]=[{test:`${c}.length && ${c}[0].unit === ${Jt8(e)}`,...u[m]},{value:0}];const{fill:l,fillOpacity:f,cursor:d,...p}=t.mark,h=b23(p).reduce((m,y)=>(m[y]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:p[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${i+Fn9}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:l},fillOpacity:{value:f}},update:u}},...n,{name:i+Fn9,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...h}}}];}};function by(e,t,n,i){const r=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Z1(r?e.scaleName(s):e.projectionName()),c=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(s===H21?"width":"height").signal,l=`${s}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${l}, ${l}]`},{events:p,update:`[${o}[0], clamp(${l}, 0, ${u})]`}],[]);if(r){const d=n.signals.data,p=gt9.defined(t),h=e.getScaleComponent(s),g=h?h.get("type"):void 0,m=i?{init:Qt8(i,!0,c)}:{value:[]};return f.push({events:{signal:t.name+nl1},update:Pe7(g)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[{name:o,...m,on:f},{name:d,...i?{init:Qt8(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}];}else{const d=s===H21?0:1,p=t.name+il1,h=i?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[{name:o,...h,on:f}];}}const xy={defined:e=>e.type==="point",signals:(e,t,n)=>{const i=t.name,r=i+oi5,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=ie14(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Fn9):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Jt8(e)}, `;if(t.project.hasSelectionId)u+=`${Le7}: ${o}[${Z1(Le7)}]`;else{const f=s.items.map(d=>{const p=e.fieldDef(d.channel);return p?.bin?`[${o}[${Z1(e.vgField(d.channel,{}))}], ${o}[${Z1(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Z1(d.field)}]`;}).join(", ");u+=`fields: ${r}, values: [${f}]`;}const l=t.events;return n.concat([{name:i+zt8,on:l?[{events:l,update:`${c} ? {${u}} : null`,force:!0}]:[]}]);}};function Nn11({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const s=ti5(t)&&t.condition;let o=[];if(s){const c=p(s);o=c.map(u=>{const l=r(u);if(ch(u)){const{param:f,empty:d}=u,p=Nl(e,{param:f,empty:d});return{test:p,...l};}else{const f=mr2(e,u.test);return{test:f,...l};}});}i!==void 0&&o.push(i);const a=r(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&Boolean(o[0].test)?{[n]:o}:o.length===1?{[n]:o[0]}:{};}function ro1(e,t="text"){const n=e.encoding[t];return Nn11({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>fr3(i,e.config),invalidValueRef:void 0});}function fr3(e,t,n="datum"){if(e){if(Re11(e))return B24(e.value);if(F24(e)){const{format:i,formatType:r}=Ki2(e);return ks1({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t});}}return;}function rl1(e,t={}){const{encoding:n,markDef:i,config:r,stack:s}=e,o=n.tooltip;if(w1(o))return{tooltip:ol1({tooltip:o},s,r,t)};{const a=t.reactiveGeom?"datum.datum":"datum",c=u=>{const l=fr3(u,r,a);if(l)return l;if(u===null)return;let f=R23("tooltip",i,r);return f===!0&&(f={content:"encoding"}),X1(f)?{value:f}:M1(f)?$19(f)?f:f.content==="encoding"?ol1(n,s,r,t):{signal:a}:void 0;};return Nn11({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:c,invalidValueRef:void 0});}}function sl1(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},s={},o=i?"datum.datum":"datum",a=[];function c(l,f){const d=jt9(f),p1=fe11(l)?l:{...l,type:e[d].type},h=p1.title||As1(p1,r),g=p(h).join(", ").replaceAll(/"/g,'\\"');let m;if(Y26(f)){const y=f==="x"?"x2":"y2",v=Ie8(e[y]);if(re17(p1.bin)&&v){const k=w23(p1,{expr:o}),_=w23(v,{expr:o}),{format:T,formatType:L}=Ki2(p1);m=Jn8(k,_,T,L,r),s[y]=!0;}}if((Y26(f)||f===$e9||f===Fe10)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=Ki2(p1);m=ks1({fieldOrDatumDef:p1,format:y,formatType:v,expr:o,config:r,normalizeStack:!0}).signal;}m??(m=fr3(p1,r,o).signal),a.push({channel:f,key:g,value:m});}Ps1(e,(l,f)=>{S26(l)?c(l,f):Vi3(l)&&c(l.condition,f);});const u={};for(const{channel:l,key:f,value:d}of a)!s[l]&&!u[f]&&(u[f]=d);return u;}function ol1(e,t,n,{reactiveGeom:i}={}){const r=sl1(e,t,n,{reactiveGeom:i}),s=bt9(r).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0;}function Sy(e){const{markDef:t,config:n}=e,i=R23("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...vy(e),...wy(e)};}function vy(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=R23("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:t in Yd?{}:{ariaRoleDescription:{value:t}};}function wy(e){const{encoding:t,markDef:n,config:i,stack:r}=e,s=t.description;if(s)return Nn11({model:e,channelDef:s,vgChannel:"description",mainRefFn:c=>fr3(c,e.config),invalidValueRef:void 0});const o=R23("description",n,i);if(o!=null)return{description:B24(o)};if(i.aria===!1)return{};const a=sl1(t,r,i);return M20(a)?void 0:{description:{signal:bt9(a).map(([c,u],l)=>`"${l>0?"; ":""}${c}: " + (${u})`).join(" + ")}};}function ee18(e,t,n={}){const{markDef:i,encoding:r,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:c}=n;const u=r[e];a===void 0&&(c??(c=R23(e,i,s,{vgChannel:o,ignoreVgConfig:!ti5(u)})),c!==void 0&&(a=B24(c)));const l={markDef:i,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=kc({...l,scaleChannel:e,channelDef:u}),d=p=>_s1({...l,channel:e,channelDef:p,stack:null,defaultRef:a});return Nn11({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:f,mainRefFn:d});}function al1(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:s}=n,o=t.filled??R23("filled",n,r),a=A22(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,c=R23(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??a,u=R23(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],l=o?"fill":"stroke",f={...c?{fill:B24(c)}:{},...u?{stroke:B24(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&x19(Ga1("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...ee18("color",e,{vgChannel:l,defaultValue:o?c:u}),...ee18("fill",e,{defaultValue:i.fill?c:void 0}),...ee18("stroke",e,{defaultValue:i.stroke?u:void 0})};}function $y(e){const{encoding:t,mark:n}=e,i=t.order;return!Ft7(n)&&Re11(i)?Nn11({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>B24(r.value),invalidValueRef:void 0}):{};}function Tn8({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a){const u=_s1({channel:s,channelDef:a,markDef:t,config:i?.config,scaleName:i.scaleName(s),scale:i.getScaleComponent(s),stack:null,defaultRef:B24(o),bandPosition:r});return{offsetType:"encoding",offset:u};}const c=t[s];return c?{offsetType:"visual",offset:c}:{};}function ae13(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:s,config:o,stack:a}=t,c=r[e],u=r[He8(e)],l=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=Tn8({channel:e,markDef:s,encoding:r,model:t,bandPosition:.5}),h=so1({model:t,defaultPos:n,channel:e,scaleName:l,scale:f}),g=!c&&Y26(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:Ey({channel:e,channelDef:c,channel2Def:u,markDef:s,config:o,scaleName:l,scale:f,stack:a,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return g?{[i||e]:g}:void 0;}function Ey(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:s,markDef:o}=e;if(F24(n)&&r&&t===r.fieldChannel){if(S26(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Hi3({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s});}return Vt8(n,i,{suffix:"end"},{offset:s});}return Es1(e);}function so1({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:s,config:o}=e;return()=>{const a=jt9(n),c=Et7(n),u=R23(n,s,o,{vgChannel:c});if(u!==void 0)return Zn5(n,u);switch(t){case"zeroOrMin":return cl({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return cl({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":{const l=e[me11(n)];return{...l,mult:.5};}}return;};}function cl({mainChannel:e,config:t,...n}){const i=_c(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=r.zeroOrMax;return{signal:`min(${s},${o})/2`};}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0};}}const _y={left:"x",center:"xc",right:"x2"},ky={top:"y",middle:"yc",bottom:"y2"};function ul(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Et7(e);const r=e==="x"?"align":"baseline",s=R23(r,t,n);let o;return $19(s)?(x19(kp(r)),o=void 0):o=s,e==="x"?_y[o||(i==="top"?"left":"center")]:ky[o||i];}function dr2(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?ll1(e,t,{defaultPos:n,defaultPos2:i}):ae13(e,t,{defaultPos:n});}function ll1(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:s}=t,o=He8(e),a=me11(e),c=Cy(t,i,o),u=c[a]?ul(e,r,s):Et7(e);return{...ae13(e,t,{defaultPos:n,vgChannel:u}),...c};}function Cy(e,t,n){const{encoding:i,mark:r,markDef:s,stack:o,config:a}=e,c=jt9(n),u=me11(n),l=Et7(n),f=i[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:h}=n in i||n in s?Tn8({channel:n,markDef:s,encoding:i,model:e}):Tn8({channel:c,markDef:s,encoding:i,model:e});if(!f&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const m=me11(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[l]:{field:e.getName(n)}};}const g=Fy({channel:n,channelDef:f,channel2Def:i[n],markDef:s,config:a,scaleName:d,scale:p,stack:o,offset:h,defaultRef:void 0});return g!==void 0?{[l]:g}:pr2(n,s)||pr2(n,{[n]:zi3(n,s,a.style),[u]:zi3(u,s,a.style)})||pr2(n,a[r])||pr2(n,a.mark)||{[l]:so1({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()};}function Fy({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:c,defaultRef:u}){return F24(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Vt8(t,s,{suffix:"start"},{offset:c}):Es1({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:i,config:r,offset:c,defaultRef:u});}function pr2(e,t){const n=me11(e),i=Et7(e);if(t[i]!==void 0)return{[i]:Zn5(e,t[i])};if(t[e]!==void 0)return{[i]:Zn5(e,t[e])};if(t[n]){const r=t[n];if(Gt7(r))x19(Sp(n));else return{[n]:Zn5(e,r)};}return;}function Pt8(e,t){const{config:n,encoding:i,markDef:r}=e,s=r.type,o=He8(t),a=me11(t),c=i[t],u=i[o],l=e.getScaleComponent(t),f=l?l.get("type"):void 0,d=r.orient,p=i[a]??i.size??R23("size",r,n,{vgChannel:a}),h=Sa1(t),g=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return S26(c)&&(U25(c.bin)||re17(c.bin)||c.timeUnit&&!u)&&!(p&&!Gt7(p))&&!i[h]&&!J27(f)?Ay({fieldDef:c,fieldDef2:u,channel:t,model:e}):(F24(c)&&J27(f)||g)&&!u?Ty(c,t,e):ll1(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});}function Ny(e,t,n,i,r,s,o){if(Gt7(r))if(n){const c=n.get("type");if(c==="band"){let u=`bandwidth('${t}')`;r.band!==1&&(u=`${r.band} * ${u}`);const l=Ge8("minBandSize",{type:o},i);return{signal:l?`max(${Oe5(l)}, ${u})`:u};}else r.band!==1&&(x19(Tp(c)),r=void 0);}else return{mult:r.band,field:{group:e}};else{if($19(r))return r;if(r)return{value:r};}if(n){const c=n.get("range");if(Ct8(c)&&V(c.step))return{value:c.step-2};}if(!s){const{bandPaddingInner:c,barBandPaddingInner:u,rectBandPaddingInner:l}=i.scale,f=X26(c,o==="bar"?u:l);if($19(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(V(f))return{signal:`${1-f} * ${e}`};}const a=sr2(i.view,e);return{value:a-2};}function Ty(e,t,n){const{markDef:i,encoding:r,config:s,stack:o}=n,a=i.orient,c=n.scaleName(t),u=n.getScaleComponent(t),l=me11(t),f=He8(t),d=Sa1(t),p=n.scaleName(d),h=n.getScaleComponent(Ti3(t)),g=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(r.size||i.size)&&(g?m=ee18("size",n,{vgChannel:l,defaultRef:B24(i.size)}):x19(zp(i.type)));const y=!!m,v=Ic({channel:t,fieldDef:e,markDef:i,config:s,scaleType:(u||h)?.get("type"),useVlSizeChannel:g});m=m||{[l]:Ny(l,p||c,h||u,s,v,!!e,i.type)};const k=(u||h)?.get("type")==="band"&&Gt7(v)&&!y?"top":"middle",_=ul(t,i,s,k),T=_==="xc"||_==="yc",{offset:L,offsetType:ue}=Tn8({channel:t,markDef:i,encoding:r,model:n,bandPosition:T?.5:0}),ne=Es1({channel:t,channelDef:e,markDef:i,config:s,scaleName:c,scale:u,stack:o,offset:L,defaultRef:so1({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:u}),bandPosition:T?ue==="encoding"?0:.5:$19(v)?{signal:`(1-${v})/2`}:Gt7(v)?(1-v.band)/2:0});if(l)return{[_]:ne,...m};{const mt=Et7(f),de=m[l],yt=L?{...de,offset:L}:de;return{[_]:ne,[mt]:w1(ne)?[ne[0],{...ne[1],offset:yt}]:{...ne,offset:yt}};}}function fl(e,t,n,i,r,s,o){if(ga1(e))return 0;const a=e==="x"||e==="y2",c=a?-t/2:t/2;if($19(n)||$19(r)||$19(i)||s){const u=Oe5(n),l=Oe5(r),f=Oe5(i),d=Oe5(s),p=a?"":"-",h=s?`(${o} < ${d} ? ${p}0.5 * (${d} - (${o})) : ${c})`:c,g=f?`${f} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=l?`(${l} + ${h})`:h;return{signal:g+m+y};}else return r=r||0,i+(n?-r-c:+r+c);}function Ay({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:s,encoding:o}=i,a=i.getScaleComponent(n),c=i.scaleName(n),u=a?a.get("type"):void 0,l=a.get("reverse"),f=Ic({channel:n,fieldDef:e,markDef:s,config:r,scaleType:u}),d=i.component.axes[n]?.[0],p=d?.get("translate")??.5,h=Y26(n)?R23("binSpacing",s,r)??0:0,g=He8(n),m=Et7(n),y=Et7(g),v=Ge8("minBandSize",s,r),{offset:k}=Tn8({channel:n,markDef:s,encoding:o,model:i,bandPosition:0}),{offset:_}=Tn8({channel:g,markDef:s,encoding:o,model:i,bandPosition:0}),T=nh({fieldDef:e,scaleName:c}),L=fl(n,h,l,p,k,v,T),ue=fl(g,h,l,p,_??k,v,T),ne=$19(f)?{signal:`(1-${f.signal})/2`}:Gt7(f)?(1-f.band)/2:.5,mt=Nt9({fieldDef:e,fieldDef2:t,markDef:s,config:r});if(U25(e.bin)||e.timeUnit){const de=e.timeUnit&&mt!==.5;return{[y]:dl({fieldDef:e,scaleName:c,bandPosition:ne,offset:ue,useRectOffsetField:de}),[m]:dl({fieldDef:e,scaleName:c,bandPosition:$19(ne)?{signal:`1-${ne.signal}`}:1-ne,offset:L,useRectOffsetField:de})};}else if(re17(e.bin)){const de=Vt8(e,c,{},{offset:ue});if(S26(t))return{[y]:de,[m]:Vt8(t,c,{},{offset:L})};if(Ut8(e.bin)&&e.bin.step)return{[y]:de,[m]:{signal:`scale("${c}", ${w23(e,{expr:"datum"})} + ${e.bin.step})`,offset:L}};}x19(Qa1(g));return;}function dl({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return Hi3({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:ur2,endSuffix:lr3}:{}});}const Oy=new Set(["aria","width","height"]);function ke8(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?al1(e):{};return{...Py(e.markDef,t),...pl("fill",n),...pl("stroke",i),...ee18("opacity",e),...ee18("fillOpacity",e),...ee18("strokeOpacity",e),...ee18("strokeWidth",e),...ee18("strokeDash",e),...$y(e),...rl1(e),...ro1(e,"href"),...Sy(e)};}function pl(e,t){return t?{[e]:t}:{};}function Py(e,t){return Xd.reduce((n,i)=>(!Oy.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=B24(e[i])),n),{});}function oo1(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,s)=>{let o;if(!qe8(s)||!(o=e.getScaleType(s)))return;const a=Oi3(r.aggregate),c=$s1({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(Jg(c)){const u=e.vgField(s,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});u&&i.add(u);}}),i.size>0){const r=[...i].map(s=>Mi3(s,!0)).join(" && ");return{defined:{signal:r}};}return;}function gl(e,t){return t!==void 0?{[e]:B24(t)}:void 0;}const ao1="voronoi",hl={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(ao1);},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,s=e.mark;if(Ft7(s))return x19(Jd(s)),n;const o={name:e.getName(ao1),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...rl1(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,c=!1;return n.forEach((u,l)=>{const f=u.name??"";f===e.component.mark[0].name?a=l:f.includes(ao1)&&(c=!0);}),c||n.splice(a+1,0,o),n;}},ml={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!js1(e.bind),parse:(e,t,n)=>kl(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,s=t.bind,o=t.init&&t.init[0],a=hl.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((c,u)=>{const l=W22(`${i}_${c.field}`),f=n.filter(d=>d.name===l);f.length||n.unshift({name:l,...o?{init:Qt8(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Z1(c.field)}] : null`}]:[],bind:s[c.field]??s[c.channel]??s});}),n;},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.find(u=>u.name===i+zt8),o=i+oi5,a=r.items.map(u=>W22(`${i}_${u.field}`)),c=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${c} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n;}},gr2="_toggle",yl={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+gr2,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+zt8,i=t.name+gr2;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Jt8(e)}}, `)+`${i} ? ${n} : null`;}},zy={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=X1(t.clear)?v19(t.clear,"view"):t.clear);},topLevelSignals:(e,t,n)=>{if(ml.defined(t))for(const i of t.project.items){const r=n.findIndex(s=>s.name===W22(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"});}return n;},signals:(e,t,n)=>{function i(r,s){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:s});}if(t.type==="interval")for(const r of t.project.items){const s=n.findIndex(o=>o.name===r.signals.visual);if(i(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===r.signals.data);i(o,"null");}}else{let r=n.findIndex(s=>s.name===t.name+zt8);i(r,"null"),yl.defined(t)&&(r=n.findIndex(s=>s.name===t.name+gr2),i(r,"false"));}return n;}},bl={defined:e=>{const t=e.resolve==="global"&&e.bind&&js1(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Le7;return t&&!n&&x19(ip),t&&n;},parse:(e,t,n)=>{const i=C26(n);if(i.select=X1(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},kl(t,i),M1(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=p(a.filter??[]),a.filter.includes(o)||a.filter.push(o);}const r=Us1(t.bind)?t.bind.legend:"click",s=X1(r)?v19(r,"view"):p(r);t.bind={legend:{merge:s}};},topLevelSignals:(e,t,n)=>{const i=t.name,r=Us1(t.bind)&&t.bind.legend,s=o=>a=>{const c=C26(a);return c.markname=o,c;};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${W22(o.field)}_legend`,c=`${i}_${a}`,u=n.filter(l=>l.name===c);if(u.length===0){const l=r.merge.map(s(`${a}_symbols`)).concat(r.merge.map(s(`${a}_labels`))).concat(r.merge.map(s(`${a}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:l,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]});}}return n;},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.find(d=>d.name===i+zt8),o=i+oi5,a=r.items.filter(d=>d.hasLegend).map(d=>W22(`${i}_${W22(d.field)}_legend`)),c=a.map(d=>`${d} !== null`).join(" && "),u=`${c} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const l=n.find(d=>d.name===i+gr2),f=Us1(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push({...l.on[0],events:f}):l.on[0].events=f),n;}};function Ry(e,t,n){const i=e.fieldDef(t)?.field;for(const r of ie14(e.component.selection??{})){const s=r.project.hasField[i]??r.project.hasChannel[t];if(s&&bl.defined(r)){const o=n.get("selections")??[];o.push(r.name),n.set("selections",o,!1),s.hasLegend=!0;}}}const xl="_translate_anchor",Sl="_translate_delta",Iy={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=gt9.defined(t),s=i+xl,{x:o,y:a}=t.project.hasChannel;let c=v19(t.translate,"scope");return r||(c=c.map(u=>(u.between[0].markname=i+Fn9,u))),n.push({name:s,value:{},on:[{events:c.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${r?no2(e,H21):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${r?no2(e,Q26):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+Sl,value:{},on:[{events:c,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&vl(e,t,o,"width",n),a!==void 0&&vl(e,t,a,"height",n),n;}};function vl(e,t,n,i,r){const s=t.name,o=s+xl,a=s+Sl,c=n.channel,u=gt9.defined(t),l=r.find(T=>T.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),h=d&&d.get("reverse"),g=u?c===H21?h?"":"-":h?"-":"":"",m=`${o}.extent_${c}`,y=`${g}${a}.${c} / ${u?`${f}`:`span(${m})`}`,v=!u||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",k=u?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${v}(${m}, ${y}${k})`;l.on.push({events:{signal:a},update:u?_:`clampRange(${_}, 0, ${f})`});}const wl="_zoom_anchor",$l="_zoom_delta",Ly={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=gt9.defined(t),s=i+$l,{x:o,y:a}=t.project.hasChannel,c=Z1(e.scaleName(H21)),u=Z1(e.scaleName(Q26));let l=v19(t.zoom,"scope");return r||(l=l.map(f=>(f.markname=i+Fn9,f))),n.push({name:i+wl,on:[{events:l,update:r?"{"+[c?`x: invert(${c}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:l,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&El(e,t,o,"width",n),a!==void 0&&El(e,t,a,"height",n),n;}};function El(e,t,n,i,r){const s=t.name,o=n.channel,a=gt9.defined(t),c=r.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(i).signal,l=e.getScaleComponent(o),f=l&&l.get("type"),d=a?no2(e,o):c.name,p=s+$l,h=`${s}${wl}.${o}`,g=!a||!l?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${l.get("exponent")??1}`:f==="symlog"?`, ${l.get("constant")??1}`:"":"",y=`${g}(${d}, ${h}, ${p}${m})`;c.on.push({events:{signal:p},update:a?y:`clampRange(${y}, 0, ${u})`});}const Zt10="_store",zt8="_tuple",My="_modify",_l="vlSelectionResolve",hr2=[xy,yy,hy,yl,ml,gt9,bl,zy,Iy,Ly,hl];function Dy(e){let t=e.parent;for(;t&&!ve9(t);)t=t.parent;return t;}function Jt8(e,{escape:t}={escape:!0}){let n=t?Z1(e.name):e.name;const i=Dy(e);if(i){const{facet:r}=i;for(const s of _e6)r[s]&&(n+=` + '__facet_${s}_' + (facet[${Z1(i.vgField(s))}])`);}return n;}function co1(e){return ie14(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1);}function kl(e,t){(X1(t.select)||!t.select.on)&&delete e.events,(X1(t.select)||!t.select.clear)&&delete e.clear,(X1(t.select)||!t.select.toggle)&&delete e.toggle;}function uo1(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...uo1(e.object)),t.push(...uo1(e.property))),t);}function Cl(e){return e.object.type==="MemberExpression"?Cl(e.object):e.object.name==="datum";}function Fl(e){const t=L0(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&Cl(i)&&n.add(uo1(i).slice(1).join("."));}),n;}class An12 extends I26{clone(){return new An12(null,this.model,C26(this.filter));}constructor(t,n,i){super(t);this.model=n,this.filter=i,this.expr=mr2(this.model,this.filter,this),this._dependentFields=Fl(this.expr);}dependentFields(){return this._dependentFields;}producedFields(){return new Set;}assemble(){return{type:"filter",expr:this.expr};}hash(){return`Filter ${this.expr}`;}}function jy(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const s=W22(r.name),o=r.select,a=X1(o)?o:o.type,c=M1(o)?C26(o):{type:a},u=i[a];for(const d in u){if(d==="fields"||d==="encodings")continue;d==="mark"&&(c[d]={...u[d],...c[d]}),(c[d]===void 0||c[d]===!0)&&(c[d]=C26(u[d]??c[d]));}const l=n[s]={...c,name:s,type:a,init:r.value,bind:r.bind,events:X1(c.on)?v19(c.on,"scope"):p(C26(c.on))},f=C26(r);for(const d of hr2)d.defined(l)&&d.parse&&d.parse(e,l,f);}return n;}function Nl(e,t,n,i="datum"){const r=X1(t)?t:t.param,s=W22(r),o=Z1(s+Zt10);let a;try{a=e.getSelectionComponent(s,r);}catch(d){return`!!${s}`;}if(a.project.timeUnit){const d=n??e.component.data.raw,p=a.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p;}const c=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Z1(a.resolve)})`,l=`${c}${o}, ${i}${u}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${l}`:`!${f} || ${l}`;}function Tl(e,t,n){const i=W22(t),r=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(i,t);}catch(a){return i;}if(!r&&!s)s=o.project.items[0].field,o.project.items.length>1&&x19(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z1(s)}.`);else if(r&&!s){const a=o.project.items.filter(c=>c.channel===r);!a.length||a.length>1?(s=o.project.items[0].field,x19((a.length?"Multiple ":"No ")+`matching ${Z1(r)} encoding found for selection ${Z1(n.param)}. Using "field": ${Z1(s)}.`)):s=a[0].field;}return`${o.name}[${Z1(we11(s))}]`;}function Uy(e,t){for(const[n,i]of bt9(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new ye9(new An12(t,e,{param:n}),r,G29.Lookup,e.component.data.outputNodeRefCounts);}}function mr2(e,t,n){return Wn8(t,i=>X1(i)?i:yg(i)?Nl(e,i,n):uc(i));}function By(e,t){return e?w1(e)&&!kt9(e)?e.map(n=>As1(n,t)).join(", "):e:void 0;}function lo1(e,t,n,i){var r,s;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=i;}function ci3(e,t,n,i={header:!1}){const{disable:r,orient:s,scale:o,labelExpr:a,title:c,zindex:u,...l}=e.combine();if(r)return;for(const f in l){const d=wh[f],p1=l[f];if(d&&d!==t&&d!=="both")delete l[f];else if(ri5(p1)){const{condition:h,...g}=p1,m=p(h),y=Vc[f];if(y){const{vgProp:v,part:k}=y,_=[...m.map(T=>{const{test:L,...ue}=T;return{test:mr2(null,L),...ue};}),g];lo1(l,k,v,_),delete l[f];}else if(y===null){const v={signal:m.map(k=>{const{test:_,...T}=k;return`${mr2(null,_)} ? ${Ta1(T)} : `;}).join("")+Ta1(g)};l[f]=v;}}else if($19(p1)){const h=Vc[f];if(h){const{vgProp:g,part:m}=h;lo1(l,m,g,p1),delete l[f];}}A22(["labelAlign","labelBaseline"],f)&&l[f]===null&&delete l[f];}if(t==="grid"){if(!l.grid)return;if(l.encode){const{grid:f}=l.encode;l.encode={...f?{grid:f}:{}},M20(l.encode)&&delete l.encode;}return{scale:o,orient:s,...l,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:X26(u,0)};}else{if(!i.header&&e.mainExtracted)return;if(a!==void 0){let d=a;l.encode?.labels?.update&&$19(l.encode.labels.update.text)&&(d=Lt9(a,"datum.label",l.encode.labels.update.text.signal)),lo1(l,"labels","text",{signal:d});}if(l.labelAlign===null&&delete l.labelAlign,l.encode){for(const d of Xc)e.hasAxisPart(d)||delete l.encode[d];M20(l.encode)&&delete l.encode;}const f=By(c,n);return{scale:o,orient:s,grid:!1,...f?{title:f}:{},...l,...n.aria===!1?{aria:!1}:{},zindex:X26(u,0)};}}function Al(e){const{axes:t}=e.component,n=[];for(const i of at13)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const s=i==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o});}}return n;}function Wy(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>ci3(r,"grid",t)),...i.map(r=>ci3(r,"grid",t)),...n.map(r=>ci3(r,"main",t)),...i.map(r=>ci3(r,"main",t))].filter(r=>r);}function Ol(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...b23(o),...b23(a)]),u={};for(const l of c.values())u[l]={signal:`${i.signal} === "${s}" ? ${Oe5(o[l])} : ${Oe5(a[l])}`};return u;}return t[r];})]);}function Hy(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:gc1(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=$19(n)?"axisOrient":`axis${Hn8(n)}`,a=[...r,...r.map(u=>s+u.substr(4))],c=["axis",o,s];return{vlOnlyAxisConfig:Ol(a,i,e,n),vgAxisConfig:Ol(c,i,e,n),axisConfigStyle:qy([...c,...a],i)};}function qy(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=p(r);for(const s of r)n.push(t.style[s]);}}return Object.assign.apply(null,n);}function fo1(e,t,n,i={}){const r=Oa1(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[s]?.[e]!==void 0)return{configFrom:s,configValue:i[s][e]};return{};}const Pl={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Gy(n,e),gridScale:({model:e,channel:t})=>Vy(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||Rl(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||zl(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Yy(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Ky(t.type,n,S26(t)&&!!t.timeUnit,S26(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Zy({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values});},tickMinStep:Jy,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=Il(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return za1(r?[Rc(r)]:[],S26(o)?[Rc(o)]:[]);},values:({axis:e,fieldOrDatumDef:t})=>eb(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??tb(n,t)};function Gy(e,t){return!J27(e)&&S26(t)&&!U25(t?.bin)&&!re17(t?.bin);}function Vy(e,t){const n=t==="x"?"y":"x";return e.getScaleComponent(n)?e.scaleName(n):void 0;}function Xy(e,t,n,i,r){const s=t?.labelAngle;if(s!==void 0)return $19(s)?s:qn9(s);{const{configValue:o}=fo1("labelAngle",i,t?.style,r);return o!==void 0?qn9(o):n===H21&&A22([ys1,ms1],e.type)&&!(S26(e)&&e.timeUnit)?270:void 0;}}function po1(e){return`(((${e.signal} % 360) + 360) % 360)`;}function zl(e,t,n,i){if(e!==void 0)if(n==="x"){if($19(e)){const r=po1(e),s=$19(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${s} ? "bottom" : "top"`};}if(45<e&&e<135||225<e&&e<315)return"middle";if($19(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`};}return(e<=45||315<=e)===(t==="top")?"bottom":"top";}else{if($19(e)){const r=po1(e),s=$19(t)?`(${t.signal} === "left")`:t==="left",o=i?'"middle"':"null";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${o} : (45 <= ${r} && ${r} <= 135) === ${s} ? "top" : "bottom"`};}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if($19(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`};}return(45<=e&&e<=135)===(t==="left")?"top":"bottom";}return;}function Rl(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,s=i?"bottom":"left";if($19(e)){const o=po1(e),a=$19(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${a} ? "left" : "right"`};}if((e+r)%180===0)return i?null:"center";if($19(t)){const o=r<e&&e<180+r?"===":"!==",a=`${t.signal} ${o} "${s}"`;return{signal:`${a} ? "left" : "right"`};}return(r<e&&e<180+r)===(t===s)?"left":"right";}function Yy(e,t){return t==="x"&&A22(["quantitative","temporal"],e)?!0:void 0;}function Ky(e,t,n,i){return n&&!M1(i)||e!=="nominal"&&e!=="ordinal"?t==="log"||t==="symlog"?"greedy":!0:void 0;}function Qy(e){return e==="x"?"bottom":"left";}function Zy({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!J27(t)&&t!=="log"){if(S26(e)){if(U25(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&A22(["month","hours","day","quarter"],Z26(e.timeUnit)?.unit))return;}return{signal:`ceil(${n.signal}/40)`};}return;}function Jy({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(S26(t)){const{timeUnit:n}=t;if(n){const i=oc1(n);if(i)return{signal:i};}}return;}function Il(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),s=i?i.title:void 0,o=r?r.title:void 0;return s&&o?Ra1(s,o):s||o||(s!==void 0?s:o!==void 0?o:void 0);}function eb(e,t){const n=e.values;return w1(n)?Gc(t,n):$19(n)?n:void 0;}function tb(e,t){return e==="rect"&&Yi2(t)?1:0;}class On7 extends I26{clone(){return new On7(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this._dependentFields=Fl(this.transform.calculate);}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(!Yt9(i))return;if(zc(i.sort)){const{field:s,timeUnit:o}=i,a=i.sort,c=a.map((u,l)=>`${uc({field:s,timeUnit:o,equal:u})} ? ${l} : `).join("")+a.length;t=new On7(t,{calculate:c,as:Pn10(i,r,{forAs:!0})});}}),t;}producedFields(){return new Set([this.transform.as]);}dependentFields(){return this._dependentFields;}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as};}hash(){return`Calculate ${P25(this.transform)}`;}}function Pn10(e,t,n){return w23(e,{prefix:t,suffix:"sort_index",...n});}function yr3(e,t){return A22(["top","bottom"],t)?"column":A22(["left","right"],t)||e==="row"?"row":"column";}function zn8(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return X26((t||{})[e],r[e],n.header[e]);}function br4(e,t,n,i){const r={};for(const s of e){const o=zn8(s,t||{},n,i);o!==void 0&&(r[s]=o);}return r;}const go1=["row","column"],ho1=["header","footer"];function nb(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=br4(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),c=yr3(t,a),u=qn9(o);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Ml(u,c),...Ll(c,u,s),...Dl(i,r,t,Hh,gu1)}};}function Ll(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"};}const i=Rl(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{};}function Ml(e,t){const n=zl(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{};}function ib(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of ho1)if(n[r])for(const s of n[r]){const o=sb(e,t,r,n,s);o!=null&&i.push(o);}return i;}function rb(e,t){const{sort:n}=e;return lt11(n)?{field:w23(n,{expr:"datum"}),order:n.order??"ascending"}:w1(n)?{field:Pn10(e,t,{expr:"datum"}),order:"ascending"}:{field:w23(e,{expr:"datum"}),order:n??"ascending"};}function mo1(e,t,n){const{format:i,formatType:r,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:c}=br4(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=ks1({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,l=yr3(t,a);return{text:{signal:c?Lt9(Lt9(c,"datum.label",u),"datum.value",w23(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Ml(s,l),...Ll(l,s,o),...Dl(n,e,t,qh,hu1)};}function sb(e,t,n,i,r){if(r){let s=null;const{facetFieldDef:o}=i,a=e.config?e.config:void 0;if(o&&r.labels){const{labelOrient:f}=br4(["labelOrient"],o.header,a,t);(t==="row"&&!A22(["top","bottom"],f)||t==="column"&&!A22(["left","right"],f))&&(s=mo1(o,t,a));}const c=ve9(e)&&!ei5(e.facet),u=r.axes,l=u?.length>0;if(s||l){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:rb(o,t)}:{},...l&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...r.sizeSignal?{encode:{update:{[f]:r.sizeSignal}}}:{},...l?{axes:u}:{}};}}return null;}const ob={column:{start:0,end:1},row:{start:1,end:0}};function ab(e,t){return ob[t][e];}function cb(e,t){const n={};for(const i of _e6){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:s,titleOrient:o}=br4(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),a=yr3(i,o),c=ab(s,a);c!==void 0&&(n[a]=c);}}return M20(n)?void 0:n;}function Dl(e,t,n,i,r){const s={};for(const o of i){if(!r[o])continue;const a=zn8(o,t?.header,e,n);a!==void 0&&(s[r[o]]=a);}return s;}function yo1(e){return[...xr3(e,"width"),...xr3(e,"height"),...xr3(e,"childWidth"),...xr3(e,"childHeight")];}function xr3(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(J27(o)&&Ct8(a)){const c=e.scaleName(n);if(ve9(e.parent)){const u=e.parent.component.resolve;if(u.scale[n]==="independent")return[jl(c,a)];}return[jl(c,a),{name:r,update:Ul(c,s,`domain('${c}').length`)}];}}throw new Error("layout size is step although width/height is not step.");}else if(i=="container"){const s=r.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=qs1(e.config.view,s?"width":"height"),c=`isFinite(${o}) ? ${o} : ${a}`;return[{name:r,init:c,on:[{update:c,events:"window:resize"}]}];}else return[{name:r,value:i}];}function jl(e,t){const n=`${e}_step`;return $19(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step};}function Ul(e,t,n){const i=t.get("type"),r=t.get("padding"),s=X26(t.get("paddingOuter"),r);let o=t.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${Oe5(o)}, ${Oe5(s)}) * ${e}_step`;}function Bl(e){return e==="childWidth"?"width":e==="childHeight"?"height":e;}function Wl(e,t){return b23(e).reduce((n,i)=>({...n,...Nn11({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>B24(r.value),invalidValueRef:void 0})}),{});}function Hl(e,t){if(ve9(t))return e==="theta"?"independent":"shared";if(Mn12(t))return"shared";if(Po1(t))return Y26(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve");}function bo1(e,t){const n=e.scale[t],i=Y26(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&x19(Dp(t)),"independent"):e[i][t]||"shared";}const ub={...Xh,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},ql=b23(ub);class lb extends pt10{}const Gl={symbols:fb,gradient:db,labels:pb,entries:gb};function fb(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:c,mark:u}=n,l=o.filled&&u!=="trail";let f={...Kd({},n,Wg),...al1(n,{filled:l})};const d=r.get("symbolOpacity")??c.legend.symbolOpacity,p=r.get("symbolFillColor")??c.legend.symbolFillColor,h=r.get("symbolStrokeColor")??c.legend.symbolStrokeColor,g=d===void 0?Vl(a.opacity)??o.opacity:void 0;if(f.fill){if(i==="fill"||l&&i===ge8)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=B24(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=B24(g??1));else if(w1(f.fill)){const m=xo1(a.fill??a.color)??o.fill??(l&&o.color);m&&(f.fill=B24(m));}}if(f.stroke){if(i==="stroke"||!l&&i===ge8)delete f.stroke;else if(f.stroke.field||h)delete f.stroke;else if(w1(f.stroke)){const m=X26(xo1(a.stroke||a.color),o.stroke,l?o.color:void 0);m&&(f.stroke={value:m});}}if(i!==ot12){const m=S26(t)&&Yl(n,r,t);m?f.opacity=[{test:m,...B24(g??1)},B24(c.legend.unselectedOpacity)]:g&&(f.opacity=B24(g));}return f={...f,...e},M20(f)?void 0:f;}function db(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:s,encoding:o}=t;let a={};const c=i.get("gradientOpacity")??r.legend.gradientOpacity,u=c===void 0?Vl(o.opacity)||s.opacity:void 0;return u&&(a.opacity=B24(u)),a={...a,...e},M20(a)?void 0:a;}function pb(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const s=n.legend(i)||{},o=n.config,a=S26(t)?Yl(n,r,t):void 0,c=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:l}=s;let f;Xt9(l)?f=ze8({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:l,config:o}):u===void 0&&l===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=ze8({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&S26(t)&&t.timeUnit===void 0&&(f=ze8({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...c?{opacity:c}:{},...f?{text:f}:{},...e};return M20(d)?void 0:d;}function gb(e,{legendCmpt:t}){const n=t.get("selections");return n?.length?{...e,fill:{value:"transparent"}}:e;}function Vl(e){return Xl(e,(t,n)=>Math.max(t,n.value));}function xo1(e){return Xl(e,(t,n)=>X26(t,n.value));}function Xl(e,t){return lh(e)?p(e.condition).reduce(t,e.value):Re11(e)?e.value:void 0;}function Yl(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=Z1(n.field);return i.map(s=>{const o=Z1(W22(s)+Zt10);return`(!length(data(${o})) || (${s}[${r}] && indexof(${s}[${r}], datum.value) >= 0))`;}).join(" || ");}const Kl={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return Nc(e,e.type,i,r,n,!1);},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Tc(i,t,n);},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??vb(e);},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??wb(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??mb(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>$n9(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(mn10(n)&&Xe7(t)){if(e==="gradient")return;}else if(e==="symbol")return;return e;},values:({fieldOrDatumDef:e,legend:t})=>hb(t,e)};function hb(e,t){const n=e.values;return w1(n)?Gc(t,n):$19(n)?n:void 0;}function mb(e,t,n,i){if(t!=="shape"){const r=xo1(n)??i;if(r)return r;}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle";}}function yb(e){const{legend:t}=e;return X26(t.type,bb(e));}function bb({channel:e,timeUnit:t,scaleType:n}){if(mn10(e)){if(A22(["quarter","month","day"],t))return"symbol";if(Xe7(n))return"gradient";}return"symbol";}function xb({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??Sb(n,t);}function Sb(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0;}}function vb({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:c}=e;return Xe7(r)?n==="horizontal"?i==="top"||i==="bottom"?Ql(t,"width",o,s):o:Ql(t,"height",c,a):void 0;}function Ql(e,t,n,i){const r=e.getSizeSignalRef(t).signal;return{signal:`clamp(${r}, ${n}, ${i})`};}function wb(e){return A22(["quantile","threshold","log","symlog"],e)?"greedy":void 0;}function Zl(e){const t=q30(e)?$b(e):Cb(e);return e.component.legends=t,t;}function $b(e){const{encoding:t}=e,n={};for(const i of[ge8,...yu1]){const r=K26(t[i]);if(!r||!e.getScaleComponent(i))continue;if(i===he9&&S26(r)&&r.type===xn9)continue;n[i]=kb(e,i);}return n;}function Eb(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n};}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n};}function _b(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0;}return e===(n||{})[t];}function kb(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:s}=e,o=s.legend,a=new lb({},Eb(e,t));Ry(e,t,a);const c=n!==void 0?!n:o.disable;if(a.set("disable",c,n!==void 0),c)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),l=K26(r[t]),f=S26(l)?Z26(l.timeUnit)?.unit:void 0,d=n.orient||s.legend.orient||"right",p=yb({legend:n,channel:t,timeUnit:f,scaleType:u}),h=xb({legend:n,legendType:p,orient:d,legendConfig:o}),g={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:l,legendConfig:o,config:s,scaleType:u,orient:d,legendType:p,direction:h};for(const _ of ql){if(p==="gradient"&&_.startsWith("symbol")||p==="symbol"&&_.startsWith("gradient"))continue;const T=_ in Kl?Kl[_](g):n[_];if(T!==void 0){const L=_b(T,_,n,e.fieldDef(t));(L||s.legend[_]===void 0)&&a.set(_,T,L);}}const m=n?.encoding??{},y=a.get("selections"),v={},k={fieldOrDatumDef:l,model:e,channel:t,legendCmpt:a,legendType:p};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const T=Wl(m[_]??{},e),L=_ in Gl?Gl[_](T,k):T;L!==void 0&&!M20(L)&&(v[_]={...y?.length&&S26(l)?{name:`${W22(l.field)}_legend_${_}`}:{},...y?.length?{interactive:!!y}:{},update:L});}return M20(v)||a.set("encode",v,!!n?.encoding),a;}function Cb(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){Zl(i);for(const r of b23(i.component.legends))n.legend[r]=bo1(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=Jl(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]));}for(const i of b23(t))for(const r of e.children){if(!r.component.legends[i])continue;n.legend[i]==="shared"&&delete r.component.legends[i];}return t;}function Jl(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const s of ql){const o=At10(e.getWithExplicit(s),t.getWithExplicit(s),s,"legend",(a,c)=>{switch(s){case"symbolType":return Fb(a,c);case"title":return Ia1(a,c);case"type":return r=!0,Se7("symbol");}return cr2(a,c,s,"legend");});e.setWithExplicit(s,o);}return r&&(e.implicit?.encode?.gradient&&$i3(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&$i3(e.explicit,["encode","gradient"])),e;}function Fb(e,t){return t.value==="circle"?t:e;}function Nb(e,t,n,i){var r,s;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=i;}function ef1(e){const t=e.component.legends,n={};for(const r of b23(t)){const s=e.getScaleComponent(r),o=D20(s.get("domains"));if(n[o])for(const a of n[o]){const c=Jl(a,t[r]);c||n[o].push(t[r]);}else n[o]=[t[r].clone()];}const i=ie14(n).flat().map(r=>Tb(r,e.config)).filter(r=>r!==void 0);return i;}function Tb(e,t){const{disable:n,labelExpr:i,selections:r,...s}=e.combine();if(n)return;if(t.aria===!1&&s.aria==null&&(s.aria=!1),s.encode?.symbols){const o=s.encode.symbols.update;o.fill&&o.fill.value!=="transparent"&&!o.stroke&&!s.stroke&&(o.stroke={value:"transparent"});for(const a of yu1)s[a]&&delete o[a];}if(s.title||delete s.title,i!==void 0){let o=i;s.encode?.labels?.update&&$19(s.encode.labels.update.text)&&(o=Lt9(i,"datum.label",s.encode.labels.update.text.signal)),Nb(s,"labels","text",{signal:o});}return s;}function Ab(e){return Mn12(e)||Po1(e)?Ob(e):tf1(e);}function Ob(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),tf1(e));}function tf1(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const c=$19(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return A22(o,c)||o.push(c),o;},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}];}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}];}const Pb=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class nf1 extends pt10{constructor(t,n,i,r){super({...n},{name:t});this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1;}get isFit(){return!!this.data;}}function rf1(e){e.component.projection=q30(e)?zb(e):Lb(e);}function zb(e){if(e.hasProjection){const t=oe14(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?Rb(e):void 0,s=new nf1(e.projectionName(!0),{...oe14(e.config.projection),...t},i,r);return s.get("type")||s.set("type","equalEarth",!1),s;}return;}function Rb(e){const t=[],{encoding:n}=e;for(const i of[[Te9,Ne9],[Ee7,Ae9]])(K26(n[i[0]])||K26(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(he9)&&e.typedFieldDef(he9).type===xn9&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(G29.Main)),t;}function Ib(e,t){const n=jr3(Pb,r=>!g(e.explicit,r)&&!g(t.explicit,r)?!0:!!(g(e.explicit,r)&&g(t.explicit,r)&&be8(e.get(r),t.get(r)))),i=be8(e.size,t.size);if(i){if(n)return e;if(be8(e.explicit,{}))return t;if(be8(t.explicit,{}))return e;}return null;}function Lb(e){if(e.children.length===0)return;let t;for(const i of e.children)rf1(i);const n=jr3(e.children,i=>{const r=i.component.projection;if(r)if(t){const s=Ib(t,r);return s&&(t=s),!!s;}else return t=r,!0;else return!0;});if(t&&n){const i=e.projectionName(!0),r=new nf1(i,t.specifiedProjection,t.size,C26(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&r.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),i),o.merged=!0);}return r;}return;}function Mb(e,t,n,i){if(ii5(t,n)){const r=q30(e)?e.axis(n)??e.legend(n)??{}:{},s=w23(t,{expr:"datum"}),o=w23(t,{expr:"datum",binSuffix:"end"});return{formulaAs:w23(t,{binSuffix:"range",forAs:!0}),formula:Jn8(s,o,r.format,r.formatType,i)};}return{};}function sf1(e,t){return`${_a1(e)}_${t}`;}function Db(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)};}function So1(e,t,n){const i=Zi2(n,void 0)??{},r=sf1(i,t);return e.getName(`${r}_bins`);}function jb(e){return"as"in e;}function of1(e,t,n){let i,r;jb(e)?i=X1(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[w23(e,{forAs:!0}),w23(e,{binSuffix:"end",forAs:!0})];const s={...Zi2(t,void 0)},o=sf1(s,e.field),{signal:a,extentSignal:c}=Db(n,o);if(Pi3(s.extent)){const l=s.extent;r=Tl(n,l.param,l),delete s.extent;}const u={bin:s,field:e.field,as:[i],...a?{signal:a}:{},...c?{extentSignal:c}:{},...r?{span:r}:{}};return{key:o,binComponent:u};}class et13 extends I26{clone(){return new et13(null,C26(this.bins));}constructor(t,n){super(t);this.bins=n;}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s,o)=>{if(fe11(s)&&U25(s.bin)){const{key:a,binComponent:c}=of1(s,s.bin,n);r[a]={...c,...r[a],...Mb(n,s,o,n.config)};}return r;},{});return M20(i)?null:new et13(t,i);}static makeFromTransform(t,n,i){const{key:r,binComponent:s}=of1(n,n.bin,i);return new et13(t,{[r]:s});}merge(t,n){for(const i of b23(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=je9([...this.bins[i].as,...t.bins[i].as],P25)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove();}producedFields(){return new Set(ie14(this.bins).map(t=>t.as).flat(2));}dependentFields(){return new Set(ie14(this.bins).map(t=>t.field));}hash(){return`Bin ${P25(this.bins)}`;}assemble(){return ie14(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:we11(t.field),as:i,signal:t.signal,...Pi3(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:we11(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const c of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:w23({field:i[u]},{expr:"datum"}),as:c[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n;});}}function Ub(e,t,n,i){const r=q30(i)?i.encoding[He8(t)]:void 0;if(fe11(n)&&q30(i)&&Lc(n,r,i.markDef,i.config)){e.add(w23(n,{})),e.add(w23(n,{suffix:"end"}));const{mark:s,markDef:o,config:a}=i,c=Nt9({fieldDef:n,markDef:o,config:a});Qn7(s)&&c!==.5&&Y26(t)&&(e.add(w23(n,{suffix:ur2})),e.add(w23(n,{suffix:lr3}))),n.bin&&ii5(n,t)&&e.add(w23(n,{binSuffix:"range"}));}else if(ma1(t)){const s=ha1(t);e.add(i.getName(s));}else e.add(w23(n));return Yt9(n)&&Tg(n.scale?.range)&&e.add(n.scale.range.field),e;}function Bb(e,t){for(const n of b23(t)){const i=t[n];for(const r of b23(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]};}}class Me10 extends I26{clone(){return new Me10(null,new Set(this.dimensions),C26(this.measures));}constructor(t,n,i){super(t);this.dimensions=n,this.measures=i;}get groupBy(){return this.dimensions;}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(o=>{o.aggregate&&(i=!0);});const r={},s=new Set;return i?(n.forEachFieldDef((o,a)=>{const{aggregate:c,field:u}=o;if(c)if(c==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([w23(o,{forAs:!0})]);else{if(ct13(c)||_t7(c)){const l=ct13(c)?"argmin":"argmax",f=c[l];r[f]??(r[f]={}),r[f][l]=new Set([w23({op:l,field:f},{forAs:!0})]);}else r[u]??(r[u]={}),r[u][c]=new Set([w23(o,{forAs:!0})]);qe8(a)&&n.scaleDomain(a)==="unaggregated"&&(r[u]??(r[u]={}),r[u].min=new Set([w23({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([w23({field:u,aggregate:"max"},{forAs:!0})]));}else Ub(s,a,o,n);}),s.size+b23(r).length===0?null:new Me10(t,s,r)):null;}static makeFromTransform(t,n){var i;const r=new Set,s={};for(const o of n.aggregate){const{op:a,field:c,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||w23(o,{forAs:!0})])):(s[c]??(s[c]={}),(i=s[c])[a]??(i[a]=new Set),s[c][a].add(u||w23(o,{forAs:!0}))));}for(const o of n.groupby??[])r.add(o);return r.size+b23(s).length===0?null:new Me10(t,r,s);}merge(t){return oa1(this.dimensions,t.dimensions)?(Bb(this.measures,t.measures),!0):(tg("different dimensions, cannot merge"),!1);}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions);}dependentFields(){return new Set([...this.dimensions,...b23(this.measures)]);}producedFields(){const t=new Set;for(const n of b23(this.measures))for(const i of b23(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t);}return t;}hash(){return`Aggregate ${P25({dimensions:this.dimensions,measures:this.measures})}`;}assemble(){const t=[],n=[],i=[];for(const s of b23(this.measures))for(const o of b23(this.measures[s]))for(const a of this.measures[s][o])i.push(a),t.push(o),n.push(s==="*"?null:we11(s));const r={type:"aggregate",groupby:[...this.dimensions].map(we11),ops:t,fields:n,as:i};return r;}}class Rn11 extends I26{constructor(t,n,i,r){super(t);this.model=n,this.name=i,this.data=r;for(const s of _e6){const o=n.facet[s];if(o){const{bin:a,sort:c}=o;this[s]={name:n.getName(`${s}_domain`),fields:[w23(o),...U25(a)?[w23(o,{binSuffix:"end"})]:[]],...lt11(c)?{sortField:c}:w1(c)?{sortIndexField:Pn10(o,s)}:{}};}}this.childModel=n.child;}hash(){let t="Facet";for(const n of _e6)this[n]&&(t+=` ${n.charAt(0)}:${P25(this[n])}`);return t;}get fields(){const t=[];for(const n of _e6)this[n]?.fields&&t.push(...this[n].fields);return t;}dependentFields(){const t=new Set(this.fields);for(const n of _e6)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t;}producedFields(){return new Set;}getSource(){return this.name;}getChildIndependentFieldsWithStep(){const t={};for(const n of at13){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),s=i.get("range");if(J27(r)&&Ct8(s)){const o=vr1(this.childModel,n),a=Ao1(o);a?t[n]=a:x19(is1(n));}}}return t;}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];r&&i&&i[r]&&(n?(s.push(`distinct_${i[r]}`),o.push("max")):(s.push(i[r]),o.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:c,sortIndexField:u}=this[t];if(c){const{op:l=qi3,field:f}=c;s.push(f),o.push(l),a.push(w23(c,{forAs:!0}));}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]};}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],s={};for(const c of go1){for(const u of ho1){const l=(i[c]&&i[c][u])??[];for(const f of l)if(f.axes?.length>0){s[c]=!0;break;}}if(s[c]){const u=`length(data("${this.facet.name}"))`,l=c==="row"?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u};r.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:l}]});}}const{row:o,column:a}=s;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r;}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:s,facet:o}=this;if(r&&s&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),c=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:c}]});}for(const a of[nt11,tt12])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,i));if(o){const a=this.assembleFacetHeaderData(i);a&&t.push(...a);}return t;}}function af1(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e;}function Wb(e,t){const n=Hr3(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=af1(t.slice(5,t.length));return`timeParse(${n},'${i}')`;}else if(t.startsWith("utc:")){const i=af1(t.slice(4,t.length));return`utcParse(${n},'${i}')`;}else return x19(lp(t)),null;}function Hb(e){const t={};return wi3(e.filter,n=>{if(cc1(n)){let i=null;us1(n)?i=xe8(n.equal):fs1(n)?i=xe8(n.lte):ls1(n)?i=xe8(n.lt):ds1(n)?i=xe8(n.gt):ps1(n)?i=xe8(n.gte):gs1(n)?i=n.range[0]:hs1(n)&&(i=(n.oneOf??n.in)[0]),i&&(Bt8(i)?t[n.field]="date":V(i)?t[n.field]="number":X1(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date");}}),t;}function qb(e){const t={};function n(i){_n7(i)?t[i.field]="date":i.type==="quantitative"&&Bd(i.aggregate)?t[i.field]="number":pn9(i.field)>1?i.field in t||(t[i.field]="flatten"):Yt9(i)&&lt11(i.sort)&&pn9(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"));}if((q30(e)||ve9(e))&&e.forEachFieldDef((i,r)=>{if(fe11(i))n(i);else{const s=jt9(r),o=e.fieldDef(s);n({...i,type:o.type});}}),q30(e)){const{mark:i,markDef:r,encoding:s}=e;if(Ft7(i)&&!e.encoding.order){const o=r.orient==="horizontal"?"y":"x",a=s[o];S26(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number");}}return t;}function Gb(e){const t={};if(q30(e)&&e.component.selection)for(const n of b23(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&pn9(r.field)>1&&(t[r.field]="flatten");}return t;}class ce9 extends I26{clone(){return new ce9(null,C26(this._parse));}constructor(t,n){super(t);this._parse=n;}hash(){return`Parse ${P25(this._parse)}`;}static makeExplicit(t,n,i){let r={};const s=n.data;return!Ot7(s)&&s?.format?.parse&&(r=s.format.parse),this.makeWithAncestors(t,r,{},i);}static makeWithAncestors(t,n,i,r){for(const a of b23(i)){const c=r.getWithExplicit(a);c.value!==void 0&&(c.explicit||c.value===i[a]||c.value==="derived"||i[a]==="flatten"?delete i[a]:x19(Wa1(a,i[a],c.value)));}for(const a of b23(n)){const c=r.get(a);c!==void 0&&(c===n[a]?delete n[a]:x19(Wa1(a,n[a],c)));}const s=new pt10(n,i);r.copyAll(s);const o={};for(const a of b23(s.combine())){const c=s.get(a);c!==null&&(o[a]=c);}return b23(o).length===0||r.parseNothing?null:new ce9(t,o);}get parse(){return this._parse;}merge(t){this._parse={...this._parse,...t.parse},t.remove();}assembleFormatParse(){const t={};for(const n of b23(this._parse)){const i=this._parse[n];pn9(n)===1&&(t[n]=i);}return t;}producedFields(){return new Set(b23(this._parse));}dependentFields(){return new Set(b23(this._parse));}assembleTransforms(t=!1){return b23(this._parse).filter(n=>t?pn9(n)>1:!0).map(n=>{const i=Wb(n,this._parse[n]);if(!i)return null;const r={type:"formula",expr:i,as:dn10(n)};return r;}).filter(n=>n!==null);}}class Rt9 extends I26{clone(){return new Rt9(null);}constructor(t){super(t);}dependentFields(){return new Set;}producedFields(){return new Set([Le7]);}hash(){return"Identifier";}assemble(){return{type:"identifier",as:Le7};}}class ui5 extends I26{clone(){return new ui5(null,this.params);}constructor(t,n){super(t);this.params=n;}dependentFields(){return new Set;}producedFields(){return;}hash(){return`Graticule ${P25(this.params)}`;}assemble(){return{type:"graticule",...this.params===!0?{}:this.params};}}class li5 extends I26{clone(){return new li5(null,this.params);}constructor(t,n){super(t);this.params=n;}dependentFields(){return new Set;}producedFields(){return new Set([this.params.as??"data"]);}hash(){return`Hash ${P25(this.params)}`;}assemble(){return{type:"sequence",...this.params};}}class en9 extends I26{constructor(t){super(null);t??(t={name:"source"});let n;if(Ot7(t)||(n=t.format?{...pe9(t.format,["parse"])}:{}),si5(t))this._data={values:t.values};else if(Cn9(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];A22(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i;}}else Xu1(t)?this._data={values:[{type:"Sphere"}]}:(Gu1(t)||Ot7(t))&&(this._data={});this._generator=Ot7(t),t.name&&(this._name=t.name),n&&!M20(n)&&(this._data.format=n);}dependentFields(){return new Set;}producedFields(){return;}get data(){return this._data;}hasName(){return!!this._name;}get isGenerator(){return this._generator;}get dataName(){return this._name;}set dataName(t){this._name=t;}set parent(t){throw new Error("Source nodes have to be roots.");}remove(){throw new Error("Source nodes are roots and cannot be removed.");}hash(){throw new Error("Cannot hash sources");}assemble(){return{name:this._name,...this._data,transform:[]};}}var cf1=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n;},Vb=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e);},fi5;function vo1(e){return e instanceof en9||e instanceof ui5||e instanceof li5;}class wo1{constructor(){fi5.set(this,void 0),cf1(this,fi5,!1,"f");}setModified(){cf1(this,fi5,!0,"f");}get modifiedFlag(){return Vb(this,fi5,"f");}}fi5=new WeakMap;class tn10 extends wo1{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i;}optimize(t){const n=this.getNodeDepths(t,0,new Map),i=[...n.entries()].sort((r,s)=>s[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag;}}class $o1 extends wo1{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag;}}class Xb extends $o1{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove();}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of b23(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]));}}class Yb extends $o1{constructor(t){super();this.requiresSelectionId=t&&co1(t);}run(t){t instanceof Rt9&&(this.requiresSelectionId&&(vo1(t.parent)||t.parent instanceof Me10||t.parent instanceof ce9)||(this.setModified(),t.remove()));}}class Kb extends wo1{optimize(t){return this.run(t,new Set),this.modifiedFlag;}run(t,n){let i=new Set;t instanceof Je8&&(i=t.producedFields(),Ur2(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]));}}class Qb extends $o1{constructor(){super();}run(t){t instanceof ye9&&!t.isRequired()&&(this.setModified(),t.remove());}}class Zb extends tn10{run(t){if(vo1(t))return;if(t.numChildren()>1)return;for(const n of t.children)if(n instanceof ce9)if(t instanceof ce9)this.setModified(),t.merge(n);else{if(Wr4(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent();}return;}}class Jb extends tn10{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof ce9);if(t.numChildren()>1&&i.length>=1){const r={},s=new Set;for(const o of i){const a=o.parse;for(const c of b23(a))c in r?r[c]!==a[c]&&s.add(c):r[c]=a[c];}for(const o of s)delete r[o];if(!M20(r)){this.setModified();const o=new ce9(t,r);for(const a of n){if(a instanceof ce9)for(const c of b23(r))delete a.parse[c];t.removeChild(a),a.parent=o,a instanceof ce9&&b23(a.parse).length===0&&a.remove();}}}}}class ex extends tn10{run(t){t instanceof ye9||t.numChildren()>0||t instanceof Rn11||t instanceof en9||(this.setModified(),t.remove());}}class tx extends tn10{run(t){const n=t.children.filter(r=>r instanceof Je8),i=n.pop();for(const r of n)this.setModified(),i.merge(r);}}class nx extends tn10{run(t){const n=t.children.filter(r=>r instanceof Me10),i={};for(const r of n){const s=P25(r.groupBy);s in i||(i[s]=[]),i[s].push(r);}for(const r of b23(i)){const s=i[r];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified());}}}}class ix extends tn10{constructor(t){super();this.model=t;}run(t){const n=!(vo1(t)||t instanceof An12||t instanceof ce9||t instanceof Rt9),i=[],r=[];for(const s of t.children)s instanceof et13&&(n&&!Wr4(t.producedFields(),s.dependentFields())?i.push(s):r.push(s));if(i.length>0){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof et13?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent();}if(r.length>1){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified();}}}class rx extends tn10{run(t){const n=[...t.children],i=fn9(n,o=>o instanceof ye9);if(!i||t.numChildren()<=1)return;const r=[];let s;for(const o of n)if(o instanceof ye9){let a=o;for(;a.numChildren()===1;){const[c]=a.children;if(c instanceof ye9)a=c;else break;}r.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a;}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=s;}}}class nn11 extends I26{clone(){return new nn11(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}addDimensions(t){this.transform.groupby=je9(this.transform.groupby.concat(t),n=>n);}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t;}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName));}getDefaultName(t){return t.as??w23(t);}hash(){return`JoinAggregateTransform ${P25(this.transform)}`;}assemble(){const t=[],n=[],i=[];for(const s of this.transform.joinaggregate)n.push(s.op),i.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}};}}class In7 extends I26{clone(){return new In7(null,{...this.filter});}constructor(t,n){super(t);this.filter=n;}static make(t,n,i){const{config:r,markDef:s}=n,{marks:o,scales:a}=i;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const c=n.reduceFieldDef((u,l,f)=>{const d=qe8(f)&&n.getScaleComponent(f);if(d){const p=d.get("type"),{aggregate:h}=l,g=$s1({scaleChannel:f,markDef:s,config:r,scaleType:p,isCountAggregate:Oi3(h)});g!=="show"&&g!=="always-valid"&&(u[l.field]=l);}return u;},{});return b23(c).length?new In7(t,c):null;}dependentFields(){return new Set(b23(this.filter));}producedFields(){return new Set;}hash(){return`FilterInvalid ${P25(this.filter)}`;}assemble(){const t=b23(this.filter).reduce((n,i)=>{const r=this.filter[i],s=w23(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${s}) || (${Eo1(s)}))`):r.type==="quantitative"&&n.push(Eo1(s))),n;},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null;}}function Eo1(e){return`isValid(${e}) && isFinite(+${e})`;}function sx(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=w23(i);return r&&t.push(r),t;},[]);}function ox(e){return w1(e)&&e.every(t=>X1(t))&&e.length>1;}class ht10 extends I26{clone(){return new ht10(null,C26(this._stack));}constructor(t,n){super(t);this._stack=n;}static makeFromTransform(t,n){const{stack:i,groupby:r,as:s,offset:o="zero"}=n,a=[],c=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),c.push(X26(f.order,"ascending"));const u={field:a,order:c};let l;return ox(s)?l=s:X1(s)?l=[s,`${s}_end`]:l=[`${n.stack}_start`,`${n.stack}_end`],new ht10(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:o,sort:u,facetby:[],as:l});}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:c}=i,u=s.map(p=>{const h=r[p];return Ie8(h);}).filter(p=>!!p),l=sx(n),f=n.encoding.order;let d;if(w1(f)||S26(f))d=Pa1(f);else{const p=Mc(f)?f.sort:o==="y"?"descending":"ascending";d=l.reduce((h,g)=>(h.field.includes(g)||(h.field.push(g),h.order.push(p)),h),{field:[],order:[]});}return new ht10(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:l,sort:d,offset:a,impute:c,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]});}get stack(){return this._stack;}addDimensions(t){this._stack.facetby.push(...t);}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t;}producedFields(){return new Set(this._stack.as);}hash(){return`Stack ${P25(this._stack)}`;}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[w23(r,{binSuffix:"mid"})]:[w23(r,{}),w23(r,{binSuffix:"end"})]:[w23(r)]).flat():i??[];}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:s,sort:o,offset:a,impute:c,as:u}=this._stack;if(c)for(const l of i){const{bandPosition:f=.5,bin:d}=l;if(d){const p=w23(l,{expr:"datum"}),h=w23(l,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${Eo1(p)} ? ${f}*${p}+${1-f}*${h} : ${p}`,as:w23(l,{binSuffix:"mid",forAs:!0})});}t.push({type:"impute",field:r,groupby:[...s,...n],key:w23(l,{binSuffix:"mid"}),method:"value",value:0});}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:o,as:u,offset:a}),t;}}class Ln7 extends I26{clone(){return new Ln7(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}addDimensions(t){this.transform.groupby=je9(this.transform.groupby.concat(t),n=>n);}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t;}producedFields(){return new Set(this.transform.window.map(this.getDefaultName));}getDefaultName(t){return t.as??w23(t);}hash(){return`WindowTransform ${P25(this.transform)}`;}assemble(){const t=[],n=[],i=[],r=[];for(const f of this.transform.window)n.push(f.op),i.push(this.getDefaultName(f)),r.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Jr4(f)))return{type:"joinaggregate",as:i,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],c=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),c.push(f.order??"ascending");const u={field:a,order:c},l=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:u,...l!==void 0?{ignorePeers:l}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}};}}function ax(e){function t(n){if(!(n instanceof Rn11)){const i=n.clone();if(i instanceof ye9){const r=ko1+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i;}else(i instanceof Me10||i instanceof ht10||i instanceof Ln7||i instanceof nn11)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i];}return n.children.flatMap(t);}return t;}function _o1(e){if(e instanceof Rn11)if(e.numChildren()===1&&!(e.children[0]instanceof ye9)){const t=e.children[0];(t instanceof Me10||t instanceof ht10||t instanceof Ln7||t instanceof nn11)&&t.addDimensions(e.fields),t.swapWithParent(),_o1(e);}else{const t=e.model.component.data.main;uf1(t);const n=ax(e),i=e.children.map(n).flat();for(const r of i)r.parent=t;}else e.children.map(_o1);}function uf1(e){if(e instanceof ye9&&e.type===G29.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Rn11||(t.swapWithParent(),uf1(e));}}const ko1="scale_";function Co1(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Co1(t.children))return!1;}return!0;}function De6(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n;}function lf1(e,t,n){let i=e.sources,r=!1;return r=De6(new Qb,i)||r,r=De6(new Yb(t),i)||r,i=i.filter(s=>s.numChildren()>0),r=De6(new ex,i)||r,i=i.filter(s=>s.numChildren()>0),n||(r=De6(new Zb,i)||r,r=De6(new ix(t),i)||r,r=De6(new Kb,i)||r,r=De6(new Jb,i)||r,r=De6(new nx,i)||r,r=De6(new tx,i)||r,r=De6(new Xb,i)||r,r=De6(new rx,i)||r),e.sources=i,r;}function cx(e,t){Co1(e.sources);let n=0,i=0;for(let r=0;r<5&&lf1(e,t,!0);r++)n++;e.sources.map(_o1);for(let r=0;r<5&&lf1(e,t,!1);r++)i++;Co1(e.sources),Math.max(n,i)===5&&x19(`Maximum optimization runs(${5}) reached.`);}class te18{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t});}static fromName(t,n){return new te18(()=>t(n));}}function ff1(e){q30(e)?ux(e):lx(e);}function ux(e){const t=e.component.scales;for(const n of b23(t)){const i=dx(e,n),r=t[n];if(r.setWithExplicit("domains",i),gx(e,n),e.component.data.isFaceted){let s=e;for(;!ve9(s)&&s.parent;)s=s.parent;const o=s.component.resolve.scale[n];if(o==="shared")for(const a of i.value)ut11(a)&&(a.data=ko1+a.data.replace(ko1,""));}}}function lx(e){for(const n of e.children)ff1(n);const t=e.component.scales;for(const n of b23(t)){let i,r=null;for(const s of e.children){const o=s.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=At10(i,o.getWithExplicit("domains"),"domains","scale",To1);const a=o.get("selectionExtent");r&&a&&r.param!==a.param&&x19(op),r=a;}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0);}}function fx(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:s}=df1(t,n);if(!r){x19(s);return;}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=df1(t,n);if(r)return"unaggregated";}return e;}function dx(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=fx(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&K26(i.x2)?K26(i.x)?At10(It7(n,r,e,"x"),It7(n,r,e,"x2"),"domain","scale",To1):It7(n,r,e,"x2"):t==="y"&&K26(i.y2)?K26(i.y)?At10(It7(n,r,e,"y"),It7(n,r,e,"y2"),"domain","scale",To1):It7(n,r,e,"y2"):It7(n,r,e,t);}function px(e,t,n){return e.map(i=>{const r=Ji2(i,{timeUnit:n,type:t});return{signal:`{data: ${r}}`};});}function Fo1(e,t,n){const i=Z26(n)?.unit;return t==="temporal"||i?px(e,t,i):[e];}function It7(e,t,n,i){const{encoding:r,markDef:s,mark:o,config:a,stack:c}=n,u=K26(r[i]),{type:l}=u,f=u.timeUnit,d=ay({invalid:Ge8("invalid",s,a),isPath:Ft7(o)});if(Ng(t)){const g=It7(e,void 0,n,i),m=Fo1(t.unionWith,l,f);return Ze6([...m,...g.value]);}else{if($19(t))return Ze6([t]);if(t&&t!=="unaggregated"&&!mc(t))return Ze6(Fo1(t,l,f));}if(c&&i===c.fieldChannel){if(c.offset==="normalize")return Se7([[0,1]]);const g=n.requestDataName(d);return Se7([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}]);}const p=qe8(i)&&S26(u)?hx(n,i,e):void 0;if(Ke8(u)){const g=Fo1([u.datum],l,f);return Se7(g);}const h=u;if(t==="unaggregated"){const{field:g}=u;return Se7([{data:n.requestDataName(d),field:w23({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:w23({field:g,aggregate:"max"})}]);}else if(U25(h.bin)){if(J27(e))return e==="bin-ordinal"?Se7([]):Se7([{data:Bn8(p)?n.requestDataName(d):n.requestDataName(G29.Raw),field:n.vgField(i,ii5(h,i)?{binSuffix:"range"}:{}),sort:p===!0||!M1(p)?{field:n.vgField(i,{}),op:"min"}:p}]);{const{bin:g}=h;if(U25(g)){const m=So1(n,h.field,g);return Se7([new te18(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`;})]);}else return Se7([{data:n.requestDataName(d),field:n.vgField(i,{})}]);}}else if(h.timeUnit&&A22(["time","utc"],e)){const g=r[He8(i)];if(Lc(h,g,s,a)){const m=n.requestDataName(d),y=Nt9({fieldDef:h,fieldDef2:g,markDef:s,config:a}),v=Qn7(o)&&y!==.5&&Y26(i);return Se7([{data:m,field:n.vgField(i,v?{suffix:ur2}:{})},{data:m,field:n.vgField(i,{suffix:v?lr3:"end"})}]);}}return Se7(p?[{data:Bn8(p)?n.requestDataName(d):n.requestDataName(G29.Raw),field:n.vgField(i),sort:p}]:[{data:n.requestDataName(d),field:n.vgField(i)}]);}function No1(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":qi3),...i?{field:we11(i)}:{},...r?{order:r}:{}};}function gx(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,s=mc(i)&&i,o=Ut8(r)&&Pi3(r.extent)&&r.extent;(s||o)&&n.set("selectionExtent",s??o,!0);}function hx(e,t,n){if(!J27(n))return;const i=e.fieldDef(t),r=i.sort;if(zc(r))return{op:"min",field:Pn10(i,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(lt11(r)){const a=s&&!o.has(r.field);return No1(r,a);}else if(ah(r)){const{encoding:a,order:c}=r,u=e.fieldDef(a),{aggregate:l,field:f}=u,d=s&&!o.has(f);if(ct13(l)||_t7(l))return No1({field:w23(u),order:c},d);if(Jr4(l)||!l)return No1({op:l,field:f,order:c},d);}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(A22(["ascending",void 0],r))return!0;}return;}function df1(e,t){const{aggregate:n,type:i}=e;return n?X1(n)&&!Hd.has(n)?{valid:!1,reason:Op(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Pp(e)}:{valid:!0}:{valid:!1,reason:Ap(e)};}function To1(e,t,n,i){return e.explicit&&t.explicit&&x19(Mp(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]};}function mx(e){const t=je9(e.map(o=>{if(ut11(o)){const{sort:a,...c}=o;return c;}return o;}),P25),n=je9(e.map(o=>{if(ut11(o)){const a=o.sort;return a!==void 0&&!Bn8(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a;}return;}).filter(o=>o!==void 0),P25);if(t.length===0)return;if(t.length===1){const o=e[0];if(ut11(o)&&n.length>0){let a=n[0];if(n.length>1){x19(Ya1);const c=n.filter(u=>M1(u)&&"op"in u&&u.op!=="min");n.every(u=>M1(u)&&"op"in u)&&c.length===1?a=c[0]:a=!0;}else if(M1(a)&&"field"in a){const c=a.field;o.field===c&&(a=a.order?{order:a.order}:!0);}return{...o,sort:a};}return o;}const i=je9(n.map(o=>Bn8(o)||!("op"in o)||X1(o.op)&&o.op in jd?o:(x19(jp(o)),!0)),P25);let r;i.length===1?r=i[0]:i.length>1&&(x19(Ya1),r=!0);const s=je9(e.map(o=>ut11(o)?o.data:null),o=>o);if(s.length===1&&s[0]!==null){const o={data:s[0],fields:t.map(a=>a.field),...r?{sort:r}:{}};return o;}return{fields:t,...r?{sort:r}:{}};}function Ao1(e){if(ut11(e)&&X1(e.field))return e.field;if(qd(e)){let t;for(const n of e.fields)if(ut11(n)&&X1(n.field)){if(!t)t=n.field;else if(t!==n.field)return x19(Up),t;}return x19(Bp),t;}else if(Gd(e)){x19(Wp);const t=e.fields[0];return X1(t)?t:void 0;}return;}function vr1(e,t){const n=e.component.scales[t],i=n.get("domains").map(r=>(ut11(r)&&(r.data=e.lookupDataSource(r.data)),r));return mx(i);}function pf1(e){return Mn12(e)||Po1(e)?e.children.reduce((t,n)=>t.concat(pf1(n)),gf(e)):gf(e);}function gf(e){return b23(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:s,type:o,selectionExtent:a,domains:c,range:u,reverse:l,...f}=r,d=yx(r.range,s,n,e),p=vr1(e,n),h=a?py(e,a,i,p):null;return t.push({name:s,type:o,...p?{domain:p}:{},...h?{domainRaw:h}:{},range:d,...l!==void 0?{reverse:l}:{},...f}),t;},[]);}function yx(e,t,n,i){if(Y26(n)){if(Ct8(e))return{step:{signal:`${t}_step`}};}else if(M1(e)&&ut11(e))return{...e,data:i.lookupDataSource(e.data)};return e;}class hf1 extends pt10{constructor(t,n){super({},{name:t});this.merged=!1,this.setWithExplicit("type",n);}domainHasZero(){const t=this.get("type");if(A22([se14.LOG,se14.TIME,se14.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&A22([se14.LINEAR,se14.SQRT,se14.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,s=!1,o=!1;for(const a of i){if(w1(a)){const c=a[0],u=a[a.length-1];if(V(c)&&V(u))if(c<=0&&u>=0){r=!0;continue;}else{s=!0;continue;}}o=!0;}if(r)return"definitely";if(s&&!o)return"definitely-not";}return"maybe";}}const bx=["range","scheme"];function xx(e){const t=e.component.scales;for(const n of Qr4){const i=t[n];if(!i)continue;const r=Sx(n,e);i.setWithExplicit("range",r);}}function mf1(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,s=me11(t),o=e.getName(s);if(M1(i)&&i.binned&&i.step!==void 0)return new te18(()=>{const a=e.scaleName(t),c=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(o)} / (${c})`;});if(U25(i)){const a=So1(e,r,i);return new te18(()=>{const c=e.getSignalName(a),u=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(o)} / (${u})`;});}}return;}function Sx(e,t){const n=t.specifiedScales[e],{size:i}=t,r=t.getScaleComponent(e),s=r.get("type");for(const f of bx)if(n[f]!==void 0){const d=xs1(s,f),p=yc(e,f);if(!d)x19(Va1(s,f,e));else if(p)x19(p);else switch(f){case"range":{const h=n.range;if(w1(h)){if(Y26(e))return Ze6(h.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return te18.fromName(y,m);}return g;}));}else if(M1(h))return Ze6({data:t.requestDataName(G29.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return Ze6(h);}case"scheme":return Ze6(vx(n[f]));}}const o=e===H21||e==="xOffset"?"width":"height",a=i[o];if(Qe10(a)){if(Y26(e))if(J27(s)){const f=bf1(a,t,e);if(f)return Ze6({step:f});}else x19(Xa1(o));else if(Xn9(e)){const f=e===xt8?"x":"y",d=t.getScaleComponent(f),p=d.get("type");if(p==="band"){const h=xf(a,s);if(h)return Ze6(h);}}}const{rangeMin:c,rangeMax:u}=n,l=wx(e,t);return(c!==void 0||u!==void 0)&&xs1(s,"rangeMin")&&w1(l)&&l.length===2?Ze6([c??l[0],u??l[1]]):Se7(l);}function vx(e){return Fg(e)?{scheme:e.name,...pe9(e,["name"])}:{scheme:e};}function yf1(e,t,n,{center:i}={}){const r=me11(e),s=t.getName(r),o=t.getSignalName.bind(t);return e===Q26&&Pe7(n)?i?[te18.fromName(a=>`${o(a)}/2`,s),te18.fromName(a=>`-${o(a)}/2`,s)]:[te18.fromName(o,s),0]:i?[te18.fromName(a=>`-${o(a)}/2`,s),te18.fromName(a=>`${o(a)}/2`,s)]:[0,te18.fromName(o,s)];}function wx(e,t){const{size:n,config:i,mark:r,encoding:s}=t,{type:o}=K26(s[e]),a=t.getScaleComponent(e),c=a.get("type"),{domain:u,domainMid:l}=t.specifiedScales[e];switch(e){case H21:case Q26:{if(A22(["point","band"],c)){const f=Sf(e,n,i.view);if(Qe10(f)){const d=bf1(f,t,e);return{step:d};}}return yf1(e,t,c);}case xt8:case gn9:return $x(e,t,c);case st12:{const f=kx(r,i),d=Cx(r,n,t,i);return Sn10(c)?_x(f,d,Ex(c,i,u,e)):[f,d];}case $e9:return[0,Math.PI*2];case Mt9:return[0,360];case Fe10:return[0,new te18(()=>{const f=t.getSignalName(ve9(t.parent)?"child_width":"width"),d=t.getSignalName(ve9(t.parent)?"child_height":"height");return`min(${f},${d})/2`;})];case wt7:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case $t10:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case he9:return"symbol";case ge8:case Be7:case We7:return c==="ordinal"?o==="nominal"?"category":"ordinal":l!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case ot12:case St8:case vt8:return[i.scale.minOpacity,i.scale.maxOpacity];}}function bf1(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),s=Ti3(n),o=i[s],a=xu1({step:e,offsetIsDiscrete:F24(o)&&lc(o.type)});if(a==="offset"&&Zc(i,s)){const c=t.getScaleComponent(s),u=t.scaleName(s);let l=`domain('${u}').length`;if(c.get("type")==="band"){const d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;l=`bandspace(${l}, ${d}, ${p})`;}const f=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${l} / (1-${ts1(f)})`};}else return e.step;}function xf(e,t){const n=xu1({step:e,offsetIsDiscrete:J27(t)});return n==="offset"?{step:e.step}:void 0;}function $x(e,t,n){const i=e===xt8?"x":"y",r=t.getScaleComponent(i);if(!r)return yf1(i,t,n,{center:!0});const s=r.get("type"),o=t.scaleName(i),{markDef:a,config:c}=t;if(s==="band"){const u=Sf(i,t.size,t.config.view);if(Qe10(u)){const l=xf(u,n);if(l)return l;}return[0,{signal:`bandwidth('${o}')`}];}else{const u=t.encoding[i];if(S26(u)&&u.timeUnit){const l=oc1(u.timeUnit,h=>`scale('${o}', ${h})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Nt9({fieldDef:u,markDef:a,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){const h=$19(f)?`${f.signal}/2`+p:`${f/2+d}`,g=$19(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${h} * (${l})`},{signal:`${g} * (${l})`}];}return[0,{signal:l}];}return ra2(`Cannot use ${e} scale if ${i} scale is not discrete.`);}}function Sf(e,t,n){const i=e===H21?"width":"height",r=t[i];return r||or3(n,i);}function Ex(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&w1(n)?n.length+1:(x19(Zp(i)),3);}}function _x(e,t,n){const i=()=>{const r=Oe5(t),s=Oe5(e),o=`(${r} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${r} + ${o}, ${o})`;};return $19(t)?new te18(i):{signal:i()};}function kx(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize;}throw new Error(Ri3("size",e));}function Cx(e,t,n,i){const r={x:mf1(n,"x"),y:mf1(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const s=wf1(t,r,i.view);return V(s)?s-1:new te18(()=>`${s.signal} - 1`);}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const s=wf1(t,r,i.view);return V(s)?Math.pow(.95*s,2):new te18(()=>`pow(${.95} * ${s.signal}, 2)`);}}throw new Error(Ri3("size",e));}function wf1(e,t,n){const i=Qe10(e.width)?e.width.step:sr2(n,"width"),r=Qe10(e.height)?e.height.step:sr2(n,"height");return t.x||t.y?new te18(()=>{const s=[t.x?t.x.signal:i,t.y?t.y.signal:r];return`min(${s.join(", ")})`;}):Math.min(i,r);}function $f(e,t){q30(e)?Fx(e,t):kf(e,t);}function Fx(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:s,specifiedScales:o}=e;for(const a of b23(n)){const c=o[a],u=n[a],l=e.getScaleComponent(a),f=K26(r[a]),d=c[t],p=l.get("type"),h=l.get("padding"),g=l.get("paddingInner"),m=xs1(p,t),y=yc(a,t);if(d!==void 0&&(m?y&&x19(y):x19(Va1(p,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,k=f.type;switch(t){case"domainMax":case"domainMin":Bt8(c[t])||k==="temporal"||v?u.set(t,{signal:Ji2(c[t],{type:k,timeUnit:v})},!0):u.set(t,c[t],!0);break;default:u.copyKeyFromObject(t,c);}}else{const v=t in Ef?Ef[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:p,scalePadding:h,scalePaddingInner:g,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:s,config:i,hasNestedOffsetScale:Jc(r,a),hasSecondaryRangeChannel:!!r[He8(a)]}):i.scale[t];v!==void 0&&u.set(t,v,!1);}}}const Ef={bins:({model:e,fieldOrDatumDef:t})=>S26(t)?Nx(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Tx(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:s})=>Ax(e,t,n,i,r,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>Ox(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:s})=>Px(e,t,n.type,i,r.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:s})=>zx(e,t,n,i,r.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=S26(e)?e.sort:void 0;return Rx(t,r,n,i.scale);},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:s,hasSecondaryRangeChannel:o})=>Ix(e,t,n,i,r,s.scale,o)};function _f(e){q30(e)?xx(e):kf(e,"range");}function kf(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?_f(i):$f(i,t);for(const i of b23(n)){let r;for(const s of e.children){const o=s.component.scales[i];if(o){const a=o.getWithExplicit(t);r=At10(r,a,t,"scale",qu1((c,u)=>{switch(t){case"range":return c.step&&u.step?c.step-u.step:0;}return 0;}));}}n[i].setWithExplicit(t,r);}}function Nx(e,t){const n=t.bin;if(U25(n)){const i=So1(e,t.field,n);return new te18(()=>e.getSignalName(i));}else if(re17(n)&&Ut8(n)&&n.step!==void 0)return{step:n.step};return;}function Tx(e,t){return A22([ge8,Be7,We7],e)&&t!=="nominal"?"hcl":void 0;}function Ax(e,t,n,i,r,s){return Ie8(s)?.bin||w1(n)||r!=null||i!=null||A22([se14.TIME,se14.UTC],e)?void 0:Y26(t)?!0:void 0;}function Ox(e,t,n,i,r,s){if(Y26(e)){if(Xe7(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=r;if(o==="bar"&&!(S26(i)&&(i.bin||i.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize;}if(t===se14.POINT)return n.pointPadding;}return;}function Px(e,t,n,i,r,s=!1){if(e!==void 0)return;if(Y26(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:c,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=r;return s?l:X26(o,n==="bar"?a:n==="tick"?u:c);}else if(Xn9(t)&&i===se14.BAND)return r.offsetBandPaddingInner;return;}function zx(e,t,n,i,r,s=!1){if(e!==void 0)return;if(Y26(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=r;if(s)return a;if(n===se14.BAND)return X26(o,$19(i)?{signal:`${i.signal}/2`}:i/2);}else if(Xn9(t)){if(n===se14.POINT)return .5;if(n===se14.BAND)return r.offsetBandPaddingOuter;}return;}function Rx(e,t,n,i){return n==="x"&&i.xReverse!==void 0?Pe7(e)&&t==="descending"?$19(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:Pe7(e)&&t==="descending"?!0:void 0;}function Ix(e,t,n,i,r,s,o){const a=!!n&&n!=="unaggregated";if(a&&Pe7(r)){if(w1(n)){const c=n[0],u=n[n.length-1];if(V(c)&&c<=0&&V(u)&&u>=0)return!0;}return!1;}if(e==="size"&&t.type==="quantitative"&&!Sn10(r))return!0;if(!(S26(t)&&t.bin)&&A22([...at13,...Od],e)){const{orient:c,type:u}=i;return A22(["bar","area","line","trail"],u)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:A22(["bar","area"],u)&&!o?!0:s?.zero;}return!1;}function Lx(e,t,n,i,r=!1){const s=Mx(t,n,i,r),{type:o}=e;return qe8(t)?o!==void 0?Rg(t,o)?S26(n)&&!zg(o,n.type)?(x19(Ip(o,s)),s):o:(x19(Rp(t,o,s)),s):s:null;}function Mx(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(mn10(e)||Zr4(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&x19(ss1(e,"ordinal")),"ordinal";if(Y26(e)||Xn9(e)){if(A22(["rect","bar","image","rule","tick"],n.type))return"band";if(i)return"band";}else if(n.type==="arc"&&e in Kr4)return"band";const r=n[me11(e)];return Gt7(r)||wn13(t)&&t.axis?.tickBand?"band":"point";}case"temporal":return mn10(e)?"time":Zr4(e)==="discrete"?(x19(ss1(e,"temporal")),"ordinal"):S26(t)&&t.timeUnit&&Z26(t.timeUnit).utc?"utc":"time";case"quantitative":return mn10(e)?S26(t)&&U25(t.bin)?"bin-ordinal":"linear":Zr4(e)==="discrete"?(x19(ss1(e,"quantitative")),"ordinal"):"linear";case"geojson":return;}throw new Error(qa1(t.type));}function Dx(e,{ignoreRange:t}={}){Cf(e),ff1(e);for(const n of Pg)$f(e,n);t||_f(e);}function Cf(e){q30(e)?e.component.scales=jx(e):e.component.scales=Bx(e);}function jx(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const s of Qr4){const o=K26(t[s]);if(o&&n===Sc&&s===he9&&o.type===xn9)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const c=Jc(t,s),u=Lx(a,s,o,i,c);r[s]=new hf1(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u});}}return r;}const Ux=qu1((e,t)=>fc(e)-fc(t));function Bx(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const s of e.children){Cf(s);for(const o of b23(s.component.scales))if((t=r.scale)[o]??(t[o]=Hl(o,e)),r.scale[o]==="shared"){const a=i[o],c=s.component.scales[o].getWithExplicit("type");a?$g(a.value,c.value)?i[o]=At10(a,c,"type","scale",Ux):(r.scale[o]="independent",delete i[o]):i[o]=c;}}for(const s of b23(i)){const o=e.scaleName(s,!0),a=i[s];n[s]=new hf1(o,a);for(const c of e.children){const u=c.component.scales[s];u&&(c.renameScale(u.get("name"),o),u.merged=!0);}}return n;}class Oo1{constructor(){this.nameMap={};}rename(t,n){this.nameMap[t]=n;}has(t){return this.nameMap[t]!==void 0;}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t;}}function q30(e){return e?.type==="unit";}function ve9(e){return e?.type==="facet";}function Po1(e){return e?.type==="concat";}function Mn12(e){return e?.type==="layer";}class zo1{constructor(t,n,i,r,s,o,a){this.type=n,this.parent=i,this.config=s,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=i,this.config=s,this.view=oe14(a),this.name=t.name??r,this.title=kt9(t.title)?{text:t.title}:t.title?oe14(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new Oo1,this.projectionNameMap=i?i.projectionNameMap:new Oo1,this.signalNameMap=i?i.signalNameMap:new Oo1,this.data=t.data,this.description=t.description,this.transforms=Ym(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Jh(t,n,s),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:Gi3(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new pt10,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?C26(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}};}get width(){return this.getSizeSignalRef("width");}get height(){return this.getSizeSignalRef("height");}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup();}parseScale(){Dx(this);}parseProjection(){rf1(this);}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height");}parseLegends(){Zl(this);}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const s of b23(i)){const o=i[s];o!==void 0&&(r[s]=B24(o));}return r;}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=B24(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:M20(n)?void 0:n;}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,s=cb(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}};}assembleDefaultLayout(){return{};}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of _e6)t[i].title&&n.push(nb(this,i));for(const i of go1)n=n.concat(ib(this,i));return n;}assembleAxes(){return Wy(this.component.axes,this.config);}assembleLegends(){return ef1(this);}assembleProjections(){return Ab(this);}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...Ca1(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};return i.text?(A22(["unit","layer"],this.type)?A22(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),M20(i)?void 0:i):void 0;}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||ve9(this.parent)?pf1(this):[];r.length>0&&(n.scales=r);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n;}getName(t){return W22((this.name?`${this.name}_`:"")+t);}getDataName(t){return this.getName(G29[t].toLowerCase());}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n;}getSizeSignalRef(t){if(ve9(this.parent)){const n=Bl(t),i=Ai3(n),r=this.component.scales[i];if(r&&!r.merged){const s=r.get("type"),o=r.get("range");if(J27(s)&&Ct8(o)){const a=r.get("name"),c=vr1(this,i),u=Ao1(c);if(u){const l=w23({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Ul(a,r,l)};}else return x19(is1(i)),null;}}}return{signal:this.signalNameMap.get(this.getName(t))};}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t;}getSignalName(t){return this.signalNameMap.get(t);}renameSignal(t,n){this.signalNameMap.rename(t,n);}renameScale(t,n){this.scaleNameMap.rename(t,n);}renameProjection(t,n){this.projectionNameMap.rename(t,n);}scaleName(t,n){return n?this.getName(t):ba1(t)&&qe8(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0;}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0;}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0;}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0;}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(ep(n));return i;}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef());}}class Ff extends zo1{vgField(t,n={}){const i=this.fieldDef(t);return i?w23(i,n):void 0;}reduceFieldDef(t,n){return Fh(this.getMapping(),(i,r,s)=>{const o=Ie8(r);return o?t(i,o,s):i;},n);}forEachFieldDef(t,n){Ps1(this.getMapping(),(i,r)=>{const s=Ie8(i);s&&t(s,r);},n);}}class wr3 extends I26{clone(){return new wr3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r;}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`DensityTransform ${P25(this.transform)}`;}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i;}}class $r4 extends I26{clone(){return new $r4(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);}dependentFields(){return new Set([this.transform.extent]);}producedFields(){return new Set([]);}hash(){return`ExtentTransform ${P25(this.transform)}`;}assemble(){const{extent:t,param:n}=this.transform,i={type:"extent",field:t,signal:n};return i;}}class Er3 extends I26{clone(){return new Er3(this.parent,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((s,o)=>r[o]??s);}dependentFields(){return new Set(this.transform.flatten);}producedFields(){return new Set(this.transform.as);}hash(){return`FlattenTransform ${P25(this.transform)}`;}assemble(){const{flatten:t,as:n}=this.transform,i={type:"flatten",fields:t,as:n};return i;}}class _r1 extends I26{clone(){return new _r1(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"];}dependentFields(){return new Set(this.transform.fold);}producedFields(){return new Set(this.transform.as);}hash(){return`FoldTransform ${P25(this.transform)}`;}assemble(){const{fold:t,as:n}=this.transform,i={type:"fold",fields:t,as:n};return i;}}class Dn6 extends I26{clone(){return new Dn6(null,C26(this.fields),this.geojson,this.signal);}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Te9,Ne9],[Ee7,Ae9]]){const s=r.map(o=>{const a=K26(n.encoding[o]);return S26(a)?a.field:Ke8(a)?{expr:`${a.datum}`}:Re11(a)?{expr:`${a.value}`}:void 0;});(s[0]||s[1])&&(t=new Dn6(t,s,null,n.getName(`geojson_${i++}`)));}if(n.channelHasField(he9)){const r=n.typedFieldDef(he9);r.type===xn9&&(t=new Dn6(t,null,r.field,n.getName(`geojson_${i++}`)));}return t;}constructor(t,n,i,r){super(t);this.fields=n,this.geojson=i,this.signal=r;}dependentFields(){const t=(this.fields??[]).filter(X1);return new Set([...this.geojson?[this.geojson]:[],...t]);}producedFields(){return new Set;}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${P25(this.fields)}`;}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}];}}class di4 extends I26{clone(){return new di4(null,this.projection,C26(this.fields),C26(this.as));}constructor(t,n,i,r){super(t);this.projection=n,this.fields=i,this.as=r;}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Te9,Ne9],[Ee7,Ae9]]){const r=i.map(o=>{const a=K26(n.encoding[o]);return S26(a)?a.field:Ke8(a)?{expr:`${a.datum}`}:Re11(a)?{expr:`${a.value}`}:void 0;}),s=i[0]===Ee7?"2":"";(r[0]||r[1])&&(t=new di4(t,n.projectionName(),r,[n.getName(`x${s}`),n.getName(`y${s}`)]));}return t;}dependentFields(){return new Set(this.fields.filter(X1));}producedFields(){return new Set(this.as);}hash(){return`Geopoint ${this.projection} ${P25(this.fields)} ${P25(this.as)}`;}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as};}}class rn11 extends I26{clone(){return new rn11(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]]);}producedFields(){return new Set([this.transform.impute]);}processSequence(t){const{start:n=0,stop:i,step:r}=t,s=[n,i,...r?[r]:[]].join(",");return{signal:`sequence(${s})`};}static makeFromTransform(t,n){return new rn11(t,n);}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,s=i.y;if(S26(r)&&S26(s)){const o=r.impute?r:s.impute?s:void 0;if(o===void 0)return;const a=r.impute?s:s.impute?r:void 0,{method:c,value:u,frame:l,keyvals:f}=o.impute,d=nu(n.mark,i);return new rn11(t,{impute:o.field,key:a.field,...c?{method:c}:{},...u!==void 0?{value:u}:{},...l?{frame:l}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}});}return null;}hash(){return`Impute ${P25(this.transform)}`;}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:s,value:o,frame:a=[null,null]}=this.transform,c={type:"impute",field:t,key:n,...i?{keyvals:Tm(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!r||r==="value"?o:null};if(r&&r!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},l={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,u,l];}else return[c];}}class kr2 extends I26{clone(){return new kr2(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess];}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`LoessTransform ${P25(this.transform)}`;}assemble(){const{loess:t,on:n,...i}=this.transform,r={type:"loess",x:n,y:t,...i};return r;}}class pi5 extends I26{clone(){return new pi5(null,C26(this.transform),this.secondary);}constructor(t,n,i){super(t);this.transform=n,this.secondary=i;}static make(t,n,i,r){const s=n.component.data.sources,{from:o}=i;let a=null;if(Am(o)){let c=Of(o.data,s);c||(c=new en9(o.data),s.push(c));const u=n.getName(`lookup_${r}`);a=new ye9(c,u,G29.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a;}else if(Om(o)){const c=o.param;i={as:c,...i};let u;try{u=n.getSelectionComponent(W22(c),c);}catch(l){throw new Error(rp(c));}if(a=u.materialized,!a)throw new Error(sp(c));}return new pi5(t,i,a.getSource());}dependentFields(){return new Set([this.transform.lookup]);}producedFields(){return new Set(this.transform.as?p(this.transform.as):this.transform.from.fields);}hash(){return`Lookup ${P25({transform:this.transform,secondary:this.secondary})}`;}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:p(this.transform.as)}:{}};else{let n=this.transform.as;X1(n)||(x19(pp),n="_lookup"),t={as:[n]};}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}};}}class Cr3 extends I26{clone(){return new Cr3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"];}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`QuantileTransform ${P25(this.transform)}`;}assemble(){const{quantile:t,...n}=this.transform,i={type:"quantile",field:t,...n};return i;}}class Fr3 extends I26{clone(){return new Fr3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression];}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`RegressionTransform ${P25(this.transform)}`;}assemble(){const{regression:t,on:n,...i}=this.transform,r={type:"regression",x:n,y:t,...i};return r;}}class Nr3 extends I26{clone(){return new Nr3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}addDimensions(t){this.transform.groupby=je9((this.transform.groupby??[]).concat(t),n=>n);}producedFields(){return;}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]]);}hash(){return`PivotTransform ${P25(this.transform)}`;}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:s}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}};}}class Tr3 extends I26{clone(){return new Tr3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}dependentFields(){return new Set;}producedFields(){return new Set;}hash(){return`SampleTransform ${P25(this.transform)}`;}assemble(){return{type:"sample",size:this.transform.sample};}}function Nf(e){let t=0;function n(i,r){if(i instanceof en9&&!i.isGenerator&&!Cn9(i.data)){e.push(r);const s={name:null,source:r.name,transform:[]};r=s;}if(i instanceof ce9&&(i.parent instanceof en9&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Rn11){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return;}if((i instanceof ui5||i instanceof li5||i instanceof In7||i instanceof An12||i instanceof On7||i instanceof di4||i instanceof Me10||i instanceof pi5||i instanceof Ln7||i instanceof nn11||i instanceof _r1||i instanceof Er3||i instanceof wr3||i instanceof kr2||i instanceof Cr3||i instanceof Fr3||i instanceof Rt9||i instanceof Tr3||i instanceof Nr3||i instanceof $r4)&&r.transform.push(i.assemble()),(i instanceof et13||i instanceof Je8||i instanceof rn11||i instanceof ht10||i instanceof Dn6)&&r.transform.push(...i.assemble()),i instanceof ye9){if(r.source&&r.transform.length===0)i.setSource(r.source);else if(i.parent instanceof ye9)i.setSource(r.name);else if(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1){e.push(r);const s={name:null,source:r.name,transform:[]};r=s;}}switch(i.numChildren()){case 0:i instanceof ye9&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let s=r.name;!r.source||r.transform.length>0?e.push(r):s=r.source;for(const o of i.children){const a={name:null,source:s,transform:[]};n(o,a);}break;}}}return n;}function Wx(e){const t=[],n=Nf(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t;}function Hx(e,t){const n=[],i=Nf(n);let r=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${r++}`);const a=o.assemble();i(o,a);}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n;}function qx(e){return e==="top"||e==="left"||$19(e)?"header":"footer";}function Gx(e){for(const t of _e6)Vx(e,t);Af(e,"x"),Af(e,"y");}function Vx(e,t){const{facet:n,config:i,child:r,component:s}=e;if(e.channelHasField(t)){const o=n[t],a=zn8("title",null,i,t);let c=$n9(o,i,{allowDisabling:!0,includeDefault:a===void 0||!!a});r.component.layoutHeaders[t].title&&(c=w1(c)?c.join(", "):c,c+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const u=zn8("labelOrient",o.header,i,t),l=o.header!==null?X26(o.header?.labels,i.header.labels,!0):!1,f=A22(["bottom","right"],u)?"footer":"header";s.layoutHeaders[t]={title:o.header!==null?c:null,facetFieldDef:o,[f]:t==="facet"?[]:[Tf(e,t,l)]};}}function Tf(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]};}function Af(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=bo1(r,t),r.axis[t]==="shared"){const s=t==="x"?"column":"row",o=i[s];for(const a of n.component.axes[t]){const c=qx(a.get("orient"));o[c]??(o[c]=[Tf(e,s,!1)]);const u=ci3(a,"main",e.config,{header:!0});u&&o[c][0].axes.push(u),a.mainExtracted=!0;}}}}function Xx(e){Ro1(e),Ar(e,"width"),Ar(e,"height");}function Yx(e){Ro1(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Ar(e,t),Ar(e,n);}function Ro1(e){for(const t of e.children)t.parseLayoutSize();}function Ar(e,t){const n=Bl(t),i=Ai3(n),r=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const c=a.component.layoutSize.getWithExplicit(n),u=r.scale[i]??Hl(i,e);if(u==="independent"&&c.value==="step"){o=void 0;break;}if(o){if(u==="independent"&&o.value!==c.value){o=void 0;break;}o=At10(o,c,n,"");}else o=c;}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o);}else s.setWithExplicit(t,{explicit:!1,value:void 0});}function Kx(e){const{size:t,component:n}=e;for(const i of at13){const r=me11(i);if(t[r]){const s=t[r];n.layoutSize.set(r,Qe10(s)?"step":s,!0);}else{const s=Qx(e,r);n.layoutSize.set(r,s,!1);}}}function Qx(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const s=r.get("type"),o=r.get("range");if(J27(s)){const a=or3(i.view,t);return Ct8(o)||Qe10(a)?"step":a;}else return qs1(i.view,t);}else{if(e.hasProjection||e.mark==="arc")return qs1(i.view,t);{const s=or3(i.view,t);return Qe10(s)?s.step:s;}}}function Io1(e,t,n){return w23(t,{suffix:`by_${w23(e)}`,...n});}class gi4 extends Ff{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve);this.child=Uo1(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet);}initFacet(t){if(!ei5(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=b23(t),i={};for(const r of n){if(![tt12,nt11].includes(r)){x19(Ri3(r,"facet"));break;}const s=t[r];if(s.field===void 0){x19(rs1(s,r));break;}i[r]=this.initFacetFieldDef(s,r);}return i;}initFacetFieldDef(t,n){const i=Os1(t,n);return i.header?i.header=oe14(i.header):i.header===null&&(i.header=null),i;}channelHasField(t){return!!this.facet[t];}fieldDef(t){return this.facet[t];}parseData(){this.component.data=Or4(this),this.child.parseData();}parseLayoutSize(){Ro1(this);}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection;}parseMarkGroup(){this.child.parseMarkGroup();}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Gx(this);}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t);}assembleSignals(){return this.child.assembleSignals(),[];}assembleSelectionData(t){return this.child.assembleSelectionData(t);}getHeaderLayoutMixins(){const t={};for(const n of _e6)for(const i of ho1){const r=this.component.layoutHeaders[n],s=r[i],{facetFieldDef:o}=r;if(o){const a=zn8("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const c=yr3(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end";}}if(s?.[0]){const a=n==="row"?"height":"width",c=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[c]??(t[c]={}),t[c][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10);}}return t;}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r};}assembleLayoutSignals(){return this.child.assembleLayoutSignals();}columnDistinctSignal(){if(this.parent&&this.parent instanceof gi4)return;{const t=this.getName("column_domain");return{signal:`length(data('${t}'))`};}}assembleGroupStyle(){return;}assembleGroup(t){return this.parent&&this.parent instanceof gi4?{...this.channelHasField("column")?{encode:{update:{columns:{field:w23(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t);}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof gi4){if(this.child.channelHasField("column")){const r=w23(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`);}}else for(const r of at13){const s=this.child.component.scales[r];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(J27(o)&&Ct8(a)){const c=vr1(this.child,r),u=Ao1(c);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):x19(is1(r));}}}return{fields:t,ops:n,as:i};}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),c=[];for(const l of _e6){const f=this.facet[l];if(f){c.push(w23(f));const{bin:d,sort:p}=f;if(U25(d)&&c.push(w23(f,{binSuffix:"end"})),lt11(p)){const{field:h,op:g=qi3}=p,m=Io1(f,p);i&&r?(s.push(m),o.push("max"),a.push(m)):(s.push(h),o.push(g),a.push(m));}else if(w1(p)){const h=Pn10(f,l);s.push(h),o.push("max"),a.push(h);}}}const u=!!i&&!!r;return{name:t,data:n,groupby:c,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}};}facetSortFields(t){const{facet:n}=this,i=n[t];return i?lt11(i.sort)?[Io1(i,i.sort,{expr:"datum"})]:w1(i.sort)?[Pn10(i,t,{expr:"datum"})]:[w23(i,{expr:"datum"})]:[];}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i,s=(lt11(r)?r.order:!w1(r)&&r)||"ascending";return[s];}return[];}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return mo1(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of go1)if(t[r]){const s=zn8("labelOrient",t[r]?.header,n,r);if(i[r].includes(s))return mo1(t[r],r,n);}return;}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=Wx(n),r=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle(),a={name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:_e6.map(c=>this.facetSortFields(c)).flat(),order:_e6.map(c=>this.facetSortOrder(c)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(uy(this,[]))};return[a];}getMapping(){return this.facet;}}function Zx(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const s of[n,i])if(lt11(s.sort)){const{field:o,op:a=qi3}=s.sort;e=r=new nn11(e,{joinaggregate:[{op:a,field:o,as:Io1(s,s.sort,{forAs:!0})}],groupby:[w23(s)]});}return r;}return null;}function Of(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,s=i.format?.feature;if(r&&s)continue;const o=e.format?.feature;if((o||s)&&o!==s)continue;const a=i.format?.mesh;if((r||a)&&r!==a)continue;if(si5(e)&&si5(i)){if(be8(e.values,i.values))return n;}else if(Cn9(e)&&Cn9(i)){if(e.url===i.url)return n;}else if(Gu1(e)&&e.name===n.dataName)return n;}return null;}function Jx(e,t){if(e.data||!e.parent){if(e.data===null){const i=new en9({values:[]});return t.push(i),i;}const n=Of(e.data,t);if(n)return Ot7(e.data)||(n.data.format=sa1({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new en9(e.data);return t.push(i),i;}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main;}function eS(e,t,n){let i=0;for(const r of t.transforms){let s,o;if(Bm(r))o=e=new On7(e,r),s="derived";else if(Ks1(r)){const a=Hb(r);o=e=ce9.makeWithAncestors(e,{},a,n)??e,e=new An12(e,t,r.filter);}else if(Mu1(r))o=e=et13.makeFromTransform(e,r,t),s="number";else if(Hm(r)){s="date";const a=n.getWithExplicit(r.field);a.value===void 0&&(e=new ce9(e,{[r.field]:s}),n.set(r.field,s,!1)),o=e=Je8.makeFromTransform(e,r);}else if(qm(r))o=e=Me10.makeFromTransform(e,r),s="number",co1(t)&&(e=new Rt9(e));else if(Lu1(r))o=e=pi5.make(e,t,r,i++),s="derived";else if(Dm(r))o=e=new Ln7(e,r),s="number";else if(jm(r))o=e=new nn11(e,r),s="number";else if(Gm(r))o=e=ht10.makeFromTransform(e,r),s="derived";else if(Vm(r))o=e=new _r1(e,r),s="derived";else if(Xm(r))o=e=new $r4(e,r),s="derived";else if(Um(r))o=e=new Er3(e,r),s="derived";else if(Pm(r))o=e=new Nr3(e,r),s="derived";else if(Mm(r))e=new Tr3(e,r);else if(Wm(r))o=e=rn11.makeFromTransform(e,r),s="derived";else if(zm(r))o=e=new wr3(e,r),s="derived";else if(Rm(r))o=e=new Cr3(e,r),s="derived";else if(Im(r))o=e=new Fr3(e,r),s="derived";else if(Lm(r))o=e=new kr2(e,r),s="derived";else{x19(dp(r));continue;}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1);}return e;}function Or4(e){let t=Jx(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=r&&(Ot7(r)||Cn9(r)||si5(r)),o=!s&&e.parent?e.parent.component.data.ancestorParse.clone():new oy;Ot7(r)?(Vu1(r)?t=new li5(t,r.sequence):Js1(r)&&(t=new ui5(t,r.graticule)),o.parseNothing=!0):r?.format?.parse===null&&(o.parseNothing=!0),t=ce9.makeExplicit(t,e,o)??t,t=new Rt9(t);const a=e.parent&&Mn12(e.parent);(q30(e)||ve9(e))&&a&&(t=et13.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=eS(t,e,o));const c=Gb(e),u=qb(e);t=ce9.makeWithAncestors(t,{},{...c,...u},o)??t,q30(e)&&(t=Dn6.parseAll(t,e),t=di4.parseAll(t,e)),(q30(e)||ve9(e))&&(a||(t=et13.makeFromEncoding(t,e)??t),t=Je8.makeFromEncoding(t,e)??t,t=On7.parseAllForSortIndex(t,e));const l=t=Pr4(G29.Raw,e,t);if(q30(e)){const m=Me10.makeFromEncoding(t,e);m&&(t=m,co1(e)&&(t=new Rt9(t))),t=rn11.makeFromEncoding(t,e)??t,t=ht10.makeFromEncoding(t,e)??t;}let f,d;if(q30(e)){const{markDef:m,mark:y,config:v}=e,k=R23("invalid",m,v),{marks:_,scales:T}=d=Yu1({invalid:k,isPath:Ft7(y)});_!==T&&T==="include-invalid-values"&&(f=t=Pr4(G29.PreFilterInvalid,e,t)),_==="exclude-invalid-values"&&(t=In7.make(t,e,d)??t);}const p=t=Pr4(G29.Main,e,t);let h;if(q30(e)&&d){const{marks:m,scales:y}=d;m==="include-invalid-values"&&y==="exclude-invalid-values"&&(t=In7.make(t,e,d)??t,h=t=Pr4(G29.PostFilterInvalid,e,t));}q30(e)&&Uy(e,p);let g=null;if(ve9(e)){const m=e.getName("facet");t=Zx(t,e.facet)??t,g=new Rn11(t,e,m,p.getSource()),n[m]=g;}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:l,main:p,facetRoot:g,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:h};}function Pr4(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,s=t.getDataName(e),o=new ye9(n,s,e,r);return i[s]=o,o;}class tS extends zo1{constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve);(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&x19(up),this.children=this.getChildren(t).map((s,o)=>Uo1(s,this,this.getName(`concat_${o}`),void 0,r));}parseData(){this.component.data=Or4(this);for(const t of this.children)t.parseData();}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of b23(t.component.selection))this.component.selection[n]=t.component.selection[n];}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup();}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders();}getChildren(t){return rr3(t)?t.vconcat:Hs1(t)?t.hconcat:t.concat;}parseLayoutSize(){Yx(this);}parseAxisGroup(){return null;}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t);}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[];}assembleLayoutSignals(){const t=yo1(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t;}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t);}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()};});}assembleGroupStyle(){return;}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"};}}function nS(e){return e===!1||e===null;}const iS={disable:1,gridScale:1,scale:1,...Yc,labelExpr:1,encode:1},Pf1=b23(iS);class Lo2 extends pt10{constructor(t={},n={},i=!1){super();this.explicit=t,this.implicit=n,this.mainExtracted=i;}clone(){return new Lo2(C26(this.explicit),C26(this.implicit),this.mainExtracted);}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!nS(this.get(t));}hasOrientSignalRef(){return $19(this.explicit.orient);}}function rS(e,t,n){const{encoding:i,config:r}=e,s=K26(i[t])??K26(i[He8(t)]),o=e.axis(t)||{},{format:a,formatType:c}=o;if(Xt9(c))return{text:ze8({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:c,config:r}),...n};if(a===void 0&&c===void 0&&r.customFormatTypes){if(vn9(s)==="quantitative"){if(wn13(s)&&s.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ze8({fieldOrDatumDef:s,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ze8({fieldOrDatumDef:s,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n};}if(vn9(s)==="temporal"&&r.timeFormatType&&S26(s)&&!s.timeUnit)return{text:ze8({fieldOrDatumDef:s,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n};}return n;}function sS(e){return at13.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[dS(n,e)]),t),{});}const oS={bottom:"top",top:"bottom",left:"right",right:"left"};function aS(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const s of b23(r.component.axes))n.axis[s]=bo1(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=cS(t[s],r.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]));}for(const r of at13){for(const s of e.children){if(!s.component.axes[r])continue;if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(s.component.axes[r]);for(const o of s.component.axes[r]){const{value:a,explicit:c}=o.getWithExplicit("orient");if($19(a))continue;if(i[a]>0&&!c){const u=oS[a];i[a]>i[u]&&o.set("orient",u,!1);}i[a]++;}}delete s.component.axes[r];}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[s,o]of(t[r]||[]).entries())s>0&&!!o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1);}}function cS(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],s=t[i];if(!!r!==!!s)return;if(r&&s){const o=r.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[i]=uS(r,s);}}}else return t.map(n=>n.clone());return e;}function uS(e,t){for(const n of Pf1){const i=At10(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,s)=>{switch(n){case"title":return Ia1(r,s);case"gridScale":return{explicit:r.explicit,value:X26(r.value,s.value)};}return cr2(r,s,n,"axis");});e.setWithExplicit(n,i);}return e;}function lS(e,t,n,i,r){if(t==="disable")return n!==void 0;n=n||{};switch(t){case"titleAngle":case"labelAngle":return e===($19(n.labelAngle)?n.labelAngle:qn9(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Il(i,r))return!0;}return e===n[t];}const fS=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function dS(e,t){let n=t.axis(e);const i=new Lo2,r=K26(t.encoding[e]),{mark:s,config:o}=t,a=n?.orient||o[e==="x"?"axisX":"axisY"]?.orient||o.axis?.orient||Qy(e),c=t.getScaleComponent(e).get("type"),u=Hy(e,c,a,t.config),l=n!==void 0?!n:fo1("disable",o.style,n?.style,u).configValue;if(i.set("disable",l,n!==void 0),l)return i;n=n||{};const f=Xy(r,n,e,o.style,u),d=Tc(n.formatType,r,c),p=Nc(r,r.type,n.format,n.formatType,o,!0),h={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:c,orient:a,labelAngle:f,format:p,formatType:d,mark:s,config:o};for(const y of Pf1){const v=y in Pl?Pl[y](h):Kc(y)?n[y]:void 0,k=v!==void 0,_=lS(v,y,n,t,e);if(k&&_)i.set(y,v,_);else{const{configValue:T=void 0,configFrom:L=void 0}=Kc(y)&&y!=="values"?fo1(y,o.style,n.style,u):{},ue=T!==void 0;k&&!ue?i.set(y,v,_):(!(L==="vgAxisConfig")||fS.has(y)&&ue||ri5(T)||$19(T))&&i.set(y,T,!1);}}const g=n.encoding??{},m=Xc.reduce((y,v)=>{if(!i.hasAxisPart(v))return y;const k=Wl(g[v]??{},t),_=v==="labels"?rS(t,e,k):k;return _!==void 0&&!M20(_)&&(y[v]={update:_}),y;},{});return M20(m)||i.set("encode",m,!!n.encoding||n.labelAngle!==void 0),i;}function pS({encoding:e,size:t}){for(const n of at13){const i=me11(n);Qe10(t[i])&&Tt10(e[n])&&(delete t[i],x19(Xa1(i)));}return t;}const gS={vgMark:"arc",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ae13("x",e,{defaultPos:"mid"}),...ae13("y",e,{defaultPos:"mid"}),...Pt8(e,"radius"),...Pt8(e,"theta")})},hS={vgMark:"area",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...dr2("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...dr2("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...oo1(e)})},mS={vgMark:"rect",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Pt8(e,"x"),...Pt8(e,"y")})},yS={vgMark:"shape",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape,i={type:"geoshape",projection:e.projectionName(),...n&&S26(n)&&n.type===xn9?{field:w23(n,{expr:"datum"})}:{}};return[i];}},bS={vgMark:"image",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Pt8(e,"x"),...Pt8(e,"y"),...ro1(e,"url")})},xS={vgMark:"line",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ae13("x",e,{defaultPos:"mid"}),...ae13("y",e,{defaultPos:"mid"}),...ee18("size",e,{vgChannel:"strokeWidth"}),...oo1(e)})},SS={vgMark:"trail",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ae13("x",e,{defaultPos:"mid"}),...ae13("y",e,{defaultPos:"mid"}),...ee18("size",e),...oo1(e)})};function Mo1(e,t){const{config:n}=e;return{...ke8(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ae13("x",e,{defaultPos:"mid"}),...ae13("y",e,{defaultPos:"mid"}),...ee18("size",e),...ee18("angle",e),...vS(e,n,t)};}function vS(e,t,n){return n?{shape:{value:n}}:ee18("shape",e);}const wS={vgMark:"symbol",encodeEntry:e=>Mo1(e)},$S={vgMark:"symbol",encodeEntry:e=>Mo1(e,"circle")},ES={vgMark:"symbol",encodeEntry:e=>Mo1(e,"square")},_S={vgMark:"rect",encodeEntry:e=>({...ke8(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Pt8(e,"x"),...Pt8(e,"y")})},kS={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...ke8(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...dr2("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...dr2("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ee18("size",e,{vgChannel:"strokeWidth"})};}},CS={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...ke8(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ae13("x",e,{defaultPos:"mid"}),...ae13("y",e,{defaultPos:"mid"}),...ro1(e),...ee18("size",e,{vgChannel:"fontSize"}),...ee18("angle",e),...gl("align",FS(e.markDef,n,t)),...gl("baseline",NS(e.markDef,n,t)),...ae13("radius",e,{defaultPos:null}),...ae13("theta",e,{defaultPos:null})};}};function FS(e,t,n){const i=R23("align",e,n);return i===void 0?"center":void 0;}function NS(e,t,n){const i=R23("baseline",e,n);return i===void 0?"middle":void 0;}const TS={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"width":"height",s=i==="horizontal"?"height":"width";return{...ke8(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ae13("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ae13("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ee18("size",e,{defaultRef:AS(e),vgChannel:r}),[s]:B24(R23("thickness",n,t))};}};function AS(e){const{config:t,markDef:n}=e,{orient:i}=n,r=i==="horizontal"?"width":"height",s=i==="horizontal"?"x":"y",o=Ti3(s),a=e.getScaleComponent(o)||e.getScaleComponent(s),c=e.scaleName(o)||e.scaleName(s),u=R23("size",n,t,{vgChannel:r})??t.tick.bandSize;if(u!==void 0)return B24(u);if(a?.get("type")==="band")return{scale:c,band:1};const l=a?.get("range"),{tickBandPaddingInner:f}=t.scale,d=l&&Ct8(l)?l.step:sr2(t.view,r);return V(d)&&V(f)?{value:d*(1-f)}:{signal:`${ts1(f)} * ${ts1(d)}`};}const zr3={arc:gS,area:hS,bar:mS,circle:$S,geoshape:yS,image:bS,line:xS,point:wS,rect:_S,rule:kS,square:ES,text:CS,tick:TS,trail:SS};function OS(e){if(A22([Ui2,Di3,Dg],e.mark)){const t=nu(e.mark,e.encoding);if(t.length>0)return PS(e,t);}else if(e.mark===ji2){const t=es1.some(n=>R23(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return zS(e);}return Do1(e);}const zf="faceted_path_";function PS(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:zf+e.requestDataName(G29.Main),data:e.requestDataName(G29.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Do1(e,{fromPrefix:zf})}];}const Rf1="stack_group_";function zS(e){const[t]=Do1(e,{fromPrefix:Rf1}),n=e.scaleName(e.stack.fieldChannel),i=(u={})=>e.vgField(e.stack.fieldChannel,u),r=(u,l)=>{const f=[i({prefix:"min",suffix:"start",expr:l}),i({prefix:"max",suffix:"start",expr:l}),i({prefix:"min",suffix:"end",expr:l}),i({prefix:"max",suffix:"end",expr:l})];return`${u}(${f.map(d=>`scale('${n}',${d})`).join(",")})`;};let s,o;e.stack.fieldChannel==="x"?(s={...ln11(t.encode.update,["y","yc","y2","height",...es1]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...pe9(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ln11(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...pe9(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of es1){const l=Ge8(u,e.markDef,e.config);t.encode.update[u]?(s[u]=t.encode.update[u],delete t.encode.update[u]):l&&(s[u]=B24(l)),l&&(t.encode.update[u]={value:0});}const a=[];if(e.stack.groupbyChannels?.length>0)for(const u of e.stack.groupbyChannels){const l=e.fieldDef(u),f=w23(l);f&&a.push(f),(l?.bin||l?.timeUnit)&&a.push(w23(l,{binSuffix:"end"}));}const c=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"];return s=c.reduce((u,l)=>{if(t.encode.update[l])return{...u,[l]:t.encode.update[l]};{const f=Ge8(l,e.markDef,e.config);return f!==void 0?{...u,[l]:B24(f)}:u;}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(G29.Main),name:Rf1+e.requestDataName(G29.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}];}function RS(e){const{encoding:t,stack:n,mark:i,markDef:r,config:s}=e,o=t.order;if(!w1(o)&&Re11(o)&&Dr4(o.value)||!o&&Dr4(R23("order",r,s)))return;if((w1(o)||S26(o))&&!n)return Pa1(o,{expr:"datum"});if(Ft7(i)){const a=r.orient==="horizontal"?"y":"x",c=t[a];if(S26(c))return{field:a};}return;}function Do1(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:s}=e,o=X26(i.clip,IS(e),LS(e)),a=Aa1(i),c=r.key,u=RS(e),l=MS(e),f=R23("aria",i,s),d=zr3[n].postEncodingTransform?zr3[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:zr3[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...c?{key:c.field}:{},...u?{sort:u}:{},...l||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(G29.Main)},encode:{update:zr3[n].encodeEntry(e)},...d?{transform:d}:{}}];}function IS(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0;}function LS(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0;}function MS(e){if(!e.component.selection)return null;const t=b23(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=b23(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null;}class If extends Ff{constructor(t,n,i,r={},s){super(t,"unit",n,i,s,void 0,Su1(t)?t.view:void 0);this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Ye7(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=wm(o,s,{graticule:t.data&&Js1(t.data)}));const c=this.encoding=kh(t.encoding||{},a,o.filled,s);this.markDef=Nu1(o,c,s),this.size=pS({encoding:c,size:Su1(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=Fu1(this.markDef,c),this.specifiedScales=this.initScales(a,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>Bs1(u));}get hasProjection(){const{encoding:t}=this,n=this.mark===Sc,i=t&&$d.some(r=>F24(t[r]));return n||i;}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0;}axis(t){return this.specifiedAxes[t];}legend(t){return this.specifiedLegends[t];}initScales(t,n){return Qr4.reduce((i,r)=>{const s=K26(n[r]);return s&&(i[r]=this.initScale(s.scale??{})),i;},{});}initScale(t){const{domain:n,range:i}=t,r=oe14(t);return w1(n)&&(r.domain=n.map(xe8)),w1(i)&&(r.range=i.map(xe8)),r;}initAxes(t){return at13.reduce((n,i)=>{const r=t[i];if(F24(r)||i===H21&&F24(t.x2)||i===Q26&&F24(t.y2)){const s=F24(r)?r.axis:void 0;n[i]=s&&this.initAxis({...s});}return n;},{});}initAxis(t){const n=b23(t),i={};for(const r of n){const s=t[r];i[r]=ri5(s)?Fa1(s):xe8(s);}return i;}initLegends(t){return Pd.reduce((n,i)=>{const r=K26(t[i]);if(r&&Rd(i)){const s=r.legend;n[i]=s&&oe14(s);}return n;},{});}parseData(){this.component.data=Or4(this);}parseLayoutSize(){Kx(this);}parseSelections(){this.component.selection=jy(this,this.selection);}parseMarkGroup(){this.component.mark=OS(this);}parseAxesAndHeaders(){this.component.axes=sS(this);}assembleSelectionTopLevelSignals(t){return ly(this,t);}assembleSignals(){return[...Al(this),...cy(this,[])];}assembleSelectionData(t){return fy(this,t);}assembleLayout(){return null;}assembleLayoutSignals(){return yo1(this);}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Mn12(this.parent))&&(t=Qu1(this,t)),t.map(this.correctDataNames);}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view";}getMapping(){return this.encoding;}get mark(){return this.markDef.type;}channelHasField(t){return Kt9(this.encoding,t);}fieldDef(t){const n=this.encoding[t];return Ie8(n);}typedFieldDef(t){const n=this.fieldDef(t);return fe11(n)?n:null;}}class jo1 extends zo1{constructor(t,n,i,r,s){super(t,"layer",n,i,s,t.resolve,t.view);const o={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,c)=>{if(ar2(a))return new jo1(a,this,this.getName(`layer_${c}`),o,s);if(ft11(a))return new If(a,this,this.getName(`layer_${c}`),o,s);throw new Error(ns1(a));});}parseData(){this.component.data=Or4(this);for(const t of this.children)t.parseData();}parseLayoutSize(){Xx(this);}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of b23(t.component.selection))this.component.selection[n]=t.component.selection[n];}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup();}parseAxesAndHeaders(){aS(this);}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t);}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Al(this));}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),yo1(this));}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t);}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of p(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0;}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t;return;}assembleLayout(){return null;}assembleMarks(){return dy(this,this.children.flatMap(t=>t.assembleMarks()));}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),ef1(this));}}function Uo1(e,t,n,i,r){if(Gi3(e))return new gi4(e,t,n,r);if(ar2(e))return new jo1(e,t,n,i,r);if(ft11(e))return new If(e,t,n,i,r);if(Kh(e))return new tS(e,t,n,r);throw new Error(ns1(e));}function DS(e,t={}){t.logger&&Jp(t.logger),t.fieldTitle&&Hc(t.fieldTitle);try{const n=ku1(rn(t.config,e.config)),i=Bu1(e,n),r=Uo1(i,null,"",void 0,n);r.parse(),cx(r.component.data,r);const s=US(r,jS(e,i.autosize,n,r),e.datasets,e.usermeta);return{spec:s,normalized:i};}finally{t.logger&&eg(),t.fieldTitle&&yh();}}function jS(e,t,n,i){const r=i.component.layoutSize.get("width"),s=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):X1(t)&&(t={type:t}),r&&s&&iy(t.type)){if(r==="step"&&s==="step")x19(Da1()),t.type="pad";else if(r==="step"||s==="step"){const o=r==="step"?"width":"height";x19(Da1(Ai3(o)));const a=o==="width"?"height":"width";t.type=ry(a);}}return{...b23(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Hu1(n,!1),...Hu1(e,!0)};}function US(e,t,n={},i){const r=e.config?lm(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Hx(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),c=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let l=e.assembleLayoutSignals();l=l.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...c?{style:c}:{},...u?{encode:{update:u}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...l,...e.assembleSelectionTopLevelSignals([]),...bu1(f)]),...r?{config:r}:{},...i?{usermeta:i}:{}};}const BS=yd.version;const __default1=null;const mod13=function(){return{default:null,accessPathDepth:pn9,accessPathWithDatum:Hr3,compile:DS,contains:A22,deepEqual:be8,deleteNestedProperty:$i3,duplicate:C26,entries:bt9,every:jr3,fieldIntersection:Wr4,flatAccessWithDatum:aa1,getFirstDefined:X26,hasIntersection:Ur2,hash:P25,internalField:la1,isBoolean:Bn8,isEmpty:M20,isEqual:xd,isInternalField:fa1,isNullOrFalse:Dr4,isNumeric:Ei3,keys:b23,logicalExpr:Wn8,mergeDeep:sa1,never:ra2,normalize:Bu1,normalizeAngle:qn9,omit:pe9,pick:ln11,prefixGenerator:Br3,removePathFromField:dn10,replaceAll:Lt9,replacePathInField:we11,resetIdCounter:vd,setEqual:oa1,some:fn9,stringify:D20,titleCase:Hn8,unique:je9,uniqueId:ua1,vals:ie14,varName:W22,version:BS};}();function c7(e){const[n,r]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:n,version:r};}var K27="vega-themes",Q27="2.15.0",Z27="Themes for stylized Vega and Vega-Lite visualizations.",ee19=["vega","vega-lite","themes","style"],te19="BSD-3-Clause",oe15={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},le13=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],ie15="build/vega-themes.js",ae14="build/vega-themes.module.js",re18="build/vega-themes.min.js",ne16="build/vega-themes.min.js",se15="build/vega-themes.module.d.ts",de10={type:"git",url:"https://github.com/vega/vega-themes.git"},ce10=["src","build"],fe12={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},ge9={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},be9={vega:"*","vega-lite":"*"},pe10={},ue12={name:K27,version:Q27,description:Z27,keywords:ee19,license:te19,author:oe15,contributors:le13,main:ie15,module:ae14,unpkg:re18,jsdelivr:ne16,types:se15,repository:de10,files:ce10,scripts:fe12,devDependencies:ge9,peerDependencies:be9,dependencies:pe10};const f14="#fff",w24="#888",he10={background:"#333",view:{stroke:w24},title:{color:f14,subtitleColor:f14},style:{"guide-label":{fill:f14},"guide-title":{fill:f14}},axis:{domainColor:f14,gridColor:w24,tickColor:f14}},i3="#4572a7",me12={background:"#fff",arc:{fill:i3},area:{fill:i3},line:{stroke:i3,strokeWidth:2},path:{stroke:i3},rect:{fill:i3},shape:{stroke:i3},symbol:{fill:i3,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},a7="#30a2da",S27="#cbcbcb",Ce9="#999",Fe11="#333",P26="#f0f0f0",T19="#333",ke9={arc:{fill:a7},area:{fill:a7},axis:{domainColor:S27,grid:!0,gridColor:S27,gridWidth:1,labelColor:Ce9,labelFontSize:10,titleColor:Fe11,tickColor:S27,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:P26,group:{fill:P26},legend:{labelColor:T19,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:T19,titleFontSize:14,titlePadding:10},line:{stroke:a7,strokeWidth:2},path:{stroke:a7,strokeWidth:.5},rect:{fill:a7},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:a7},bar:{binSpacing:2,fill:a7,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},r2="#000",ye10={group:{fill:"#e5e5e5"},arc:{fill:r2},area:{fill:r2},line:{stroke:r2},path:{stroke:r2},rect:{fill:r2},shape:{stroke:r2},symbol:{fill:r2,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},ve10=22,Se8="normal",$20="Benton Gothic, sans-serif",q31=11.5,xe9="normal",n2="#82c6df",x20="Benton Gothic Bold, sans-serif",L31="normal",X27=13,g16={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},ze9={background:"#ffffff",title:{anchor:"start",color:"#000000",font:x20,fontSize:ve10,fontWeight:Se8},arc:{fill:n2},area:{fill:n2},line:{stroke:n2,strokeWidth:2},path:{stroke:n2},rect:{fill:n2},shape:{stroke:n2},symbol:{fill:n2,size:30},axis:{labelFont:$20,labelFontSize:q31,labelFontWeight:xe9,titleFont:x20,titleFontSize:X27,titleFontWeight:L31},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:$20,labelFontSize:q31,symbolType:"square",titleFont:x20,titleFontSize:X27,titleFontWeight:L31},range:{category:g16["category-6"],diverging:g16["fireandice-6"],heatmap:g16["fire-7"],ordinal:g16["fire-7"],ramp:g16["fire-7"]}},s9="#ab5787",h14="#979797",De7={background:"#f9f9f9",arc:{fill:s9},area:{fill:s9},line:{stroke:s9},path:{stroke:s9},rect:{fill:s9},shape:{stroke:s9},symbol:{fill:s9,size:30},axis:{domainColor:h14,domainWidth:.5,gridWidth:.2,labelColor:h14,tickColor:h14,tickWidth:.2,titleColor:h14},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},d10="#3e5c69",Be8={background:"#fff",arc:{fill:d10},area:{fill:d10},line:{stroke:d10},path:{stroke:d10},rect:{fill:d10},shape:{stroke:d10},symbol:{fill:d10},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},e1="#1696d2",Y27="#000000",Ee8="#FFFFFF",m11="Lato",z22="Lato",We8="Lato",Ae10="#DEDDDD",we12=18,b24={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Pe8={background:Ee8,title:{anchor:"start",fontSize:we12,font:m11},axisX:{domain:!0,domainColor:Y27,domainWidth:1,grid:!1,labelFontSize:12,labelFont:z22,labelAngle:0,tickColor:Y27,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:m11},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Ae10,gridWidth:1,labelFontSize:12,labelFont:z22,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:m11,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:z22,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:m11,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:b24["six-groups-cat-1"],diverging:b24["diverging-colors"],heatmap:b24["diverging-colors"],ordinal:b24["six-groups-seq"],ramp:b24["shades-blue"]},area:{fill:e1},rect:{fill:e1},line:{color:e1,stroke:e1,strokeWidth:5},trail:{color:e1,stroke:e1,strokeWidth:0,size:1},path:{stroke:e1,strokeWidth:.5},point:{filled:!0},text:{font:We8,color:e1,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:e1,stroke:null}},arc:{fill:e1},shape:{stroke:e1},symbol:{fill:e1,size:30}},c8="#3366CC",j26="#ccc",C27="Arial, sans-serif",Te10={arc:{fill:c8},area:{fill:c8},path:{stroke:c8},rect:{fill:c8},shape:{stroke:c8},symbol:{stroke:c8},circle:{fill:c8},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:C27,fontSize:12},"guide-title":{font:C27,fontSize:12},"group-title":{font:C27,fontSize:12}},title:{font:C27,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:j26,tickColor:j26,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},D21=o=>o*(1/3+1),M21=D21(9),I27=D21(10),G30=D21(12),p13="Segoe UI",O28="wf_standard-font, helvetica, arial, sans-serif",J28="#252423",u10="#605E5C",N23="transparent",$e10="#C8C6C4",t2="#118DFF",qe9="#12239E",Le8="#E66C37",Xe8="#6B007B",Ye8="#E044A7",je10="#744EC2",Me11="#D9B300",Ie9="#D64550",R24=t2,U26="#DEEFFF",V25=[U26,R24],Ge9=[U26,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",R24],Oe6={view:{stroke:N23},background:N23,font:p13,header:{titleFont:O28,titleFontSize:G30,titleColor:J28,labelFont:p13,labelFontSize:I27,labelColor:u10},axis:{ticks:!1,grid:!1,domain:!1,labelColor:u10,labelFontSize:M21,titleFont:O28,titleColor:J28,titleFontSize:G30,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:$e10,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:t2},line:{stroke:t2,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:p13,fontSize:M21,fill:u10},arc:{fill:t2},area:{fill:t2,line:!0,opacity:.6},path:{stroke:t2},rect:{fill:t2},point:{fill:t2,filled:!0,size:75},shape:{stroke:t2},symbol:{fill:t2,strokeWidth:1.5,size:50},legend:{titleFont:p13,titleFontWeight:"bold",titleColor:u10,labelFont:p13,labelFontSize:I27,labelColor:u10,symbolType:"circle",symbolSize:75},range:{category:[t2,qe9,Le8,Xe8,Ye8,je10,Me11,Ie9],diverging:V25,heatmap:V25,ordinal:Ge9}},B25='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Je9='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',F25={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Ne10=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Re12=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function k21({theme:o,background:_}){const W=["white","g10"].includes(o)?"light":"dark",y=F25.gridBg[o],A=F25.textPrimary[o],v=F25.textSecondary[o],H=W==="dark"?Ne10:Re12,l=W==="dark"?"#d4bbff":"#6929c4";return{background:_,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:y,stroke:y},group:{fill:y},title:{color:A,anchor:"start",dy:-15,fontSize:16,font:B25,fontWeight:600},axis:{labelColor:v,labelFontSize:12,labelFont:Je9,labelFontWeight:400,titleColor:A,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:F25.layerAccent01[o],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:B25,fill:v,fontWeight:400},"guide-title":{font:B25,fill:v,fontWeight:400}},range:{category:H,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}};}const Ue9=k21({theme:"white",background:"#ffffff"}),Ve8=k21({theme:"g10",background:"#f4f4f4"}),_e7=k21({theme:"g90",background:"#262626"}),He9=k21({theme:"g100",background:"#161616"}),Ke9=ue12.version;const mod14=function(){return{default:null,carbong10:Ve8,carbong100:He9,carbong90:_e7,carbonwhite:Ue9,dark:he10,excel:me12,fivethirtyeight:ke9,ggplot2:ye10,googlecharts:Te10,latimes:ze9,powerbi:Oe6,quartz:De7,urbaninstitute:Pe8,version:Ke9,vox:Be8};}();var j27="vega-tooltip",L32="0.34.0",D22="A tooltip plugin for Vega-Lite and Vega visualizations.",S28=["vega-lite","vega","tooltip"],I28={type:"git",url:"https://github.com/vega/vega-tooltip.git"},$21={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},z23=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],O29="BSD-3-Clause",E26={url:"https://github.com/vega/vega-tooltip/issues"},A23="https://github.com/vega/vega-tooltip#readme",U27="build/vega-tooltip.js",C28="build/vega-tooltip.module.js",M22="build/vega-tooltip.min.js",H22="build/vega-tooltip.min.js",R25="build/vega-tooltip.module.d.ts",T20=["src","build","types"],N24={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},W23={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},Y28={"vega-util":"^1.17.2"},_25={name:j27,version:L32,description:D22,keywords:S28,repository:I28,author:$21,collaborators:z23,license:O29,bugs:E26,homepage:A23,main:U27,module:C28,unpkg:M22,jsdelivr:H22,types:R25,files:T20,scripts:N24,devDependencies:W23,dependencies:Y28};function g17(i,t,n,s){if(w1(i))return`[${i.map(e=>t(X1(e)?e:p14(e,n))).join(", ")}]`;if(M1(i)){let e="";const{title:l,image:o,...a}=i;l&&(e+=`<h2>${t(l)}</h2>`),o&&(e+=`<img src="${new URL(t(o),s||location.href).href}">`);const d=Object.keys(a);if(d.length>0){e+="<table>";for(const c of d){let r=a[c];if(r===void 0)continue;M1(r)&&(r=p14(r,n)),e+=`<tr><td class="key">${t(c)}</td><td class="value">${t(r)}</td></tr>`;}e+="</table>";}return e||"{}";}return t(i);}function h15(i){const t=[];return function(n,s){if(typeof s!="object"||s===null)return s;const e=t.indexOf(this)+1;return t.length=e,t.length>i?"[Object]":t.indexOf(s)>=0?"[Circular]":(t.push(s),s);};}function p14(i,t){return JSON.stringify(i,h15(t));}var B26=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const b25="vg-tooltip-element",m12={offsetX:10,offsetY:10,id:b25,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:f15,maxDepth:2,formatTooltip:g17,baseURL:""};function f15(i){return String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;");}function y20(i){if(!/^[A-Za-z]+[-:.\w]*$/.test(i))throw new Error("Invalid HTML ID");return B26.toString().replace(b25,i);}function v21(i,t,n,s){let e=i.clientX+n;e+t.width>window.innerWidth&&(e=+i.clientX-n-t.width);let l=i.clientY+s;return l+t.height>window.innerHeight&&(l=+i.clientY-s-t.height),{x:e,y:l};}class x21{constructor(t){this.options={...m12,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const s=document.createElement("style");s.setAttribute("id",this.options.styleId),s.innerHTML=y20(n);const e=document.head;e.childNodes.length>0?e.insertBefore(s,e.childNodes[0]):e.appendChild(s);}}tooltipHandler(t,n,s,e){if(this.el=document.getElementById(this.options.id),!this.el){this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip");const a=document.fullscreenElement??document.body;a.appendChild(this.el);}if(e==null||e===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return;}this.el.innerHTML=this.options.formatTooltip(e,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:l,y:o}=v21(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${l}px`;}}_25.version;function $e11(){throw new Error("setTimeout has not been defined");}function Ie10(){throw new Error("clearTimeout has not been defined");}var k22=$e11,X28=Ie10,H23;typeof window!="undefined"?H23=window:typeof self!="undefined"?H23=self:H23={},typeof H23.setTimeout=="function"&&(k22=setTimeout),typeof H23.clearTimeout=="function"&&(X28=clearTimeout);function Re13(r){if(k22===setTimeout)return setTimeout(r,0);if((k22===$e11||!k22)&&setTimeout)return k22=setTimeout,setTimeout(r,0);try{return k22(r,0);}catch(t){try{return k22.call(null,r,0);}catch(e){return k22.call(this,r,0);}}}function Ze7(r){if(X28===clearTimeout)return clearTimeout(r);if((X28===Ie10||!X28)&&clearTimeout)return X28=clearTimeout,clearTimeout(r);try{return X28(r);}catch(t){try{return X28.call(null,r);}catch(e){return X28.call(this,r);}}}var U28=[],M23=!1,V26,Q28=-1;function Qe11(){if(!M23||!V26)return;M23=!1,V26.length?U28=V26.concat(U28):Q28=-1,U28.length&&Le9();}function Le9(){if(M23)return;var r=Re13(Qe11);M23=!0;for(var t=U28.length;t;){for(V26=U28,U28=[];++Q28<t;)V26&&V26[Q28].run();Q28=-1,t=U28.length;}V26=null,M23=!1,Ze7(r);}function et14(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];U28.push(new Ne11(r,t)),U28.length===1&&!M23&&Re13(Le9);}function Ne11(r,t){this.fun=r,this.array=t;}Ne11.prototype.run=function(){this.fun.apply(null,this.array);};var tt13="browser",rt14="browser",it14=!0,st13=[],nt12="",at14={},ot13={},lt12={};function z24(){}var ct14=z24,ut12=z24,dt10=z24,ft12=z24,pt11=z24,ht11=z24,mt9=z24;function Et8(r){throw new Error("process.binding is not supported");}function vt9(){return"/";}function gt10(r){throw new Error("process.chdir is not supported");}function $t11(){return 0;}var W24=H23.performance||{},It8=W24.now||W24.mozNow||W24.msNow||W24.oNow||W24.webkitNow||function(){return new Date().getTime();};function Rt10(r){var t=It8.call(W24)*.001,e=Math.floor(t),s=Math.floor(t%1*1e9);return r&&(e=e-r[0],s=s-r[1],s<0&&(e--,s+=1e9)),[e,s];}var Lt10=new Date;function Nt10(){var r=new Date,t=r-Lt10;return t/1e3;}var ee20={nextTick:et14,title:tt13,browser:it14,env:{NODE_ENV:"production"},argv:st13,version:nt12,versions:at14,on:ct14,addListener:ut12,once:dt10,off:ft12,removeListener:pt11,removeAllListeners:ht11,emit:mt9,binding:Et8,cwd:vt9,chdir:gt10,umask:$t11,hrtime:Rt10,platform:rt14,release:ot13,config:lt12,uptime:Nt10};function bt10(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;}class Ot8{constructor(){this.max=1e3,this.map=new Map;}get(t){const e=this.map.get(t);return e===void 0?void 0:(this.map.delete(t),this.map.set(t,e),e);}delete(t){return this.map.delete(t);}set(t,e){const s=this.delete(t);if(!s&&e!==void 0){if(this.map.size>=this.max){const h=this.map.keys().next().value;this.delete(h);}this.map.set(t,e);}return this;}}var wt8=Ot8;const Tt11=Object.freeze({loose:!0}),yt8=Object.freeze({}),At11=r=>r?typeof r!="object"?Tt11:r:yt8;var ue13=At11,de11={exports:{}};const St9="2.0.0",be10=256,Ct9=Number.MAX_SAFE_INTEGER||9007199254740991,Dt9=be10-6,Pt9=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var fe13={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:Dt9,MAX_SAFE_INTEGER:Ct9,RELEASE_TYPES:Pt9,SEMVER_SPEC_VERSION:St9,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Ft8=typeof ee20=="object"&&ee20.env&&ee20.env.NODE_DEBUG&&/\bsemver\b/i.test(ee20.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var te20=Ft8;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:h}=fe13,o=te20;t=r.exports={};const w=t.re=[],I=t.safeRe=[],i=t.src=[],n=t.t={};let d=0;const $="[a-zA-Z0-9-]",A=[["\\s",1],["\\d",h],[$,s]],D=_=>{for(const[C,S]of A)_=_.split(`${C}*`).join(`${C}{0,${S}}`).split(`${C}+`).join(`${C}{1,${S}}`);return _;},c=(_,C,S)=>{const b=D(C),P=d++;o(_,P,C),n[_]=P,i[P]=C,w[P]=new RegExp(C,S?"g":void 0),I[P]=new RegExp(b,S?"g":void 0);};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","\\d+"),c("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${$}*`),c("MAINVERSION",`(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${i[n.NUMERICIDENTIFIER]}|${i[n.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${i[n.NUMERICIDENTIFIERLOOSE]}|${i[n.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${i[n.PRERELEASEIDENTIFIER]}(?:\\.${i[n.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${i[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[n.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER",`${$}+`),c("BUILD",`(?:\\+(${i[n.BUILDIDENTIFIER]}(?:\\.${i[n.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${i[n.MAINVERSION]}${i[n.PRERELEASE]}?${i[n.BUILD]}?`),c("FULL",`^${i[n.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${i[n.MAINVERSIONLOOSE]}${i[n.PRERELEASELOOSE]}?${i[n.BUILD]}?`),c("LOOSE",`^${i[n.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${i[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${i[n.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:${i[n.PRERELEASE]})?${i[n.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:${i[n.PRERELEASELOOSE]})?${i[n.BUILD]}?)?)?`),c("XRANGE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAINLOOSE]}$`),c("COERCEPLAIN",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?`),c("COERCE",`${i[n.COERCEPLAIN]}(?:$|[^\\d])`),c("COERCEFULL",i[n.COERCEPLAIN]+`(?:${i[n.PRERELEASE]})?(?:${i[n.BUILD]})?(?:$|[^\\d])`),c("COERCERTL",i[n.COERCE],!0),c("COERCERTLFULL",i[n.COERCEFULL],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${i[n.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${i[n.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${i[n.LONECARET]}${i[n.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${i[n.LONECARET]}${i[n.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${i[n.GTLT]}\\s*(${i[n.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]}|${i[n.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${i[n.XRANGEPLAIN]})\\s+-\\s+(${i[n.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${i[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[n.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$");})(de11,de11.exports);var pe11=de11.exports;const Oe7=/^[0-9]+$/,we13=(r,t)=>{const e=Oe7.test(r),s=Oe7.test(t);return e&&s&&(r=+r,t=+t),r===t?0:e&&!s?-1:s&&!e?1:r<t?-1:1;},_t8=(r,t)=>we13(t,r);var Gt8={compareIdentifiers:we13,rcompareIdentifiers:_t8};const re19=te20,{MAX_LENGTH:Te11,MAX_SAFE_INTEGER:ie16}=fe13,{safeRe:ye11,t:Ae11}=pe11,jt10=ue13,{compareIdentifiers:q32}=Gt8;let Ut9=class j{constructor(t,e){if(e=jt10(e),t instanceof j){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version;}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Te11)throw new TypeError(`version is longer than ${Te11} characters`);re19("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const s=t.trim().match(e.loose?ye11[Ae11.LOOSE]:ye11[Ae11.FULL]);if(!s)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>ie16||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ie16||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ie16||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const o=+h;if(o>=0&&o<ie16)return o;}return h;}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format();}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version;}toString(){return this.version;}compare(t){if(re19("SemVer.compare",this.version,this.options,t),!(t instanceof j)){if(typeof t=="string"&&t===this.version)return 0;t=new j(t,this.options);}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t);}compareMain(t){return t instanceof j||(t=new j(t,this.options)),q32(this.major,t.major)||q32(this.minor,t.minor)||q32(this.patch,t.patch);}comparePre(t){if(t instanceof j||(t=new j(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const s=this.prerelease[e],h=t.prerelease[e];if(re19("prerelease compare",e,s,h),s===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(s===void 0)return-1;if(s===h)continue;return q32(s,h);}while(++e)}compareBuild(t){t instanceof j||(t=new j(t,this.options));let e=0;do{const s=this.build[e],h=t.build[e];if(re19("build compare",e,s,h),s===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(s===void 0)return-1;if(s===h)continue;return q32(s,h);}while(++e)}inc(t,e,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,s),this.inc("pre",e,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,s),this.inc("pre",e,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(s)?1:0;if(!e&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[h];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(e===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h);}}if(e){let o=[e,h];s===!1&&(o=[e]),q32(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o;}break;}default:throw new Error(`invalid increment argument: ${t}`);}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this;}};var he11=Ut9;const Se9=he11,kt10=(r,t,e)=>new Se9(r,e).compare(new Se9(t,e));var Y29=kt10;const Xt10=Y29,Vt9=(r,t,e)=>Xt10(r,t,e)===0;var zt9=Vt9;const Ht8=Y29,Mt10=(r,t,e)=>Ht8(r,t,e)!==0;var Wt9=Mt10;const qt10=Y29,Yt10=(r,t,e)=>qt10(r,t,e)>0;var Bt9=Yt10;const Kt10=Y29,Jt9=(r,t,e)=>Kt10(r,t,e)>=0;var Zt11=Jt9;const Qt9=Y29,er3=(r,t,e)=>Qt9(r,t,e)<0;var tr4=er3;const rr4=Y29,ir3=(r,t,e)=>rr4(r,t,e)<=0;var sr3=ir3;const nr3=zt9,ar3=Wt9,or4=Bt9,lr4=Zt11,cr3=tr4,ur3=sr3,dr3=(r,t,e,s)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return nr3(r,e,s);case"!=":return ar3(r,e,s);case">":return or4(r,e,s);case">=":return lr4(r,e,s);case"<":return cr3(r,e,s);case"<=":return ur3(r,e,s);default:throw new TypeError(`Invalid operator: ${t}`);}};var fr4=dr3,me13,Ce10;function pr3(){if(Ce10)return me13;Ce10=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r;}constructor(d,$){if($=e($),d instanceof t){if(d.loose===!!$.loose)return d;d=d.value;}d=d.trim().split(/\s+/).join(" "),w("comparator",d,$),this.options=$,this.loose=!!$.loose,this.parse(d),this.semver===r?this.value="":this.value=this.operator+this.semver.version,w("comp",this);}parse(d){const $=this.options.loose?s[h.COMPARATORLOOSE]:s[h.COMPARATOR],A=d.match($);if(!A)throw new TypeError(`Invalid comparator: ${d}`);this.operator=A[1]!==void 0?A[1]:"",this.operator==="="&&(this.operator=""),A[2]?this.semver=new I(A[2],this.options.loose):this.semver=r;}toString(){return this.value;}test(d){if(w("Comparator.test",d,this.options.loose),this.semver===r||d===r)return!0;if(typeof d=="string")try{d=new I(d,this.options);}catch($){return!1;}return o(d,this.operator,this.semver,this.options);}intersects(d,$){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new i(d.value,$).test(this.value):d.operator===""?d.value===""?!0:new i(this.value,$).test(d.semver):($=e($),$.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!$.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||o(this.semver,"<",d.semver,$)&&this.operator.startsWith(">")&&d.operator.startsWith("<")?!0:!!(o(this.semver,">",d.semver,$)&&this.operator.startsWith("<")&&d.operator.startsWith(">")));}}me13=t;const e=ue13,{safeRe:s,t:h}=pe11,o=fr4,w=te20,I=he11,i=De8();return me13;}var Ee9,xe10;function De8(){if(xe10)return Ee9;xe10=1;class r{constructor(a,m){if(m=s(m),a instanceof r)return a.loose===!!m.loose&&a.includePrerelease===!!m.includePrerelease?a:new r(a.raw,m);if(a instanceof h)return this.raw=a.value,this.set=[[a]],this.format(),this;if(this.options=m,this.loose=!!m.loose,this.includePrerelease=!!m.includePrerelease,this.raw=a.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(f=>this.parseRange(f.trim())).filter(f=>f.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const f=this.set[0];if(this.set=this.set.filter(p=>!c(p[0])),this.set.length===0)this.set=[f];else if(this.set.length>1){for(const p of this.set)if(p.length===1&&_(p[0])){this.set=[p];break;}}}this.format();}format(){return this.range=this.set.map(a=>a.join(" ").trim()).join("||").trim(),this.range;}toString(){return this.range;}parseRange(a){const m=(this.options.includePrerelease&&A)|(this.options.loose&&D),f=m+":"+a,p=e.get(f);if(p)return p;const u=this.options.loose,E=u?I[i.HYPHENRANGELOOSE]:I[i.HYPHENRANGE];a=a.replace(E,oe(this.options.includePrerelease)),o("hyphen replace",a),a=a.replace(I[i.COMPARATORTRIM],n),o("comparator trim",a),a=a.replace(I[i.TILDETRIM],d),o("tilde trim",a),a=a.replace(I[i.CARETTRIM],$),o("caret trim",a);let R=a.split(" ").map(y=>S(y,this.options)).join(" ").split(/\s+/).map(y=>ae(y,this.options));u&&(R=R.filter(y=>(o("loose invalid filter",y,this.options),!!y.match(I[i.COMPARATORLOOSE])))),o("range list",R);const v=new Map,O=R.map(y=>new h(y,this.options));for(const y of O){if(c(y))return[y];v.set(y.value,y);}v.size>1&&v.has("")&&v.delete("");const x=[...v.values()];return e.set(f,x),x;}intersects(a,m){if(!(a instanceof r))throw new TypeError("a Range is required");return this.set.some(f=>C(f,m)&&a.set.some(p=>C(p,m)&&f.every(u=>p.every(E=>u.intersects(E,m)))));}test(a){if(!a)return!1;if(typeof a=="string")try{a=new w(a,this.options);}catch(m){return!1;}for(let m=0;m<this.set.length;m++)if(le(this.set[m],a,this.options))return!0;return!1;}}Ee9=r;const t=wt8,e=new t,s=ue13,h=pr3(),o=te20,w=he11,{safeRe:I,t:i,comparatorTrimReplace:n,tildeTrimReplace:d,caretTrimReplace:$}=pe11,{FLAG_INCLUDE_PRERELEASE:A,FLAG_LOOSE:D}=fe13,c=l=>l.value==="<0.0.0-0",_=l=>l.value==="",C=(l,a)=>{let m=!0;const f=l.slice();let p=f.pop();for(;m&&f.length;)m=f.every(u=>p.intersects(u,a)),p=f.pop();return m;},S=(l,a)=>(o("comp",l,a),l=L(l,a),o("caret",l),l=P(l,a),o("tildes",l),l=g(l,a),o("xrange",l),l=F(l,a),o("stars",l),l),b=l=>!l||l.toLowerCase()==="x"||l==="*",P=(l,a)=>l.trim().split(/\s+/).map(m=>ne(m,a)).join(" "),ne=(l,a)=>{const m=a.loose?I[i.TILDELOOSE]:I[i.TILDE];return l.replace(m,(f,p,u,E,R)=>{o("tilde",l,f,p,u,E,R);let v;return b(p)?v="":b(u)?v=`>=${p}.0.0 <${+p+1}.0.0-0`:b(E)?v=`>=${p}.${u}.0 <${p}.${+u+1}.0-0`:R?(o("replaceTilde pr",R),v=`>=${p}.${u}.${E}-${R} <${p}.${+u+1}.0-0`):v=`>=${p}.${u}.${E} <${p}.${+u+1}.0-0`,o("tilde return",v),v;});},L=(l,a)=>l.trim().split(/\s+/).map(m=>N(m,a)).join(" "),N=(l,a)=>{o("caret",l,a);const m=a.loose?I[i.CARETLOOSE]:I[i.CARET],f=a.includePrerelease?"-0":"";return l.replace(m,(p,u,E,R,v)=>{o("caret",l,p,u,E,R,v);let O;return b(u)?O="":b(E)?O=`>=${u}.0.0${f} <${+u+1}.0.0-0`:b(R)?u==="0"?O=`>=${u}.${E}.0${f} <${u}.${+E+1}.0-0`:O=`>=${u}.${E}.0${f} <${+u+1}.0.0-0`:v?(o("replaceCaret pr",v),u==="0"?E==="0"?O=`>=${u}.${E}.${R}-${v} <${u}.${E}.${+R+1}-0`:O=`>=${u}.${E}.${R}-${v} <${u}.${+E+1}.0-0`:O=`>=${u}.${E}.${R}-${v} <${+u+1}.0.0-0`):(o("no pr"),u==="0"?E==="0"?O=`>=${u}.${E}.${R}${f} <${u}.${E}.${+R+1}-0`:O=`>=${u}.${E}.${R}${f} <${u}.${+E+1}.0-0`:O=`>=${u}.${E}.${R} <${+u+1}.0.0-0`),o("caret return",O),O;});},g=(l,a)=>(o("replaceXRanges",l,a),l.split(/\s+/).map(m=>T(m,a)).join(" ")),T=(l,a)=>{l=l.trim();const m=a.loose?I[i.XRANGELOOSE]:I[i.XRANGE];return l.replace(m,(f,p,u,E,R,v)=>{o("xRange",l,f,p,u,E,R,v);const O=b(u),x=O||b(E),y=x||b(R),K=y;return p==="="&&K&&(p=""),v=a.includePrerelease?"-0":"",O?p===">"||p==="<"?f="<0.0.0-0":f="*":p&&K?(x&&(E=0),R=0,p===">"?(p=">=",x?(u=+u+1,E=0,R=0):(E=+E+1,R=0)):p==="<="&&(p="<",x?u=+u+1:E=+E+1),p==="<"&&(v="-0"),f=`${p+u}.${E}.${R}${v}`):x?f=`>=${u}.0.0${v} <${+u+1}.0.0-0`:y&&(f=`>=${u}.${E}.0${v} <${u}.${+E+1}.0-0`),o("xRange return",f),f;});},F=(l,a)=>(o("replaceStars",l,a),l.trim().replace(I[i.STAR],"")),ae=(l,a)=>(o("replaceGTE0",l,a),l.trim().replace(I[a.includePrerelease?i.GTE0PRE:i.GTE0],"")),oe=l=>(a,m,f,p,u,E,R,v,O,x,y,K)=>(b(f)?m="":b(p)?m=`>=${f}.0.0${l?"-0":""}`:b(u)?m=`>=${f}.${p}.0${l?"-0":""}`:E?m=`>=${m}`:m=`>=${m}${l?"-0":""}`,b(O)?v="":b(x)?v=`<${+O+1}.0.0-0`:b(y)?v=`<${O}.${+x+1}.0-0`:K?v=`<=${O}.${x}.${y}-${K}`:l?v=`<${O}.${x}.${+y+1}-0`:v=`<=${v}`,`${m} ${v}`.trim()),le=(l,a,m)=>{for(let f=0;f<l.length;f++)if(!l[f].test(a))return!1;if(a.prerelease.length&&!m.includePrerelease){for(let f=0;f<l.length;f++){if(o(l[f].semver),l[f].semver===h.ANY)continue;if(l[f].semver.prerelease.length>0){const p=l[f].semver;if(p.major===a.major&&p.minor===a.minor&&p.patch===a.patch)return!0;}}return!1;}return!0;};return Ee9;}const hr3=De8(),mr3=(r,t,e)=>{try{t=new hr3(t,e);}catch(s){return!1;}return t.test(r);};var Er4=mr3,Pe9=bt10(Er4);function vr2(r,t,e){const s=r.open(t),{origin:w}=new URL(t);let I=~~(1e4/250);function i(d){d.source===s&&(I=0,r.removeEventListener("message",i,!1));}r.addEventListener("message",i,!1);function n(){if(I<=0)return;s.postMessage(e,w),setTimeout(n,250),I-=1;}setTimeout(n,250);}var gr3=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Fe12(r,...t){for(const e of t)$r5(r,e);return r;}function $r5(r,t){for(const e of Object.keys(t))S1(r,e,t[e],!0);}var Ir4="vega-embed",Rr2="6.26.0",Lr5="Publish Vega visualizations as embedded web components.",Nr4=["vega","data","visualization","component","embed"],br5={type:"git",url:"http://github.com/vega/vega-embed.git"},Or5={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},wr4=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Tr4={url:"https://github.com/vega/vega-embed/issues"},yr4="https://github.com/vega/vega-embed#readme",Ar1="BSD-3-Clause",Sr4="build/vega-embed.js",Cr4="build/vega-embed.module.js",xr4="build/vega-embed.min.js",Dr5="build/vega-embed.min.js",Pr5="build/vega-embed.module.d.ts",Fr4=["src","build"],_r2={".":{import:{types:"./build/vega-embed.module.d.ts",default:"./build/vega-embed.module.js"},require:{default:"./build/vega-embed.js"}}},Gr4={"@babel/core":"^7.24.7","@babel/eslint-parser":"^7.24.7","@babel/plugin-transform-runtime":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/semver":"^7.5.8","@typescript-eslint/parser":"^7.15.0","@vitest/coverage-v8":"^1.6.0","browser-sync":"^3.0.2",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^9.6.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","eslint-plugin-vitest":"^0.5.4",jsdom:"^24.1.0","postinstall-postinstall":"^2.1.0",prettier:"^3.3.2","release-it":"^17.4.1",rollup:"4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.77.6",typescript:"^5.5.3","typescript-eslint":"^7.15.0",vega:"^5.30.0","vega-lite":"^5.19.0",vitest:"^1.6.0","vitest-canvas-mock":"^0.3.3"},jr4={vega:"^5.21.0","vega-lite":"*"},Ur3={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.6.2",tslib:"^2.6.3","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.15.0","vega-tooltip":"^0.34.0"},kr3={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"vitest run",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},Xr5={name:Ir4,version:Rr2,description:Lr5,keywords:Nr4,repository:br5,author:Or5,contributors:wr4,bugs:Tr4,homepage:yr4,license:Ar1,main:Sr4,module:Cr4,unpkg:xr4,jsdelivr:Dr5,types:Pr5,files:Fr4,exports:_r2,devDependencies:Gr4,peerDependencies:jr4,dependencies:Ur3,scripts:kr3};Xr5.version;let B27=mod13;const _e8=typeof window!="undefined"?window:void 0;B27===void 0&&_e8?.vl?.compile&&(B27=_e8.vl);const Ge10={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},zr4={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},J29={vega:"Vega","vega-lite":"Vega-Lite"},se16={vega:mod12.version,"vega-lite":B27?B27.version:"not available"},Hr4={vega:r=>r,"vega-lite":(r,t)=>B27.compile(r,{config:t}).spec},Mr4=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Wr5="chart-wrapper";function qr5(r){return typeof r=="function";}function je11(r,t,e,s){const h=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${e}</body></html>`,w=window.open("");w.document.write(h+r+o),w.document.title=`${J29[s]} JSON Source`;}function Ue10(r,t){if(r.$schema){const e=c7(r.$schema);t&&t!==e.library&&console.warn(`The given visualization spec is written in ${J29[e.library]}, but mode argument sets ${J29[t]??t}.`);const s=e.library;return Pe9(se16[s],`^${e.version.slice(1)}`)||console.warn(`The input spec uses ${J29[s]} ${e.version}, but the current version of ${J29[s]} is v${se16[s]}.`),s;}return"mark"in r||"encoding"in r||"layer"in r||"hconcat"in r||"vconcat"in r||"facet"in r||"repeat"in r?"vega-lite":"marks"in r||"signals"in r||"scales"in r||"axes"in r?"vega":t??"vega";}function ke10(r){return!!(r&&"load"in r);}function Xe9(r){return ke10(r)?r:mod12.loader(r);}function Yr5(r){const t=r.usermeta?.embedOptions??{};return X1(t.defaultStyle)&&(t.defaultStyle=!1),t;}async function Br4(r,t,e={}){let s,h;X1(t)?(h=Xe9(e.loader),s=JSON.parse(await h.load(t))):s=t;const o=Yr5(s),w=o.loader;(!h||w)&&(h=Xe9(e.loader??w));const I=await Ve9(o,h),i=await Ve9(e,h),n={...Fe12(i,I),config:rn(i.config??{},I.config??{})};return await Jr5(r,s,n,h);}async function Ve9(r,t){const e=X1(r.config)?JSON.parse(await t.load(r.config)):r.config??{},s=X1(r.patch)?JSON.parse(await t.load(r.patch)):r.patch;return{...r,...s?{patch:s}:{},...e?{config:e}:{}};}function Kr5(r){const t=r.getRootNode?r.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body};}async function Jr5(r,t,e={},s){const h=e.theme?rn(mod14[e.theme],e.config??{}):e.config,o=In(e.actions)?e.actions:Fe12({},Ge10,e.actions??{}),w={...zr4,...e.i18n},I=e.renderer??"canvas",i=e.logLevel??mod12.Warn,n=e.downloadFileName??"visualization",d=typeof r=="string"?document.querySelector(r):r;if(!d)throw new Error(`${r} does not exist`);if(e.defaultStyle!==!1){const L="vega-embed-style",{root:N,rootContainer:g}=Kr5(d);if(!N.getElementById(L)){const T=document.createElement("style");T.id=L,T.innerHTML=e.defaultStyle===void 0||e.defaultStyle===!0?gr3.toString():e.defaultStyle,g.appendChild(T);}}const $=Ue10(t,e.mode);let A=Hr4[$](t,h);if($==="vega-lite"&&A.$schema){const L=c7(A.$schema);Pe9(se16.vega,`^${L.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${L.version}, but current version is v${se16.vega}.`);}d.classList.add("vega-embed"),o&&d.classList.add("has-actions"),d.innerHTML="";let D=d;if(o){const L=document.createElement("div");L.classList.add(Wr5),d.appendChild(L),D=L;}const c=e.patch;if(c&&(A=c instanceof Function?c(A):T(A,c,!0,!1).newDocument),e.formatLocale&&mod12.formatLocale(e.formatLocale),e.timeFormatLocale&&mod12.timeFormatLocale(e.timeFormatLocale),e.expressionFunctions)for(const L in e.expressionFunctions){const N=e.expressionFunctions[L];"fn"in N?mod12.expressionFunction(L,N.fn,N.visitor):N instanceof Function&&mod12.expressionFunction(L,N);}const{ast:_}=e,C=mod12.parse(A,$==="vega-lite"?{}:h,{ast:_}),S=new(e.viewClass||mod12.View)(C,{loader:s,logLevel:i,renderer:I,..._?{expr:mod12.expressionInterpreter??e.expr??v20}:{}});if(S.addSignalListener("autosize",(L,N)=>{const{type:g}=N;g=="fit-x"?(D.classList.add("fit-x"),D.classList.remove("fit-y")):g=="fit-y"?(D.classList.remove("fit-x"),D.classList.add("fit-y")):g=="fit"?D.classList.add("fit-x","fit-y"):D.classList.remove("fit-x","fit-y");}),e.tooltip!==!1){const{loader:L,tooltip:N}=e,g=L&&!ke10(L)?L?.baseURL:void 0,T=qr5(N)?N:new x21({baseURL:g,...N===!0?{}:N}).call;S.tooltip(T);}let{hover:b}=e;if(b===void 0&&(b=$==="vega"),b){const{hoverSet:L,updateSet:N}=typeof b=="boolean"?{}:b;S.hover(L,N);}e&&(e.width!=null&&S.width(e.width),e.height!=null&&S.height(e.height),e.padding!=null&&S.padding(e.padding)),await S.initialize(D,e.bind).runAsync();let P;if(o!==!1){let L=d;if(e.defaultStyle!==!1||e.forceActionsMenu){const g=document.createElement("details");g.title=w.CLICK_TO_VIEW_ACTIONS,d.append(g),L=g;const T=document.createElement("summary");T.innerHTML=Mr4,g.append(T),P=F=>{g.contains(F.target)||g.removeAttribute("open");},document.addEventListener("click",P);}const N=document.createElement("div");if(L.append(N),N.classList.add("vega-actions"),o===!0||o.export!==!1){for(const g of["svg","png"])if(o===!0||o.export===!0||o.export[g]){const T=w[`${g.toUpperCase()}_ACTION`],F=document.createElement("a"),ae=M1(e.scaleFactor)?e.scaleFactor[g]:e.scaleFactor;F.text=T,F.href="#",F.target="_blank",F.download=`${n}.${g}`,F.addEventListener("mousedown",async function(oe){oe.preventDefault();const le=await S.toImageURL(g,ae);this.href=le;}),N.append(F);}}if(o===!0||o.source!==!1){const g=document.createElement("a");g.text=w.SOURCE_ACTION,g.href="#",g.addEventListener("click",function(T){je11(L1(t),e.sourceHeader??"",e.sourceFooter??"",$),T.preventDefault();}),N.append(g);}if($==="vega-lite"&&(o===!0||o.compiled!==!1)){const g=document.createElement("a");g.text=w.COMPILED_ACTION,g.href="#",g.addEventListener("click",function(T){je11(L1(A),e.sourceHeader??"",e.sourceFooter??"","vega"),T.preventDefault();}),N.append(g);}if(o===!0||o.editor!==!1){const g=e.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=w.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(F){vr2(window,g,{config:h,mode:c?"vega":$,renderer:I,spec:L1(c?A:t)}),F.preventDefault();}),N.append(T);}}function ne(){P&&document.removeEventListener("click",P),S.finalize();}return{view:S,spec:t,vgSpec:A,finalize:ne,embedOptions:e};}window.vegaEmbed=Br4;window.vega=__default;window.vegaLite=__default1;
  </script>
<link href="./css/styles.css" rel="stylesheet"/></head>
<body>
<div class="vega-visualization" id="vis"></div>
<script type="text/javascript">
  const spec = {"config": {"title": {"font": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif"}, "axis": {"labelFont": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif", "titleFont": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif", "labelFontSize": 14, "titleFontSize": 13}, "header": {"labelFont": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif", "titleFont": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif", "labelFontSize": 14, "titleFontSize": 13}, "legend": {"labelFont": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif", "titleFont": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif", "titleFontSize": 14, "labelFontSize": 14}, "text": {"font": "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif", "fontSize": 16}}, "hconcat": [{"vconcat": [{"data": {"name": "data-8b9b7bbc32184f6aaa2eb3c58dc13fef"}, "mark": {"type": "text", "align": "left", "baseline": "top", "dx": -95, "fontSize": 12, "lineBreak": "\n", "size": 10}, "encoding": {"text": {"field": "text", "type": "nominal"}}, "height": 50, "width": 100}, {"vconcat": [{"layer": [{"layer": [{"data": {"name": "data-19ac4893e2aac36b666fe5a38b89d53f"}, "mark": {"type": "rect", "color": "peachpuff", "opacity": 0.7}, "encoding": {"x": {"field": "x_min", "type": "quantitative"}, "x2": {"field": "x_max"}}}, {"data": {"name": "data-8a3e915d85bfde82caab4cc796783009"}, "mark": {"type": "line", "point": true}, "encoding": {"color": {"field": "sample", "legend": null, "scale": {"scheme": "category10"}, "type": "nominal"}, "x": {"field": "depth", "title": "Read Depth", "type": "quantitative"}, "y": {"field": "observed_features", "title": "# Observed Features", "type": "quantitative"}}, "name": "view_1", "title": "Rarefaction Curves"}, {"data": {"name": "data-2d5782ecbc694c0ccabd45d8f95e8a07"}, "mark": {"type": "rule", "strokeWidth": 2}, "encoding": {"color": {"field": "label", "legend": {"title": "Thresholds"}, "scale": {"range": ["#377eb8", "#f781bf", "#984ea3"]}, "type": "nominal"}, "x": {"field": "x", "type": "quantitative"}}}], "resolve": {"scale": {"color": "independent", "x": "shared"}}, "title": "Rarefaction Curves"}, {"data": {"name": "data-27d844e5c5b053990c0409f59f5f6cdd"}, "mark": {"type": "rule", "color": "black", "strokeWidth": 2}, "encoding": {"x": {"field": "position", "type": "quantitative"}}, "title": "Interactive Vertical Line", "transform": [{"calculate": "position", "as": "position"}, {"filter": {"param": "param_2"}}]}], "height": 350, "resolve": {"scale": {"x": "shared", "y": "shared"}}, "width": 450}, {"data": {"name": "data-01b0f0688adf25d2631e41987149657c"}, "mark": {"type": "text", "align": "left", "baseline": "top", "dx": -95, "fontSize": 16, "lineBreak": "\n", "size": 14}, "encoding": {"text": {"field": "text", "type": "nominal"}}, "height": 50, "width": 100}], "spacing": 0}], "spacing": 0}, {"vconcat": [{"data": {"name": "data-8b9b7bbc32184f6aaa2eb3c58dc13fef"}, "mark": {"type": "text", "align": "left", "baseline": "top", "dx": -95, "dy": -5, "fontSize": 12, "lineBreak": "\n", "size": 10}, "encoding": {"text": {"field": "text", "type": "nominal"}}, "height": 50, "width": 100}, {"layer": [{"mark": {"type": "bar"}, "encoding": {"color": {"value": "lightgrey"}, "x": {"bin": {"maxbins": 50}, "field": "reads_per_sample", "title": "Reads per Sample", "type": "quantitative"}, "y": {"aggregate": "count", "title": "# Samples", "type": "quantitative"}}, "name": "view_2", "title": "Histogram of Reads per Sample"}, {"mark": {"type": "bar"}, "encoding": {"color": {"value": "steelblue"}, "x": {"bin": {"maxbins": 50}, "field": "reads_per_sample", "title": "Reads per Sample", "type": "quantitative"}, "y": {"aggregate": "count", "title": "# Samples", "type": "quantitative"}}, "title": "Histogram of Reads per Sample", "transform": [{"filter": "(datum.reads_per_sample >= position)"}, {"calculate": "position", "as": "position"}]}], "data": {"name": "data-c8d3136937260f083ef0163cc2321b13"}, "height": 350, "resolve": {"scale": {"x": "shared", "y": "shared"}}, "width": 450}], "spacing": 0}], "params": [{"name": "param_1", "select": {"type": "interval"}, "bind": "scales", "views": ["view_1", "view_2"]}, {"name": "param_2", "bind": {"input": "checkbox", "name": "Show read depth specified by slider as a line on the plot: "}}, {"name": "position", "bind": {"input": "range", "max": 6770.0, "min": 0, "name": "Rarefaction Depth Line", "step": 20}, "value": 2375}], "spacing": 60, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-8b9b7bbc32184f6aaa2eb3c58dc13fef": [{"text": "\n\n"}], "data-19ac4893e2aac36b666fe5a38b89d53f": [{"x_min": 0, "x_max": 895}], "data-8a3e915d85bfde82caab4cc796783009": [{"depth": 1, "observed_features": 1.0, "sample": "L6S93"}, {"depth": 277, "observed_features": 33.0, "sample": "L6S93"}, {"depth": 554, "observed_features": 42.2, "sample": "L6S93"}, {"depth": 831, "observed_features": 45.5, "sample": "L6S93"}, {"depth": 1108, "observed_features": 48.7, "sample": "L6S93"}, {"depth": 1385, "observed_features": 51.7, "sample": "L6S93"}, {"depth": 1662, "observed_features": 54.1, "sample": "L6S93"}, {"depth": 1938, "observed_features": 55.4, "sample": "L6S93"}, {"depth": 2215, "observed_features": 56.6, "sample": "L6S93"}, {"depth": 2492, "observed_features": 57.7, "sample": "L6S93"}, {"depth": 2769, "observed_features": 58.5, "sample": "L6S93"}, {"depth": 3046, "observed_features": 59.5, "sample": "L6S93"}, {"depth": 3323, "observed_features": 60.8, "sample": "L6S93"}, {"depth": 3599, "observed_features": 61.3, "sample": "L6S93"}, {"depth": 3876, "observed_features": 62.1, "sample": "L6S93"}, {"depth": 4153, "observed_features": 63.0, "sample": "L6S93"}, {"depth": 4430, "observed_features": 63.1, "sample": "L6S93"}, {"depth": 4707, "observed_features": 63.5, "sample": "L6S93"}, {"depth": 4984, "observed_features": 63.7, "sample": "L6S93"}, {"depth": 5261, "observed_features": 64.0, "sample": "L6S93"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S222"}, {"depth": 85, "observed_features": 50.7, "sample": "L2S222"}, {"depth": 169, "observed_features": 78.3, "sample": "L2S222"}, {"depth": 253, "observed_features": 95.0, "sample": "L2S222"}, {"depth": 338, "observed_features": 107.0, "sample": "L2S222"}, {"depth": 422, "observed_features": 116.0, "sample": "L2S222"}, {"depth": 506, "observed_features": 122.4, "sample": "L2S222"}, {"depth": 591, "observed_features": 128.0, "sample": "L2S222"}, {"depth": 675, "observed_features": 132.5, "sample": "L2S222"}, {"depth": 759, "observed_features": 135.7, "sample": "L2S222"}, {"depth": 844, "observed_features": 139.0, "sample": "L2S222"}, {"depth": 928, "observed_features": 140.9, "sample": "L2S222"}, {"depth": 1012, "observed_features": 142.2, "sample": "L2S222"}, {"depth": 1097, "observed_features": 143.0, "sample": "L2S222"}, {"depth": 1181, "observed_features": 144.2, "sample": "L2S222"}, {"depth": 1265, "observed_features": 145.2, "sample": "L2S222"}, {"depth": 1350, "observed_features": 146.2, "sample": "L2S222"}, {"depth": 1434, "observed_features": 146.6, "sample": "L2S222"}, {"depth": 1518, "observed_features": 146.9, "sample": "L2S222"}, {"depth": 1603, "observed_features": 147.0, "sample": "L2S222"}, {"depth": 1, "observed_features": 1.0, "sample": "L5S104"}, {"depth": 91, "observed_features": 17.8, "sample": "L5S104"}, {"depth": 181, "observed_features": 21.0, "sample": "L5S104"}, {"depth": 272, "observed_features": 23.1, "sample": "L5S104"}, {"depth": 362, "observed_features": 24.7, "sample": "L5S104"}, {"depth": 453, "observed_features": 26.2, "sample": "L5S104"}, {"depth": 543, "observed_features": 27.3, "sample": "L5S104"}, {"depth": 633, "observed_features": 27.9, "sample": "L5S104"}, {"depth": 724, "observed_features": 28.7, "sample": "L5S104"}, {"depth": 814, "observed_features": 29.1, "sample": "L5S104"}, {"depth": 905, "observed_features": 29.8, "sample": "L5S104"}, {"depth": 995, "observed_features": 30.3, "sample": "L5S104"}, {"depth": 1086, "observed_features": 30.6, "sample": "L5S104"}, {"depth": 1176, "observed_features": 30.8, "sample": "L5S104"}, {"depth": 1266, "observed_features": 31.3, "sample": "L5S104"}, {"depth": 1357, "observed_features": 31.7, "sample": "L5S104"}, {"depth": 1447, "observed_features": 31.9, "sample": "L5S104"}, {"depth": 1538, "observed_features": 32.0, "sample": "L5S104"}, {"depth": 1628, "observed_features": 32.0, "sample": "L5S104"}, {"depth": 1719, "observed_features": 32.0, "sample": "L5S104"}, {"depth": 1, "observed_features": 1.0, "sample": "L5S203"}, {"depth": 83, "observed_features": 16.8, "sample": "L5S203"}, {"depth": 165, "observed_features": 20.4, "sample": "L5S203"}, {"depth": 247, "observed_features": 23.9, "sample": "L5S203"}, {"depth": 329, "observed_features": 26.4, "sample": "L5S203"}, {"depth": 411, "observed_features": 27.8, "sample": "L5S203"}, {"depth": 493, "observed_features": 29.4, "sample": "L5S203"}, {"depth": 575, "observed_features": 30.9, "sample": "L5S203"}, {"depth": 657, "observed_features": 31.8, "sample": "L5S203"}, {"depth": 739, "observed_features": 32.6, "sample": "L5S203"}, {"depth": 822, "observed_features": 33.4, "sample": "L5S203"}, {"depth": 904, "observed_features": 34.5, "sample": "L5S203"}, {"depth": 986, "observed_features": 34.9, "sample": "L5S203"}, {"depth": 1068, "observed_features": 35.7, "sample": "L5S203"}, {"depth": 1150, "observed_features": 36.0, "sample": "L5S203"}, {"depth": 1232, "observed_features": 36.3, "sample": "L5S203"}, {"depth": 1314, "observed_features": 36.4, "sample": "L5S203"}, {"depth": 1396, "observed_features": 36.8, "sample": "L5S203"}, {"depth": 1478, "observed_features": 36.9, "sample": "L5S203"}, {"depth": 1561, "observed_features": 37.0, "sample": "L5S203"}, {"depth": 1, "observed_features": 1.0, "sample": "L5S155"}, {"depth": 71, "observed_features": 12.7, "sample": "L5S155"}, {"depth": 142, "observed_features": 16.1, "sample": "L5S155"}, {"depth": 213, "observed_features": 17.7, "sample": "L5S155"}, {"depth": 284, "observed_features": 19.5, "sample": "L5S155"}, {"depth": 355, "observed_features": 21.2, "sample": "L5S155"}, {"depth": 426, "observed_features": 21.9, "sample": "L5S155"}, {"depth": 496, "observed_features": 22.8, "sample": "L5S155"}, {"depth": 567, "observed_features": 23.1, "sample": "L5S155"}, {"depth": 638, "observed_features": 23.7, "sample": "L5S155"}, {"depth": 709, "observed_features": 23.9, "sample": "L5S155"}, {"depth": 780, "observed_features": 24.3, "sample": "L5S155"}, {"depth": 851, "observed_features": 24.6, "sample": "L5S155"}, {"depth": 921, "observed_features": 24.7, "sample": "L5S155"}, {"depth": 992, "observed_features": 25.0, "sample": "L5S155"}, {"depth": 1063, "observed_features": 25.0, "sample": "L5S155"}, {"depth": 1134, "observed_features": 25.0, "sample": "L5S155"}, {"depth": 1205, "observed_features": 25.0, "sample": "L5S155"}, {"depth": 1276, "observed_features": 25.0, "sample": "L5S155"}, {"depth": 1347, "observed_features": 25.0, "sample": "L5S155"}, {"depth": 1, "observed_features": 1.0, "sample": "L3S360"}, {"depth": 28, "observed_features": 19.1, "sample": "L3S360"}, {"depth": 55, "observed_features": 31.8, "sample": "L3S360"}, {"depth": 82, "observed_features": 40.5, "sample": "L3S360"}, {"depth": 109, "observed_features": 47.5, "sample": "L3S360"}, {"depth": 136, "observed_features": 52.5, "sample": "L3S360"}, {"depth": 163, "observed_features": 56.9, "sample": "L3S360"}, {"depth": 190, "observed_features": 60.0, "sample": "L3S360"}, {"depth": 217, "observed_features": 62.3, "sample": "L3S360"}, {"depth": 244, "observed_features": 65.9, "sample": "L3S360"}, {"depth": 271, "observed_features": 67.6, "sample": "L3S360"}, {"depth": 298, "observed_features": 69.4, "sample": "L3S360"}, {"depth": 325, "observed_features": 70.3, "sample": "L3S360"}, {"depth": 352, "observed_features": 71.4, "sample": "L3S360"}, {"depth": 379, "observed_features": 72.0, "sample": "L3S360"}, {"depth": 406, "observed_features": 72.9, "sample": "L3S360"}, {"depth": 433, "observed_features": 73.5, "sample": "L3S360"}, {"depth": 460, "observed_features": 73.9, "sample": "L3S360"}, {"depth": 487, "observed_features": 74.0, "sample": "L3S360"}, {"depth": 514, "observed_features": 74.0, "sample": "L3S360"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S105"}, {"depth": 265, "observed_features": 32.8, "sample": "L1S105"}, {"depth": 529, "observed_features": 45.0, "sample": "L1S105"}, {"depth": 793, "observed_features": 54.1, "sample": "L1S105"}, {"depth": 1057, "observed_features": 59.3, "sample": "L1S105"}, {"depth": 1321, "observed_features": 63.8, "sample": "L1S105"}, {"depth": 1585, "observed_features": 67.2, "sample": "L1S105"}, {"depth": 1850, "observed_features": 70.1, "sample": "L1S105"}, {"depth": 2114, "observed_features": 72.0, "sample": "L1S105"}, {"depth": 2378, "observed_features": 73.4, "sample": "L1S105"}, {"depth": 2642, "observed_features": 75.1, "sample": "L1S105"}, {"depth": 2906, "observed_features": 75.8, "sample": "L1S105"}, {"depth": 3170, "observed_features": 76.7, "sample": "L1S105"}, {"depth": 3435, "observed_features": 77.4, "sample": "L1S105"}, {"depth": 3699, "observed_features": 77.9, "sample": "L1S105"}, {"depth": 3963, "observed_features": 78.4, "sample": "L1S105"}, {"depth": 4227, "observed_features": 78.4, "sample": "L1S105"}, {"depth": 4491, "observed_features": 78.8, "sample": "L1S105"}, {"depth": 4755, "observed_features": 79.0, "sample": "L1S105"}, {"depth": 5020, "observed_features": 79.0, "sample": "L1S105"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S309"}, {"depth": 48, "observed_features": 20.4, "sample": "L2S309"}, {"depth": 95, "observed_features": 32.3, "sample": "L2S309"}, {"depth": 142, "observed_features": 40.8, "sample": "L2S309"}, {"depth": 189, "observed_features": 47.4, "sample": "L2S309"}, {"depth": 236, "observed_features": 52.4, "sample": "L2S309"}, {"depth": 283, "observed_features": 57.9, "sample": "L2S309"}, {"depth": 330, "observed_features": 61.3, "sample": "L2S309"}, {"depth": 377, "observed_features": 64.6, "sample": "L2S309"}, {"depth": 424, "observed_features": 66.4, "sample": "L2S309"}, {"depth": 471, "observed_features": 68.9, "sample": "L2S309"}, {"depth": 518, "observed_features": 70.4, "sample": "L2S309"}, {"depth": 565, "observed_features": 71.5, "sample": "L2S309"}, {"depth": 612, "observed_features": 72.5, "sample": "L2S309"}, {"depth": 659, "observed_features": 74.0, "sample": "L2S309"}, {"depth": 706, "observed_features": 74.8, "sample": "L2S309"}, {"depth": 753, "observed_features": 75.3, "sample": "L2S309"}, {"depth": 800, "observed_features": 75.8, "sample": "L2S309"}, {"depth": 847, "observed_features": 75.9, "sample": "L2S309"}, {"depth": 895, "observed_features": 76.0, "sample": "L2S309"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S175"}, {"depth": 156, "observed_features": 46.7, "sample": "L2S175"}, {"depth": 311, "observed_features": 68.1, "sample": "L2S175"}, {"depth": 467, "observed_features": 79.4, "sample": "L2S175"}, {"depth": 622, "observed_features": 89.1, "sample": "L2S175"}, {"depth": 778, "observed_features": 96.4, "sample": "L2S175"}, {"depth": 933, "observed_features": 103.1, "sample": "L2S175"}, {"depth": 1089, "observed_features": 109.5, "sample": "L2S175"}, {"depth": 1244, "observed_features": 113.9, "sample": "L2S175"}, {"depth": 1400, "observed_features": 118.9, "sample": "L2S175"}, {"depth": 1555, "observed_features": 122.0, "sample": "L2S175"}, {"depth": 1711, "observed_features": 124.2, "sample": "L2S175"}, {"depth": 1866, "observed_features": 126.4, "sample": "L2S175"}, {"depth": 2022, "observed_features": 127.7, "sample": "L2S175"}, {"depth": 2177, "observed_features": 129.0, "sample": "L2S175"}, {"depth": 2333, "observed_features": 129.6, "sample": "L2S175"}, {"depth": 2488, "observed_features": 130.6, "sample": "L2S175"}, {"depth": 2644, "observed_features": 130.9, "sample": "L2S175"}, {"depth": 2799, "observed_features": 131.7, "sample": "L2S175"}, {"depth": 2955, "observed_features": 132.0, "sample": "L2S175"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S140"}, {"depth": 250, "observed_features": 34.7, "sample": "L1S140"}, {"depth": 500, "observed_features": 48.3, "sample": "L1S140"}, {"depth": 750, "observed_features": 56.5, "sample": "L1S140"}, {"depth": 1000, "observed_features": 63.0, "sample": "L1S140"}, {"depth": 1250, "observed_features": 67.3, "sample": "L1S140"}, {"depth": 1500, "observed_features": 69.6, "sample": "L1S140"}, {"depth": 1750, "observed_features": 72.1, "sample": "L1S140"}, {"depth": 2000, "observed_features": 73.7, "sample": "L1S140"}, {"depth": 2250, "observed_features": 75.4, "sample": "L1S140"}, {"depth": 2499, "observed_features": 76.3, "sample": "L1S140"}, {"depth": 2749, "observed_features": 77.1, "sample": "L1S140"}, {"depth": 2999, "observed_features": 77.6, "sample": "L1S140"}, {"depth": 3249, "observed_features": 78.2, "sample": "L1S140"}, {"depth": 3499, "observed_features": 78.5, "sample": "L1S140"}, {"depth": 3749, "observed_features": 78.7, "sample": "L1S140"}, {"depth": 3999, "observed_features": 78.8, "sample": "L1S140"}, {"depth": 4249, "observed_features": 78.8, "sample": "L1S140"}, {"depth": 4499, "observed_features": 78.9, "sample": "L1S140"}, {"depth": 4749, "observed_features": 79.0, "sample": "L1S140"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S76"}, {"depth": 266, "observed_features": 35.3, "sample": "L1S76"}, {"depth": 531, "observed_features": 46.2, "sample": "L1S76"}, {"depth": 796, "observed_features": 53.5, "sample": "L1S76"}, {"depth": 1061, "observed_features": 57.2, "sample": "L1S76"}, {"depth": 1326, "observed_features": 61.2, "sample": "L1S76"}, {"depth": 1591, "observed_features": 65.2, "sample": "L1S76"}, {"depth": 1856, "observed_features": 67.7, "sample": "L1S76"}, {"depth": 2121, "observed_features": 70.1, "sample": "L1S76"}, {"depth": 2386, "observed_features": 72.3, "sample": "L1S76"}, {"depth": 2651, "observed_features": 73.5, "sample": "L1S76"}, {"depth": 2916, "observed_features": 74.3, "sample": "L1S76"}, {"depth": 3181, "observed_features": 75.3, "sample": "L1S76"}, {"depth": 3446, "observed_features": 76.6, "sample": "L1S76"}, {"depth": 3711, "observed_features": 77.3, "sample": "L1S76"}, {"depth": 3976, "observed_features": 78.1, "sample": "L1S76"}, {"depth": 4241, "observed_features": 78.4, "sample": "L1S76"}, {"depth": 4506, "observed_features": 78.6, "sample": "L1S76"}, {"depth": 4771, "observed_features": 78.7, "sample": "L1S76"}, {"depth": 5037, "observed_features": 79.0, "sample": "L1S76"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S155"}, {"depth": 136, "observed_features": 40.8, "sample": "L2S155"}, {"depth": 272, "observed_features": 58.2, "sample": "L2S155"}, {"depth": 408, "observed_features": 72.6, "sample": "L2S155"}, {"depth": 543, "observed_features": 81.5, "sample": "L2S155"}, {"depth": 679, "observed_features": 89.7, "sample": "L2S155"}, {"depth": 815, "observed_features": 95.5, "sample": "L2S155"}, {"depth": 950, "observed_features": 101.4, "sample": "L2S155"}, {"depth": 1086, "observed_features": 105.2, "sample": "L2S155"}, {"depth": 1222, "observed_features": 107.5, "sample": "L2S155"}, {"depth": 1357, "observed_features": 110.0, "sample": "L2S155"}, {"depth": 1493, "observed_features": 112.0, "sample": "L2S155"}, {"depth": 1629, "observed_features": 113.7, "sample": "L2S155"}, {"depth": 1764, "observed_features": 115.0, "sample": "L2S155"}, {"depth": 1900, "observed_features": 116.5, "sample": "L2S155"}, {"depth": 2036, "observed_features": 117.1, "sample": "L2S155"}, {"depth": 2171, "observed_features": 117.7, "sample": "L2S155"}, {"depth": 2307, "observed_features": 118.1, "sample": "L2S155"}, {"depth": 2443, "observed_features": 118.6, "sample": "L2S155"}, {"depth": 2579, "observed_features": 119.0, "sample": "L2S155"}, {"depth": 1, "observed_features": 1.0, "sample": "L6S68"}, {"depth": 242, "observed_features": 27.7, "sample": "L6S68"}, {"depth": 483, "observed_features": 34.2, "sample": "L6S68"}, {"depth": 724, "observed_features": 38.3, "sample": "L6S68"}, {"depth": 965, "observed_features": 42.2, "sample": "L6S68"}, {"depth": 1206, "observed_features": 44.1, "sample": "L6S68"}, {"depth": 1447, "observed_features": 45.5, "sample": "L6S68"}, {"depth": 1689, "observed_features": 47.0, "sample": "L6S68"}, {"depth": 1930, "observed_features": 48.5, "sample": "L6S68"}, {"depth": 2171, "observed_features": 49.4, "sample": "L6S68"}, {"depth": 2412, "observed_features": 50.7, "sample": "L6S68"}, {"depth": 2653, "observed_features": 51.2, "sample": "L6S68"}, {"depth": 2894, "observed_features": 51.9, "sample": "L6S68"}, {"depth": 3136, "observed_features": 52.4, "sample": "L6S68"}, {"depth": 3377, "observed_features": 53.0, "sample": "L6S68"}, {"depth": 3618, "observed_features": 53.6, "sample": "L6S68"}, {"depth": 3859, "observed_features": 53.9, "sample": "L6S68"}, {"depth": 4100, "observed_features": 54.0, "sample": "L6S68"}, {"depth": 4341, "observed_features": 54.0, "sample": "L6S68"}, {"depth": 4583, "observed_features": 54.0, "sample": "L6S68"}, {"depth": 1, "observed_features": 1.0, "sample": "L5S222"}, {"depth": 104, "observed_features": 16.0, "sample": "L5S222"}, {"depth": 208, "observed_features": 20.1, "sample": "L5S222"}, {"depth": 312, "observed_features": 23.8, "sample": "L5S222"}, {"depth": 416, "observed_features": 25.5, "sample": "L5S222"}, {"depth": 519, "observed_features": 27.9, "sample": "L5S222"}, {"depth": 623, "observed_features": 28.9, "sample": "L5S222"}, {"depth": 727, "observed_features": 30.0, "sample": "L5S222"}, {"depth": 831, "observed_features": 30.6, "sample": "L5S222"}, {"depth": 935, "observed_features": 31.6, "sample": "L5S222"}, {"depth": 1038, "observed_features": 31.7, "sample": "L5S222"}, {"depth": 1142, "observed_features": 31.9, "sample": "L5S222"}, {"depth": 1246, "observed_features": 32.1, "sample": "L5S222"}, {"depth": 1350, "observed_features": 32.5, "sample": "L5S222"}, {"depth": 1454, "observed_features": 32.6, "sample": "L5S222"}, {"depth": 1557, "observed_features": 32.7, "sample": "L5S222"}, {"depth": 1661, "observed_features": 32.8, "sample": "L5S222"}, {"depth": 1765, "observed_features": 33.0, "sample": "L5S222"}, {"depth": 1869, "observed_features": 33.0, "sample": "L5S222"}, {"depth": 1973, "observed_features": 33.0, "sample": "L5S222"}, {"depth": 1, "observed_features": 1.0, "sample": "L4S63"}, {"depth": 312, "observed_features": 77.3, "sample": "L4S63"}, {"depth": 623, "observed_features": 103.1, "sample": "L4S63"}, {"depth": 934, "observed_features": 121.1, "sample": "L4S63"}, {"depth": 1245, "observed_features": 133.6, "sample": "L4S63"}, {"depth": 1556, "observed_features": 141.6, "sample": "L4S63"}, {"depth": 1867, "observed_features": 148.7, "sample": "L4S63"}, {"depth": 2179, "observed_features": 153.3, "sample": "L4S63"}, {"depth": 2490, "observed_features": 157.3, "sample": "L4S63"}, {"depth": 2801, "observed_features": 160.9, "sample": "L4S63"}, {"depth": 3112, "observed_features": 163.9, "sample": "L4S63"}, {"depth": 3423, "observed_features": 165.8, "sample": "L4S63"}, {"depth": 3734, "observed_features": 168.7, "sample": "L4S63"}, {"depth": 4046, "observed_features": 169.8, "sample": "L4S63"}, {"depth": 4357, "observed_features": 172.0, "sample": "L4S63"}, {"depth": 4668, "observed_features": 173.0, "sample": "L4S63"}, {"depth": 4979, "observed_features": 173.4, "sample": "L4S63"}, {"depth": 5290, "observed_features": 174.9, "sample": "L4S63"}, {"depth": 5601, "observed_features": 175.7, "sample": "L4S63"}, {"depth": 5913, "observed_features": 176.0, "sample": "L4S63"}, {"depth": 1, "observed_features": 1.0, "sample": "L3S294"}, {"depth": 43, "observed_features": 18.1, "sample": "L3S294"}, {"depth": 85, "observed_features": 26.1, "sample": "L3S294"}, {"depth": 127, "observed_features": 30.9, "sample": "L3S294"}, {"depth": 169, "observed_features": 35.2, "sample": "L3S294"}, {"depth": 211, "observed_features": 37.9, "sample": "L3S294"}, {"depth": 253, "observed_features": 40.8, "sample": "L3S294"}, {"depth": 295, "observed_features": 43.3, "sample": "L3S294"}, {"depth": 337, "observed_features": 44.5, "sample": "L3S294"}, {"depth": 379, "observed_features": 46.0, "sample": "L3S294"}, {"depth": 421, "observed_features": 46.7, "sample": "L3S294"}, {"depth": 463, "observed_features": 48.1, "sample": "L3S294"}, {"depth": 505, "observed_features": 49.3, "sample": "L3S294"}, {"depth": 547, "observed_features": 49.8, "sample": "L3S294"}, {"depth": 589, "observed_features": 50.5, "sample": "L3S294"}, {"depth": 631, "observed_features": 50.9, "sample": "L3S294"}, {"depth": 673, "observed_features": 51.5, "sample": "L3S294"}, {"depth": 715, "observed_features": 51.8, "sample": "L3S294"}, {"depth": 757, "observed_features": 51.9, "sample": "L3S294"}, {"depth": 800, "observed_features": 52.0, "sample": "L3S294"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S240"}, {"depth": 187, "observed_features": 25.7, "sample": "L2S240"}, {"depth": 373, "observed_features": 33.8, "sample": "L2S240"}, {"depth": 559, "observed_features": 38.8, "sample": "L2S240"}, {"depth": 745, "observed_features": 41.3, "sample": "L2S240"}, {"depth": 931, "observed_features": 44.4, "sample": "L2S240"}, {"depth": 1117, "observed_features": 47.0, "sample": "L2S240"}, {"depth": 1303, "observed_features": 49.2, "sample": "L2S240"}, {"depth": 1489, "observed_features": 51.2, "sample": "L2S240"}, {"depth": 1675, "observed_features": 53.4, "sample": "L2S240"}, {"depth": 1861, "observed_features": 54.9, "sample": "L2S240"}, {"depth": 2047, "observed_features": 55.8, "sample": "L2S240"}, {"depth": 2233, "observed_features": 56.6, "sample": "L2S240"}, {"depth": 2419, "observed_features": 57.0, "sample": "L2S240"}, {"depth": 2605, "observed_features": 57.4, "sample": "L2S240"}, {"depth": 2791, "observed_features": 58.1, "sample": "L2S240"}, {"depth": 2977, "observed_features": 58.3, "sample": "L2S240"}, {"depth": 3163, "observed_features": 58.8, "sample": "L2S240"}, {"depth": 3349, "observed_features": 58.9, "sample": "L2S240"}, {"depth": 3535, "observed_features": 59.0, "sample": "L2S240"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S257"}, {"depth": 208, "observed_features": 41.5, "sample": "L1S257"}, {"depth": 416, "observed_features": 53.3, "sample": "L1S257"}, {"depth": 624, "observed_features": 61.0, "sample": "L1S257"}, {"depth": 832, "observed_features": 66.6, "sample": "L1S257"}, {"depth": 1039, "observed_features": 71.5, "sample": "L1S257"}, {"depth": 1247, "observed_features": 76.0, "sample": "L1S257"}, {"depth": 1455, "observed_features": 77.9, "sample": "L1S257"}, {"depth": 1663, "observed_features": 80.5, "sample": "L1S257"}, {"depth": 1871, "observed_features": 82.5, "sample": "L1S257"}, {"depth": 2078, "observed_features": 83.7, "sample": "L1S257"}, {"depth": 2286, "observed_features": 84.9, "sample": "L1S257"}, {"depth": 2494, "observed_features": 85.8, "sample": "L1S257"}, {"depth": 2702, "observed_features": 86.4, "sample": "L1S257"}, {"depth": 2910, "observed_features": 87.6, "sample": "L1S257"}, {"depth": 3117, "observed_features": 87.9, "sample": "L1S257"}, {"depth": 3325, "observed_features": 88.3, "sample": "L1S257"}, {"depth": 3533, "observed_features": 88.6, "sample": "L1S257"}, {"depth": 3741, "observed_features": 88.8, "sample": "L1S257"}, {"depth": 3949, "observed_features": 89.0, "sample": "L1S257"}, {"depth": 1, "observed_features": 1.0, "sample": "L3S313"}, {"depth": 39, "observed_features": 18.1, "sample": "L3S313"}, {"depth": 78, "observed_features": 26.7, "sample": "L3S313"}, {"depth": 117, "observed_features": 34.0, "sample": "L3S313"}, {"depth": 156, "observed_features": 39.6, "sample": "L3S313"}, {"depth": 195, "observed_features": 44.9, "sample": "L3S313"}, {"depth": 234, "observed_features": 49.5, "sample": "L3S313"}, {"depth": 273, "observed_features": 53.0, "sample": "L3S313"}, {"depth": 312, "observed_features": 55.6, "sample": "L3S313"}, {"depth": 351, "observed_features": 57.6, "sample": "L3S313"}, {"depth": 390, "observed_features": 59.7, "sample": "L3S313"}, {"depth": 429, "observed_features": 61.4, "sample": "L3S313"}, {"depth": 468, "observed_features": 63.0, "sample": "L3S313"}, {"depth": 507, "observed_features": 63.4, "sample": "L3S313"}, {"depth": 546, "observed_features": 63.8, "sample": "L3S313"}, {"depth": 585, "observed_features": 64.4, "sample": "L3S313"}, {"depth": 624, "observed_features": 65.1, "sample": "L3S313"}, {"depth": 663, "observed_features": 65.7, "sample": "L3S313"}, {"depth": 702, "observed_features": 66.0, "sample": "L3S313"}, {"depth": 741, "observed_features": 66.0, "sample": "L3S313"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S57"}, {"depth": 291, "observed_features": 43.3, "sample": "L1S57"}, {"depth": 582, "observed_features": 56.4, "sample": "L1S57"}, {"depth": 873, "observed_features": 65.4, "sample": "L1S57"}, {"depth": 1163, "observed_features": 70.7, "sample": "L1S57"}, {"depth": 1454, "observed_features": 73.8, "sample": "L1S57"}, {"depth": 1745, "observed_features": 77.9, "sample": "L1S57"}, {"depth": 2036, "observed_features": 79.7, "sample": "L1S57"}, {"depth": 2326, "observed_features": 81.4, "sample": "L1S57"}, {"depth": 2617, "observed_features": 82.4, "sample": "L1S57"}, {"depth": 2908, "observed_features": 83.4, "sample": "L1S57"}, {"depth": 3199, "observed_features": 84.7, "sample": "L1S57"}, {"depth": 3489, "observed_features": 85.4, "sample": "L1S57"}, {"depth": 3780, "observed_features": 86.4, "sample": "L1S57"}, {"depth": 4071, "observed_features": 87.0, "sample": "L1S57"}, {"depth": 4362, "observed_features": 87.2, "sample": "L1S57"}, {"depth": 4652, "observed_features": 87.7, "sample": "L1S57"}, {"depth": 4943, "observed_features": 87.9, "sample": "L1S57"}, {"depth": 5234, "observed_features": 87.9, "sample": "L1S57"}, {"depth": 5525, "observed_features": 88.0, "sample": "L1S57"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S208"}, {"depth": 271, "observed_features": 45.1, "sample": "L1S208"}, {"depth": 541, "observed_features": 60.9, "sample": "L1S208"}, {"depth": 812, "observed_features": 70.0, "sample": "L1S208"}, {"depth": 1082, "observed_features": 76.4, "sample": "L1S208"}, {"depth": 1352, "observed_features": 81.2, "sample": "L1S208"}, {"depth": 1623, "observed_features": 84.0, "sample": "L1S208"}, {"depth": 1893, "observed_features": 86.7, "sample": "L1S208"}, {"depth": 2163, "observed_features": 87.9, "sample": "L1S208"}, {"depth": 2434, "observed_features": 89.0, "sample": "L1S208"}, {"depth": 2704, "observed_features": 89.5, "sample": "L1S208"}, {"depth": 2975, "observed_features": 90.5, "sample": "L1S208"}, {"depth": 3245, "observed_features": 91.0, "sample": "L1S208"}, {"depth": 3515, "observed_features": 91.5, "sample": "L1S208"}, {"depth": 3786, "observed_features": 91.8, "sample": "L1S208"}, {"depth": 4056, "observed_features": 92.1, "sample": "L1S208"}, {"depth": 4326, "observed_features": 92.4, "sample": "L1S208"}, {"depth": 4597, "observed_features": 92.6, "sample": "L1S208"}, {"depth": 4867, "observed_features": 92.8, "sample": "L1S208"}, {"depth": 5138, "observed_features": 93.0, "sample": "L1S208"}, {"depth": 1, "observed_features": 1.0, "sample": "L4S137"}, {"depth": 357, "observed_features": 80.3, "sample": "L4S137"}, {"depth": 713, "observed_features": 106.4, "sample": "L4S137"}, {"depth": 1069, "observed_features": 122.9, "sample": "L4S137"}, {"depth": 1426, "observed_features": 134.1, "sample": "L4S137"}, {"depth": 1782, "observed_features": 140.7, "sample": "L4S137"}, {"depth": 2138, "observed_features": 147.2, "sample": "L4S137"}, {"depth": 2494, "observed_features": 152.0, "sample": "L4S137"}, {"depth": 2851, "observed_features": 155.3, "sample": "L4S137"}, {"depth": 3207, "observed_features": 158.0, "sample": "L4S137"}, {"depth": 3563, "observed_features": 160.4, "sample": "L4S137"}, {"depth": 3919, "observed_features": 162.1, "sample": "L4S137"}, {"depth": 4276, "observed_features": 163.4, "sample": "L4S137"}, {"depth": 4632, "observed_features": 164.9, "sample": "L4S137"}, {"depth": 4988, "observed_features": 166.2, "sample": "L4S137"}, {"depth": 5344, "observed_features": 166.8, "sample": "L4S137"}, {"depth": 5701, "observed_features": 168.1, "sample": "L4S137"}, {"depth": 6057, "observed_features": 168.8, "sample": "L4S137"}, {"depth": 6413, "observed_features": 169.6, "sample": "L4S137"}, {"depth": 6770, "observed_features": 170.0, "sample": "L4S137"}, {"depth": 1, "observed_features": 1.0, "sample": "L4S112"}, {"depth": 291, "observed_features": 61.3, "sample": "L4S112"}, {"depth": 582, "observed_features": 89.3, "sample": "L4S112"}, {"depth": 873, "observed_features": 110.1, "sample": "L4S112"}, {"depth": 1163, "observed_features": 123.7, "sample": "L4S112"}, {"depth": 1454, "observed_features": 134.6, "sample": "L4S112"}, {"depth": 1745, "observed_features": 141.4, "sample": "L4S112"}, {"depth": 2035, "observed_features": 146.5, "sample": "L4S112"}, {"depth": 2326, "observed_features": 152.1, "sample": "L4S112"}, {"depth": 2617, "observed_features": 156.6, "sample": "L4S112"}, {"depth": 2907, "observed_features": 160.4, "sample": "L4S112"}, {"depth": 3198, "observed_features": 163.6, "sample": "L4S112"}, {"depth": 3489, "observed_features": 166.7, "sample": "L4S112"}, {"depth": 3779, "observed_features": 167.9, "sample": "L4S112"}, {"depth": 4070, "observed_features": 168.9, "sample": "L4S112"}, {"depth": 4361, "observed_features": 170.7, "sample": "L4S112"}, {"depth": 4651, "observed_features": 171.5, "sample": "L4S112"}, {"depth": 4942, "observed_features": 172.2, "sample": "L4S112"}, {"depth": 5233, "observed_features": 172.7, "sample": "L4S112"}, {"depth": 5524, "observed_features": 173.0, "sample": "L4S112"}, {"depth": 1, "observed_features": 1.0, "sample": "L5S174"}, {"depth": 76, "observed_features": 16.8, "sample": "L5S174"}, {"depth": 151, "observed_features": 20.5, "sample": "L5S174"}, {"depth": 226, "observed_features": 22.9, "sample": "L5S174"}, {"depth": 301, "observed_features": 25.6, "sample": "L5S174"}, {"depth": 376, "observed_features": 27.8, "sample": "L5S174"}, {"depth": 451, "observed_features": 29.1, "sample": "L5S174"}, {"depth": 527, "observed_features": 29.6, "sample": "L5S174"}, {"depth": 602, "observed_features": 30.1, "sample": "L5S174"}, {"depth": 677, "observed_features": 30.5, "sample": "L5S174"}, {"depth": 752, "observed_features": 30.9, "sample": "L5S174"}, {"depth": 827, "observed_features": 31.2, "sample": "L5S174"}, {"depth": 902, "observed_features": 32.2, "sample": "L5S174"}, {"depth": 978, "observed_features": 32.4, "sample": "L5S174"}, {"depth": 1053, "observed_features": 32.7, "sample": "L5S174"}, {"depth": 1128, "observed_features": 33.0, "sample": "L5S174"}, {"depth": 1203, "observed_features": 33.3, "sample": "L5S174"}, {"depth": 1278, "observed_features": 33.4, "sample": "L5S174"}, {"depth": 1353, "observed_features": 33.7, "sample": "L5S174"}, {"depth": 1429, "observed_features": 34.0, "sample": "L5S174"}, {"depth": 1, "observed_features": 1.0, "sample": "L3S341"}, {"depth": 35, "observed_features": 17.2, "sample": "L3S341"}, {"depth": 69, "observed_features": 27.3, "sample": "L3S341"}, {"depth": 103, "observed_features": 34.6, "sample": "L3S341"}, {"depth": 138, "observed_features": 41.5, "sample": "L3S341"}, {"depth": 172, "observed_features": 48.4, "sample": "L3S341"}, {"depth": 206, "observed_features": 53.5, "sample": "L3S341"}, {"depth": 241, "observed_features": 56.9, "sample": "L3S341"}, {"depth": 275, "observed_features": 61.8, "sample": "L3S341"}, {"depth": 309, "observed_features": 65.4, "sample": "L3S341"}, {"depth": 344, "observed_features": 67.7, "sample": "L3S341"}, {"depth": 378, "observed_features": 70.0, "sample": "L3S341"}, {"depth": 412, "observed_features": 71.4, "sample": "L3S341"}, {"depth": 447, "observed_features": 73.0, "sample": "L3S341"}, {"depth": 481, "observed_features": 74.2, "sample": "L3S341"}, {"depth": 515, "observed_features": 75.3, "sample": "L3S341"}, {"depth": 550, "observed_features": 76.3, "sample": "L3S341"}, {"depth": 584, "observed_features": 77.4, "sample": "L3S341"}, {"depth": 618, "observed_features": 77.8, "sample": "L3S341"}, {"depth": 653, "observed_features": 78.0, "sample": "L3S341"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S8"}, {"depth": 250, "observed_features": 26.3, "sample": "L1S8"}, {"depth": 499, "observed_features": 34.1, "sample": "L1S8"}, {"depth": 748, "observed_features": 37.0, "sample": "L1S8"}, {"depth": 997, "observed_features": 39.9, "sample": "L1S8"}, {"depth": 1246, "observed_features": 42.3, "sample": "L1S8"}, {"depth": 1495, "observed_features": 43.7, "sample": "L1S8"}, {"depth": 1744, "observed_features": 44.6, "sample": "L1S8"}, {"depth": 1993, "observed_features": 45.4, "sample": "L1S8"}, {"depth": 2242, "observed_features": 46.2, "sample": "L1S8"}, {"depth": 2492, "observed_features": 47.0, "sample": "L1S8"}, {"depth": 2741, "observed_features": 47.6, "sample": "L1S8"}, {"depth": 2990, "observed_features": 48.0, "sample": "L1S8"}, {"depth": 3239, "observed_features": 48.2, "sample": "L1S8"}, {"depth": 3488, "observed_features": 48.5, "sample": "L1S8"}, {"depth": 3737, "observed_features": 48.7, "sample": "L1S8"}, {"depth": 3986, "observed_features": 48.8, "sample": "L1S8"}, {"depth": 4235, "observed_features": 48.9, "sample": "L1S8"}, {"depth": 4484, "observed_features": 49.0, "sample": "L1S8"}, {"depth": 4734, "observed_features": 49.0, "sample": "L1S8"}, {"depth": 1, "observed_features": 1.0, "sample": "L3S378"}, {"depth": 45, "observed_features": 14.8, "sample": "L3S378"}, {"depth": 90, "observed_features": 19.9, "sample": "L3S378"}, {"depth": 135, "observed_features": 24.9, "sample": "L3S378"}, {"depth": 179, "observed_features": 28.1, "sample": "L3S378"}, {"depth": 224, "observed_features": 31.6, "sample": "L3S378"}, {"depth": 269, "observed_features": 33.9, "sample": "L3S378"}, {"depth": 313, "observed_features": 35.4, "sample": "L3S378"}, {"depth": 358, "observed_features": 36.6, "sample": "L3S378"}, {"depth": 403, "observed_features": 37.6, "sample": "L3S378"}, {"depth": 447, "observed_features": 38.5, "sample": "L3S378"}, {"depth": 492, "observed_features": 39.6, "sample": "L3S378"}, {"depth": 537, "observed_features": 40.3, "sample": "L3S378"}, {"depth": 581, "observed_features": 40.5, "sample": "L3S378"}, {"depth": 626, "observed_features": 40.8, "sample": "L3S378"}, {"depth": 671, "observed_features": 41.2, "sample": "L3S378"}, {"depth": 715, "observed_features": 41.6, "sample": "L3S378"}, {"depth": 760, "observed_features": 41.9, "sample": "L3S378"}, {"depth": 805, "observed_features": 41.9, "sample": "L3S378"}, {"depth": 850, "observed_features": 42.0, "sample": "L3S378"}, {"depth": 1, "observed_features": 1.0, "sample": "L3S242"}, {"depth": 35, "observed_features": 8.1, "sample": "L3S242"}, {"depth": 70, "observed_features": 11.9, "sample": "L3S242"}, {"depth": 105, "observed_features": 13.9, "sample": "L3S242"}, {"depth": 139, "observed_features": 15.9, "sample": "L3S242"}, {"depth": 174, "observed_features": 17.6, "sample": "L3S242"}, {"depth": 209, "observed_features": 19.0, "sample": "L3S242"}, {"depth": 243, "observed_features": 19.8, "sample": "L3S242"}, {"depth": 278, "observed_features": 20.8, "sample": "L3S242"}, {"depth": 313, "observed_features": 22.7, "sample": "L3S242"}, {"depth": 347, "observed_features": 23.1, "sample": "L3S242"}, {"depth": 382, "observed_features": 23.8, "sample": "L3S242"}, {"depth": 417, "observed_features": 24.4, "sample": "L3S242"}, {"depth": 451, "observed_features": 25.2, "sample": "L3S242"}, {"depth": 486, "observed_features": 25.3, "sample": "L3S242"}, {"depth": 521, "observed_features": 25.3, "sample": "L3S242"}, {"depth": 555, "observed_features": 25.8, "sample": "L3S242"}, {"depth": 590, "observed_features": 26.0, "sample": "L3S242"}, {"depth": 625, "observed_features": 26.0, "sample": "L3S242"}, {"depth": 660, "observed_features": 26.0, "sample": "L3S242"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S204"}, {"depth": 104, "observed_features": 31.1, "sample": "L2S204"}, {"depth": 208, "observed_features": 45.7, "sample": "L2S204"}, {"depth": 311, "observed_features": 57.2, "sample": "L2S204"}, {"depth": 415, "observed_features": 65.8, "sample": "L2S204"}, {"depth": 518, "observed_features": 72.6, "sample": "L2S204"}, {"depth": 622, "observed_features": 78.1, "sample": "L2S204"}, {"depth": 726, "observed_features": 83.7, "sample": "L2S204"}, {"depth": 829, "observed_features": 88.5, "sample": "L2S204"}, {"depth": 933, "observed_features": 91.5, "sample": "L2S204"}, {"depth": 1036, "observed_features": 94.2, "sample": "L2S204"}, {"depth": 1140, "observed_features": 96.9, "sample": "L2S204"}, {"depth": 1243, "observed_features": 99.4, "sample": "L2S204"}, {"depth": 1347, "observed_features": 101.3, "sample": "L2S204"}, {"depth": 1451, "observed_features": 102.7, "sample": "L2S204"}, {"depth": 1554, "observed_features": 103.7, "sample": "L2S204"}, {"depth": 1658, "observed_features": 104.6, "sample": "L2S204"}, {"depth": 1761, "observed_features": 105.3, "sample": "L2S204"}, {"depth": 1865, "observed_features": 105.7, "sample": "L2S204"}, {"depth": 1969, "observed_features": 106.0, "sample": "L2S204"}, {"depth": 1, "observed_features": 1.0, "sample": "L5S240"}, {"depth": 70, "observed_features": 14.9, "sample": "L5S240"}, {"depth": 140, "observed_features": 18.3, "sample": "L5S240"}, {"depth": 210, "observed_features": 20.8, "sample": "L5S240"}, {"depth": 280, "observed_features": 21.7, "sample": "L5S240"}, {"depth": 350, "observed_features": 22.8, "sample": "L5S240"}, {"depth": 420, "observed_features": 23.8, "sample": "L5S240"}, {"depth": 490, "observed_features": 24.6, "sample": "L5S240"}, {"depth": 560, "observed_features": 24.8, "sample": "L5S240"}, {"depth": 630, "observed_features": 25.4, "sample": "L5S240"}, {"depth": 699, "observed_features": 25.7, "sample": "L5S240"}, {"depth": 769, "observed_features": 26.2, "sample": "L5S240"}, {"depth": 839, "observed_features": 26.6, "sample": "L5S240"}, {"depth": 909, "observed_features": 27.0, "sample": "L5S240"}, {"depth": 979, "observed_features": 27.4, "sample": "L5S240"}, {"depth": 1049, "observed_features": 27.6, "sample": "L5S240"}, {"depth": 1119, "observed_features": 28.3, "sample": "L5S240"}, {"depth": 1189, "observed_features": 28.8, "sample": "L5S240"}, {"depth": 1259, "observed_features": 29.0, "sample": "L5S240"}, {"depth": 1329, "observed_features": 29.0, "sample": "L5S240"}, {"depth": 1, "observed_features": 1.0, "sample": "L6S20"}, {"depth": 273, "observed_features": 26.0, "sample": "L6S20"}, {"depth": 545, "observed_features": 33.6, "sample": "L6S20"}, {"depth": 817, "observed_features": 37.7, "sample": "L6S20"}, {"depth": 1089, "observed_features": 40.6, "sample": "L6S20"}, {"depth": 1361, "observed_features": 42.2, "sample": "L6S20"}, {"depth": 1633, "observed_features": 43.5, "sample": "L6S20"}, {"depth": 1905, "observed_features": 44.5, "sample": "L6S20"}, {"depth": 2177, "observed_features": 45.1, "sample": "L6S20"}, {"depth": 2449, "observed_features": 45.5, "sample": "L6S20"}, {"depth": 2722, "observed_features": 46.1, "sample": "L6S20"}, {"depth": 2994, "observed_features": 46.4, "sample": "L6S20"}, {"depth": 3266, "observed_features": 46.9, "sample": "L6S20"}, {"depth": 3538, "observed_features": 47.3, "sample": "L6S20"}, {"depth": 3810, "observed_features": 47.5, "sample": "L6S20"}, {"depth": 4082, "observed_features": 47.6, "sample": "L6S20"}, {"depth": 4354, "observed_features": 47.8, "sample": "L6S20"}, {"depth": 4626, "observed_features": 47.9, "sample": "L6S20"}, {"depth": 4898, "observed_features": 48.0, "sample": "L6S20"}, {"depth": 5171, "observed_features": 48.0, "sample": "L6S20"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S382"}, {"depth": 136, "observed_features": 59.1, "sample": "L2S382"}, {"depth": 272, "observed_features": 86.5, "sample": "L2S382"}, {"depth": 408, "observed_features": 102.2, "sample": "L2S382"}, {"depth": 544, "observed_features": 111.6, "sample": "L2S382"}, {"depth": 680, "observed_features": 118.2, "sample": "L2S382"}, {"depth": 816, "observed_features": 123.6, "sample": "L2S382"}, {"depth": 952, "observed_features": 127.2, "sample": "L2S382"}, {"depth": 1088, "observed_features": 129.5, "sample": "L2S382"}, {"depth": 1224, "observed_features": 131.7, "sample": "L2S382"}, {"depth": 1359, "observed_features": 133.7, "sample": "L2S382"}, {"depth": 1495, "observed_features": 135.6, "sample": "L2S382"}, {"depth": 1631, "observed_features": 136.2, "sample": "L2S382"}, {"depth": 1767, "observed_features": 137.2, "sample": "L2S382"}, {"depth": 1903, "observed_features": 137.5, "sample": "L2S382"}, {"depth": 2039, "observed_features": 138.0, "sample": "L2S382"}, {"depth": 2175, "observed_features": 138.5, "sample": "L2S382"}, {"depth": 2311, "observed_features": 138.7, "sample": "L2S382"}, {"depth": 2447, "observed_features": 139.0, "sample": "L2S382"}, {"depth": 2583, "observed_features": 139.0, "sample": "L2S382"}, {"depth": 1, "observed_features": 1.0, "sample": "L2S357"}, {"depth": 81, "observed_features": 27.6, "sample": "L2S357"}, {"depth": 162, "observed_features": 38.8, "sample": "L2S357"}, {"depth": 242, "observed_features": 45.7, "sample": "L2S357"}, {"depth": 323, "observed_features": 50.3, "sample": "L2S357"}, {"depth": 404, "observed_features": 54.8, "sample": "L2S357"}, {"depth": 484, "observed_features": 57.2, "sample": "L2S357"}, {"depth": 565, "observed_features": 61.0, "sample": "L2S357"}, {"depth": 646, "observed_features": 63.0, "sample": "L2S357"}, {"depth": 726, "observed_features": 65.6, "sample": "L2S357"}, {"depth": 807, "observed_features": 67.6, "sample": "L2S357"}, {"depth": 887, "observed_features": 68.5, "sample": "L2S357"}, {"depth": 968, "observed_features": 70.4, "sample": "L2S357"}, {"depth": 1049, "observed_features": 71.4, "sample": "L2S357"}, {"depth": 1129, "observed_features": 72.3, "sample": "L2S357"}, {"depth": 1210, "observed_features": 73.6, "sample": "L2S357"}, {"depth": 1291, "observed_features": 74.1, "sample": "L2S357"}, {"depth": 1371, "observed_features": 74.5, "sample": "L2S357"}, {"depth": 1452, "observed_features": 74.9, "sample": "L2S357"}, {"depth": 1533, "observed_features": 75.0, "sample": "L2S357"}, {"depth": 1, "observed_features": 1.0, "sample": "L1S281"}, {"depth": 209, "observed_features": 41.1, "sample": "L1S281"}, {"depth": 417, "observed_features": 52.9, "sample": "L1S281"}, {"depth": 625, "observed_features": 63.5, "sample": "L1S281"}, {"depth": 833, "observed_features": 70.7, "sample": "L1S281"}, {"depth": 1041, "observed_features": 74.7, "sample": "L1S281"}, {"depth": 1249, "observed_features": 78.9, "sample": "L1S281"}, {"depth": 1457, "observed_features": 81.3, "sample": "L1S281"}, {"depth": 1665, "observed_features": 84.0, "sample": "L1S281"}, {"depth": 1873, "observed_features": 86.4, "sample": "L1S281"}, {"depth": 2082, "observed_features": 88.0, "sample": "L1S281"}, {"depth": 2290, "observed_features": 89.6, "sample": "L1S281"}, {"depth": 2498, "observed_features": 90.2, "sample": "L1S281"}, {"depth": 2706, "observed_features": 90.8, "sample": "L1S281"}, {"depth": 2914, "observed_features": 91.6, "sample": "L1S281"}, {"depth": 3122, "observed_features": 92.3, "sample": "L1S281"}, {"depth": 3330, "observed_features": 92.9, "sample": "L1S281"}, {"depth": 3538, "observed_features": 93.5, "sample": "L1S281"}, {"depth": 3746, "observed_features": 93.8, "sample": "L1S281"}, {"depth": 3955, "observed_features": 94.0, "sample": "L1S281"}], "data-2d5782ecbc694c0ccabd45d8f95e8a07": [{"x": 1969.0, "label": "-5%"}, {"x": 2375.0, "label": "Knee point"}, {"x": 2583.0, "label": "+5%"}], "data-27d844e5c5b053990c0409f59f5f6cdd": [{"position": 0}], "data-01b0f0688adf25d2631e41987149657c": [{"text": "Knee point: 2375 (at the 47.06 percentile)\nKnee point -5%: 1969 (at the 42.06 percentile)\nKnee point +5%: 2583 (at the 52.06 percentile)\nThe shaded area is where at least 80.00% of the samples \nare kept, if used as the rarefaction depth.\n \nThe knee point is above the specified, acceptable depth range!\nThe upper bound of the acceptable range (keeping at least 80.00% of the samples) is 895.\n \nIf the calculated knee point is used, 47.06% of the samples will\n be excluded because they have too little reads."}], "data-c8d3136937260f083ef0163cc2321b13": [{"sample": "L6S93", "reads_per_sample": 5261.0}, {"sample": "L2S222", "reads_per_sample": 1603.0}, {"sample": "L5S104", "reads_per_sample": 1719.0}, {"sample": "L5S203", "reads_per_sample": 1561.0}, {"sample": "L5S155", "reads_per_sample": 1347.0}, {"sample": "L3S360", "reads_per_sample": 514.0}, {"sample": "L1S105", "reads_per_sample": 5020.0}, {"sample": "L2S309", "reads_per_sample": 895.0}, {"sample": "L2S175", "reads_per_sample": 2955.0}, {"sample": "L1S140", "reads_per_sample": 4749.0}, {"sample": "L1S76", "reads_per_sample": 5037.0}, {"sample": "L2S155", "reads_per_sample": 2579.0}, {"sample": "L6S68", "reads_per_sample": 4583.0}, {"sample": "L5S222", "reads_per_sample": 1973.0}, {"sample": "L4S63", "reads_per_sample": 5913.0}, {"sample": "L3S294", "reads_per_sample": 800.0}, {"sample": "L2S240", "reads_per_sample": 3535.0}, {"sample": "L1S257", "reads_per_sample": 3949.0}, {"sample": "L3S313", "reads_per_sample": 741.0}, {"sample": "L1S57", "reads_per_sample": 5525.0}, {"sample": "L1S208", "reads_per_sample": 5138.0}, {"sample": "L4S137", "reads_per_sample": 6770.0}, {"sample": "L4S112", "reads_per_sample": 5524.0}, {"sample": "L5S174", "reads_per_sample": 1429.0}, {"sample": "L3S341", "reads_per_sample": 653.0}, {"sample": "L1S8", "reads_per_sample": 4734.0}, {"sample": "L3S378", "reads_per_sample": 850.0}, {"sample": "L3S242", "reads_per_sample": 660.0}, {"sample": "L2S204", "reads_per_sample": 1969.0}, {"sample": "L5S240", "reads_per_sample": 1329.0}, {"sample": "L6S20", "reads_per_sample": 5171.0}, {"sample": "L2S382", "reads_per_sample": 2583.0}, {"sample": "L2S357", "reads_per_sample": 1533.0}, {"sample": "L1S281", "reads_per_sample": 3955.0}]}};
  const embedOpt = {"mode": "vega-lite"};
  vegaEmbed('#vis', spec, embedOpt).catch(console.error);
</script>
</body>
</html>