<!-- head copied from https://github.com/bokulich-lab/q2-fastp/blob/main/q2_fastp/assets/index.html
and https://github.com/bokulich-lab/q2-moshpit/blob/main/q2_moshpit/assets/busco/feature_data/index.html-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>automated_rarefaction_depth : rarefaction_depth</title>
    <link rel="stylesheet" href="./q2templateassets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/normalize.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/base-template.css"/>
    <script src="./q2templateassets/js/jquery-3.2.0.min.js" charset="utf-8"></script>
    <script src="./q2templateassets/js/bootstrap.min.js" charset="utf-8"></script>
    
<title>Embedding Vega-Lite</title>
<script src="./js/bootstrapMagic.js" type="text/javascript"></script>
<link href="./css/styles.css" rel="stylesheet"/>
<script type="text/javascript">
    // temporary hack to make it look good with Bootstrap 5
    removeBS3refs();
</script>
<script src="https://cdn.jsdelivr.net/npm//vega@5" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm//vega-lite@5.16.3" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm//vega-embed@6" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha256-YvdLHPgkqJ8DVUxjjnGVlMMJtNimJ6dYkowFFvp4kKs=" rel="stylesheet"/>


  </head>
  <body>
    <div class="container-fluid">
      <div id="q2templatesheader" class="row">
        <div class="col-lg-12">
          <a href="http://qiime2.org/">
            <img src="./q2templateassets/img/qiime2-rect-200.png"
            alt="QIIME 2">
          </a>
        </div>
      </div>
        

  <div class="row">
    <div class="col-lg-12">
        <div class="card">
            <h5 class="card-header">Automated Rarefaction Depth Summary</h5>
            <div class="card-body">
                <p>
                    The Rarefaction Curves plot on the left shows the number of observed features at each depth for
                    every sample as a curve. The shaded area represents the specified acceptable
                    range of rarefaction depths. The optimal rarefaction depth is depicted as the vertical line named knee point. 
                    It is the knee point that was calculated using the specified algorithm.
                    <!--fix/adjust this text!!-->
                </p>
                <p>
                    The Histogram of Reads per Sample on the right shows the number of samples which have a certain number of reads.
                    The grey bars are the samples that would be excluded if the rarefaction depth was set to the knee point, the blue bars the ones included.
                    (If the slider hasn't been moved, otherwise it shows the same but with respect to the slider.)
                </p>
                <p>
                    Zoom in and out of the plots for more or less details.
                </p>
                <p>
                    Click on the checkbox above the plots to show the line with the rarefaction depth according to the slider.
                    Move the slider to change the black rarefaction depth line accordingly. Additionally, the bars in the barplot 
                    on the right are blue if the sample has a read count above the specified rarefaction depth, meaning that
                    sample would be included if this rarefaction depth was chosen, otherwise the bars are grey. 
                </p>
                <p>
                    Below the plots the knee point and the knee point Â±5% is specified and at what percentiles those points lie.
                </p>
                <p>
                    ATTENTION! The default acceptable range of rarefaction depths is set to keeping at least 80% of all samples. 
                </p>
                <div class="col-lg-12" id="combinedChartContainer"> 
                     <iframe src="./new_chart.html" width="100%" height="730" scrolling="no" frameborder="0"></iframe>
                </div>
            </div>   
        </div> 
    </div>
  </div>


    </div>
    <script type="text/javascript">
      if (window.frameElement) {
          document.getElementById('q2templatesheader').remove();
      }
    </script>
    





<script type="text/javascript">
  function handleErrors(errors, element, msg) {
    console.error(errors);
    msg = msg === undefined ? '' : msg + '<br><br>';
    var helpMsg = '<p class="alert alert-danger"> \
                   There was an error loading and rendering the \
                   visualization.<br><br>' + msg + 'Please \
                   copy-and-paste the following error messages when \
                   reporting this error (please be aware that the content \
                   of your analysis data and/or metadata is included in \
                   these messages):</p>';
    var helpMsgDiv = $('<div></div>');
    helpMsgDiv.append(helpMsg);
    helpMsgDiv.append('<pre><code>' + errors.join('\n\n') + '</code></pre>');
    element.replaceWith(helpMsgDiv);
  }
  window.onerror = function(error) {
    handleErrors([error], $('#loading'));
  };
</script>

  </body>
</html>